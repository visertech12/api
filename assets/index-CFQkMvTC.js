var q_=Object.defineProperty;var Dx=e=>{throw TypeError(e)};var V_=(e,t,r)=>t in e?q_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var vs=(e,t,r)=>V_(e,typeof t!="symbol"?t+"":t,r),Lu=(e,t,r)=>t.has(e)||Dx("Cannot "+r);var R=(e,t,r)=>(Lu(e,t,"read from private field"),r?r.call(e):t.get(e)),ge=(e,t,r)=>t.has(e)?Dx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),le=(e,t,r,n)=>(Lu(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Pe=(e,t,r)=>(Lu(e,t,"access private method"),r);var Zl=(e,t,r,n)=>({set _(a){le(e,t,a,r)},get _(){return R(e,t,n)}});function H_(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function G_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Sv={exports:{}},Bd={},kv={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Il=Symbol.for("react.element"),K_=Symbol.for("react.portal"),Y_=Symbol.for("react.fragment"),Q_=Symbol.for("react.strict_mode"),J_=Symbol.for("react.profiler"),X_=Symbol.for("react.provider"),Z_=Symbol.for("react.context"),e2=Symbol.for("react.forward_ref"),t2=Symbol.for("react.suspense"),r2=Symbol.for("react.memo"),s2=Symbol.for("react.lazy"),Ix=Symbol.iterator;function n2(e){return e===null||typeof e!="object"?null:(e=Ix&&e[Ix]||e["@@iterator"],typeof e=="function"?e:null)}var Cv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ev=Object.assign,Pv={};function Yi(e,t,r){this.props=e,this.context=t,this.refs=Pv,this.updater=r||Cv}Yi.prototype.isReactComponent={};Yi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Yi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Av(){}Av.prototype=Yi.prototype;function kf(e,t,r){this.props=e,this.context=t,this.refs=Pv,this.updater=r||Cv}var Cf=kf.prototype=new Av;Cf.constructor=kf;Ev(Cf,Yi.prototype);Cf.isPureReactComponent=!0;var Ox=Array.isArray,Rv=Object.prototype.hasOwnProperty,Ef={current:null},Tv={key:!0,ref:!0,__self:!0,__source:!0};function Dv(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Rv.call(t,n)&&!Tv.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Il,type:e,key:i,ref:o,props:a,_owner:Ef.current}}function a2(e,t){return{$$typeof:Il,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Pf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Il}function i2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Lx=/\/+/g;function Mu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?i2(""+e.key):t.toString(36)}function Tc(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Il:case K_:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Mu(o,0):n,Ox(a)?(r="",e!=null&&(r=e.replace(Lx,"$&/")+"/"),Tc(a,t,r,"",function(d){return d})):a!=null&&(Pf(a)&&(a=a2(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Lx,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Ox(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Mu(i,l);o+=Tc(i,t,r,c,a)}else if(c=n2(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Mu(i,l++),o+=Tc(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ec(e,t,r){if(e==null)return e;var n=[],a=0;return Tc(e,n,"","",function(i){return t.call(r,i,a++)}),n}function o2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Yt={current:null},Dc={transition:null},l2={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:Dc,ReactCurrentOwner:Ef};function Iv(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:ec,forEach:function(e,t,r){ec(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ec(e,function(){t++}),t},toArray:function(e){return ec(e,function(t){return t})||[]},only:function(e){if(!Pf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ee.Component=Yi;Ee.Fragment=Y_;Ee.Profiler=J_;Ee.PureComponent=kf;Ee.StrictMode=Q_;Ee.Suspense=t2;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l2;Ee.act=Iv;Ee.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ev({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ef.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Rv.call(t,c)&&!Tv.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Il,type:e.type,key:a,ref:i,props:n,_owner:o}};Ee.createContext=function(e){return e={$$typeof:Z_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:X_,_context:e},e.Consumer=e};Ee.createElement=Dv;Ee.createFactory=function(e){var t=Dv.bind(null,e);return t.type=e,t};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(e){return{$$typeof:e2,render:e}};Ee.isValidElement=Pf;Ee.lazy=function(e){return{$$typeof:s2,_payload:{_status:-1,_result:e},_init:o2}};Ee.memo=function(e,t){return{$$typeof:r2,type:e,compare:t===void 0?null:t}};Ee.startTransition=function(e){var t=Dc.transition;Dc.transition={};try{e()}finally{Dc.transition=t}};Ee.unstable_act=Iv;Ee.useCallback=function(e,t){return Yt.current.useCallback(e,t)};Ee.useContext=function(e){return Yt.current.useContext(e)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(e){return Yt.current.useDeferredValue(e)};Ee.useEffect=function(e,t){return Yt.current.useEffect(e,t)};Ee.useId=function(){return Yt.current.useId()};Ee.useImperativeHandle=function(e,t,r){return Yt.current.useImperativeHandle(e,t,r)};Ee.useInsertionEffect=function(e,t){return Yt.current.useInsertionEffect(e,t)};Ee.useLayoutEffect=function(e,t){return Yt.current.useLayoutEffect(e,t)};Ee.useMemo=function(e,t){return Yt.current.useMemo(e,t)};Ee.useReducer=function(e,t,r){return Yt.current.useReducer(e,t,r)};Ee.useRef=function(e){return Yt.current.useRef(e)};Ee.useState=function(e){return Yt.current.useState(e)};Ee.useSyncExternalStore=function(e,t,r){return Yt.current.useSyncExternalStore(e,t,r)};Ee.useTransition=function(){return Yt.current.useTransition()};Ee.version="18.3.1";kv.exports=Ee;var f=kv.exports;const He=_v(f),Ov=H_({__proto__:null,default:He},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2=f,d2=Symbol.for("react.element"),u2=Symbol.for("react.fragment"),h2=Object.prototype.hasOwnProperty,m2=c2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f2={key:!0,ref:!0,__self:!0,__source:!0};function Lv(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)h2.call(t,n)&&!f2.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:d2,type:e,key:i,ref:o,props:a,_owner:m2.current}}Bd.Fragment=u2;Bd.jsx=Lv;Bd.jsxs=Lv;Sv.exports=Bd;var s=Sv.exports,Mv={exports:{}},vr={},Fv={exports:{}},$v={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,q){var I=T.length;T.push(q);e:for(;0<I;){var B=I-1>>>1,ne=T[B];if(0<a(ne,q))T[B]=q,T[I]=ne,I=B;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var q=T[0],I=T.pop();if(I!==q){T[0]=I;e:for(var B=0,ne=T.length,ye=ne>>>1;B<ye;){var de=2*(B+1)-1,De=T[de],Ke=de+1,he=T[Ke];if(0>a(De,I))Ke<ne&&0>a(he,De)?(T[B]=he,T[Ke]=I,B=Ke):(T[B]=De,T[de]=I,B=de);else if(Ke<ne&&0>a(he,I))T[B]=he,T[Ke]=I,B=Ke;else break e}}return q}function a(T,q){var I=T.sortIndex-q.sortIndex;return I!==0?I:T.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,b=!1,w=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var q=r(d);q!==null;){if(q.callback===null)n(d);else if(q.startTime<=T)n(d),q.sortIndex=q.expirationTime,t(c,q);else break;q=r(d)}}function N(T){if(v=!1,x(T),!w)if(r(c)!==null)w=!0,ee(j);else{var q=r(d);q!==null&&X(N,q.startTime-T)}}function j(T,q){w=!1,v&&(v=!1,g(_),_=-1),b=!0;var I=h;try{for(x(q),m=r(c);m!==null&&(!(m.expirationTime>q)||T&&!$());){var B=m.callback;if(typeof B=="function"){m.callback=null,h=m.priorityLevel;var ne=B(m.expirationTime<=q);q=e.unstable_now(),typeof ne=="function"?m.callback=ne:m===r(c)&&n(c),x(q)}else n(c);m=r(c)}if(m!==null)var ye=!0;else{var de=r(d);de!==null&&X(N,de.startTime-q),ye=!1}return ye}finally{m=null,h=I,b=!1}}var k=!1,S=null,_=-1,C=5,E=-1;function $(){return!(e.unstable_now()-E<C)}function D(){if(S!==null){var T=e.unstable_now();E=T;var q=!0;try{q=S(!0,T)}finally{q?L():(k=!1,S=null)}}else k=!1}var L;if(typeof p=="function")L=function(){p(D)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ae=W.port2;W.port1.onmessage=D,L=function(){ae.postMessage(null)}}else L=function(){y(D,0)};function ee(T){S=T,k||(k=!0,L())}function X(T,q){_=y(function(){T(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){w||b||(w=!0,ee(j))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var I=h;h=q;try{return T()}finally{h=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,q){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var I=h;h=T;try{return q()}finally{h=I}},e.unstable_scheduleCallback=function(T,q,I){var B=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?B+I:B):I=B,T){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=I+ne,T={id:u++,callback:q,priorityLevel:T,startTime:I,expirationTime:ne,sortIndex:-1},I>B?(T.sortIndex=I,t(d,T),r(c)===null&&T===r(d)&&(v?(g(_),_=-1):v=!0,X(N,I-B))):(T.sortIndex=ne,t(c,T),w||b||(w=!0,ee(j))),T},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(T){var q=h;return function(){var I=h;h=q;try{return T.apply(this,arguments)}finally{h=I}}}})($v);Fv.exports=$v;var p2=Fv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2=f,xr=p2;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uv=new Set,tl={};function ka(e,t){Ei(e,t),Ei(e+"Capture",t)}function Ei(e,t){for(tl[e]=t,e=0;e<t.length;e++)Uv.add(t[e])}var Is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oh=Object.prototype.hasOwnProperty,g2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mx={},Fx={};function v2(e){return Oh.call(Fx,e)?!0:Oh.call(Mx,e)?!1:g2.test(e)?Fx[e]=!0:(Mx[e]=!0,!1)}function y2(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b2(e,t,r,n){if(t===null||typeof t>"u"||y2(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qt(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Tt[e]=new Qt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Tt[t]=new Qt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Tt[e]=new Qt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Tt[e]=new Qt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Tt[e]=new Qt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Tt[e]=new Qt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Tt[e]=new Qt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Tt[e]=new Qt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Tt[e]=new Qt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Af=/[\-:]([a-z])/g;function Rf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Af,Rf);Tt[t]=new Qt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Af,Rf);Tt[t]=new Qt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Af,Rf);Tt[t]=new Qt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Tt[e]=new Qt(e,1,!1,e.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Tt[e]=new Qt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tf(e,t,r,n){var a=Tt.hasOwnProperty(t)?Tt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(b2(t,r,a,n)&&(r=null),n||a===null?v2(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ws=x2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tc=Symbol.for("react.element"),Wa=Symbol.for("react.portal"),qa=Symbol.for("react.fragment"),Df=Symbol.for("react.strict_mode"),Lh=Symbol.for("react.profiler"),zv=Symbol.for("react.provider"),Bv=Symbol.for("react.context"),If=Symbol.for("react.forward_ref"),Mh=Symbol.for("react.suspense"),Fh=Symbol.for("react.suspense_list"),Of=Symbol.for("react.memo"),Xs=Symbol.for("react.lazy"),Wv=Symbol.for("react.offscreen"),$x=Symbol.iterator;function ho(e){return e===null||typeof e!="object"?null:(e=$x&&e[$x]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Object.assign,Fu;function Po(e){if(Fu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Fu=t&&t[1]||""}return`
`+Fu+e}var $u=!1;function Uu(e,t){if(!e||$u)return"";$u=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{$u=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Po(e):""}function w2(e){switch(e.tag){case 5:return Po(e.type);case 16:return Po("Lazy");case 13:return Po("Suspense");case 19:return Po("SuspenseList");case 0:case 2:case 15:return e=Uu(e.type,!1),e;case 11:return e=Uu(e.type.render,!1),e;case 1:return e=Uu(e.type,!0),e;default:return""}}function $h(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qa:return"Fragment";case Wa:return"Portal";case Lh:return"Profiler";case Df:return"StrictMode";case Mh:return"Suspense";case Fh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Bv:return(e.displayName||"Context")+".Consumer";case zv:return(e._context.displayName||"Context")+".Provider";case If:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Of:return t=e.displayName||null,t!==null?t:$h(e.type)||"Memo";case Xs:t=e._payload,e=e._init;try{return $h(e(t))}catch{}}return null}function j2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $h(t);case 8:return t===Df?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function N2(e){var t=qv(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rc(e){e._valueTracker||(e._valueTracker=N2(e))}function Vv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=qv(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Jc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Uh(e,t){var r=t.checked;return nt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ux(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Cn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Hv(e,t){t=t.checked,t!=null&&Tf(e,"checked",t,!1)}function zh(e,t){Hv(e,t);var r=Cn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bh(e,t.type,r):t.hasOwnProperty("defaultValue")&&Bh(e,t.type,Cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function zx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Bh(e,t,r){(t!=="number"||Jc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ao=Array.isArray;function ri(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Cn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Wh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return nt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bx(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(G(92));if(Ao(r)){if(1<r.length)throw Error(G(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Cn(r)}}function Gv(e,t){var r=Cn(t.value),n=Cn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Wx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Kv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Kv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sc,Yv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(sc=sc||document.createElement("div"),sc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_2=["Webkit","ms","Moz","O"];Object.keys(Mo).forEach(function(e){_2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Mo[t]=Mo[e]})});function Qv(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Mo.hasOwnProperty(e)&&Mo[e]?(""+t).trim():t+"px"}function Jv(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Qv(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var S2=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vh(e,t){if(t){if(S2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Hh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gh=null;function Lf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Kh=null,si=null,ni=null;function qx(e){if(e=Ml(e)){if(typeof Kh!="function")throw Error(G(280));var t=e.stateNode;t&&(t=Gd(t),Kh(e.stateNode,e.type,t))}}function Xv(e){si?ni?ni.push(e):ni=[e]:si=e}function Zv(){if(si){var e=si,t=ni;if(ni=si=null,qx(e),t)for(e=0;e<t.length;e++)qx(t[e])}}function ey(e,t){return e(t)}function ty(){}var zu=!1;function ry(e,t,r){if(zu)return e(t,r);zu=!0;try{return ey(e,t,r)}finally{zu=!1,(si!==null||ni!==null)&&(ty(),Zv())}}function sl(e,t){var r=e.stateNode;if(r===null)return null;var n=Gd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(G(231,t,typeof r));return r}var Yh=!1;if(Is)try{var mo={};Object.defineProperty(mo,"passive",{get:function(){Yh=!0}}),window.addEventListener("test",mo,mo),window.removeEventListener("test",mo,mo)}catch{Yh=!1}function k2(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Fo=!1,Xc=null,Zc=!1,Qh=null,C2={onError:function(e){Fo=!0,Xc=e}};function E2(e,t,r,n,a,i,o,l,c){Fo=!1,Xc=null,k2.apply(C2,arguments)}function P2(e,t,r,n,a,i,o,l,c){if(E2.apply(this,arguments),Fo){if(Fo){var d=Xc;Fo=!1,Xc=null}else throw Error(G(198));Zc||(Zc=!0,Qh=d)}}function Ca(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function sy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vx(e){if(Ca(e)!==e)throw Error(G(188))}function A2(e){var t=e.alternate;if(!t){if(t=Ca(e),t===null)throw Error(G(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Vx(a),e;if(i===n)return Vx(a),t;i=i.sibling}throw Error(G(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(G(189))}}if(r.alternate!==n)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?e:t}function ny(e){return e=A2(e),e!==null?ay(e):null}function ay(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ay(e);if(t!==null)return t;e=e.sibling}return null}var iy=xr.unstable_scheduleCallback,Hx=xr.unstable_cancelCallback,R2=xr.unstable_shouldYield,T2=xr.unstable_requestPaint,lt=xr.unstable_now,D2=xr.unstable_getCurrentPriorityLevel,Mf=xr.unstable_ImmediatePriority,oy=xr.unstable_UserBlockingPriority,ed=xr.unstable_NormalPriority,I2=xr.unstable_LowPriority,ly=xr.unstable_IdlePriority,Wd=null,ds=null;function O2(e){if(ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(Wd,e,void 0,(e.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:F2,L2=Math.log,M2=Math.LN2;function F2(e){return e>>>=0,e===0?32:31-(L2(e)/M2|0)|0}var nc=64,ac=4194304;function Ro(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function td(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Ro(l):(i&=o,i!==0&&(n=Ro(i)))}else o=r&~a,o!==0?n=Ro(o):i!==0&&(n=Ro(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Gr(t),a=1<<r,n|=e[r],t&=~a;return n}function $2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U2(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Gr(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=$2(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Jh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cy(){var e=nc;return nc<<=1,!(nc&4194240)&&(nc=64),e}function Bu(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ol(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Gr(t),e[t]=r}function z2(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Gr(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Ff(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Gr(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ze=0;function dy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uy,$f,hy,my,fy,Xh=!1,ic=[],gn=null,vn=null,yn=null,nl=new Map,al=new Map,tn=[],B2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gx(e,t){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":nl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":al.delete(t.pointerId)}}function fo(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ml(t),t!==null&&$f(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function W2(e,t,r,n,a){switch(t){case"focusin":return gn=fo(gn,e,t,r,n,a),!0;case"dragenter":return vn=fo(vn,e,t,r,n,a),!0;case"mouseover":return yn=fo(yn,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return nl.set(i,fo(nl.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,al.set(i,fo(al.get(i)||null,e,t,r,n,a)),!0}return!1}function py(e){var t=ta(e.target);if(t!==null){var r=Ca(t);if(r!==null){if(t=r.tag,t===13){if(t=sy(r),t!==null){e.blockedOn=t,fy(e.priority,function(){hy(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ic(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Gh=n,r.target.dispatchEvent(n),Gh=null}else return t=Ml(r),t!==null&&$f(t),e.blockedOn=r,!1;t.shift()}return!0}function Kx(e,t,r){Ic(e)&&r.delete(t)}function q2(){Xh=!1,gn!==null&&Ic(gn)&&(gn=null),vn!==null&&Ic(vn)&&(vn=null),yn!==null&&Ic(yn)&&(yn=null),nl.forEach(Kx),al.forEach(Kx)}function po(e,t){e.blockedOn===t&&(e.blockedOn=null,Xh||(Xh=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,q2)))}function il(e){function t(a){return po(a,e)}if(0<ic.length){po(ic[0],e);for(var r=1;r<ic.length;r++){var n=ic[r];n.blockedOn===e&&(n.blockedOn=null)}}for(gn!==null&&po(gn,e),vn!==null&&po(vn,e),yn!==null&&po(yn,e),nl.forEach(t),al.forEach(t),r=0;r<tn.length;r++)n=tn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<tn.length&&(r=tn[0],r.blockedOn===null);)py(r),r.blockedOn===null&&tn.shift()}var ai=Ws.ReactCurrentBatchConfig,rd=!0;function V2(e,t,r,n){var a=ze,i=ai.transition;ai.transition=null;try{ze=1,Uf(e,t,r,n)}finally{ze=a,ai.transition=i}}function H2(e,t,r,n){var a=ze,i=ai.transition;ai.transition=null;try{ze=4,Uf(e,t,r,n)}finally{ze=a,ai.transition=i}}function Uf(e,t,r,n){if(rd){var a=Zh(e,t,r,n);if(a===null)Xu(e,t,n,sd,r),Gx(e,n);else if(W2(a,e,t,r,n))n.stopPropagation();else if(Gx(e,n),t&4&&-1<B2.indexOf(e)){for(;a!==null;){var i=Ml(a);if(i!==null&&uy(i),i=Zh(e,t,r,n),i===null&&Xu(e,t,n,sd,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Xu(e,t,n,null,r)}}var sd=null;function Zh(e,t,r,n){if(sd=null,e=Lf(n),e=ta(e),e!==null)if(t=Ca(e),t===null)e=null;else if(r=t.tag,r===13){if(e=sy(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sd=e,null}function xy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D2()){case Mf:return 1;case oy:return 4;case ed:case I2:return 16;case ly:return 536870912;default:return 16}default:return 16}}var fn=null,zf=null,Oc=null;function gy(){if(Oc)return Oc;var e,t=zf,r=t.length,n,a="value"in fn?fn.value:fn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Oc=a.slice(e,1<n?1-n:void 0)}function Lc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function oc(){return!0}function Yx(){return!1}function yr(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?oc:Yx,this.isPropagationStopped=Yx,this}return nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=oc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=oc)},persist:function(){},isPersistent:oc}),t}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bf=yr(Qi),Ll=nt({},Qi,{view:0,detail:0}),G2=yr(Ll),Wu,qu,xo,qd=nt({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xo&&(xo&&e.type==="mousemove"?(Wu=e.screenX-xo.screenX,qu=e.screenY-xo.screenY):qu=Wu=0,xo=e),Wu)},movementY:function(e){return"movementY"in e?e.movementY:qu}}),Qx=yr(qd),K2=nt({},qd,{dataTransfer:0}),Y2=yr(K2),Q2=nt({},Ll,{relatedTarget:0}),Vu=yr(Q2),J2=nt({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),X2=yr(J2),Z2=nt({},Qi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eS=yr(Z2),tS=nt({},Qi,{data:0}),Jx=yr(tS),rS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nS[e])?!!t[e]:!1}function Wf(){return aS}var iS=nt({},Ll,{key:function(e){if(e.key){var t=rS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Lc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wf,charCode:function(e){return e.type==="keypress"?Lc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Lc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oS=yr(iS),lS=nt({},qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xx=yr(lS),cS=nt({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wf}),dS=yr(cS),uS=nt({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),hS=yr(uS),mS=nt({},qd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fS=yr(mS),pS=[9,13,27,32],qf=Is&&"CompositionEvent"in window,$o=null;Is&&"documentMode"in document&&($o=document.documentMode);var xS=Is&&"TextEvent"in window&&!$o,vy=Is&&(!qf||$o&&8<$o&&11>=$o),Zx=" ",eg=!1;function yy(e,t){switch(e){case"keyup":return pS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function by(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Va=!1;function gS(e,t){switch(e){case"compositionend":return by(t);case"keypress":return t.which!==32?null:(eg=!0,Zx);case"textInput":return e=t.data,e===Zx&&eg?null:e;default:return null}}function vS(e,t){if(Va)return e==="compositionend"||!qf&&yy(e,t)?(e=gy(),Oc=zf=fn=null,Va=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vy&&t.locale!=="ko"?null:t.data;default:return null}}var yS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yS[e.type]:t==="textarea"}function wy(e,t,r,n){Xv(n),t=nd(t,"onChange"),0<t.length&&(r=new Bf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Uo=null,ol=null;function bS(e){Ty(e,0)}function Vd(e){var t=Ka(e);if(Vv(t))return e}function wS(e,t){if(e==="change")return t}var jy=!1;if(Is){var Hu;if(Is){var Gu="oninput"in document;if(!Gu){var rg=document.createElement("div");rg.setAttribute("oninput","return;"),Gu=typeof rg.oninput=="function"}Hu=Gu}else Hu=!1;jy=Hu&&(!document.documentMode||9<document.documentMode)}function sg(){Uo&&(Uo.detachEvent("onpropertychange",Ny),ol=Uo=null)}function Ny(e){if(e.propertyName==="value"&&Vd(ol)){var t=[];wy(t,ol,e,Lf(e)),ry(bS,t)}}function jS(e,t,r){e==="focusin"?(sg(),Uo=t,ol=r,Uo.attachEvent("onpropertychange",Ny)):e==="focusout"&&sg()}function NS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vd(ol)}function _S(e,t){if(e==="click")return Vd(t)}function SS(e,t){if(e==="input"||e==="change")return Vd(t)}function kS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yr=typeof Object.is=="function"?Object.is:kS;function ll(e,t){if(Yr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Oh.call(t,a)||!Yr(e[a],t[a]))return!1}return!0}function ng(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ag(e,t){var r=ng(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ng(r)}}function _y(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_y(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sy(){for(var e=window,t=Jc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Jc(e.document)}return t}function Vf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function CS(e){var t=Sy(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&_y(r.ownerDocument.documentElement,r)){if(n!==null&&Vf(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=ag(r,i);var o=ag(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ES=Is&&"documentMode"in document&&11>=document.documentMode,Ha=null,em=null,zo=null,tm=!1;function ig(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tm||Ha==null||Ha!==Jc(n)||(n=Ha,"selectionStart"in n&&Vf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),zo&&ll(zo,n)||(zo=n,n=nd(em,"onSelect"),0<n.length&&(t=new Bf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ha)))}function lc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ga={animationend:lc("Animation","AnimationEnd"),animationiteration:lc("Animation","AnimationIteration"),animationstart:lc("Animation","AnimationStart"),transitionend:lc("Transition","TransitionEnd")},Ku={},ky={};Is&&(ky=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Hd(e){if(Ku[e])return Ku[e];if(!Ga[e])return e;var t=Ga[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ky)return Ku[e]=t[r];return e}var Cy=Hd("animationend"),Ey=Hd("animationiteration"),Py=Hd("animationstart"),Ay=Hd("transitionend"),Ry=new Map,og="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(e,t){Ry.set(e,t),ka(t,[e])}for(var Yu=0;Yu<og.length;Yu++){var Qu=og[Yu],PS=Qu.toLowerCase(),AS=Qu[0].toUpperCase()+Qu.slice(1);Mn(PS,"on"+AS)}Mn(Cy,"onAnimationEnd");Mn(Ey,"onAnimationIteration");Mn(Py,"onAnimationStart");Mn("dblclick","onDoubleClick");Mn("focusin","onFocus");Mn("focusout","onBlur");Mn(Ay,"onTransitionEnd");Ei("onMouseEnter",["mouseout","mouseover"]);Ei("onMouseLeave",["mouseout","mouseover"]);Ei("onPointerEnter",["pointerout","pointerover"]);Ei("onPointerLeave",["pointerout","pointerover"]);ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RS=new Set("cancel close invalid load scroll toggle".split(" ").concat(To));function lg(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,P2(n,t,void 0,e),e.currentTarget=null}function Ty(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;lg(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;lg(a,l,d),i=c}}}if(Zc)throw e=Qh,Zc=!1,Qh=null,e}function Qe(e,t){var r=t[im];r===void 0&&(r=t[im]=new Set);var n=e+"__bubble";r.has(n)||(Dy(t,e,2,!1),r.add(n))}function Ju(e,t,r){var n=0;t&&(n|=4),Dy(r,e,n,t)}var cc="_reactListening"+Math.random().toString(36).slice(2);function cl(e){if(!e[cc]){e[cc]=!0,Uv.forEach(function(r){r!=="selectionchange"&&(RS.has(r)||Ju(r,!1,e),Ju(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cc]||(t[cc]=!0,Ju("selectionchange",!1,t))}}function Dy(e,t,r,n){switch(xy(t)){case 1:var a=V2;break;case 4:a=H2;break;default:a=Uf}r=a.bind(null,t,r,e),a=void 0,!Yh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Xu(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ta(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}ry(function(){var d=i,u=Lf(r),m=[];e:{var h=Ry.get(e);if(h!==void 0){var b=Bf,w=e;switch(e){case"keypress":if(Lc(r)===0)break e;case"keydown":case"keyup":b=oS;break;case"focusin":w="focus",b=Vu;break;case"focusout":w="blur",b=Vu;break;case"beforeblur":case"afterblur":b=Vu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Qx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Y2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=dS;break;case Cy:case Ey:case Py:b=X2;break;case Ay:b=hS;break;case"scroll":b=G2;break;case"wheel":b=fS;break;case"copy":case"cut":case"paste":b=eS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Xx}var v=(t&4)!==0,y=!v&&e==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var p=d,x;p!==null;){x=p;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,g!==null&&(N=sl(p,g),N!=null&&v.push(dl(p,N,x)))),y)break;p=p.return}0<v.length&&(h=new b(h,w,null,r,u),m.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",h&&r!==Gh&&(w=r.relatedTarget||r.fromElement)&&(ta(w)||w[Os]))break e;if((b||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,b?(w=r.relatedTarget||r.toElement,b=d,w=w?ta(w):null,w!==null&&(y=Ca(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(b=null,w=d),b!==w)){if(v=Qx,N="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(v=Xx,N="onPointerLeave",g="onPointerEnter",p="pointer"),y=b==null?h:Ka(b),x=w==null?h:Ka(w),h=new v(N,p+"leave",b,r,u),h.target=y,h.relatedTarget=x,N=null,ta(u)===d&&(v=new v(g,p+"enter",w,r,u),v.target=x,v.relatedTarget=y,N=v),y=N,b&&w)t:{for(v=b,g=w,p=0,x=v;x;x=Da(x))p++;for(x=0,N=g;N;N=Da(N))x++;for(;0<p-x;)v=Da(v),p--;for(;0<x-p;)g=Da(g),x--;for(;p--;){if(v===g||g!==null&&v===g.alternate)break t;v=Da(v),g=Da(g)}v=null}else v=null;b!==null&&cg(m,h,b,v,!1),w!==null&&y!==null&&cg(m,y,w,v,!0)}}e:{if(h=d?Ka(d):window,b=h.nodeName&&h.nodeName.toLowerCase(),b==="select"||b==="input"&&h.type==="file")var j=wS;else if(tg(h))if(jy)j=SS;else{j=NS;var k=jS}else(b=h.nodeName)&&b.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=_S);if(j&&(j=j(e,d))){wy(m,j,r,u);break e}k&&k(e,h,d),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Bh(h,"number",h.value)}switch(k=d?Ka(d):window,e){case"focusin":(tg(k)||k.contentEditable==="true")&&(Ha=k,em=d,zo=null);break;case"focusout":zo=em=Ha=null;break;case"mousedown":tm=!0;break;case"contextmenu":case"mouseup":case"dragend":tm=!1,ig(m,r,u);break;case"selectionchange":if(ES)break;case"keydown":case"keyup":ig(m,r,u)}var S;if(qf)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Va?yy(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(vy&&r.locale!=="ko"&&(Va||_!=="onCompositionStart"?_==="onCompositionEnd"&&Va&&(S=gy()):(fn=u,zf="value"in fn?fn.value:fn.textContent,Va=!0)),k=nd(d,_),0<k.length&&(_=new Jx(_,e,null,r,u),m.push({event:_,listeners:k}),S?_.data=S:(S=by(r),S!==null&&(_.data=S)))),(S=xS?gS(e,r):vS(e,r))&&(d=nd(d,"onBeforeInput"),0<d.length&&(u=new Jx("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=S))}Ty(m,t)})}function dl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function nd(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=sl(e,r),i!=null&&n.unshift(dl(e,i,a)),i=sl(e,t),i!=null&&n.push(dl(e,i,a))),e=e.return}return n}function Da(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cg(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=sl(r,i),c!=null&&o.unshift(dl(r,c,l))):a||(c=sl(r,i),c!=null&&o.push(dl(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var TS=/\r\n?/g,DS=/\u0000|\uFFFD/g;function dg(e){return(typeof e=="string"?e:""+e).replace(TS,`
`).replace(DS,"")}function dc(e,t,r){if(t=dg(t),dg(e)!==t&&r)throw Error(G(425))}function ad(){}var rm=null,sm=null;function nm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var am=typeof setTimeout=="function"?setTimeout:void 0,IS=typeof clearTimeout=="function"?clearTimeout:void 0,ug=typeof Promise=="function"?Promise:void 0,OS=typeof queueMicrotask=="function"?queueMicrotask:typeof ug<"u"?function(e){return ug.resolve(null).then(e).catch(LS)}:am;function LS(e){setTimeout(function(){throw e})}function Zu(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),il(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);il(t)}function bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ji=Math.random().toString(36).slice(2),os="__reactFiber$"+Ji,ul="__reactProps$"+Ji,Os="__reactContainer$"+Ji,im="__reactEvents$"+Ji,MS="__reactListeners$"+Ji,FS="__reactHandles$"+Ji;function ta(e){var t=e[os];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Os]||r[os]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=hg(e);e!==null;){if(r=e[os])return r;e=hg(e)}return t}e=r,r=e.parentNode}return null}function Ml(e){return e=e[os]||e[Os],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ka(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function Gd(e){return e[ul]||null}var om=[],Ya=-1;function Fn(e){return{current:e}}function Xe(e){0>Ya||(e.current=om[Ya],om[Ya]=null,Ya--)}function Ge(e,t){Ya++,om[Ya]=e.current,e.current=t}var En={},Ft=Fn(En),nr=Fn(!1),ga=En;function Pi(e,t){var r=e.type.contextTypes;if(!r)return En;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ar(e){return e=e.childContextTypes,e!=null}function id(){Xe(nr),Xe(Ft)}function mg(e,t,r){if(Ft.current!==En)throw Error(G(168));Ge(Ft,t),Ge(nr,r)}function Iy(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(G(108,j2(e)||"Unknown",a));return nt({},r,n)}function od(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||En,ga=Ft.current,Ge(Ft,e),Ge(nr,nr.current),!0}function fg(e,t,r){var n=e.stateNode;if(!n)throw Error(G(169));r?(e=Iy(e,t,ga),n.__reactInternalMemoizedMergedChildContext=e,Xe(nr),Xe(Ft),Ge(Ft,e)):Xe(nr),Ge(nr,r)}var ks=null,Kd=!1,eh=!1;function Oy(e){ks===null?ks=[e]:ks.push(e)}function $S(e){Kd=!0,Oy(e)}function $n(){if(!eh&&ks!==null){eh=!0;var e=0,t=ze;try{var r=ks;for(ze=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ks=null,Kd=!1}catch(a){throw ks!==null&&(ks=ks.slice(e+1)),iy(Mf,$n),a}finally{ze=t,eh=!1}}return null}var Qa=[],Ja=0,ld=null,cd=0,Sr=[],kr=0,va=null,Ps=1,As="";function Kn(e,t){Qa[Ja++]=cd,Qa[Ja++]=ld,ld=e,cd=t}function Ly(e,t,r){Sr[kr++]=Ps,Sr[kr++]=As,Sr[kr++]=va,va=e;var n=Ps;e=As;var a=32-Gr(n)-1;n&=~(1<<a),r+=1;var i=32-Gr(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Ps=1<<32-Gr(t)+a|r<<a|n,As=i+e}else Ps=1<<i|r<<a|n,As=e}function Hf(e){e.return!==null&&(Kn(e,1),Ly(e,1,0))}function Gf(e){for(;e===ld;)ld=Qa[--Ja],Qa[Ja]=null,cd=Qa[--Ja],Qa[Ja]=null;for(;e===va;)va=Sr[--kr],Sr[kr]=null,As=Sr[--kr],Sr[kr]=null,Ps=Sr[--kr],Sr[kr]=null}var fr=null,ur=null,et=!1,qr=null;function My(e,t){var r=Cr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function pg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fr=e,ur=bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fr=e,ur=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=va!==null?{id:Ps,overflow:As}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Cr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,fr=e,ur=null,!0):!1;default:return!1}}function lm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cm(e){if(et){var t=ur;if(t){var r=t;if(!pg(e,t)){if(lm(e))throw Error(G(418));t=bn(r.nextSibling);var n=fr;t&&pg(e,t)?My(n,r):(e.flags=e.flags&-4097|2,et=!1,fr=e)}}else{if(lm(e))throw Error(G(418));e.flags=e.flags&-4097|2,et=!1,fr=e}}}function xg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fr=e}function uc(e){if(e!==fr)return!1;if(!et)return xg(e),et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nm(e.type,e.memoizedProps)),t&&(t=ur)){if(lm(e))throw Fy(),Error(G(418));for(;t;)My(e,t),t=bn(t.nextSibling)}if(xg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ur=bn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ur=null}}else ur=fr?bn(e.stateNode.nextSibling):null;return!0}function Fy(){for(var e=ur;e;)e=bn(e.nextSibling)}function Ai(){ur=fr=null,et=!1}function Kf(e){qr===null?qr=[e]:qr.push(e)}var US=Ws.ReactCurrentBatchConfig;function go(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(G(309));var n=r.stateNode}if(!n)throw Error(G(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(G(284));if(!r._owner)throw Error(G(290,e))}return e}function hc(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gg(e){var t=e._init;return t(e._payload)}function $y(e){function t(g,p){if(e){var x=g.deletions;x===null?(g.deletions=[p],g.flags|=16):x.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function a(g,p){return g=_n(g,p),g.index=0,g.sibling=null,g}function i(g,p,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<p?(g.flags|=2,p):x):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,p,x,N){return p===null||p.tag!==6?(p=oh(x,g.mode,N),p.return=g,p):(p=a(p,x),p.return=g,p)}function c(g,p,x,N){var j=x.type;return j===qa?u(g,p,x.props.children,N,x.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Xs&&gg(j)===p.type)?(N=a(p,x.props),N.ref=go(g,p,x),N.return=g,N):(N=Wc(x.type,x.key,x.props,null,g.mode,N),N.ref=go(g,p,x),N.return=g,N)}function d(g,p,x,N){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=lh(x,g.mode,N),p.return=g,p):(p=a(p,x.children||[]),p.return=g,p)}function u(g,p,x,N,j){return p===null||p.tag!==7?(p=fa(x,g.mode,N,j),p.return=g,p):(p=a(p,x),p.return=g,p)}function m(g,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=oh(""+p,g.mode,x),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case tc:return x=Wc(p.type,p.key,p.props,null,g.mode,x),x.ref=go(g,null,p),x.return=g,x;case Wa:return p=lh(p,g.mode,x),p.return=g,p;case Xs:var N=p._init;return m(g,N(p._payload),x)}if(Ao(p)||ho(p))return p=fa(p,g.mode,x,null),p.return=g,p;hc(g,p)}return null}function h(g,p,x,N){var j=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:l(g,p,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:return x.key===j?c(g,p,x,N):null;case Wa:return x.key===j?d(g,p,x,N):null;case Xs:return j=x._init,h(g,p,j(x._payload),N)}if(Ao(x)||ho(x))return j!==null?null:u(g,p,x,N,null);hc(g,x)}return null}function b(g,p,x,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return g=g.get(x)||null,l(p,g,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case tc:return g=g.get(N.key===null?x:N.key)||null,c(p,g,N,j);case Wa:return g=g.get(N.key===null?x:N.key)||null,d(p,g,N,j);case Xs:var k=N._init;return b(g,p,x,k(N._payload),j)}if(Ao(N)||ho(N))return g=g.get(x)||null,u(p,g,N,j,null);hc(p,N)}return null}function w(g,p,x,N){for(var j=null,k=null,S=p,_=p=0,C=null;S!==null&&_<x.length;_++){S.index>_?(C=S,S=null):C=S.sibling;var E=h(g,S,x[_],N);if(E===null){S===null&&(S=C);break}e&&S&&E.alternate===null&&t(g,S),p=i(E,p,_),k===null?j=E:k.sibling=E,k=E,S=C}if(_===x.length)return r(g,S),et&&Kn(g,_),j;if(S===null){for(;_<x.length;_++)S=m(g,x[_],N),S!==null&&(p=i(S,p,_),k===null?j=S:k.sibling=S,k=S);return et&&Kn(g,_),j}for(S=n(g,S);_<x.length;_++)C=b(S,g,_,x[_],N),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?_:C.key),p=i(C,p,_),k===null?j=C:k.sibling=C,k=C);return e&&S.forEach(function($){return t(g,$)}),et&&Kn(g,_),j}function v(g,p,x,N){var j=ho(x);if(typeof j!="function")throw Error(G(150));if(x=j.call(x),x==null)throw Error(G(151));for(var k=j=null,S=p,_=p=0,C=null,E=x.next();S!==null&&!E.done;_++,E=x.next()){S.index>_?(C=S,S=null):C=S.sibling;var $=h(g,S,E.value,N);if($===null){S===null&&(S=C);break}e&&S&&$.alternate===null&&t(g,S),p=i($,p,_),k===null?j=$:k.sibling=$,k=$,S=C}if(E.done)return r(g,S),et&&Kn(g,_),j;if(S===null){for(;!E.done;_++,E=x.next())E=m(g,E.value,N),E!==null&&(p=i(E,p,_),k===null?j=E:k.sibling=E,k=E);return et&&Kn(g,_),j}for(S=n(g,S);!E.done;_++,E=x.next())E=b(S,g,_,E.value,N),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?_:E.key),p=i(E,p,_),k===null?j=E:k.sibling=E,k=E);return e&&S.forEach(function(D){return t(g,D)}),et&&Kn(g,_),j}function y(g,p,x,N){if(typeof x=="object"&&x!==null&&x.type===qa&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:e:{for(var j=x.key,k=p;k!==null;){if(k.key===j){if(j=x.type,j===qa){if(k.tag===7){r(g,k.sibling),p=a(k,x.props.children),p.return=g,g=p;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Xs&&gg(j)===k.type){r(g,k.sibling),p=a(k,x.props),p.ref=go(g,k,x),p.return=g,g=p;break e}r(g,k);break}else t(g,k);k=k.sibling}x.type===qa?(p=fa(x.props.children,g.mode,N,x.key),p.return=g,g=p):(N=Wc(x.type,x.key,x.props,null,g.mode,N),N.ref=go(g,p,x),N.return=g,g=N)}return o(g);case Wa:e:{for(k=x.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){r(g,p.sibling),p=a(p,x.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=lh(x,g.mode,N),p.return=g,g=p}return o(g);case Xs:return k=x._init,y(g,p,k(x._payload),N)}if(Ao(x))return w(g,p,x,N);if(ho(x))return v(g,p,x,N);hc(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(r(g,p.sibling),p=a(p,x),p.return=g,g=p):(r(g,p),p=oh(x,g.mode,N),p.return=g,g=p),o(g)):r(g,p)}return y}var Ri=$y(!0),Uy=$y(!1),dd=Fn(null),ud=null,Xa=null,Yf=null;function Qf(){Yf=Xa=ud=null}function Jf(e){var t=dd.current;Xe(dd),e._currentValue=t}function dm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ii(e,t){ud=e,Yf=Xa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rr=!0),e.firstContext=null)}function Tr(e){var t=e._currentValue;if(Yf!==e)if(e={context:e,memoizedValue:t,next:null},Xa===null){if(ud===null)throw Error(G(308));Xa=e,ud.dependencies={lanes:0,firstContext:e}}else Xa=Xa.next=e;return t}var ra=null;function Xf(e){ra===null?ra=[e]:ra.push(e)}function zy(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Xf(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ls(e,n)}function Ls(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Zs=!1;function Zf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function By(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ts(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ie&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ls(e,r)}return a=n.interleaved,a===null?(t.next=t,Xf(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ls(e,r)}function Mc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ff(e,r)}}function vg(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function hd(e,t,r,n){var a=e.updateQueue;Zs=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var h=l.lane,b=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,v=l;switch(h=t,b=r,v.tag){case 1:if(w=v.payload,typeof w=="function"){m=w.call(b,m,h);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,h=typeof w=="function"?w.call(b,m,h):w,h==null)break e;m=nt({},m,h);break e;case 2:Zs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else b={eventTime:b,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=b,c=m):u=u.next=b,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);ba|=o,e.lanes=o,e.memoizedState=m}}function yg(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(G(191,a));a.call(n)}}}var Fl={},us=Fn(Fl),hl=Fn(Fl),ml=Fn(Fl);function sa(e){if(e===Fl)throw Error(G(174));return e}function ep(e,t){switch(Ge(ml,t),Ge(hl,e),Ge(us,Fl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qh(t,e)}Xe(us),Ge(us,t)}function Ti(){Xe(us),Xe(hl),Xe(ml)}function Wy(e){sa(ml.current);var t=sa(us.current),r=qh(t,e.type);t!==r&&(Ge(hl,e),Ge(us,r))}function tp(e){hl.current===e&&(Xe(us),Xe(hl))}var rt=Fn(0);function md(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var th=[];function rp(){for(var e=0;e<th.length;e++)th[e]._workInProgressVersionPrimary=null;th.length=0}var Fc=Ws.ReactCurrentDispatcher,rh=Ws.ReactCurrentBatchConfig,ya=0,st=null,pt=null,bt=null,fd=!1,Bo=!1,fl=0,zS=0;function It(){throw Error(G(321))}function sp(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Yr(e[r],t[r]))return!1;return!0}function np(e,t,r,n,a,i){if(ya=i,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fc.current=e===null||e.memoizedState===null?VS:HS,e=r(n,a),Bo){i=0;do{if(Bo=!1,fl=0,25<=i)throw Error(G(301));i+=1,bt=pt=null,t.updateQueue=null,Fc.current=GS,e=r(n,a)}while(Bo)}if(Fc.current=pd,t=pt!==null&&pt.next!==null,ya=0,bt=pt=st=null,fd=!1,t)throw Error(G(300));return e}function ap(){var e=fl!==0;return fl=0,e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?st.memoizedState=bt=e:bt=bt.next=e,bt}function Dr(){if(pt===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=bt===null?st.memoizedState:bt.next;if(t!==null)bt=t,pt=e;else{if(e===null)throw Error(G(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},bt===null?st.memoizedState=bt=e:bt=bt.next=e}return bt}function pl(e,t){return typeof t=="function"?t(e):t}function sh(e){var t=Dr(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var n=pt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ya&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,st.lanes|=u,ba|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Yr(n,t.memoizedState)||(rr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,st.lanes|=i,ba|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nh(e){var t=Dr(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Yr(i,t.memoizedState)||(rr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function qy(){}function Vy(e,t){var r=st,n=Dr(),a=t(),i=!Yr(n.memoizedState,a);if(i&&(n.memoizedState=a,rr=!0),n=n.queue,ip(Ky.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||bt!==null&&bt.memoizedState.tag&1){if(r.flags|=2048,xl(9,Gy.bind(null,r,n,a,t),void 0,null),Nt===null)throw Error(G(349));ya&30||Hy(r,t,a)}return a}function Hy(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Gy(e,t,r,n){t.value=r,t.getSnapshot=n,Yy(t)&&Qy(e)}function Ky(e,t,r){return r(function(){Yy(t)&&Qy(e)})}function Yy(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Yr(e,r)}catch{return!0}}function Qy(e){var t=Ls(e,1);t!==null&&Kr(t,e,1,-1)}function bg(e){var t=ts();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:e},t.queue=e,e=e.dispatch=qS.bind(null,st,e),[t.memoizedState,e]}function xl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Jy(){return Dr().memoizedState}function $c(e,t,r,n){var a=ts();st.flags|=e,a.memoizedState=xl(1|t,r,void 0,n===void 0?null:n)}function Yd(e,t,r,n){var a=Dr();n=n===void 0?null:n;var i=void 0;if(pt!==null){var o=pt.memoizedState;if(i=o.destroy,n!==null&&sp(n,o.deps)){a.memoizedState=xl(t,r,i,n);return}}st.flags|=e,a.memoizedState=xl(1|t,r,i,n)}function wg(e,t){return $c(8390656,8,e,t)}function ip(e,t){return Yd(2048,8,e,t)}function Xy(e,t){return Yd(4,2,e,t)}function Zy(e,t){return Yd(4,4,e,t)}function eb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tb(e,t,r){return r=r!=null?r.concat([e]):null,Yd(4,4,eb.bind(null,t,e),r)}function op(){}function rb(e,t){var r=Dr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&sp(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function sb(e,t){var r=Dr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&sp(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function nb(e,t,r){return ya&21?(Yr(r,t)||(r=cy(),st.lanes|=r,ba|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rr=!0),e.memoizedState=r)}function BS(e,t){var r=ze;ze=r!==0&&4>r?r:4,e(!0);var n=rh.transition;rh.transition={};try{e(!1),t()}finally{ze=r,rh.transition=n}}function ab(){return Dr().memoizedState}function WS(e,t,r){var n=Nn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ib(e))ob(t,r);else if(r=zy(e,t,r,n),r!==null){var a=Kt();Kr(r,e,n,a),lb(r,t,n)}}function qS(e,t,r){var n=Nn(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ib(e))ob(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Yr(l,o)){var c=t.interleaved;c===null?(a.next=a,Xf(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=zy(e,t,a,n),r!==null&&(a=Kt(),Kr(r,e,n,a),lb(r,t,n))}}function ib(e){var t=e.alternate;return e===st||t!==null&&t===st}function ob(e,t){Bo=fd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function lb(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ff(e,r)}}var pd={readContext:Tr,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},VS={readContext:Tr,useCallback:function(e,t){return ts().memoizedState=[e,t===void 0?null:t],e},useContext:Tr,useEffect:wg,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$c(4194308,4,eb.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $c(4194308,4,e,t)},useInsertionEffect:function(e,t){return $c(4,2,e,t)},useMemo:function(e,t){var r=ts();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ts();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=WS.bind(null,st,e),[n.memoizedState,e]},useRef:function(e){var t=ts();return e={current:e},t.memoizedState=e},useState:bg,useDebugValue:op,useDeferredValue:function(e){return ts().memoizedState=e},useTransition:function(){var e=bg(!1),t=e[0];return e=BS.bind(null,e[1]),ts().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=st,a=ts();if(et){if(r===void 0)throw Error(G(407));r=r()}else{if(r=t(),Nt===null)throw Error(G(349));ya&30||Hy(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,wg(Ky.bind(null,n,i,e),[e]),n.flags|=2048,xl(9,Gy.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ts(),t=Nt.identifierPrefix;if(et){var r=As,n=Ps;r=(n&~(1<<32-Gr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=fl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=zS++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},HS={readContext:Tr,useCallback:rb,useContext:Tr,useEffect:ip,useImperativeHandle:tb,useInsertionEffect:Xy,useLayoutEffect:Zy,useMemo:sb,useReducer:sh,useRef:Jy,useState:function(){return sh(pl)},useDebugValue:op,useDeferredValue:function(e){var t=Dr();return nb(t,pt.memoizedState,e)},useTransition:function(){var e=sh(pl)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:qy,useSyncExternalStore:Vy,useId:ab,unstable_isNewReconciler:!1},GS={readContext:Tr,useCallback:rb,useContext:Tr,useEffect:ip,useImperativeHandle:tb,useInsertionEffect:Xy,useLayoutEffect:Zy,useMemo:sb,useReducer:nh,useRef:Jy,useState:function(){return nh(pl)},useDebugValue:op,useDeferredValue:function(e){var t=Dr();return pt===null?t.memoizedState=e:nb(t,pt.memoizedState,e)},useTransition:function(){var e=nh(pl)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:qy,useSyncExternalStore:Vy,useId:ab,unstable_isNewReconciler:!1};function Ur(e,t){if(e&&e.defaultProps){t=nt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function um(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:nt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Qd={isMounted:function(e){return(e=e._reactInternals)?Ca(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Kt(),a=Nn(e),i=Ts(n,a);i.payload=t,r!=null&&(i.callback=r),t=wn(e,i,a),t!==null&&(Kr(t,e,a,n),Mc(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Kt(),a=Nn(e),i=Ts(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=wn(e,i,a),t!==null&&(Kr(t,e,a,n),Mc(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Kt(),n=Nn(e),a=Ts(r,n);a.tag=2,t!=null&&(a.callback=t),t=wn(e,a,n),t!==null&&(Kr(t,e,n,r),Mc(t,e,n))}};function jg(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!ll(r,n)||!ll(a,i):!0}function cb(e,t,r){var n=!1,a=En,i=t.contextType;return typeof i=="object"&&i!==null?i=Tr(i):(a=ar(t)?ga:Ft.current,n=t.contextTypes,i=(n=n!=null)?Pi(e,a):En),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ng(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Qd.enqueueReplaceState(t,t.state,null)}function hm(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Zf(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Tr(i):(i=ar(t)?ga:Ft.current,a.context=Pi(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(um(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Qd.enqueueReplaceState(a,a.state,null),hd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Di(e,t){try{var r="",n=t;do r+=w2(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ah(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function mm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var KS=typeof WeakMap=="function"?WeakMap:Map;function db(e,t,r){r=Ts(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){gd||(gd=!0,Nm=n),mm(e,t)},r}function ub(e,t,r){r=Ts(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){mm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){mm(e,t),typeof n!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function _g(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new KS;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=lk.bind(null,e,t,r),t.then(e,e))}function Sg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kg(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ts(-1,1),t.tag=2,wn(r,t,1))),r.lanes|=1),e)}var YS=Ws.ReactCurrentOwner,rr=!1;function Bt(e,t,r,n){t.child=e===null?Uy(t,null,r,n):Ri(t,e.child,r,n)}function Cg(e,t,r,n,a){r=r.render;var i=t.ref;return ii(t,a),n=np(e,t,r,n,i,a),r=ap(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ms(e,t,a)):(et&&r&&Hf(t),t.flags|=1,Bt(e,t,n,a),t.child)}function Eg(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!pp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,hb(e,t,i,n,a)):(e=Wc(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ll,r(o,n)&&e.ref===t.ref)return Ms(e,t,a)}return t.flags|=1,e=_n(i,n),e.ref=t.ref,e.return=t,t.child=e}function hb(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(ll(i,n)&&e.ref===t.ref)if(rr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(rr=!0);else return t.lanes=e.lanes,Ms(e,t,a)}return fm(e,t,r,n,a)}function mb(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(ei,cr),cr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(ei,cr),cr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ge(ei,cr),cr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ge(ei,cr),cr|=n;return Bt(e,t,a,r),t.child}function fb(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function fm(e,t,r,n,a){var i=ar(r)?ga:Ft.current;return i=Pi(t,i),ii(t,a),r=np(e,t,r,n,i,a),n=ap(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ms(e,t,a)):(et&&n&&Hf(t),t.flags|=1,Bt(e,t,r,a),t.child)}function Pg(e,t,r,n,a){if(ar(r)){var i=!0;od(t)}else i=!1;if(ii(t,a),t.stateNode===null)Uc(e,t),cb(t,r,n),hm(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Tr(d):(d=ar(r)?ga:Ft.current,d=Pi(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Ng(t,o,n,d),Zs=!1;var h=t.memoizedState;o.state=h,hd(t,n,o,a),c=t.memoizedState,l!==n||h!==c||nr.current||Zs?(typeof u=="function"&&(um(t,r,u,n),c=t.memoizedState),(l=Zs||jg(t,r,l,n,h,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,By(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Ur(t.type,l),o.props=d,m=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Tr(c):(c=ar(r)?ga:Ft.current,c=Pi(t,c));var b=r.getDerivedStateFromProps;(u=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==c)&&Ng(t,o,n,c),Zs=!1,h=t.memoizedState,o.state=h,hd(t,n,o,a);var w=t.memoizedState;l!==m||h!==w||nr.current||Zs?(typeof b=="function"&&(um(t,r,b,n),w=t.memoizedState),(d=Zs||jg(t,r,d,n,h,w,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),o.props=n,o.state=w,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return pm(e,t,r,n,i,a)}function pm(e,t,r,n,a,i){fb(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&fg(t,r,!1),Ms(e,t,i);n=t.stateNode,YS.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ri(t,e.child,null,i),t.child=Ri(t,null,l,i)):Bt(e,t,l,i),t.memoizedState=n.state,a&&fg(t,r,!0),t.child}function pb(e){var t=e.stateNode;t.pendingContext?mg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mg(e,t.context,!1),ep(e,t.containerInfo)}function Ag(e,t,r,n,a){return Ai(),Kf(a),t.flags|=256,Bt(e,t,r,n),t.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function gm(e){return{baseLanes:e,cachePool:null,transitions:null}}function xb(e,t,r){var n=t.pendingProps,a=rt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ge(rt,a&1),e===null)return cm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zd(o,n,0,null),e=fa(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=gm(r),t.memoizedState=xm,e):lp(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return QS(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=_n(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=_n(l,i):(i=fa(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?gm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=xm,n}return i=e.child,e=i.sibling,n=_n(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function lp(e,t){return t=Zd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mc(e,t,r,n){return n!==null&&Kf(n),Ri(t,e.child,null,r),e=lp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function QS(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=ah(Error(G(422))),mc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Zd({mode:"visible",children:n.children},a,0,null),i=fa(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ri(t,e.child,null,o),t.child.memoizedState=gm(o),t.memoizedState=xm,i);if(!(t.mode&1))return mc(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(G(419)),n=ah(i,n,void 0),mc(e,t,o,n)}if(l=(o&e.childLanes)!==0,rr||l){if(n=Nt,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ls(e,a),Kr(n,e,a,-1))}return fp(),n=ah(Error(G(421))),mc(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=ck.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ur=bn(a.nextSibling),fr=t,et=!0,qr=null,e!==null&&(Sr[kr++]=Ps,Sr[kr++]=As,Sr[kr++]=va,Ps=e.id,As=e.overflow,va=t),t=lp(t,n.children),t.flags|=4096,t)}function Rg(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),dm(e.return,t,r)}function ih(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function gb(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Bt(e,t,n.children,r),n=rt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rg(e,r,t);else if(e.tag===19)Rg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ge(rt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&md(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ih(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&md(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ih(t,!0,r,null,i);break;case"together":ih(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ms(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ba|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,r=_n(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_n(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function JS(e,t,r){switch(t.tag){case 3:pb(t),Ai();break;case 5:Wy(t);break;case 1:ar(t.type)&&od(t);break;case 4:ep(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ge(dd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ge(rt,rt.current&1),t.flags|=128,null):r&t.child.childLanes?xb(e,t,r):(Ge(rt,rt.current&1),e=Ms(e,t,r),e!==null?e.sibling:null);Ge(rt,rt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return gb(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ge(rt,rt.current),n)break;return null;case 22:case 23:return t.lanes=0,mb(e,t,r)}return Ms(e,t,r)}var vb,vm,yb,bb;vb=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};vm=function(){};yb=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,sa(us.current);var i=null;switch(r){case"input":a=Uh(e,a),n=Uh(e,n),i=[];break;case"select":a=nt({},a,{value:void 0}),n=nt({},n,{value:void 0}),i=[];break;case"textarea":a=Wh(e,a),n=Wh(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ad)}Vh(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(tl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(tl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Qe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};bb=function(e,t,r,n){r!==n&&(t.flags|=4)};function vo(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function XS(e,t,r){var n=t.pendingProps;switch(Gf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(t),null;case 1:return ar(t.type)&&id(),Ot(t),null;case 3:return n=t.stateNode,Ti(),Xe(nr),Xe(Ft),rp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(uc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qr!==null&&(km(qr),qr=null))),vm(e,t),Ot(t),null;case 5:tp(t);var a=sa(ml.current);if(r=t.type,e!==null&&t.stateNode!=null)yb(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(G(166));return Ot(t),null}if(e=sa(us.current),uc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[os]=t,n[ul]=i,e=(t.mode&1)!==0,r){case"dialog":Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":case"embed":Qe("load",n);break;case"video":case"audio":for(a=0;a<To.length;a++)Qe(To[a],n);break;case"source":Qe("error",n);break;case"img":case"image":case"link":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"input":Ux(n,i),Qe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Qe("invalid",n);break;case"textarea":Bx(n,i),Qe("invalid",n)}Vh(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&dc(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&dc(n.textContent,l,e),a=["children",""+l]):tl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Qe("scroll",n)}switch(r){case"input":rc(n),zx(n,i,!0);break;case"textarea":rc(n),Wx(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ad)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kv(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[os]=t,e[ul]=n,vb(e,t,!1,!1),t.stateNode=e;e:{switch(o=Hh(r,n),r){case"dialog":Qe("cancel",e),Qe("close",e),a=n;break;case"iframe":case"object":case"embed":Qe("load",e),a=n;break;case"video":case"audio":for(a=0;a<To.length;a++)Qe(To[a],e);a=n;break;case"source":Qe("error",e),a=n;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),a=n;break;case"details":Qe("toggle",e),a=n;break;case"input":Ux(e,n),a=Uh(e,n),Qe("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=nt({},n,{value:void 0}),Qe("invalid",e);break;case"textarea":Bx(e,n),a=Wh(e,n),Qe("invalid",e);break;default:a=n}Vh(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Jv(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Yv(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&rl(e,c):typeof c=="number"&&rl(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(tl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Qe("scroll",e):c!=null&&Tf(e,i,c,o))}switch(r){case"input":rc(e),zx(e,n,!1);break;case"textarea":rc(e),Wx(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Cn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ri(e,!!n.multiple,i,!1):n.defaultValue!=null&&ri(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ad)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ot(t),null;case 6:if(e&&t.stateNode!=null)bb(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(G(166));if(r=sa(ml.current),sa(us.current),uc(t)){if(n=t.stateNode,r=t.memoizedProps,n[os]=t,(i=n.nodeValue!==r)&&(e=fr,e!==null))switch(e.tag){case 3:dc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&dc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[os]=t,t.stateNode=n}return Ot(t),null;case 13:if(Xe(rt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(et&&ur!==null&&t.mode&1&&!(t.flags&128))Fy(),Ai(),t.flags|=98560,i=!1;else if(i=uc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(G(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[os]=t}else Ai(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ot(t),i=!1}else qr!==null&&(km(qr),qr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||rt.current&1?xt===0&&(xt=3):fp())),t.updateQueue!==null&&(t.flags|=4),Ot(t),null);case 4:return Ti(),vm(e,t),e===null&&cl(t.stateNode.containerInfo),Ot(t),null;case 10:return Jf(t.type._context),Ot(t),null;case 17:return ar(t.type)&&id(),Ot(t),null;case 19:if(Xe(rt),i=t.memoizedState,i===null)return Ot(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)vo(i,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=md(e),o!==null){for(t.flags|=128,vo(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ge(rt,rt.current&1|2),t.child}e=e.sibling}i.tail!==null&&lt()>Ii&&(t.flags|=128,n=!0,vo(i,!1),t.lanes=4194304)}else{if(!n)if(e=md(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),vo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!et)return Ot(t),null}else 2*lt()-i.renderingStartTime>Ii&&r!==1073741824&&(t.flags|=128,n=!0,vo(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=lt(),t.sibling=null,r=rt.current,Ge(rt,n?r&1|2:r&1),t):(Ot(t),null);case 22:case 23:return mp(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?cr&1073741824&&(Ot(t),t.subtreeFlags&6&&(t.flags|=8192)):Ot(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function ZS(e,t){switch(Gf(t),t.tag){case 1:return ar(t.type)&&id(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ti(),Xe(nr),Xe(Ft),rp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tp(t),null;case 13:if(Xe(rt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));Ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xe(rt),null;case 4:return Ti(),null;case 10:return Jf(t.type._context),null;case 22:case 23:return mp(),null;case 24:return null;default:return null}}var fc=!1,Mt=!1,ek=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Za(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){it(e,t,n)}else r.current=null}function ym(e,t,r){try{r()}catch(n){it(e,t,n)}}var Tg=!1;function tk(e,t){if(rm=rd,e=Sy(),Vf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var b;m!==r||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(b=m.firstChild)!==null;)h=m,m=b;for(;;){if(m===e)break t;if(h===r&&++d===a&&(l=o),h===i&&++u===n&&(c=o),(b=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=b}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(sm={focusedElem:e,selectionRange:r},rd=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,y=w.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ur(t.type,v),y);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(N){it(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return w=Tg,Tg=!1,w}function Wo(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&ym(t,r,i)}a=a.next}while(a!==n)}}function Jd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function bm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function wb(e){var t=e.alternate;t!==null&&(e.alternate=null,wb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[os],delete t[ul],delete t[im],delete t[MS],delete t[FS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jb(e){return e.tag===5||e.tag===3||e.tag===4}function Dg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ad));else if(n!==4&&(e=e.child,e!==null))for(wm(e,t,r),e=e.sibling;e!==null;)wm(e,t,r),e=e.sibling}function jm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(jm(e,t,r),e=e.sibling;e!==null;)jm(e,t,r),e=e.sibling}var kt=null,Br=!1;function Hs(e,t,r){for(r=r.child;r!==null;)Nb(e,t,r),r=r.sibling}function Nb(e,t,r){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(Wd,r)}catch{}switch(r.tag){case 5:Mt||Za(r,t);case 6:var n=kt,a=Br;kt=null,Hs(e,t,r),kt=n,Br=a,kt!==null&&(Br?(e=kt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):kt.removeChild(r.stateNode));break;case 18:kt!==null&&(Br?(e=kt,r=r.stateNode,e.nodeType===8?Zu(e.parentNode,r):e.nodeType===1&&Zu(e,r),il(e)):Zu(kt,r.stateNode));break;case 4:n=kt,a=Br,kt=r.stateNode.containerInfo,Br=!0,Hs(e,t,r),kt=n,Br=a;break;case 0:case 11:case 14:case 15:if(!Mt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ym(r,t,o),a=a.next}while(a!==n)}Hs(e,t,r);break;case 1:if(!Mt&&(Za(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){it(r,t,l)}Hs(e,t,r);break;case 21:Hs(e,t,r);break;case 22:r.mode&1?(Mt=(n=Mt)||r.memoizedState!==null,Hs(e,t,r),Mt=n):Hs(e,t,r);break;default:Hs(e,t,r)}}function Ig(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ek),t.forEach(function(n){var a=dk.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Mr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:kt=l.stateNode,Br=!1;break e;case 3:kt=l.stateNode.containerInfo,Br=!0;break e;case 4:kt=l.stateNode.containerInfo,Br=!0;break e}l=l.return}if(kt===null)throw Error(G(160));Nb(i,o,a),kt=null,Br=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){it(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_b(t,e),t=t.sibling}function _b(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mr(t,e),es(e),n&4){try{Wo(3,e,e.return),Jd(3,e)}catch(v){it(e,e.return,v)}try{Wo(5,e,e.return)}catch(v){it(e,e.return,v)}}break;case 1:Mr(t,e),es(e),n&512&&r!==null&&Za(r,r.return);break;case 5:if(Mr(t,e),es(e),n&512&&r!==null&&Za(r,r.return),e.flags&32){var a=e.stateNode;try{rl(a,"")}catch(v){it(e,e.return,v)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Hv(a,i),Hh(l,o);var d=Hh(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?Jv(a,m):u==="dangerouslySetInnerHTML"?Yv(a,m):u==="children"?rl(a,m):Tf(a,u,m,d)}switch(l){case"input":zh(a,i);break;case"textarea":Gv(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?ri(a,!!i.multiple,b,!1):h!==!!i.multiple&&(i.defaultValue!=null?ri(a,!!i.multiple,i.defaultValue,!0):ri(a,!!i.multiple,i.multiple?[]:"",!1))}a[ul]=i}catch(v){it(e,e.return,v)}}break;case 6:if(Mr(t,e),es(e),n&4){if(e.stateNode===null)throw Error(G(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){it(e,e.return,v)}}break;case 3:if(Mr(t,e),es(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{il(t.containerInfo)}catch(v){it(e,e.return,v)}break;case 4:Mr(t,e),es(e);break;case 13:Mr(t,e),es(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(up=lt())),n&4&&Ig(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Mt=(d=Mt)||u,Mr(t,e),Mt=d):Mr(t,e),es(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(oe=e,u=e.child;u!==null;){for(m=oe=u;oe!==null;){switch(h=oe,b=h.child,h.tag){case 0:case 11:case 14:case 15:Wo(4,h,h.return);break;case 1:Za(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){it(n,r,v)}}break;case 5:Za(h,h.return);break;case 22:if(h.memoizedState!==null){Lg(m);continue}}b!==null?(b.return=h,oe=b):Lg(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Qv("display",o))}catch(v){it(e,e.return,v)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(v){it(e,e.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Mr(t,e),es(e),n&4&&Ig(e);break;case 21:break;default:Mr(t,e),es(e)}}function es(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(jb(r)){var n=r;break e}r=r.return}throw Error(G(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(rl(a,""),n.flags&=-33);var i=Dg(e);jm(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Dg(e);wm(e,l,o);break;default:throw Error(G(161))}}catch(c){it(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rk(e,t,r){oe=e,Sb(e)}function Sb(e,t,r){for(var n=(e.mode&1)!==0;oe!==null;){var a=oe,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||fc;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Mt;l=fc;var d=Mt;if(fc=o,(Mt=c)&&!d)for(oe=a;oe!==null;)o=oe,c=o.child,o.tag===22&&o.memoizedState!==null?Mg(a):c!==null?(c.return=o,oe=c):Mg(a);for(;i!==null;)oe=i,Sb(i),i=i.sibling;oe=a,fc=l,Mt=d}Og(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,oe=i):Og(e)}}function Og(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mt||Jd(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Mt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ur(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&yg(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}yg(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&il(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Mt||t.flags&512&&bm(t)}catch(h){it(t,t.return,h)}}if(t===e){oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,oe=r;break}oe=t.return}}function Lg(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,oe=r;break}oe=t.return}}function Mg(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Jd(4,t)}catch(c){it(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){it(t,a,c)}}var i=t.return;try{bm(t)}catch(c){it(t,i,c)}break;case 5:var o=t.return;try{bm(t)}catch(c){it(t,o,c)}}}catch(c){it(t,t.return,c)}if(t===e){oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,oe=l;break}oe=t.return}}var sk=Math.ceil,xd=Ws.ReactCurrentDispatcher,cp=Ws.ReactCurrentOwner,Ar=Ws.ReactCurrentBatchConfig,Ie=0,Nt=null,ht=null,At=0,cr=0,ei=Fn(0),xt=0,gl=null,ba=0,Xd=0,dp=0,qo=null,er=null,up=0,Ii=1/0,_s=null,gd=!1,Nm=null,jn=null,pc=!1,pn=null,vd=0,Vo=0,_m=null,zc=-1,Bc=0;function Kt(){return Ie&6?lt():zc!==-1?zc:zc=lt()}function Nn(e){return e.mode&1?Ie&2&&At!==0?At&-At:US.transition!==null?(Bc===0&&(Bc=cy()),Bc):(e=ze,e!==0||(e=window.event,e=e===void 0?16:xy(e.type)),e):1}function Kr(e,t,r,n){if(50<Vo)throw Vo=0,_m=null,Error(G(185));Ol(e,r,n),(!(Ie&2)||e!==Nt)&&(e===Nt&&(!(Ie&2)&&(Xd|=r),xt===4&&rn(e,At)),ir(e,n),r===1&&Ie===0&&!(t.mode&1)&&(Ii=lt()+500,Kd&&$n()))}function ir(e,t){var r=e.callbackNode;U2(e,t);var n=td(e,e===Nt?At:0);if(n===0)r!==null&&Hx(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Hx(r),t===1)e.tag===0?$S(Fg.bind(null,e)):Oy(Fg.bind(null,e)),OS(function(){!(Ie&6)&&$n()}),r=null;else{switch(dy(n)){case 1:r=Mf;break;case 4:r=oy;break;case 16:r=ed;break;case 536870912:r=ly;break;default:r=ed}r=Db(r,kb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kb(e,t){if(zc=-1,Bc=0,Ie&6)throw Error(G(327));var r=e.callbackNode;if(oi()&&e.callbackNode!==r)return null;var n=td(e,e===Nt?At:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=yd(e,n);else{t=n;var a=Ie;Ie|=2;var i=Eb();(Nt!==e||At!==t)&&(_s=null,Ii=lt()+500,ma(e,t));do try{ik();break}catch(l){Cb(e,l)}while(!0);Qf(),xd.current=i,Ie=a,ht!==null?t=0:(Nt=null,At=0,t=xt)}if(t!==0){if(t===2&&(a=Jh(e),a!==0&&(n=a,t=Sm(e,a))),t===1)throw r=gl,ma(e,0),rn(e,n),ir(e,lt()),r;if(t===6)rn(e,n);else{if(a=e.current.alternate,!(n&30)&&!nk(a)&&(t=yd(e,n),t===2&&(i=Jh(e),i!==0&&(n=i,t=Sm(e,i))),t===1))throw r=gl,ma(e,0),rn(e,n),ir(e,lt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(G(345));case 2:Yn(e,er,_s);break;case 3:if(rn(e,n),(n&130023424)===n&&(t=up+500-lt(),10<t)){if(td(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Kt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=am(Yn.bind(null,e,er,_s),t);break}Yn(e,er,_s);break;case 4:if(rn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Gr(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=lt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sk(n/1960))-n,10<n){e.timeoutHandle=am(Yn.bind(null,e,er,_s),n);break}Yn(e,er,_s);break;case 5:Yn(e,er,_s);break;default:throw Error(G(329))}}}return ir(e,lt()),e.callbackNode===r?kb.bind(null,e):null}function Sm(e,t){var r=qo;return e.current.memoizedState.isDehydrated&&(ma(e,t).flags|=256),e=yd(e,t),e!==2&&(t=er,er=r,t!==null&&km(t)),e}function km(e){er===null?er=e:er.push.apply(er,e)}function nk(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Yr(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rn(e,t){for(t&=~dp,t&=~Xd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Gr(t),n=1<<r;e[r]=-1,t&=~n}}function Fg(e){if(Ie&6)throw Error(G(327));oi();var t=td(e,0);if(!(t&1))return ir(e,lt()),null;var r=yd(e,t);if(e.tag!==0&&r===2){var n=Jh(e);n!==0&&(t=n,r=Sm(e,n))}if(r===1)throw r=gl,ma(e,0),rn(e,t),ir(e,lt()),r;if(r===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yn(e,er,_s),ir(e,lt()),null}function hp(e,t){var r=Ie;Ie|=1;try{return e(t)}finally{Ie=r,Ie===0&&(Ii=lt()+500,Kd&&$n())}}function wa(e){pn!==null&&pn.tag===0&&!(Ie&6)&&oi();var t=Ie;Ie|=1;var r=Ar.transition,n=ze;try{if(Ar.transition=null,ze=1,e)return e()}finally{ze=n,Ar.transition=r,Ie=t,!(Ie&6)&&$n()}}function mp(){cr=ei.current,Xe(ei)}function ma(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,IS(r)),ht!==null)for(r=ht.return;r!==null;){var n=r;switch(Gf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&id();break;case 3:Ti(),Xe(nr),Xe(Ft),rp();break;case 5:tp(n);break;case 4:Ti();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:Jf(n.type._context);break;case 22:case 23:mp()}r=r.return}if(Nt=e,ht=e=_n(e.current,null),At=cr=t,xt=0,gl=null,dp=Xd=ba=0,er=qo=null,ra!==null){for(t=0;t<ra.length;t++)if(r=ra[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ra=null}return e}function Cb(e,t){do{var r=ht;try{if(Qf(),Fc.current=pd,fd){for(var n=st.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}fd=!1}if(ya=0,bt=pt=st=null,Bo=!1,fl=0,cp.current=null,r===null||r.return===null){xt=1,gl=t,ht=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=At,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var b=Sg(o);if(b!==null){b.flags&=-257,kg(b,o,l,i,t),b.mode&1&&_g(i,d,t),t=b,c=d;var w=t.updateQueue;if(w===null){var v=new Set;v.add(c),t.updateQueue=v}else w.add(c);break e}else{if(!(t&1)){_g(i,d,t),fp();break e}c=Error(G(426))}}else if(et&&l.mode&1){var y=Sg(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),kg(y,o,l,i,t),Kf(Di(c,l));break e}}i=c=Di(c,l),xt!==4&&(xt=2),qo===null?qo=[i]:qo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=db(i,c,t);vg(i,g);break e;case 1:l=c;var p=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(jn===null||!jn.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=ub(i,l,t);vg(i,N);break e}}i=i.return}while(i!==null)}Ab(r)}catch(j){t=j,ht===r&&r!==null&&(ht=r=r.return);continue}break}while(!0)}function Eb(){var e=xd.current;return xd.current=pd,e===null?pd:e}function fp(){(xt===0||xt===3||xt===2)&&(xt=4),Nt===null||!(ba&268435455)&&!(Xd&268435455)||rn(Nt,At)}function yd(e,t){var r=Ie;Ie|=2;var n=Eb();(Nt!==e||At!==t)&&(_s=null,ma(e,t));do try{ak();break}catch(a){Cb(e,a)}while(!0);if(Qf(),Ie=r,xd.current=n,ht!==null)throw Error(G(261));return Nt=null,At=0,xt}function ak(){for(;ht!==null;)Pb(ht)}function ik(){for(;ht!==null&&!R2();)Pb(ht)}function Pb(e){var t=Tb(e.alternate,e,cr);e.memoizedProps=e.pendingProps,t===null?Ab(e):ht=t,cp.current=null}function Ab(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=ZS(r,t),r!==null){r.flags&=32767,ht=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,ht=null;return}}else if(r=XS(r,t,cr),r!==null){ht=r;return}if(t=t.sibling,t!==null){ht=t;return}ht=t=e}while(t!==null);xt===0&&(xt=5)}function Yn(e,t,r){var n=ze,a=Ar.transition;try{Ar.transition=null,ze=1,ok(e,t,r,n)}finally{Ar.transition=a,ze=n}return null}function ok(e,t,r,n){do oi();while(pn!==null);if(Ie&6)throw Error(G(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(z2(e,i),e===Nt&&(ht=Nt=null,At=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pc||(pc=!0,Db(ed,function(){return oi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ar.transition,Ar.transition=null;var o=ze;ze=1;var l=Ie;Ie|=4,cp.current=null,tk(e,r),_b(r,e),CS(sm),rd=!!rm,sm=rm=null,e.current=r,rk(r),T2(),Ie=l,ze=o,Ar.transition=i}else e.current=r;if(pc&&(pc=!1,pn=e,vd=a),i=e.pendingLanes,i===0&&(jn=null),O2(r.stateNode),ir(e,lt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(gd)throw gd=!1,e=Nm,Nm=null,e;return vd&1&&e.tag!==0&&oi(),i=e.pendingLanes,i&1?e===_m?Vo++:(Vo=0,_m=e):Vo=0,$n(),null}function oi(){if(pn!==null){var e=dy(vd),t=Ar.transition,r=ze;try{if(Ar.transition=null,ze=16>e?16:e,pn===null)var n=!1;else{if(e=pn,pn=null,vd=0,Ie&6)throw Error(G(331));var a=Ie;for(Ie|=4,oe=e.current;oe!==null;){var i=oe,o=i.child;if(oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(oe=d;oe!==null;){var u=oe;switch(u.tag){case 0:case 11:case 15:Wo(8,u,i)}var m=u.child;if(m!==null)m.return=u,oe=m;else for(;oe!==null;){u=oe;var h=u.sibling,b=u.return;if(wb(u),u===d){oe=null;break}if(h!==null){h.return=b,oe=h;break}oe=b}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}oe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,oe=o;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wo(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,oe=g;break e}oe=i.return}}var p=e.current;for(oe=p;oe!==null;){o=oe;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,oe=x;else e:for(o=p;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jd(9,l)}}catch(j){it(l,l.return,j)}if(l===o){oe=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,oe=N;break e}oe=l.return}}if(Ie=a,$n(),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(Wd,e)}catch{}n=!0}return n}finally{ze=r,Ar.transition=t}}return!1}function $g(e,t,r){t=Di(r,t),t=db(e,t,1),e=wn(e,t,1),t=Kt(),e!==null&&(Ol(e,1,t),ir(e,t))}function it(e,t,r){if(e.tag===3)$g(e,e,r);else for(;t!==null;){if(t.tag===3){$g(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jn===null||!jn.has(n))){e=Di(r,e),e=ub(t,e,1),t=wn(t,e,1),e=Kt(),t!==null&&(Ol(t,1,e),ir(t,e));break}}t=t.return}}function lk(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Kt(),e.pingedLanes|=e.suspendedLanes&r,Nt===e&&(At&r)===r&&(xt===4||xt===3&&(At&130023424)===At&&500>lt()-up?ma(e,0):dp|=r),ir(e,t)}function Rb(e,t){t===0&&(e.mode&1?(t=ac,ac<<=1,!(ac&130023424)&&(ac=4194304)):t=1);var r=Kt();e=Ls(e,t),e!==null&&(Ol(e,t,r),ir(e,r))}function ck(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Rb(e,r)}function dk(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(G(314))}n!==null&&n.delete(t),Rb(e,r)}var Tb;Tb=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||nr.current)rr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return rr=!1,JS(e,t,r);rr=!!(e.flags&131072)}else rr=!1,et&&t.flags&1048576&&Ly(t,cd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Uc(e,t),e=t.pendingProps;var a=Pi(t,Ft.current);ii(t,r),a=np(null,t,n,e,a,r);var i=ap();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ar(n)?(i=!0,od(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Zf(t),a.updater=Qd,t.stateNode=a,a._reactInternals=t,hm(t,n,e,r),t=pm(null,t,n,!0,i,r)):(t.tag=0,et&&i&&Hf(t),Bt(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Uc(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=hk(n),e=Ur(n,e),a){case 0:t=fm(null,t,n,e,r);break e;case 1:t=Pg(null,t,n,e,r);break e;case 11:t=Cg(null,t,n,e,r);break e;case 14:t=Eg(null,t,n,Ur(n.type,e),r);break e}throw Error(G(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ur(n,a),fm(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ur(n,a),Pg(e,t,n,a,r);case 3:e:{if(pb(t),e===null)throw Error(G(387));n=t.pendingProps,i=t.memoizedState,a=i.element,By(e,t),hd(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Di(Error(G(423)),t),t=Ag(e,t,n,r,a);break e}else if(n!==a){a=Di(Error(G(424)),t),t=Ag(e,t,n,r,a);break e}else for(ur=bn(t.stateNode.containerInfo.firstChild),fr=t,et=!0,qr=null,r=Uy(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ai(),n===a){t=Ms(e,t,r);break e}Bt(e,t,n,r)}t=t.child}return t;case 5:return Wy(t),e===null&&cm(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,nm(n,a)?o=null:i!==null&&nm(n,i)&&(t.flags|=32),fb(e,t),Bt(e,t,o,r),t.child;case 6:return e===null&&cm(t),null;case 13:return xb(e,t,r);case 4:return ep(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ri(t,null,n,r):Bt(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ur(n,a),Cg(e,t,n,a,r);case 7:return Bt(e,t,t.pendingProps,r),t.child;case 8:return Bt(e,t,t.pendingProps.children,r),t.child;case 12:return Bt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ge(dd,n._currentValue),n._currentValue=o,i!==null)if(Yr(i.value,o)){if(i.children===a.children&&!nr.current){t=Ms(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ts(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),dm(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(G(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),dm(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Bt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ii(t,r),a=Tr(a),n=n(a),t.flags|=1,Bt(e,t,n,r),t.child;case 14:return n=t.type,a=Ur(n,t.pendingProps),a=Ur(n.type,a),Eg(e,t,n,a,r);case 15:return hb(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ur(n,a),Uc(e,t),t.tag=1,ar(n)?(e=!0,od(t)):e=!1,ii(t,r),cb(t,n,a),hm(t,n,a,r),pm(null,t,n,!0,e,r);case 19:return gb(e,t,r);case 22:return mb(e,t,r)}throw Error(G(156,t.tag))};function Db(e,t){return iy(e,t)}function uk(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(e,t,r,n){return new uk(e,t,r,n)}function pp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hk(e){if(typeof e=="function")return pp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===If)return 11;if(e===Of)return 14}return 2}function _n(e,t){var r=e.alternate;return r===null?(r=Cr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Wc(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")pp(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case qa:return fa(r.children,a,i,t);case Df:o=8,a|=8;break;case Lh:return e=Cr(12,r,t,a|2),e.elementType=Lh,e.lanes=i,e;case Mh:return e=Cr(13,r,t,a),e.elementType=Mh,e.lanes=i,e;case Fh:return e=Cr(19,r,t,a),e.elementType=Fh,e.lanes=i,e;case Wv:return Zd(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zv:o=10;break e;case Bv:o=9;break e;case If:o=11;break e;case Of:o=14;break e;case Xs:o=16,n=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Cr(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function fa(e,t,r,n){return e=Cr(7,e,n,t),e.lanes=r,e}function Zd(e,t,r,n){return e=Cr(22,e,n,t),e.elementType=Wv,e.lanes=r,e.stateNode={isHidden:!1},e}function oh(e,t,r){return e=Cr(6,e,null,t),e.lanes=r,e}function lh(e,t,r){return t=Cr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mk(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bu(0),this.expirationTimes=Bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bu(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function xp(e,t,r,n,a,i,o,l,c){return e=new mk(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Cr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zf(i),e}function fk(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wa,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Ib(e){if(!e)return En;e=e._reactInternals;e:{if(Ca(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ar(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var r=e.type;if(ar(r))return Iy(e,r,t)}return t}function Ob(e,t,r,n,a,i,o,l,c){return e=xp(r,n,!0,e,a,i,o,l,c),e.context=Ib(null),r=e.current,n=Kt(),a=Nn(r),i=Ts(n,a),i.callback=t??null,wn(r,i,a),e.current.lanes=a,Ol(e,a,n),ir(e,n),e}function eu(e,t,r,n){var a=t.current,i=Kt(),o=Nn(a);return r=Ib(r),t.context===null?t.context=r:t.pendingContext=r,t=Ts(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=wn(a,t,o),e!==null&&(Kr(e,a,o,i),Mc(e,a,o)),o}function bd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ug(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gp(e,t){Ug(e,t),(e=e.alternate)&&Ug(e,t)}function pk(){return null}var Lb=typeof reportError=="function"?reportError:function(e){console.error(e)};function vp(e){this._internalRoot=e}tu.prototype.render=vp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));eu(e,t,null,null)};tu.prototype.unmount=vp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wa(function(){eu(null,e,null,null)}),t[Os]=null}};function tu(e){this._internalRoot=e}tu.prototype.unstable_scheduleHydration=function(e){if(e){var t=my();e={blockedOn:null,target:e,priority:t};for(var r=0;r<tn.length&&t!==0&&t<tn[r].priority;r++);tn.splice(r,0,e),r===0&&py(e)}};function yp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ru(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function zg(){}function xk(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=bd(o);i.call(d)}}var o=Ob(t,n,e,0,null,!1,!1,"",zg);return e._reactRootContainer=o,e[Os]=o.current,cl(e.nodeType===8?e.parentNode:e),wa(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=bd(c);l.call(d)}}var c=xp(e,0,!1,null,null,!1,!1,"",zg);return e._reactRootContainer=c,e[Os]=c.current,cl(e.nodeType===8?e.parentNode:e),wa(function(){eu(t,c,r,n)}),c}function su(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=bd(o);l.call(c)}}eu(t,o,e,a)}else o=xk(r,t,e,a,n);return bd(o)}uy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ro(t.pendingLanes);r!==0&&(Ff(t,r|1),ir(t,lt()),!(Ie&6)&&(Ii=lt()+500,$n()))}break;case 13:wa(function(){var n=Ls(e,1);if(n!==null){var a=Kt();Kr(n,e,1,a)}}),gp(e,1)}};$f=function(e){if(e.tag===13){var t=Ls(e,134217728);if(t!==null){var r=Kt();Kr(t,e,134217728,r)}gp(e,134217728)}};hy=function(e){if(e.tag===13){var t=Nn(e),r=Ls(e,t);if(r!==null){var n=Kt();Kr(r,e,t,n)}gp(e,t)}};my=function(){return ze};fy=function(e,t){var r=ze;try{return ze=e,t()}finally{ze=r}};Kh=function(e,t,r){switch(t){case"input":if(zh(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Gd(n);if(!a)throw Error(G(90));Vv(n),zh(n,a)}}}break;case"textarea":Gv(e,r);break;case"select":t=r.value,t!=null&&ri(e,!!r.multiple,t,!1)}};ey=hp;ty=wa;var gk={usingClientEntryPoint:!1,Events:[Ml,Ka,Gd,Xv,Zv,hp]},yo={findFiberByHostInstance:ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vk={bundleType:yo.bundleType,version:yo.version,rendererPackageName:yo.rendererPackageName,rendererConfig:yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ny(e),e===null?null:e.stateNode},findFiberByHostInstance:yo.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{Wd=xc.inject(vk),ds=xc}catch{}}vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gk;vr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yp(t))throw Error(G(200));return fk(e,t,null,r)};vr.createRoot=function(e,t){if(!yp(e))throw Error(G(299));var r=!1,n="",a=Lb;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=xp(e,1,!1,null,null,r,!1,n,a),e[Os]=t.current,cl(e.nodeType===8?e.parentNode:e),new vp(t)};vr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=ny(t),e=e===null?null:e.stateNode,e};vr.flushSync=function(e){return wa(e)};vr.hydrate=function(e,t,r){if(!ru(t))throw Error(G(200));return su(null,e,t,!0,r)};vr.hydrateRoot=function(e,t,r){if(!yp(e))throw Error(G(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Lb;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Ob(t,null,e,1,r??null,a,!1,i,o),e[Os]=t.current,cl(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new tu(t)};vr.render=function(e,t,r){if(!ru(t))throw Error(G(200));return su(null,e,t,!1,r)};vr.unmountComponentAtNode=function(e){if(!ru(e))throw Error(G(40));return e._reactRootContainer?(wa(function(){su(null,null,e,!1,function(){e._reactRootContainer=null,e[Os]=null})}),!0):!1};vr.unstable_batchedUpdates=hp;vr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ru(r))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return su(e,t,r,!1,n)};vr.version="18.3.1-next-f1338f8080-20240426";function Mb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mb)}catch(e){console.error(e)}}Mb(),Mv.exports=vr;var Xi=Mv.exports;const yk=_v(Xi);var Fb,Bg=Xi;Fb=Bg.createRoot,Bg.hydrateRoot;var $l=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ja=typeof window>"u"||"Deno"in globalThis;function _r(){}function bk(e,t){return typeof e=="function"?e(t):e}function Cm(e){return typeof e=="number"&&e>=0&&e!==1/0}function $b(e,t){return Math.max(e+(t||0)-Date.now(),0)}function li(e,t){return typeof e=="function"?e(t):e}function Vr(e,t){return typeof e=="function"?e(t):e}function Wg(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==bp(o,t.options))return!1}else if(!yl(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function qg(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(vl(t.options.mutationKey)!==vl(i))return!1}else if(!yl(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function bp(e,t){return((t==null?void 0:t.queryKeyHashFn)||vl)(e)}function vl(e){return JSON.stringify(e,(t,r)=>Pm(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function yl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!yl(e[r],t[r])):!1}function Ub(e,t){if(e===t)return e;const r=Vg(e)&&Vg(t);if(r||Pm(e)&&Pm(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d];(!r&&n.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=Ub(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function Em(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Vg(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Pm(e){if(!Hg(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Hg(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Hg(e){return Object.prototype.toString.call(e)==="[object Object]"}function wk(e){return new Promise(t=>{setTimeout(t,e)})}function Am(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Ub(e,t):t}function jk(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Nk(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var wp=Symbol();function zb(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===wp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ia,on,pi,pv,_k=(pv=class extends $l{constructor(){super();ge(this,ia);ge(this,on);ge(this,pi);le(this,pi,t=>{if(!ja&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){R(this,on)||this.setEventListener(R(this,pi))}onUnsubscribe(){var t;this.hasListeners()||((t=R(this,on))==null||t.call(this),le(this,on,void 0))}setEventListener(t){var r;le(this,pi,t),(r=R(this,on))==null||r.call(this),le(this,on,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){R(this,ia)!==t&&(le(this,ia,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof R(this,ia)=="boolean"?R(this,ia):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ia=new WeakMap,on=new WeakMap,pi=new WeakMap,pv),jp=new _k,xi,ln,gi,xv,Sk=(xv=class extends $l{constructor(){super();ge(this,xi,!0);ge(this,ln);ge(this,gi);le(this,gi,t=>{if(!ja&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){R(this,ln)||this.setEventListener(R(this,gi))}onUnsubscribe(){var t;this.hasListeners()||((t=R(this,ln))==null||t.call(this),le(this,ln,void 0))}setEventListener(t){var r;le(this,gi,t),(r=R(this,ln))==null||r.call(this),le(this,ln,t(this.setOnline.bind(this)))}setOnline(t){R(this,xi)!==t&&(le(this,xi,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return R(this,xi)}},xi=new WeakMap,ln=new WeakMap,gi=new WeakMap,xv),wd=new Sk;function Rm(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function kk(e){return Math.min(1e3*2**e,3e4)}function Bb(e){return(e??"online")==="online"?wd.isOnline():!0}var Wb=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ch(e){return e instanceof Wb}function qb(e){let t=!1,r=0,n=!1,a;const i=Rm(),o=v=>{var y;n||(h(new Wb(v)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>jp.isFocused()&&(e.networkMode==="always"||wd.isOnline())&&e.canRun(),u=()=>Bb(e.networkMode)&&e.canRun(),m=v=>{var y;n||(n=!0,(y=e.onSuccess)==null||y.call(e,v),a==null||a(),i.resolve(v))},h=v=>{var y;n||(n=!0,(y=e.onError)==null||y.call(e,v),a==null||a(),i.reject(v))},b=()=>new Promise(v=>{var y;a=g=>{(n||d())&&v(g)},(y=e.onPause)==null||y.call(e)}).then(()=>{var v;a=void 0,n||(v=e.onContinue)==null||v.call(e)}),w=()=>{if(n)return;let v;const y=r===0?e.initialPromise:void 0;try{v=y??e.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(m).catch(g=>{var k;if(n)return;const p=e.retry??(ja?0:3),x=e.retryDelay??kk,N=typeof x=="function"?x(r,g):x,j=p===!0||typeof p=="number"&&r<p||typeof p=="function"&&p(r,g);if(t||!j){h(g);return}r++,(k=e.onFail)==null||k.call(e,r,g),wk(N).then(()=>d()?void 0:b()).then(()=>{t?h(g):w()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?w():b().then(w),i)}}function Ck(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=l=>setTimeout(l,0);const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Et=Ck(),oa,gv,Vb=(gv=class{constructor(){ge(this,oa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cm(this.gcTime)&&le(this,oa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ja?1/0:5*60*1e3))}clearGcTimeout(){R(this,oa)&&(clearTimeout(R(this,oa)),le(this,oa,void 0))}},oa=new WeakMap,gv),vi,yi,Nr,Lt,Al,la,zr,js,vv,Ek=(vv=class extends Vb{constructor(t){super();ge(this,zr);ge(this,vi);ge(this,yi);ge(this,Nr);ge(this,Lt);ge(this,Al);ge(this,la);le(this,la,!1),le(this,Al,t.defaultOptions),this.setOptions(t.options),this.observers=[],le(this,Nr,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,le(this,vi,Pk(this.options)),this.state=t.state??R(this,vi),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=R(this,Lt))==null?void 0:t.promise}setOptions(t){this.options={...R(this,Al),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,Nr).remove(this)}setData(t,r){const n=Am(this.state.data,t,this.options);return Pe(this,zr,js).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Pe(this,zr,js).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=R(this,Lt))==null?void 0:n.promise;return(a=R(this,Lt))==null||a.cancel(t),r?r.then(_r).catch(_r):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,vi))}isActive(){return this.observers.some(t=>Vr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!$b(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=R(this,Lt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=R(this,Lt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),R(this,Nr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(R(this,Lt)&&(R(this,la)?R(this,Lt).cancel({revert:!0}):R(this,Lt).cancelRetry()),this.scheduleGc()),R(this,Nr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Pe(this,zr,js).call(this,{type:"invalidate"})}fetch(t,r){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(R(this,Lt))return R(this,Lt).continueRetry(),R(this,Lt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(h=>h.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(le(this,la,!0),n.signal)})},i=()=>{const m=zb(this.options,r),h={queryKey:this.queryKey,meta:this.meta};return a(h),le(this,la,!1),this.options.persister?this.options.persister(m,h,this):m(h)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),le(this,yi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Pe(this,zr,js).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=m=>{var h,b,w,v;ch(m)&&m.silent||Pe(this,zr,js).call(this,{type:"error",error:m}),ch(m)||((b=(h=R(this,Nr).config).onError)==null||b.call(h,m,this),(v=(w=R(this,Nr).config).onSettled)==null||v.call(w,this.state.data,m,this)),this.scheduleGc()};return le(this,Lt,qb({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var h,b,w,v;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){l(y);return}(b=(h=R(this,Nr).config).onSuccess)==null||b.call(h,m,this),(v=(w=R(this,Nr).config).onSettled)==null||v.call(w,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,h)=>{Pe(this,zr,js).call(this,{type:"failed",failureCount:m,error:h})},onPause:()=>{Pe(this,zr,js).call(this,{type:"pause"})},onContinue:()=>{Pe(this,zr,js).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),R(this,Lt).start()}},vi=new WeakMap,yi=new WeakMap,Nr=new WeakMap,Lt=new WeakMap,Al=new WeakMap,la=new WeakMap,zr=new WeakSet,js=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Hb(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return ch(a)&&a.revert&&R(this,yi)?{...R(this,yi),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Et.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),R(this,Nr).notify({query:this,type:"updated",action:t})})},vv);function Hb(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Bb(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Pk(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ss,yv,Ak=(yv=class extends $l{constructor(t={}){super();ge(this,ss);this.config=t,le(this,ss,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??bp(a,r);let o=this.get(i);return o||(o=new Ek({cache:this,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){R(this,ss).has(t.queryHash)||(R(this,ss).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=R(this,ss).get(t.queryHash);r&&(t.destroy(),r===t&&R(this,ss).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Et.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return R(this,ss).get(t)}getAll(){return[...R(this,ss).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Wg(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Wg(t,n)):r}notify(t){Et.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Et.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Et.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ss=new WeakMap,yv),ns,Ut,ca,as,Ys,bv,Rk=(bv=class extends Vb{constructor(t){super();ge(this,as);ge(this,ns);ge(this,Ut);ge(this,ca);this.mutationId=t.mutationId,le(this,Ut,t.mutationCache),le(this,ns,[]),this.state=t.state||Tk(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){R(this,ns).includes(t)||(R(this,ns).push(t),this.clearGcTimeout(),R(this,Ut).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){le(this,ns,R(this,ns).filter(r=>r!==t)),this.scheduleGc(),R(this,Ut).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){R(this,ns).length||(this.state.status==="pending"?this.scheduleGc():R(this,Ut).remove(this))}continue(){var t;return((t=R(this,ca))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,o,l,c,d,u,m,h,b,w,v,y,g,p,x,N,j,k,S;le(this,ca,qb({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(_,C)=>{Pe(this,as,Ys).call(this,{type:"failed",failureCount:_,error:C})},onPause:()=>{Pe(this,as,Ys).call(this,{type:"pause"})},onContinue:()=>{Pe(this,as,Ys).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Ut).canRun(this)}));const r=this.state.status==="pending",n=!R(this,ca).canStart();try{if(!r){Pe(this,as,Ys).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(a=R(this,Ut).config).onMutate)==null?void 0:i.call(a,t,this));const C=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));C!==this.state.context&&Pe(this,as,Ys).call(this,{type:"pending",context:C,variables:t,isPaused:n})}const _=await R(this,ca).start();return await((d=(c=R(this,Ut).config).onSuccess)==null?void 0:d.call(c,_,t,this.state.context,this)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,_,t,this.state.context)),await((b=(h=R(this,Ut).config).onSettled)==null?void 0:b.call(h,_,null,this.state.variables,this.state.context,this)),await((v=(w=this.options).onSettled)==null?void 0:v.call(w,_,null,t,this.state.context)),Pe(this,as,Ys).call(this,{type:"success",data:_}),_}catch(_){try{throw await((g=(y=R(this,Ut).config).onError)==null?void 0:g.call(y,_,t,this.state.context,this)),await((x=(p=this.options).onError)==null?void 0:x.call(p,_,t,this.state.context)),await((j=(N=R(this,Ut).config).onSettled)==null?void 0:j.call(N,void 0,_,this.state.variables,this.state.context,this)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,void 0,_,t,this.state.context)),_}finally{Pe(this,as,Ys).call(this,{type:"error",error:_})}}finally{R(this,Ut).runNext(this)}}},ns=new WeakMap,Ut=new WeakMap,ca=new WeakMap,as=new WeakSet,Ys=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Et.batch(()=>{R(this,ns).forEach(n=>{n.onMutationUpdate(t)}),R(this,Ut).notify({mutation:this,type:"updated",action:t})})},bv);function Tk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var lr,Rl,wv,Dk=(wv=class extends $l{constructor(t={}){super();ge(this,lr);ge(this,Rl);this.config=t,le(this,lr,new Map),le(this,Rl,Date.now())}build(t,r,n){const a=new Rk({mutationCache:this,mutationId:++Zl(this,Rl)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){const r=gc(t),n=R(this,lr).get(r)??[];n.push(t),R(this,lr).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=gc(t);if(R(this,lr).has(r)){const a=(n=R(this,lr).get(r))==null?void 0:n.filter(i=>i!==t);a&&(a.length===0?R(this,lr).delete(r):R(this,lr).set(r,a))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=R(this,lr).get(gc(t)))==null?void 0:n.find(a=>a.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=R(this,lr).get(gc(t)))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Et.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...R(this,lr).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>qg(r,n))}findAll(t={}){return this.getAll().filter(r=>qg(t,r))}notify(t){Et.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Et.batch(()=>Promise.all(t.map(r=>r.continue().catch(_r))))}},lr=new WeakMap,Rl=new WeakMap,wv);function gc(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Gg(e){return{onFetch:(t,r)=>{var u,m,h,b,w;const n=t.options,a=(h=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:h.direction,i=((b=t.state.data)==null?void 0:b.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const y=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=zb(t.options,t.fetchOptions),p=async(x,N,j)=>{if(v)return Promise.reject();if(N==null&&x.pages.length)return Promise.resolve(x);const k={queryKey:t.queryKey,pageParam:N,direction:j?"backward":"forward",meta:t.options.meta};y(k);const S=await g(k),{maxPages:_}=t.options,C=j?Nk:jk;return{pages:C(x.pages,S,_),pageParams:C(x.pageParams,N,_)}};if(a&&i.length){const x=a==="backward",N=x?Ik:Kg,j={pages:i,pageParams:o},k=N(n,j);l=await p(j,k,x)}else{const x=e??i.length;do{const N=c===0?o[0]??n.initialPageParam:Kg(n,l);if(c>0&&N==null)break;l=await p(l,N),c++}while(c<x)}return l};t.options.persister?t.fetchFn=()=>{var v,y;return(y=(v=t.options).persister)==null?void 0:y.call(v,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function Kg(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Ik(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var at,cn,dn,bi,wi,un,ji,Ni,jv,Ok=(jv=class{constructor(e={}){ge(this,at);ge(this,cn);ge(this,dn);ge(this,bi);ge(this,wi);ge(this,un);ge(this,ji);ge(this,Ni);le(this,at,e.queryCache||new Ak),le(this,cn,e.mutationCache||new Dk),le(this,dn,e.defaultOptions||{}),le(this,bi,new Map),le(this,wi,new Map),le(this,un,0)}mount(){Zl(this,un)._++,R(this,un)===1&&(le(this,ji,jp.subscribe(async e=>{e&&(await this.resumePausedMutations(),R(this,at).onFocus())})),le(this,Ni,wd.subscribe(async e=>{e&&(await this.resumePausedMutations(),R(this,at).onOnline())})))}unmount(){var e,t;Zl(this,un)._--,R(this,un)===0&&((e=R(this,ji))==null||e.call(this),le(this,ji,void 0),(t=R(this,Ni))==null||t.call(this),le(this,Ni,void 0))}isFetching(e){return R(this,at).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return R(this,cn).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=R(this,at).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=R(this,at).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(li(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return R(this,at).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=R(this,at).get(n.queryHash),i=a==null?void 0:a.state.data,o=bk(t,i);if(o!==void 0)return R(this,at).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Et.batch(()=>R(this,at).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=R(this,at).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=R(this,at);Et.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=R(this,at),n={type:"active",...e};return Et.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=Et.batch(()=>R(this,at).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(_r).catch(_r)}invalidateQueries(e={},t={}){return Et.batch(()=>{if(R(this,at).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=Et.batch(()=>R(this,at).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(_r)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(_r)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=R(this,at).build(this,t);return r.isStaleByTime(li(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(_r).catch(_r)}fetchInfiniteQuery(e){return e.behavior=Gg(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(_r).catch(_r)}ensureInfiniteQueryData(e){return e.behavior=Gg(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return wd.isOnline()?R(this,cn).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,at)}getMutationCache(){return R(this,cn)}getDefaultOptions(){return R(this,dn)}setDefaultOptions(e){le(this,dn,e)}setQueryDefaults(e,t){R(this,bi).set(vl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...R(this,bi).values()];let r={};return t.forEach(n=>{yl(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){R(this,wi).set(vl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...R(this,wi).values()];let r={};return t.forEach(n=>{yl(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...R(this,dn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=bp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===wp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...R(this,dn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){R(this,at).clear(),R(this,cn).clear()}},at=new WeakMap,cn=new WeakMap,dn=new WeakMap,bi=new WeakMap,wi=new WeakMap,un=new WeakMap,ji=new WeakMap,Ni=new WeakMap,jv),Xt,Ae,Tl,zt,da,_i,hn,is,Dl,Si,ki,ua,ha,mn,Ci,Ue,Do,Tm,Dm,Im,Om,Lm,Mm,Fm,Gb,Nv,Lk=(Nv=class extends $l{constructor(t,r){super();ge(this,Ue);ge(this,Xt);ge(this,Ae);ge(this,Tl);ge(this,zt);ge(this,da);ge(this,_i);ge(this,hn);ge(this,is);ge(this,Dl);ge(this,Si);ge(this,ki);ge(this,ua);ge(this,ha);ge(this,mn);ge(this,Ci,new Set);this.options=r,le(this,Xt,t),le(this,is,null),le(this,hn,Rm()),this.options.experimental_prefetchInRender||R(this,hn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,Ae).addObserver(this),Yg(R(this,Ae),this.options)?Pe(this,Ue,Do).call(this):this.updateResult(),Pe(this,Ue,Om).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $m(R(this,Ae),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $m(R(this,Ae),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Pe(this,Ue,Lm).call(this),Pe(this,Ue,Mm).call(this),R(this,Ae).removeObserver(this)}setOptions(t,r){const n=this.options,a=R(this,Ae);if(this.options=R(this,Xt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vr(this.options.enabled,R(this,Ae))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Pe(this,Ue,Fm).call(this),R(this,Ae).setOptions(this.options),n._defaulted&&!Em(this.options,n)&&R(this,Xt).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,Ae),observer:this});const i=this.hasListeners();i&&Qg(R(this,Ae),a,this.options,n)&&Pe(this,Ue,Do).call(this),this.updateResult(r),i&&(R(this,Ae)!==a||Vr(this.options.enabled,R(this,Ae))!==Vr(n.enabled,R(this,Ae))||li(this.options.staleTime,R(this,Ae))!==li(n.staleTime,R(this,Ae)))&&Pe(this,Ue,Tm).call(this);const o=Pe(this,Ue,Dm).call(this);i&&(R(this,Ae)!==a||Vr(this.options.enabled,R(this,Ae))!==Vr(n.enabled,R(this,Ae))||o!==R(this,mn))&&Pe(this,Ue,Im).call(this,o)}getOptimisticResult(t){const r=R(this,Xt).getQueryCache().build(R(this,Xt),t),n=this.createResult(r,t);return Fk(this,n)&&(le(this,zt,n),le(this,_i,this.options),le(this,da,R(this,Ae).state)),n}getCurrentResult(){return R(this,zt)}trackResult(t,r){const n={};return Object.keys(t).forEach(a=>{Object.defineProperty(n,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),r==null||r(a),t[a])})}),n}trackProp(t){R(this,Ci).add(t)}getCurrentQuery(){return R(this,Ae)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=R(this,Xt).defaultQueryOptions(t),n=R(this,Xt).getQueryCache().build(R(this,Xt),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Pe(this,Ue,Do).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,zt)))}createResult(t,r){var _;const n=R(this,Ae),a=this.options,i=R(this,zt),o=R(this,da),l=R(this,_i),d=t!==n?t.state:R(this,Tl),{state:u}=t;let m={...u},h=!1,b;if(r._optimisticResults){const C=this.hasListeners(),E=!C&&Yg(t,r),$=C&&Qg(t,n,r,a);(E||$)&&(m={...m,...Hb(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:w,errorUpdatedAt:v,status:y}=m;if(r.select&&m.data!==void 0)if(i&&m.data===(o==null?void 0:o.data)&&r.select===R(this,Dl))b=R(this,Si);else try{le(this,Dl,r.select),b=r.select(m.data),b=Am(i==null?void 0:i.data,b,r),le(this,Si,b),le(this,is,null)}catch(C){le(this,is,C)}else b=m.data;if(r.placeholderData!==void 0&&b===void 0&&y==="pending"){let C;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))C=i.data;else if(C=typeof r.placeholderData=="function"?r.placeholderData((_=R(this,ki))==null?void 0:_.state.data,R(this,ki)):r.placeholderData,r.select&&C!==void 0)try{C=r.select(C),le(this,is,null)}catch(E){le(this,is,E)}C!==void 0&&(y="success",b=Am(i==null?void 0:i.data,C,r),h=!0)}R(this,is)&&(w=R(this,is),b=R(this,Si),v=Date.now(),y="error");const g=m.fetchStatus==="fetching",p=y==="pending",x=y==="error",N=p&&g,j=b!==void 0,S={status:y,fetchStatus:m.fetchStatus,isPending:p,isSuccess:y==="success",isError:x,isInitialLoading:N,isLoading:N,data:b,dataUpdatedAt:m.dataUpdatedAt,error:w,errorUpdatedAt:v,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:g,isRefetching:g&&!p,isLoadingError:x&&!j,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:x&&j,isStale:Np(t,r),refetch:this.refetch,promise:R(this,hn)};if(this.options.experimental_prefetchInRender){const C=D=>{S.status==="error"?D.reject(S.error):S.data!==void 0&&D.resolve(S.data)},E=()=>{const D=le(this,hn,S.promise=Rm());C(D)},$=R(this,hn);switch($.status){case"pending":t.queryHash===n.queryHash&&C($);break;case"fulfilled":(S.status==="error"||S.data!==$.value)&&E();break;case"rejected":(S.status!=="error"||S.error!==$.reason)&&E();break}}return S}updateResult(t){const r=R(this,zt),n=this.createResult(R(this,Ae),this.options);if(le(this,da,R(this,Ae).state),le(this,_i,this.options),R(this,da).data!==void 0&&le(this,ki,R(this,Ae)),Em(n,r))return;le(this,zt,n);const a={},i=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!R(this,Ci).size)return!0;const c=new Set(l??R(this,Ci));return this.options.throwOnError&&c.add("error"),Object.keys(R(this,zt)).some(d=>{const u=d;return R(this,zt)[u]!==r[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&i()&&(a.listeners=!0),Pe(this,Ue,Gb).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Pe(this,Ue,Om).call(this)}},Xt=new WeakMap,Ae=new WeakMap,Tl=new WeakMap,zt=new WeakMap,da=new WeakMap,_i=new WeakMap,hn=new WeakMap,is=new WeakMap,Dl=new WeakMap,Si=new WeakMap,ki=new WeakMap,ua=new WeakMap,ha=new WeakMap,mn=new WeakMap,Ci=new WeakMap,Ue=new WeakSet,Do=function(t){Pe(this,Ue,Fm).call(this);let r=R(this,Ae).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(_r)),r},Tm=function(){Pe(this,Ue,Lm).call(this);const t=li(this.options.staleTime,R(this,Ae));if(ja||R(this,zt).isStale||!Cm(t))return;const n=$b(R(this,zt).dataUpdatedAt,t)+1;le(this,ua,setTimeout(()=>{R(this,zt).isStale||this.updateResult()},n))},Dm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,Ae)):this.options.refetchInterval)??!1},Im=function(t){Pe(this,Ue,Mm).call(this),le(this,mn,t),!(ja||Vr(this.options.enabled,R(this,Ae))===!1||!Cm(R(this,mn))||R(this,mn)===0)&&le(this,ha,setInterval(()=>{(this.options.refetchIntervalInBackground||jp.isFocused())&&Pe(this,Ue,Do).call(this)},R(this,mn)))},Om=function(){Pe(this,Ue,Tm).call(this),Pe(this,Ue,Im).call(this,Pe(this,Ue,Dm).call(this))},Lm=function(){R(this,ua)&&(clearTimeout(R(this,ua)),le(this,ua,void 0))},Mm=function(){R(this,ha)&&(clearInterval(R(this,ha)),le(this,ha,void 0))},Fm=function(){const t=R(this,Xt).getQueryCache().build(R(this,Xt),this.options);if(t===R(this,Ae))return;const r=R(this,Ae);le(this,Ae,t),le(this,Tl,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Gb=function(t){Et.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(R(this,zt))}),R(this,Xt).getQueryCache().notify({query:R(this,Ae),type:"observerResultsUpdated"})})},Nv);function Mk(e,t){return Vr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Yg(e,t){return Mk(e,t)||e.state.data!==void 0&&$m(e,t,t.refetchOnMount)}function $m(e,t,r){if(Vr(t.enabled,e)!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Np(e,t)}return!1}function Qg(e,t,r,n){return(e!==t||Vr(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Np(e,r)}function Np(e,t){return Vr(t.enabled,e)!==!1&&e.isStaleByTime(li(t.staleTime,e))}function Fk(e,t){return!Em(e.getCurrentResult(),t)}var Kb=f.createContext(void 0),$k=e=>{const t=f.useContext(Kb);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Uk=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Kb.Provider,{value:e,children:t})),Yb=f.createContext(!1),zk=()=>f.useContext(Yb);Yb.Provider;function Bk(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Wk=f.createContext(Bk()),qk=()=>f.useContext(Wk);function Vk(e,t){return typeof e=="function"?e(...t):!!e}function Hk(){}var Gk=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Kk=e=>{f.useEffect(()=>{e.clearReset()},[e])},Yk=({result:e,errorResetBoundary:t,throwOnError:r,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&Vk(r,[e.error,n]),Qk=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Jk=(e,t)=>e.isLoading&&e.isFetching&&!t,Xk=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Jg=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Zk(e,t,r){var u,m,h,b,w;const n=$k(),a=zk(),i=qk(),o=n.defaultQueryOptions(e);(m=(u=n.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||m.call(u,o),o._optimisticResults=a?"isRestoring":"optimistic",Qk(o),Gk(o,i),Kk(i);const l=!n.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new t(n,o)),d=c.getOptimisticResult(o);if(f.useSyncExternalStore(f.useCallback(v=>{const y=a?()=>{}:c.subscribe(Et.batchCalls(v));return c.updateResult(),y},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),Xk(o,d))throw Jg(o,c,i);if(Yk({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw d.error;if((b=(h=n.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||b.call(h,o,d),o.experimental_prefetchInRender&&!ja&&Jk(d,a)){const v=l?Jg(o,c,i):(w=n.getQueryCache().get(o.queryHash))==null?void 0:w.promise;v==null||v.catch(Hk).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function eC(e,t){return Zk(e,Lk)}/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bl.apply(this,arguments)}var xn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xn||(xn={}));const Xg="popstate";function tC(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Um("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:jd(a)}return sC(t,r,null,e)}function dt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rC(){return Math.random().toString(36).substr(2,8)}function Zg(e,t){return{usr:e.state,key:e.key,idx:t}}function Um(e,t,r,n){return r===void 0&&(r=null),bl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Zi(t):t,{state:r,key:t&&t.key||n||rC()})}function jd(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Zi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function sC(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=xn.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(bl({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=xn.Pop;let y=u(),g=y==null?null:y-d;d=y,c&&c({action:l,location:v.location,delta:g})}function h(y,g){l=xn.Push;let p=Um(v.location,y,g);d=u()+1;let x=Zg(p,d),N=v.createHref(p);try{o.pushState(x,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(N)}i&&c&&c({action:l,location:v.location,delta:1})}function b(y,g){l=xn.Replace;let p=Um(v.location,y,g);d=u();let x=Zg(p,d),N=v.createHref(p);o.replaceState(x,"",N),i&&c&&c({action:l,location:v.location,delta:0})}function w(y){let g=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof y=="string"?y:jd(y);return p=p.replace(/ $/,"%20"),dt(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let v={get action(){return l},get location(){return e(a,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Xg,m),c=y,()=>{a.removeEventListener(Xg,m),c=null}},createHref(y){return t(a,y)},createURL:w,encodeLocation(y){let g=w(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:b,go(y){return o.go(y)}};return v}var e0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(e0||(e0={}));function nC(e,t,r){return r===void 0&&(r="/"),aC(e,t,r,!1)}function aC(e,t,r,n){let a=typeof t=="string"?Zi(t):t,i=_p(a.pathname||"/",r);if(i==null)return null;let o=Jb(e);iC(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=gC(i);l=pC(o[c],d,n)}return l}function Jb(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(dt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Sn([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(dt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Jb(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:mC(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of Xb(i.path))a(i,o,c)}),t}function Xb(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Xb(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function iC(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:fC(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const oC=/^:[\w-]+$/,lC=3,cC=2,dC=1,uC=10,hC=-2,t0=e=>e==="*";function mC(e,t){let r=e.split("/"),n=r.length;return r.some(t0)&&(n+=hC),t&&(n+=cC),r.filter(a=>!t0(a)).reduce((a,i)=>a+(oC.test(i)?lC:i===""?dC:uC),n)}function fC(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function pC(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=r0({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m&&d&&r&&!n[n.length-1].route.index&&(m=r0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Sn([i,m.pathname]),pathnameBase:wC(Sn([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=Sn([i,m.pathnameBase]))}return o}function r0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=xC(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:h,isOptional:b}=u;if(h==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const w=l[m];return b&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function xC(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Qb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function gC(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _p(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function vC(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Zi(e):e;return{pathname:r?r.startsWith("/")?r:yC(r,t):t,search:jC(n),hash:NC(a)}}function yC(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function dh(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bC(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Sp(e,t){let r=bC(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function kp(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Zi(e):(a=bl({},e),dt(!a.pathname||!a.pathname.includes("?"),dh("?","pathname","search",a)),dt(!a.pathname||!a.pathname.includes("#"),dh("#","pathname","hash",a)),dt(!a.search||!a.search.includes("#"),dh("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let m=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}l=m>=0?t[m]:"/"}let c=vC(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Sn=e=>e.join("/").replace(/\/\/+/g,"/"),wC=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jC=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,NC=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _C(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Zb=["post","put","patch","delete"];new Set(Zb);const SC=["get",...Zb];new Set(SC);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wl.apply(this,arguments)}const Cp=f.createContext(null),kC=f.createContext(null),Un=f.createContext(null),nu=f.createContext(null),fs=f.createContext({outlet:null,matches:[],isDataRoute:!1}),ew=f.createContext(null);function CC(e,t){let{relative:r}=t===void 0?{}:t;eo()||dt(!1);let{basename:n,navigator:a}=f.useContext(Un),{hash:i,pathname:o,search:l}=rw(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Sn([n,o])),a.createHref({pathname:c,search:l,hash:i})}function eo(){return f.useContext(nu)!=null}function br(){return eo()||dt(!1),f.useContext(nu).location}function tw(e){f.useContext(Un).static||f.useLayoutEffect(e)}function Oe(){let{isDataRoute:e}=f.useContext(fs);return e?BC():EC()}function EC(){eo()||dt(!1);let e=f.useContext(Cp),{basename:t,future:r,navigator:n}=f.useContext(Un),{matches:a}=f.useContext(fs),{pathname:i}=br(),o=JSON.stringify(Sp(a,r.v7_relativeSplatPath)),l=f.useRef(!1);return tw(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=kp(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Sn([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}const PC=f.createContext(null);function AC(e){let t=f.useContext(fs).outlet;return t&&f.createElement(PC.Provider,{value:e},t)}function Ul(){let{matches:e}=f.useContext(fs),t=e[e.length-1];return t?t.params:{}}function rw(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=f.useContext(Un),{matches:a}=f.useContext(fs),{pathname:i}=br(),o=JSON.stringify(Sp(a,n.v7_relativeSplatPath));return f.useMemo(()=>kp(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function RC(e,t){return TC(e,t)}function TC(e,t,r,n){eo()||dt(!1);let{navigator:a}=f.useContext(Un),{matches:i}=f.useContext(fs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=br(),u;if(t){var m;let y=typeof t=="string"?Zi(t):t;c==="/"||(m=y.pathname)!=null&&m.startsWith(c)||dt(!1),u=y}else u=d;let h=u.pathname||"/",b=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");b="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=nC(e,{pathname:b}),v=MC(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Sn([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Sn([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&v?f.createElement(nu.Provider,{value:{location:wl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:xn.Pop}},v):v}function DC(){let e=zC(),t=_C(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),r?f.createElement("pre",{style:a},r):null,null)}const IC=f.createElement(DC,null);class OC extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?f.createElement(fs.Provider,{value:this.props.routeContext},f.createElement(ew.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LC(e){let{routeContext:t,match:r,children:n}=e,a=f.useContext(Cp);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(fs.Provider,{value:t},n)}function MC(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||dt(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:b}=r,w=m.route.loader&&h[m.route.id]===void 0&&(!b||b[m.route.id]===void 0);if(m.route.lazy||w){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,m,h)=>{let b,w=!1,v=null,y=null;r&&(b=l&&m.route.id?l[m.route.id]:void 0,v=m.route.errorElement||IC,c&&(d<0&&h===0?(w=!0,y=null):d===h&&(w=!0,y=m.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,h+1)),p=()=>{let x;return b?x=v:w?x=y:m.route.Component?x=f.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=u,f.createElement(LC,{match:m,routeContext:{outlet:u,matches:g,isDataRoute:r!=null},children:x})};return r&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?f.createElement(OC,{location:r.location,revalidation:r.revalidation,component:v,error:b,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var sw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(sw||{}),Nd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Nd||{});function FC(e){let t=f.useContext(Cp);return t||dt(!1),t}function $C(e){let t=f.useContext(kC);return t||dt(!1),t}function UC(e){let t=f.useContext(fs);return t||dt(!1),t}function nw(e){let t=UC(),r=t.matches[t.matches.length-1];return r.route.id||dt(!1),r.route.id}function zC(){var e;let t=f.useContext(ew),r=$C(Nd.UseRouteError),n=nw(Nd.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function BC(){let{router:e}=FC(sw.UseNavigateStable),t=nw(Nd.UseNavigateStable),r=f.useRef(!1);return tw(()=>{r.current=!0}),f.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,wl({fromRouteId:t},i)))},[e,t])}function aw(e){let{to:t,replace:r,state:n,relative:a}=e;eo()||dt(!1);let{future:i,static:o}=f.useContext(Un),{matches:l}=f.useContext(fs),{pathname:c}=br(),d=Oe(),u=kp(t,Sp(l,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:a}),[d,m,a,r,n]),null}function iw(e){return AC(e.context)}function ue(e){dt(!1)}function WC(e){let{basename:t="/",children:r=null,location:n,navigationType:a=xn.Pop,navigator:i,static:o=!1,future:l}=e;eo()&&dt(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:i,static:o,future:wl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Zi(n));let{pathname:u="/",search:m="",hash:h="",state:b=null,key:w="default"}=n,v=f.useMemo(()=>{let y=_p(u,c);return y==null?null:{location:{pathname:y,search:m,hash:h,state:b,key:w},navigationType:a}},[c,u,m,h,b,w,a]);return v==null?null:f.createElement(Un.Provider,{value:d},f.createElement(nu.Provider,{children:r,value:v}))}function qC(e){let{children:t,location:r}=e;return RC(zm(t),r)}new Promise(()=>{});function zm(e,t){t===void 0&&(t=[]);let r=[];return f.Children.forEach(e,(n,a)=>{if(!f.isValidElement(n))return;let i=[...t,a];if(n.type===f.Fragment){r.push.apply(r,zm(n.props.children,i));return}n.type!==ue&&dt(!1),!n.props.index||!n.props.children||dt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=zm(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bm.apply(this,arguments)}function VC(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function HC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GC(e,t){return e.button===0&&(!t||t==="_self")&&!HC(e)}function Wm(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function KC(e,t){let r=Wm(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const YC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QC="6";try{window.__reactRouterVersion=QC}catch{}const JC="startTransition",s0=Ov[JC];function XC(e){let{basename:t,children:r,future:n,window:a}=e,i=f.useRef();i.current==null&&(i.current=tC({window:a,v5Compat:!0}));let o=i.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=f.useCallback(m=>{d&&s0?s0(()=>c(m)):c(m)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.createElement(WC,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const ZC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=f.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,h=VC(t,YC),{basename:b}=f.useContext(Un),w,v=!1;if(typeof d=="string"&&eE.test(d)&&(w=d,ZC))try{let x=new URL(window.location.href),N=d.startsWith("//")?new URL(x.protocol+d):new URL(d),j=_p(N.pathname,b);N.origin===x.origin&&j!=null?d=j+N.search+N.hash:v=!0}catch{}let y=CC(d,{relative:a}),g=tE(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:m});function p(x){n&&n(x),x.defaultPrevented||g(x)}return f.createElement("a",Bm({},h,{href:w||y,onClick:v||i?n:p,ref:r,target:c}))});var n0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(n0||(n0={}));var a0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(a0||(a0={}));function tE(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Oe(),d=br(),u=rw(e,{relative:o});return f.useCallback(m=>{if(GC(m,r)){m.preventDefault();let h=n!==void 0?n:jd(d)===jd(u);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,r,e,i,o,l])}function Ep(e){let t=f.useRef(Wm(e)),r=f.useRef(!1),n=br(),a=f.useMemo(()=>KC(n.search,r.current?null:t.current),[n.search]),i=Oe(),o=f.useCallback((l,c)=>{const d=Wm(typeof l=="function"?l(a):l);r.current=!0,i("?"+d,c)},[i,a]);return[a,o]}const rE="modulepreload",sE=function(e){return"/"+e},i0={},zl=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=sE(c),c in i0)return;i0[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":rE,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((h,b)=>{m.addEventListener("load",h),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},nE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>zl(async()=>{const{default:n}=await Promise.resolve().then(()=>to);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Pp extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class aE extends Pp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class iE extends Pp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class oE extends Pp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var qm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(qm||(qm={}));var lE=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(m){o(m)}}function c(u){try{d(n.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class cE{constructor(t,{headers:r={},customFetch:n,region:a=qm.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=nE(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return lE(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(w=>{throw new aE(w)}),m=u.headers.get("x-relay-error");if(m&&m==="true")throw new iE(u);if(!u.ok)throw new oE(u);let h=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),b;return h==="application/json"?b=yield u.json():h==="application/octet-stream"?b=yield u.blob():h==="text/event-stream"?b=u:h==="multipart/form-data"?b=yield u.formData():b=yield u.text(),{data:b,error:null}}catch(a){return{data:null,error:a}}})}}var tr={},Ap={},au={},Bl={},iu={},ou={},dE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oi=dE();const uE=Oi.fetch,ow=Oi.fetch.bind(Oi),lw=Oi.Headers,hE=Oi.Request,mE=Oi.Response,to=Object.freeze(Object.defineProperty({__proto__:null,Headers:lw,Request:hE,Response:mE,default:ow,fetch:uE},Symbol.toStringTag,{value:"Module"})),fE=G_(to);var lu={};Object.defineProperty(lu,"__esModule",{value:!0});let pE=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};lu.default=pE;var cw=Rr&&Rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ou,"__esModule",{value:!0});const xE=cw(fE),gE=cw(lu);let vE=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=xE.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,m=null,h=i.status,b=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&y&&y.length>1&&(m=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,m=null,h=406,b="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(u=[],d=null,h=200,b="OK")}catch{i.status===404&&v===""?(h=204,b="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,h=200,b="OK"),d&&this.shouldThrowOnError)throw new gE.default(d)}return{error:d,data:u,count:m,status:h,statusText:b}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};ou.default=vE;var yE=Rr&&Rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iu,"__esModule",{value:!0});const bE=yE(ou);let wE=class extends bE.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};iu.default=wE;var jE=Rr&&Rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bl,"__esModule",{value:!0});const NE=jE(iu);let _E=class extends NE.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Bl.default=_E;var SE=Rr&&Rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(au,"__esModule",{value:!0});const bo=SE(Bl);let kE=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new bo.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new bo.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new bo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new bo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new bo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};au.default=kE;var cu={},du={};Object.defineProperty(du,"__esModule",{value:!0});du.version=void 0;du.version="0.0.0-automated";Object.defineProperty(cu,"__esModule",{value:!0});cu.DEFAULT_HEADERS=void 0;const CE=du;cu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${CE.version}`};var dw=Rr&&Rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ap,"__esModule",{value:!0});const EE=dw(au),PE=dw(Bl),AE=cu;let RE=class uw{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},AE.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new EE.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new uw(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,m])=>m!==void 0).map(([u,m])=>[u,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([u,m])=>{l.searchParams.append(u,m)})):(o="POST",c=r);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new PE.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Ap.default=RE;var ro=Rr&&Rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tr,"__esModule",{value:!0});tr.PostgrestError=tr.PostgrestBuilder=tr.PostgrestTransformBuilder=tr.PostgrestFilterBuilder=tr.PostgrestQueryBuilder=tr.PostgrestClient=void 0;const hw=ro(Ap);tr.PostgrestClient=hw.default;const mw=ro(au);tr.PostgrestQueryBuilder=mw.default;const fw=ro(Bl);tr.PostgrestFilterBuilder=fw.default;const pw=ro(iu);tr.PostgrestTransformBuilder=pw.default;const xw=ro(ou);tr.PostgrestBuilder=xw.default;const gw=ro(lu);tr.PostgrestError=gw.default;var TE=tr.default={PostgrestClient:hw.default,PostgrestQueryBuilder:mw.default,PostgrestFilterBuilder:fw.default,PostgrestTransformBuilder:pw.default,PostgrestBuilder:xw.default,PostgrestError:gw.default};const{PostgrestClient:DE,PostgrestQueryBuilder:BO,PostgrestFilterBuilder:WO,PostgrestTransformBuilder:qO,PostgrestBuilder:VO,PostgrestError:HO}=TE;let Vm;typeof window>"u"?Vm=require("ws"):Vm=window.WebSocket;const IE=Vm,OE="2.11.10",LE={"X-Client-Info":`realtime-js/${OE}`},ME="1.0.0",vw=1e4,FE=1e3;var ci;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ci||(ci={}));var $t;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})($t||($t={}));var Wr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Wr||(Wr={}));var Hm;(function(e){e.websocket="websocket"})(Hm||(Hm={}));var Jn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Jn||(Jn={}));class $E{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class yw{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ve;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ve||(Ve={}));const o0=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=UE(o,e,t,a),i),{})},UE=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?bw(i,o):Gm(o)},bw=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return qE(t,r)}switch(e){case Ve.bool:return zE(t);case Ve.float4:case Ve.float8:case Ve.int2:case Ve.int4:case Ve.int8:case Ve.numeric:case Ve.oid:return BE(t);case Ve.json:case Ve.jsonb:return WE(t);case Ve.timestamp:return VE(t);case Ve.abstime:case Ve.date:case Ve.daterange:case Ve.int4range:case Ve.int8range:case Ve.money:case Ve.reltime:case Ve.text:case Ve.time:case Ve.timestamptz:case Ve.timetz:case Ve.tsrange:case Ve.tstzrange:return Gm(t);default:return Gm(t)}},Gm=e=>e,zE=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},BE=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},WE=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},qE=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>bw(t,l))}return e},VE=e=>typeof e=="string"?e.replace(" ","T"):e,ww=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class uh{constructor(t,r,n={},a=vw){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var l0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(l0||(l0={}));class Ho{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ho.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Ho.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ho.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const m=i[d];if(m){const h=u.map(y=>y.presence_ref),b=m.map(y=>y.presence_ref),w=u.filter(y=>b.indexOf(y.presence_ref)<0),v=m.filter(y=>h.indexOf(y.presence_ref)<0);w.length>0&&(l[d]=w),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const m=t[l].map(b=>b.presence_ref),h=u.filter(b=>m.indexOf(b.presence_ref)<0);t[l].unshift(...h)}n(l,u,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(m=>m.presence_ref);d=d.filter(m=>u.indexOf(m.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var c0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(c0||(c0={}));var d0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(d0||(d0={}));var Ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ss||(Ss={}));class Rp{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=$t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new uh(this,Wr.join,this.params,this.timeout),this.rejoinTimer=new yw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$t.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wr.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Ho(this),this.broadcastEndpointURL=ww(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(Ss.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(Ss.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var m;if(this.socket.setAuth(),u===void 0){t==null||t(Ss.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,b=(m=h==null?void 0:h.length)!==null&&m!==void 0?m:0,w=[];for(let v=0;v<b;v++){const y=h[v],{filter:{event:g,schema:p,table:x,filter:N}}=y,j=u&&u[v];if(j&&j.event===g&&j.schema===p&&j.table===x&&j.filter===N)w.push(Object.assign(Object.assign({},y),{id:j.id}));else{this.unsubscribe(),this.state=$t.errored,t==null||t(Ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(Ss.SUBSCRIBED);return}}).receive("error",u=>{this.state=$t.errored,t==null||t(Ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=$t.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wr.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const a=new uh(this,Wr.leave,{},t);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new uh(this,t,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=Wr;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var w,v,y;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((y=(v=b.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(b=>b.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(b=>{var w,v,y,g,p,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const N=b.id,j=(w=b.filter)===null||w===void 0?void 0:w.event;return N&&((v=r.ids)===null||v===void 0?void 0:v.includes(N))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const N=(p=(g=b==null?void 0:b.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return N==="*"||N===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof h=="object"&&"ids"in h){const w=h.data,{schema:v,table:y,commit_timestamp:g,type:p,errors:x}=w;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:g,eventType:p,new:{},old:{},errors:x}),this._getPayloadRecords(w))}b.callback(h,n)})}_isClosed(){return this.state===$t.closed}_isJoined(){return this.state===$t.joined}_isJoining(){return this.state===$t.joining}_isLeaving(){return this.state===$t.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Rp.isEqual(a.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Wr.close,{},t)}_onError(t){this._on(Wr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$t.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=o0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=o0(t.columns,t.old_record)),r}}const u0=()=>{},HE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class GE{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=LE,this.params={},this.timeout=vw,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=u0,this.ref=0,this.logger=u0,this.conn=null,this.sendBuffer=[],this.serializer=new $E,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>zl(async()=>{const{default:c}=await Promise.resolve().then(()=>to);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Hm.websocket}`,this.httpEndpoint=ww(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new yw(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=IE),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new KE(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ME}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ci.connecting:return Jn.Connecting;case ci.open:return Jn.Open;case ci.closing:return Jn.Closing;default:return Jn.Closed}}isConnected(){return this.connectionState()===Jn.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Rp(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(Wr.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(FE,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:a,payload:i,ref:o}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Wr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([HE],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class KE{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ci.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class Tp extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function yt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class YE extends Tp{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Km extends Tp{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var QE=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(m){o(m)}}function c(u){try{d(n.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const jw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>zl(async()=>{const{default:n}=await Promise.resolve().then(()=>to);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},JE=()=>QE(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zl(()=>Promise.resolve().then(()=>to),void 0)).Response:Response}),Ym=e=>{if(Array.isArray(e))return e.map(r=>Ym(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Ym(n)}),t};var Ea=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(m){o(m)}}function c(u){try{d(n.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const hh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XE=(e,t,r)=>Ea(void 0,void 0,void 0,function*(){const n=yield JE();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{t(new YE(hh(a),e.status||500))}).catch(a=>{t(new Km(hh(a),a))}):t(new Km(hh(e),e))}),ZE=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function Wl(e,t,r,n,a,i){return Ea(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,ZE(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>XE(c,l,n))})})}function _d(e,t,r,n){return Ea(this,void 0,void 0,function*(){return Wl(e,"GET",t,r,n)})}function en(e,t,r,n,a){return Ea(this,void 0,void 0,function*(){return Wl(e,"POST",t,n,a,r)})}function e5(e,t,r,n,a){return Ea(this,void 0,void 0,function*(){return Wl(e,"PUT",t,n,a,r)})}function t5(e,t,r,n){return Ea(this,void 0,void 0,function*(){return Wl(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Nw(e,t,r,n,a){return Ea(this,void 0,void 0,function*(){return Wl(e,"DELETE",t,n,a,r)})}var Jt=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(m){o(m)}}function c(u){try{d(n.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const r5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},h0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class s5{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=jw(a)}uploadOrUpdate(t,r,n,a){return Jt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},h0),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),m=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield m.json();return m.ok?{data:{path:d,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(yt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Jt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:h0.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const m=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),h=yield m.json();return m.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(yt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Jt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield en(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Tp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Jt(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Jt(this,void 0,void 0,function*(){try{return{data:{path:(yield en(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Jt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield en(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Jt(this,void 0,void 0,function*(){try{const a=yield en(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}download(t,r){return Jt(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield _d(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(yt(l))return{data:null,error:l};throw l}})}info(t){return Jt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield _d(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ym(n),error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}})}exists(t){return Jt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield t5(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(yt(n)&&n instanceof Km){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return Jt(this,void 0,void 0,function*(){try{return{data:yield Nw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(yt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Jt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},r5),r),{prefix:t||""});return{data:yield en(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(yt(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const n5="2.7.1",a5={"X-Client-Info":`storage-js/${n5}`};var Ia=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(m){o(m)}}function c(u){try{d(n.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class i5{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},a5),r),this.fetch=jw(n)}listBuckets(){return Ia(this,void 0,void 0,function*(){try{return{data:yield _d(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(yt(t))return{data:null,error:t};throw t}})}getBucket(t){return Ia(this,void 0,void 0,function*(){try{return{data:yield _d(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(yt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ia(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ia(this,void 0,void 0,function*(){try{return{data:yield e5(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(yt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ia(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(yt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ia(this,void 0,void 0,function*(){try{return{data:yield Nw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(yt(r))return{data:null,error:r};throw r}})}}class o5 extends i5{constructor(t,r={},n){super(t,r,n)}from(t){return new s5(this.url,this.headers,t,this.fetch)}}const l5="2.50.0";let Io="";typeof Deno<"u"?Io="deno":typeof document<"u"?Io="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Io="react-native":Io="node";const c5={"X-Client-Info":`supabase-js-${Io}/${l5}`},d5={headers:c5},u5={schema:"public"},h5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},m5={};var f5=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(m){o(m)}}function c(u){try{d(n.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const p5=e=>{let t;return e?t=e:typeof fetch>"u"?t=ow:t=fetch,(...r)=>t(...r)},x5=()=>typeof Headers>"u"?lw:Headers,g5=(e,t,r)=>{const n=p5(r),a=x5();return(i,o)=>f5(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var v5=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(m){o(m)}}function c(u){try{d(n.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};function y5(e){return e.endsWith("/")?e:e+"/"}function b5(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:u,global:m}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>v5(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const _w="2.70.0",Ba=30*1e3,Qm=3,mh=Qm*Ba,w5="http://localhost:9999",j5="supabase.auth.token",N5={"X-Client-Info":`gotrue-js/${_w}`},Jm="X-Supabase-Api-Version",Sw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_5=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,S5=6e5;class Dp extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function we(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class k5 extends Dp{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function C5(e){return we(e)&&e.name==="AuthApiError"}class kw extends Dp{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class zn extends Dp{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Qs extends zn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function E5(e){return we(e)&&e.name==="AuthSessionMissingError"}class vc extends zn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yc extends zn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class bc extends zn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function P5(e){return we(e)&&e.name==="AuthImplicitGrantRedirectError"}class m0 extends zn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xm extends zn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function fh(e){return we(e)&&e.name==="AuthRetryableFetchError"}class f0 extends zn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Go extends zn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),p0=` 	
\r=`.split(""),A5=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<p0.length;t+=1)e[p0[t].charCodeAt(0)]=-2;for(let t=0;t<Sd.length;t+=1)e[Sd[t].charCodeAt(0)]=t;return e})();function x0(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Sd[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Sd[n]),t.queuedBits-=6}}function Cw(e,t,r){const n=A5[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function g0(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{D5(o,n,r)};for(let o=0;o<e.length;o+=1)Cw(e.charCodeAt(o),a,i);return t.join("")}function R5(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function T5(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}R5(n,t)}}function D5(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function I5(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Cw(e.charCodeAt(a),r,n);return new Uint8Array(t)}function O5(e){const t=[];return T5(e,r=>t.push(r)),new Uint8Array(t)}function L5(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>x0(a,r,n)),x0(null,r,n),t.join("")}function M5(e){return Math.round(Date.now()/1e3)+e}function F5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fr=()=>typeof window<"u"&&typeof document<"u",Gn={tested:!1,writable:!1},Ko=()=>{if(!Fr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gn.tested)return Gn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Gn.tested=!0,Gn.writable=!0}catch{Gn.tested=!0,Gn.writable=!1}return Gn.writable};function $5(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const Ew=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>zl(async()=>{const{default:n}=await Promise.resolve().then(()=>to);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},U5=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Pw=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},wc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},jc=async(e,t)=>{await e.removeItem(t)};class uu{constructor(){this.promise=new uu.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}uu.promiseConstructor=Promise;function ph(e){const t=e.split(".");if(t.length!==3)throw new Go("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!_5.test(t[n]))throw new Go("JWT not in base64url format");return{header:JSON.parse(g0(t[0])),payload:JSON.parse(g0(t[1])),signature:I5(t[2]),raw:{header:t[0],payload:t[1]}}}async function z5(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function B5(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function W5(e){return("0"+e.toString(16)).substr(-2)}function q5(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,W5).join("")}async function V5(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function H5(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await V5(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oa(e,t,r=!1){const n=q5();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Pw(e,`${t}-code-verifier`,a);const i=await H5(n);return[i,n===i?"plain":"s256"]}const G5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function K5(e){const t=e.headers.get(Jm);if(!t||!t.match(G5))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Y5(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Q5(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const J5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function La(e){if(!J5.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var X5=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Qn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Z5=[502,503,504];async function v0(e){var t;if(!U5(e))throw new Xm(Qn(e),0);if(Z5.includes(e.status))throw new Xm(Qn(e),e.status);let r;try{r=await e.json()}catch(i){throw new kw(Qn(i),i)}let n;const a=K5(e);if(a&&a.getTime()>=Sw["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new f0(Qn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Qs}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new f0(Qn(r),e.status,r.weak_password.reasons);throw new k5(Qn(r),e.status||500,n)}const e4=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ce(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Jm]||(i[Jm]=Sw["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await t4(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function t4(e,t,r,n,a,i){const o=e4(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Xm(Qn(c),0)}if(l.ok||await v0(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await v0(c)}}function Ns(e){var t;let r=null;a4(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=M5(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function y0(e){const t=Ns(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function sn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function r4(e){return{data:e,error:null}}function s4(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=X5(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function n4(e){return e}function a4(e){return e.access_token&&e.refresh_token&&e.expires_in}const xh=["global","local","others"];var i4=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class o4{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Ew(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=xh[0]){if(xh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xh.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:sn})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=i4(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:s4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(we(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:sn})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:n4});if(u.error)throw u.error;const m=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);d[`${y}Page`]=v}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(we(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){La(t);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:sn})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){La(t);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:sn})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){La(t);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:sn})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){La(t.userId);try{const{data:r,error:n}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(we(r))return{data:null,error:r};throw r}}async _deleteFactor(t){La(t.userId),La(t.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}}const l4={getItem:e=>Ko()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ko()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ko()&&globalThis.localStorage.removeItem(e)}};function b0(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function c4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ma={debug:!!(globalThis&&Ko()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Aw extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class d4 extends Aw{}async function u4(e,t,r){Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new d4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ma.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}c4();const h4={url:w5,storageKey:j5,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:N5,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function w0(e,t,r){return await r()}class jl{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jl.nextInstanceID,jl.nextInstanceID+=1,this.instanceID>0&&Fr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},h4),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new o4({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Ew(a.fetch),this.lock=a.lock||w0,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Fr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=u4:this.lock=w0,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Ko()?this.storage=l4:(this.memoryStorage={},this.storage=b0(this.memoryStorage)):(this.memoryStorage={},this.storage=b0(this.memoryStorage)),Fr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_w}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=$5(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Fr()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),P5(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return we(r)?{error:r}:{error:new kw("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ns}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(we(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:m,options:h}=t;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await Oa(this.storage,this.storageKey)),i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:m,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:b,code_challenge_method:w},xform:Ns})}else if("phone"in t){const{phone:u,password:m,options:h}=t;i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:m,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ns})}else throw new yc("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(we(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:y0})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:y0})}else throw new yc("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new vc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,d,u,m,h,b;let w,v;if("message"in t)w=t.message,v=t.signature;else{const{chain:y,wallet:g,statement:p,options:x}=t;let N;if(Fr())if(typeof g=="object")N=g;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))N=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=g}const j=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const k=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),p?{statement:p}:null));let S;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")S=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)S=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)w=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${j.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((m=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||m===void 0)&&m.length?["Resources",...x.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const k=await N.signMessage(new TextEncoder().encode(w),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=k}}try{const{data:y,error:g}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:L5(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ns});if(g)throw g;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new vc}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:g})}catch(y){if(we(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await wc(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ns});if(await jc(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new vc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(we(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ns}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new vc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Oa(this.storage,this.storageKey));const{error:m}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new yc("You must provide either an email or phone number.")}catch(l){if(we(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ns});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(we(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Oa(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:r4})}catch(i){if(we(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Qs;const{error:a}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Ce(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Ce(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new yc("You must provide either an email or phone number and a type")}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await wc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<mh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:sn}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qs}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:sn})})}catch(r){if(we(r))return E5(r)&&(await this._removeSession(),await jc(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Qs;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Oa(this.storage,this.storageKey));const{data:d,error:u}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:sn});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Qs;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=ph(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(we(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Qs;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(we(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Fr())throw new bc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new bc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new m0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new m0("No code detected.");const{data:p,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new bc("No session defined in URL");const u=Math.round(Date.now()/1e3),m=parseInt(l);let h=u+m;c&&(h=parseInt(c));const b=h-u;b*1e3<=Ba&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const w=h-m;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,h,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,h,u);const{data:v,error:y}=await this._getUser(i);if(y)throw y;const g={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:h,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(we(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await wc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(C5(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await jc(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=F5(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Oa(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(we(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:m,error:h}=i;if(h)throw h;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",b,{headers:this.headers,jwt:(u=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Fr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(we(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await B5(async a=>(a>0&&await z5(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ns})),(a,i)=>{const o=200*Math.pow(2,a);return i&&fh(i)&&Date.now()+o-n<Ba})}catch(n){if(this._debug(r,"error",n),we(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Fr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await wc(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<mh;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${mh}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),fh(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Qs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new uu;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Qs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),we(i)){const o={session:null,error:i};return fh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Pw(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await jc(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ba);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Ba);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ba}ms, refresh threshold is ${Qm} ticks`),a<=Qm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Aw)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Oa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await Ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(we(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(we(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ph(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+S5>Date.now()))return n;const{data:a,error:i}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new Go("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(o=>o.kid===t),!n)throw new Go("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:b,error:w}=await this.getSession();if(w||!b.session)return{data:null,error:w};n=b.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=ph(n);if(Y5(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:i,header:a,signature:o},error:null}}const d=Q5(a.alg),u=await this.fetchJwk(a.kid,r),m=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,m,o,O5(`${l}.${c}`)))throw new Go("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}}jl.nextInstanceID=0;const m4=jl;class f4 extends m4{constructor(t){super(t)}}var p4=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(m){o(m)}}function c(u){try{d(n.throw(u))}catch(m){o(m)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class x4{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=y5(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:u5,realtime:m5,auth:Object.assign(Object.assign({},h5),{storageKey:d}),global:d5},m=b5(n??{},u);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(h,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=g5(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new DE(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new cE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new o5(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return p4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:c},d,u){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f4({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new GE(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const g4=(e,t,r)=>new x4(e,t,r),v4="https://xfuiqrqiyldihyqolzzx.supabase.co",y4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhmdWlxcnFpeWxkaWh5cW9senp4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMzE2NjYsImV4cCI6MjA2NTkwNzY2Nn0.jh5FVtE0Msoe-BrFoPsKdSmy8aWPysEsgiN3iOics4U",A=g4(v4,y4),Rw=f.createContext(void 0),j0=()=>{try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.error("Error parsing stored user:",e),null}},Nc=()=>{try{localStorage.removeItem("user"),localStorage.removeItem("currentUser"),localStorage.removeItem("adminUser"),console.log("All user data cleared from localStorage")}catch(e){console.error("Error clearing stored data:",e)}},b4=({children:e})=>{const[t,r]=f.useState(null),[n,a]=f.useState(!0),[i,o]=f.useState(!1),l=async()=>{if(i){console.log("Refresh already in progress, skipping...");return}const h=j0();if(!(h!=null&&h.id)){r(null);return}o(!0);try{console.log("Refreshing user data for:",h.id);const{data:b,error:w}=await A.from("users").select("*").eq("id",h.id).single();if(b&&!w){if(b.account_status!=="active"){console.log("User account is not active, signing out:",b.account_status),Nc(),r(null);return}const{count:v}=await A.from("users").select("id",{count:"exact"}).eq("referred_by_user_id",h.id),y=p=>p>=100?10:p>=75?9:p>=50?8:p>=40?7:p>=30?6:p>=25?5:p>=20?4:p>=10?3:p>=3?2:1,g={id:b.id,email:b.email||"",full_name:b.full_name||"",username:b.username||"",phone_number:b.phone_number||"",profile_image_url:b.profile_image_url||"",available_balance:b.available_balance||0,total_deposits:b.total_deposits||0,total_withdrawals:b.total_withdrawals||0,current_plan_id:b.current_plan_id,account_status:b.account_status||"active",created_at:b.created_at,updated_at:b.updated_at,referral_code:b.referral_code,totalReferrals:v||0,user_level:y(v||0),levelInfo:{name:"Level 1",description:"Basic user level",color:"blue",benefits:["Basic access","No referral bonus"],bonus_amount:0}};console.log("User data refreshed successfully:",{id:g.id,available_balance:g.available_balance,current_plan_id:g.current_plan_id,referral_code:g.referral_code,totalReferrals:g.totalReferrals,user_level:g.user_level,account_status:g.account_status}),r(g),localStorage.setItem("user",JSON.stringify(g)),localStorage.setItem("currentUser",JSON.stringify(g))}else console.error("Error refreshing user data:",w),Nc(),r(null)}catch(b){console.error("Error in refreshUser:",b),Nc(),r(null)}finally{o(!1)}};f.useEffect(()=>{(async()=>{const b=j0();b!=null&&b.id&&await l(),a(!1)})()},[]);const c=async h=>{a(!0);try{const{data:b,error:w}=await A.from("users").select("id, phone_number").eq("phone_number",h.phoneNumber).single();if(b&&!w)throw new Error("This phone number is already registered. Please use a different phone number.");const{data:v,error:y}=await A.from("users").select("id, username").eq("username",h.username).single();if(v&&!y)throw new Error("This username is already taken. Please choose another username.");if(h.email&&h.email.trim()!==""){const{data:N,error:j}=await A.from("users").select("id, email").eq("email",h.email).single();if(N&&!j)throw new Error("This email is already registered. Please use a different email.")}const{data:g,error:p}=await A.from("users").insert([{email:h.email,full_name:h.fullName,username:h.username,phone_number:h.phoneNumber||"",password:h.password,withdraw_pin:h.withdrawPin||"1234",available_balance:0,total_deposits:0,total_withdrawals:0,referred_by_code:h.referralCode||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(p)throw console.error("User creation error:",p),p.code==="23505"?p.message.includes("phone_number")?new Error("This phone number is already registered."):p.message.includes("username")?new Error("This username is already taken."):p.message.includes("email")?new Error("This email is already registered."):new Error("An account with these details already exists."):new Error(p.message||"Failed to create account");if(h.referralCode)try{const{data:N,error:j}=await A.from("users").select("id, full_name").eq("referral_code",h.referralCode).single();N&&!j?(await A.from("users").update({referred_by_user_id:N.id}).eq("id",g.id),console.log("Referral connection established with user:",N.full_name)):console.warn("Referral code not found:",h.referralCode)}catch(N){console.error("Error processing referral:",N)}const x={id:g.id,email:g.email,full_name:g.full_name,username:g.username,phone_number:g.phone_number,profile_image_url:g.profile_image_url,available_balance:g.available_balance,total_deposits:g.total_deposits,total_withdrawals:g.total_withdrawals,current_plan_id:g.current_plan_id,account_status:g.account_status,created_at:g.created_at,updated_at:g.updated_at,referral_code:g.referral_code,totalReferrals:0,user_level:1,levelInfo:{name:"Level 1",description:"Basic user level",color:"blue",benefits:["Basic access","No referral bonus"],bonus_amount:0}};return r(x),localStorage.setItem("user",JSON.stringify(x)),{success:!0,user:x}}catch(b){return console.error("Signup failed:",b),{success:!1,error:b.message}}finally{a(!1)}},d=async h=>{a(!0);try{let b=A.from("users").select("*");const w=h.emailOrUsername.includes("@");w?b=b.eq("email",h.emailOrUsername):b=b.eq("username",h.emailOrUsername);const{data:v,error:y}=await b.single();if(y||!v)throw console.error("User lookup error:",y),new Error(`${w?"Email":"Username"} not found`);if(console.log("Found user:",v),v.account_status==="suspended")throw new Error("Your account has been suspended. Please contact support for assistance.");if(v.account_status==="banned")throw new Error("Your account has been banned. Please contact support for assistance.");if(v.password!==h.password)throw new Error("Invalid password");const{count:g}=await A.from("users").select("id",{count:"exact"}).eq("referred_by_user_id",v.id),p=N=>N>=100?10:N>=75?9:N>=50?8:N>=40?7:N>=30?6:N>=25?5:N>=20?4:N>=10?3:N>=3?2:1,x={id:v.id,email:v.email,full_name:v.full_name,username:v.username,phone_number:v.phone_number,profile_image_url:v.profile_image_url,available_balance:v.available_balance,total_deposits:v.total_deposits,total_withdrawals:v.total_withdrawals,current_plan_id:v.current_plan_id,account_status:v.account_status,created_at:v.created_at,updated_at:v.updated_at,referral_code:v.referral_code,totalReferrals:g||0,user_level:p(g||0),levelInfo:{name:"Level 1",description:"Basic user level",color:"blue",benefits:["Basic access","No referral bonus"],bonus_amount:0}};return r(x),localStorage.setItem("user",JSON.stringify(x)),localStorage.setItem("currentUser",JSON.stringify(x)),console.log("Login successful:",x),x}catch(b){throw console.error("Signin failed:",b),b}finally{a(!1)}},u=async()=>{a(!0);try{console.log("Signing out user..."),r(null),Nc(),console.log("User signed out successfully")}catch(h){throw console.error("Signout failed:",h),h}finally{a(!1)}};f.useEffect(()=>{if(!(t!=null&&t.id))return;console.log("Setting up real-time subscription for user:",t.id);const h=A.channel("user-balance-changes").on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${t.id}`},b=>{if(console.log("Real-time user data updated:",b),b.new&&b.new.account_status!=="active"){console.log("Account status changed to non-active, signing out user"),u();return}b.new&&typeof b.new.available_balance=="number"&&r(w=>{if(w){const v={...w,available_balance:b.new.available_balance,total_deposits:b.new.total_deposits||w.total_deposits,total_withdrawals:b.new.total_withdrawals||w.total_withdrawals,current_plan_id:b.new.current_plan_id,account_status:b.new.account_status||w.account_status,updated_at:b.new.updated_at||w.updated_at};return localStorage.setItem("user",JSON.stringify(v)),console.log("User context updated with new balance:",v.available_balance),v}return w})}).subscribe();return()=>{console.log("Cleaning up real-time subscription"),A.removeChannel(h)}},[t==null?void 0:t.id]);const m={user:t,loading:n,signUp:c,signIn:d,signOut:u,refreshUser:l};return s.jsx(Rw.Provider,{value:m,children:e})},Ze=()=>{const e=f.useContext(Rw);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},w4=f.createContext(void 0),N0={name:"default",display_name:"Default",is_active:!0,is_default:!0,colors:{primary:"#10b981",secondary:"#6b7280",accent:"#f59e0b",background:"#ffffff",card:"#f9fafb",text:"#111827"}};function j4({children:e}){const[t,r]=f.useState(N0),[n]=f.useState([N0]),[a]=f.useState(!1),i=o=>{const l=n.find(c=>c.name===o);if(l){r(l);const c=document.documentElement;Object.entries(l.colors).forEach(([d,u])=>{c.style.setProperty(`--color-${d}`,u)})}};return f.useEffect(()=>{i("default")},[]),s.jsx(w4.Provider,{value:{currentTheme:t,themes:n,switchTheme:i,loading:a},children:e})}let N4={data:""},_4=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||N4,S4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,k4=/\/\*[^]*?\*\/|  +/g,_0=/\n+/g,nn=(e,t)=>{let r="",n="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?nn(o,i):i+"{"+nn(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=nn(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=nn.p?nn.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},ys={},Tw=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Tw(e[r]);return t}return e},C4=(e,t,r,n,a)=>{let i=Tw(e),o=ys[i]||(ys[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!ys[o]){let c=i!==e?e:(d=>{let u,m,h=[{}];for(;u=S4.exec(d.replace(k4,""));)u[4]?h.shift():u[3]?(m=u[3].replace(_0," ").trim(),h.unshift(h[0][m]=h[0][m]||{})):h[0][u[1]]=u[2].replace(_0," ").trim();return h[0]})(e);ys[o]=nn(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&ys.g?ys.g:null;return r&&(ys.g=ys[o]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(ys[o],t,n,l),o},E4=(e,t,r)=>e.reduce((n,a,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":nn(l,""):l===!1?"":l}return n+a+(o??"")},"");function hu(e){let t=this||{},r=e.call?e(t.p):e;return C4(r.unshift?r.raw?E4(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,_4(t.target),t.g,t.o,t.k)}let Dw,Zm,ef;hu.bind({g:1});let Fs=hu.bind({k:1});function P4(e,t,r,n){nn.p=t,Dw=e,Zm=r,ef=n}function Bn(e,t){let r=this||{};return function(){let n=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;r.p=Object.assign({theme:Zm&&Zm()},l),r.o=/ *go\d+/.test(c),l.className=hu.apply(r,n)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),ef&&d[0]&&ef(l),Dw(d,l)}return a}}var A4=e=>typeof e=="function",kd=(e,t)=>A4(e)?e(t):e,R4=(()=>{let e=0;return()=>(++e).toString()})(),Iw=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),T4=20,Ow=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,T4)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:r}=t;return Ow(e,{type:e.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},qc=[],na={toasts:[],pausedAt:void 0},Pa=e=>{na=Ow(na,e),qc.forEach(t=>{t(na)})},D4={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},I4=(e={})=>{let[t,r]=f.useState(na),n=f.useRef(na);f.useEffect(()=>(n.current!==na&&r(na),qc.push(r),()=>{let i=qc.indexOf(r);i>-1&&qc.splice(i,1)}),[]);let a=t.toasts.map(i=>{var o,l,c;return{...e,...e[i.type],...i,removeDelay:i.removeDelay||((o=e[i.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:i.duration||((l=e[i.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||D4[i.type],style:{...e.style,...(c=e[i.type])==null?void 0:c.style,...i.style}}});return{...t,toasts:a}},O4=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||R4()}),ql=e=>(t,r)=>{let n=O4(t,e,r);return Pa({type:2,toast:n}),n.id},qt=(e,t)=>ql("blank")(e,t);qt.error=ql("error");qt.success=ql("success");qt.loading=ql("loading");qt.custom=ql("custom");qt.dismiss=e=>{Pa({type:3,toastId:e})};qt.remove=e=>Pa({type:4,toastId:e});qt.promise=(e,t,r)=>{let n=qt.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?kd(t.success,a):void 0;return i?qt.success(i,{id:n,...r,...r==null?void 0:r.success}):qt.dismiss(n),a}).catch(a=>{let i=t.error?kd(t.error,a):void 0;i?qt.error(i,{id:n,...r,...r==null?void 0:r.error}):qt.dismiss(n)}),e};var L4=(e,t)=>{Pa({type:1,toast:{id:e,height:t}})},M4=()=>{Pa({type:5,time:Date.now()})},Yo=new Map,F4=1e3,$4=(e,t=F4)=>{if(Yo.has(e))return;let r=setTimeout(()=>{Yo.delete(e),Pa({type:4,toastId:e})},t);Yo.set(e,r)},U4=e=>{let{toasts:t,pausedAt:r}=I4(e);f.useEffect(()=>{if(r)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&qt.dismiss(l.id);return}return setTimeout(()=>qt.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,r]);let n=f.useCallback(()=>{r&&Pa({type:6,time:Date.now()})},[r]),a=f.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=o||{},u=t.filter(b=>(b.position||d)===(i.position||d)&&b.height),m=u.findIndex(b=>b.id===i.id),h=u.filter((b,w)=>w<m&&b.visible).length;return u.filter(b=>b.visible).slice(...l?[h+1]:[0,h]).reduce((b,w)=>b+(w.height||0)+c,0)},[t]);return f.useEffect(()=>{t.forEach(i=>{if(i.dismissed)$4(i.id,i.removeDelay);else{let o=Yo.get(i.id);o&&(clearTimeout(o),Yo.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:L4,startPause:M4,endPause:n,calculateOffset:a}}},z4=Fs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,B4=Fs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,W4=Fs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,q4=Bn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${z4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${B4} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${W4} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,V4=Fs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,H4=Bn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${V4} 1s linear infinite;
`,G4=Fs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,K4=Fs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Y4=Bn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${G4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${K4} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Q4=Bn("div")`
  position: absolute;
`,J4=Bn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,X4=Fs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Z4=Bn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${X4} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,eP=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?f.createElement(Z4,null,t):t:r==="blank"?null:f.createElement(J4,null,f.createElement(H4,{...n}),r!=="loading"&&f.createElement(Q4,null,r==="error"?f.createElement(q4,{...n}):f.createElement(Y4,{...n})))},tP=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,rP=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,sP="0%{opacity:0;} 100%{opacity:1;}",nP="0%{opacity:1;} 100%{opacity:0;}",aP=Bn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,iP=Bn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,oP=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=Iw()?[sP,nP]:[tP(r),rP(r)];return{animation:t?`${Fs(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fs(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},lP=f.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?oP(e.position||t||"top-center",e.visible):{opacity:0},i=f.createElement(eP,{toast:e}),o=f.createElement(iP,{...e.ariaProps},kd(e.message,e));return f.createElement(aP,{className:e.className,style:{...a,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):f.createElement(f.Fragment,null,i,o))});P4(f.createElement);var cP=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=f.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return f.createElement("div",{ref:i,className:t,style:r},a)},dP=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Iw()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},uP=hu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,_c=16,hP=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=U4(r);return f.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:_c,left:_c,right:_c,bottom:_c,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let u=d.position||t,m=c.calculateOffset(d,{reverseOrder:e,gutter:n,defaultPosition:t}),h=dP(u,m);return f.createElement(cP,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?uP:"",style:h},d.type==="custom"?kd(d.message,d):a?a(d):f.createElement(lP,{toast:d,position:u}))}))},_e=qt;const mP=({children:e})=>s.jsxs(s.Fragment,{children:[e,s.jsx(hP,{position:"top-center",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{top:20,left:20,bottom:20,right:20},toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",borderRadius:"8px",fontSize:"14px",fontWeight:"500",maxWidth:"400px"},success:{duration:4e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}},loading:{iconTheme:{primary:"#6B7280",secondary:"#fff"}}}})]});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lw=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...pP,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Lw("lucide",a),...l},[...o.map(([d,u])=>f.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(e,t)=>{const r=f.forwardRef(({className:n,...a},i)=>f.createElement(xP,{ref:i,iconNode:t,className:Lw(`lucide-${fP(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=te("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=te("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=te("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=te("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=te("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=te("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=te("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=te("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=te("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=te("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=te("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=te("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=te("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=te("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=te("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=te("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=te("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=te("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=te("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=te("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=te("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=te("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=te("WalletMinimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=te("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),vh=768;function Gl(){const[e,t]=f.useState(void 0);return f.useEffect(()=>{const r=window.matchMedia(`(max-width: ${vh-1}px)`),n=()=>{t(window.innerWidth<vh)};return r.addEventListener("change",n),t(window.innerWidth<vh),()=>r.removeEventListener("change",n)},[]),!!e}function LP(e,t){const r=f.createContext(t),n=i=>{const{children:o,...l}=i,c=f.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=f.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function ps(e,t=[]){let r=[];function n(i,o){const l=f.createContext(o),c=r.length;r=[...r,o];const d=m=>{var g;const{scope:h,children:b,...w}=m,v=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,y=f.useMemo(()=>w,Object.values(w));return s.jsx(v.Provider,{value:y,children:b})};d.displayName=i+"Provider";function u(m,h){var v;const b=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,w=f.useContext(b);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,MP(a,...t)]}function MP(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function wt(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var St=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{};function FP(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function zw(...e){return t=>e.forEach(r=>FP(r,t))}function Re(...e){return f.useCallback(zw(...e),e)}var Rn=f.forwardRef((e,t)=>{const{children:r,...n}=e,a=f.Children.toArray(r),i=a.find($P);if(i){const o=i.props.children,l=a.map(c=>c===i?f.Children.count(o)>1?f.Children.only(null):f.isValidElement(o)?o.props.children:null:c);return s.jsx(af,{...n,ref:t,children:f.isValidElement(o)?f.cloneElement(o,void 0,l):null})}return s.jsx(af,{...n,ref:t,children:r})});Rn.displayName="Slot";var af=f.forwardRef((e,t)=>{const{children:r,...n}=e;if(f.isValidElement(r)){const a=zP(r);return f.cloneElement(r,{...UP(n,r.props),ref:t?zw(t,a):a})}return f.Children.count(r)>1?f.Children.only(null):null});af.displayName="SlotClone";var Bw=({children:e})=>s.jsx(s.Fragment,{children:e});function $P(e){return f.isValidElement(e)&&e.type===Bw}function UP(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{i(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function zP(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var BP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],xe=BP.reduce((e,t)=>{const r=f.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?Rn:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function WP(e,t){e&&Xi.flushSync(()=>e.dispatchEvent(t))}var $p="Avatar",[qP,GO]=ps($p),[VP,Ww]=qP($p),qw=f.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=f.useState("idle");return s.jsx(VP,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(xe.span,{...n,ref:t})})});qw.displayName=$p;var Vw="AvatarImage",Hw=f.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=Ww(Vw,r),l=HP(n,i.referrerPolicy),c=wt(d=>{a(d),o.onImageLoadingStatusChange(d)});return St(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(xe.img,{...i,ref:t,src:n}):null});Hw.displayName=Vw;var Gw="AvatarFallback",Kw=f.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=Ww(Gw,r),[o,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(xe.span,{...a,ref:t}):null});Kw.displayName=Gw;function HP(e,t){const[r,n]=f.useState("idle");return St(()=>{if(!e){n("error");return}let a=!0;const i=new window.Image,o=l=>()=>{a&&n(l)};return n("loading"),i.onload=o("loaded"),i.onerror=o("error"),i.src=e,t&&(i.referrerPolicy=t),()=>{a=!1}},[e,t]),r}var Yw=qw,Qw=Hw,Jw=Kw;function Xw(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Xw(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Zw(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Xw(e))&&(n&&(n+=" "),n+=t);return n}const Up="-",GP=e=>{const t=YP(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Up);return l[0]===""&&l.length!==1&&l.shift(),ej(l,t)||KP(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},ej=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?ej(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Up);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},P0=/^\[(.+)\]$/,KP=e=>{if(P0.test(e)){const t=P0.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},YP=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return JP(Object.entries(e.classGroups),r).forEach(([i,o])=>{of(o,n,i,t)}),n},of=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:A0(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(QP(a)){of(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{of(o,A0(t,i),r,n)})})},A0=(e,t)=>{let r=e;return t.split(Up).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},QP=e=>e.isThemeGetter,JP=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,XP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},tj="!",ZP=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,m;for(let y=0;y<l.length;y++){let g=l[y];if(d===0){if(g===a&&(n||l.slice(y,y+i)===t)){c.push(l.slice(u,y)),u=y+i;continue}if(g==="/"){m=y;continue}}g==="["?d++:g==="]"&&d--}const h=c.length===0?l:l.substring(u),b=h.startsWith(tj),w=b?h.substring(1):h,v=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:b,baseClassName:w,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:o}):o},e6=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},t6=e=>({cache:XP(e.cacheSize),parseClassName:ZP(e),...GP(e)}),r6=/\s+/,s6=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(r6);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:b}=r(d);let w=!!b,v=n(w?h.substring(0,b):h);if(!v){if(!w){l=d+(l.length>0?" "+l:l);continue}if(v=n(h),!v){l=d+(l.length>0?" "+l:l);continue}w=!1}const y=e6(u).join(":"),g=m?y+tj:y,p=g+v;if(i.includes(p))continue;i.push(p);const x=a(v,w);for(let N=0;N<x.length;++N){const j=x[N];i.push(g+j)}l=d+(l.length>0?" "+l:l)}return l};function n6(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=rj(t))&&(n&&(n+=" "),n+=r);return n}const rj=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=rj(e[n]))&&(r&&(r+=" "),r+=t);return r};function a6(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,m)=>m(u),e());return r=t6(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=s6(c,r);return a(c,u),u}return function(){return i(n6.apply(null,arguments))}}const Ye=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},sj=/^\[(?:([a-z-]+):)?(.+)\]$/i,i6=/^\d+\/\d+$/,o6=new Set(["px","full","screen"]),l6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,c6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,d6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,u6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,h6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bs=e=>di(e)||o6.has(e)||i6.test(e),Gs=e=>no(e,"length",b6),di=e=>!!e&&!Number.isNaN(Number(e)),yh=e=>no(e,"number",di),wo=e=>!!e&&Number.isInteger(Number(e)),m6=e=>e.endsWith("%")&&di(e.slice(0,-1)),je=e=>sj.test(e),Ks=e=>l6.test(e),f6=new Set(["length","size","percentage"]),p6=e=>no(e,f6,nj),x6=e=>no(e,"position",nj),g6=new Set(["image","url"]),v6=e=>no(e,g6,j6),y6=e=>no(e,"",w6),jo=()=>!0,no=(e,t,r)=>{const n=sj.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},b6=e=>c6.test(e)&&!d6.test(e),nj=()=>!1,w6=e=>u6.test(e),j6=e=>h6.test(e),N6=()=>{const e=Ye("colors"),t=Ye("spacing"),r=Ye("blur"),n=Ye("brightness"),a=Ye("borderColor"),i=Ye("borderRadius"),o=Ye("borderSpacing"),l=Ye("borderWidth"),c=Ye("contrast"),d=Ye("grayscale"),u=Ye("hueRotate"),m=Ye("invert"),h=Ye("gap"),b=Ye("gradientColorStops"),w=Ye("gradientColorStopPositions"),v=Ye("inset"),y=Ye("margin"),g=Ye("opacity"),p=Ye("padding"),x=Ye("saturate"),N=Ye("scale"),j=Ye("sepia"),k=Ye("skew"),S=Ye("space"),_=Ye("translate"),C=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",je,t],D=()=>[je,t],L=()=>["",bs,Gs],W=()=>["auto",di,je],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",je],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[di,je];return{cacheSize:500,separator:":",theme:{colors:[jo],spacing:[bs,Gs],blur:["none","",Ks,je],brightness:B(),borderColor:[e],borderRadius:["none","","full",Ks,je],borderSpacing:D(),borderWidth:L(),contrast:B(),grayscale:q(),hueRotate:B(),invert:q(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[m6,Gs],inset:$(),margin:$(),opacity:B(),padding:D(),saturate:B(),scale:B(),sepia:q(),skew:B(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",je]}],container:["container"],columns:[{columns:[Ks]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),je]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wo,je]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",je]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",wo,je]}],"grid-cols":[{"grid-cols":[jo]}],"col-start-end":[{col:["auto",{span:["full",wo,je]},je]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[jo]}],"row-start-end":[{row:["auto",{span:[wo,je]},je]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",je]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",je,t]}],"min-w":[{"min-w":[je,t,"min","max","fit"]}],"max-w":[{"max-w":[je,t,"none","full","min","max","fit","prose",{screen:[Ks]},Ks]}],h:[{h:[je,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[je,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[je,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[je,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ks,Gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yh]}],"font-family":[{font:[jo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",je]}],"line-clamp":[{"line-clamp":["none",di,yh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bs,je]}],"list-image":[{"list-image":["none",je]}],"list-style-type":[{list:["none","disc","decimal",je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bs,Gs]}],"underline-offset":[{"underline-offset":["auto",bs,je]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),x6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",p6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},v6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:ee()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[bs,je]}],"outline-w":[{outline:[bs,Gs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[bs,Gs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ks,y6]}],"shadow-color":[{shadow:[jo]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ks,je]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[x]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",je]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",je]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[wo,je]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",je]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[bs,Gs,yh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},_6=a6(N6);function ve(...e){return _6(Zw(e))}function Vi(e){return Math.round(e).toLocaleString("en-PK")}function Xo(e,t="Rs."){return`${t} ${Vi(e)}`}function Y(e,t){const r=(t==null?void 0:t.currencySymbol)||"Rs.";return Xo(e,r)}function Es(e){return(e==null?void 0:e.currencySymbol)||"Rs."}const ao=f.forwardRef(({className:e,...t},r)=>s.jsx(Yw,{ref:r,className:ve("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ao.displayName=Yw.displayName;const io=f.forwardRef(({className:e,...t},r)=>s.jsx(Qw,{ref:r,className:ve("aspect-square h-full w-full",e),...t}));io.displayName=Qw.displayName;const oo=f.forwardRef(({className:e,...t},r)=>s.jsx(Jw,{ref:r,className:ve("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));oo.displayName=Jw.displayName;const R0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,T0=Zw,pu=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return T0(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],m=i==null?void 0:i[d];if(u===null)return null;const h=R0(u)||R0(m);return a[d][h]}),l=r&&Object.entries(r).reduce((d,u)=>{let[m,h]=u;return h===void 0||(d[m]=h),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:h,...b}=u;return Object.entries(b).every(w=>{let[v,y]=w;return Array.isArray(y)?y.includes({...i,...l}[v]):{...i,...l}[v]===y})?[...d,m,h]:d},[]);return T0(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},S6=pu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ke({className:e,variant:t,...r}){return s.jsx("div",{className:ve(S6({variant:t}),e),...r})}function pe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function k6(e,t=globalThis==null?void 0:globalThis.document){const r=wt(e);f.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var C6="DismissableLayer",lf="dismissableLayer.update",E6="dismissableLayer.pointerDownOutside",P6="dismissableLayer.focusOutside",D0,aj=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xu=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=f.useContext(aj),[u,m]=f.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=f.useState({}),w=Re(t,S=>m(S)),v=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=v.indexOf(y),p=u?v.indexOf(u):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,N=p>=g,j=T6(S=>{const _=S.target,C=[...d.branches].some(E=>E.contains(_));!N||C||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},h),k=D6(S=>{const _=S.target;[...d.branches].some(E=>E.contains(_))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},h);return k6(S=>{p===d.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),f.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(D0=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),I0(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=D0)}},[u,h,r,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),I0())},[u,d]),f.useEffect(()=>{const S=()=>b({});return document.addEventListener(lf,S),()=>document.removeEventListener(lf,S)},[]),s.jsx(xe.div,{...c,ref:w,style:{pointerEvents:x?N?"auto":"none":void 0,...e.style},onFocusCapture:pe(e.onFocusCapture,k.onFocusCapture),onBlurCapture:pe(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:pe(e.onPointerDownCapture,j.onPointerDownCapture)})});xu.displayName=C6;var A6="DismissableLayerBranch",R6=f.forwardRef((e,t)=>{const r=f.useContext(aj),n=f.useRef(null),a=Re(t,n);return f.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(xe.div,{...e,ref:a})});R6.displayName=A6;function T6(e,t=globalThis==null?void 0:globalThis.document){const r=wt(e),n=f.useRef(!1),a=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){ij(E6,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function D6(e,t=globalThis==null?void 0:globalThis.document){const r=wt(e),n=f.useRef(!1);return f.useEffect(()=>{const a=i=>{i.target&&!n.current&&ij(P6,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function I0(){const e=new CustomEvent(lf);document.dispatchEvent(e)}function ij(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?WP(a,i):a.dispatchEvent(i)}var bh=0;function zp(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??O0()),document.body.insertAdjacentElement("beforeend",e[1]??O0()),bh++,()=>{bh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),bh--}},[])}function O0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var wh="focusScope.autoFocusOnMount",jh="focusScope.autoFocusOnUnmount",L0={bubbles:!1,cancelable:!0},I6="FocusScope",gu=f.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=f.useState(null),d=wt(a),u=wt(i),m=f.useRef(null),h=Re(t,v=>c(v)),b=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let v=function(x){if(b.paused||!l)return;const N=x.target;l.contains(N)?m.current=N:Js(m.current,{select:!0})},y=function(x){if(b.paused||!l)return;const N=x.relatedTarget;N!==null&&(l.contains(N)||Js(m.current,{select:!0}))},g=function(x){if(document.activeElement===document.body)for(const j of x)j.removedNodes.length>0&&Js(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const p=new MutationObserver(g);return l&&p.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),p.disconnect()}}},[n,l,b.paused]),f.useEffect(()=>{if(l){F0.add(b);const v=document.activeElement;if(!l.contains(v)){const g=new CustomEvent(wh,L0);l.addEventListener(wh,d),l.dispatchEvent(g),g.defaultPrevented||(O6(U6(oj(l)),{select:!0}),document.activeElement===v&&Js(l))}return()=>{l.removeEventListener(wh,d),setTimeout(()=>{const g=new CustomEvent(jh,L0);l.addEventListener(jh,u),l.dispatchEvent(g),g.defaultPrevented||Js(v??document.body,{select:!0}),l.removeEventListener(jh,u),F0.remove(b)},0)}}},[l,d,u,b]);const w=f.useCallback(v=>{if(!r&&!n||b.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,g=document.activeElement;if(y&&g){const p=v.currentTarget,[x,N]=L6(p);x&&N?!v.shiftKey&&g===N?(v.preventDefault(),r&&Js(x,{select:!0})):v.shiftKey&&g===x&&(v.preventDefault(),r&&Js(N,{select:!0})):g===p&&v.preventDefault()}},[r,n,b.paused]);return s.jsx(xe.div,{tabIndex:-1,...o,ref:h,onKeyDown:w})});gu.displayName=I6;function O6(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Js(n,{select:t}),document.activeElement!==r)return}function L6(e){const t=oj(e),r=M0(t,e),n=M0(t.reverse(),e);return[r,n]}function oj(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function M0(e,t){for(const r of e)if(!M6(r,{upTo:t}))return r}function M6(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function F6(e){return e instanceof HTMLInputElement&&"select"in e}function Js(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&F6(e)&&t&&e.select()}}var F0=$6();function $6(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=$0(e,t),e.unshift(t)},remove(t){var r;e=$0(e,t),(r=e[0])==null||r.resume()}}}function $0(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function U6(e){return e.filter(t=>t.tagName!=="A")}var z6=Ov.useId||(()=>{}),B6=0;function Ds(e){const[t,r]=f.useState(z6());return St(()=>{r(n=>n??String(B6++))},[e]),t?`radix-${t}`:""}const W6=["top","right","bottom","left"],Tn=Math.min,dr=Math.max,Rd=Math.round,Sc=Math.floor,Dn=e=>({x:e,y:e}),q6={left:"right",right:"left",bottom:"top",top:"bottom"},V6={start:"end",end:"start"};function cf(e,t,r){return dr(e,Tn(t,r))}function Us(e,t){return typeof e=="function"?e(t):e}function zs(e){return e.split("-")[0]}function lo(e){return e.split("-")[1]}function Bp(e){return e==="x"?"y":"x"}function Wp(e){return e==="y"?"height":"width"}function In(e){return["top","bottom"].includes(zs(e))?"y":"x"}function qp(e){return Bp(In(e))}function H6(e,t,r){r===void 0&&(r=!1);const n=lo(e),a=qp(e),i=Wp(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Td(o)),[o,Td(o)]}function G6(e){const t=Td(e);return[df(e),t,df(t)]}function df(e){return e.replace(/start|end/g,t=>V6[t])}function K6(e,t,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?i:o;default:return[]}}function Y6(e,t,r,n){const a=lo(e);let i=K6(zs(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(df)))),i}function Td(e){return e.replace(/left|right|bottom|top/g,t=>q6[t])}function Q6(e){return{top:0,right:0,bottom:0,left:0,...e}}function lj(e){return typeof e!="number"?Q6(e):{top:e,right:e,bottom:e,left:e}}function Dd(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function U0(e,t,r){let{reference:n,floating:a}=e;const i=In(t),o=qp(t),l=Wp(o),c=zs(t),d=i==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let b;switch(c){case"top":b={x:u,y:n.y-a.height};break;case"bottom":b={x:u,y:n.y+n.height};break;case"right":b={x:n.x+n.width,y:m};break;case"left":b={x:n.x-a.width,y:m};break;default:b={x:n.x,y:n.y}}switch(lo(t)){case"start":b[o]-=h*(r&&d?-1:1);break;case"end":b[o]+=h*(r&&d?-1:1);break}return b}const J6=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=U0(d,n,c),h=n,b={},w=0;for(let v=0;v<l.length;v++){const{name:y,fn:g}=l[v],{x:p,y:x,data:N,reset:j}=await g({x:u,y:m,initialPlacement:n,placement:h,strategy:a,middlewareData:b,rects:d,platform:o,elements:{reference:e,floating:t}});u=p??u,m=x??m,b={...b,[y]:{...b[y],...N}},j&&w<=50&&(w++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(d=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:u,y:m}=U0(d,h,c)),v=-1)}return{x:u,y:m,placement:h,strategy:a,middlewareData:b}};async function kl(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:b=0}=Us(t,e),w=lj(b),y=l[h?m==="floating"?"reference":"floating":m],g=Dd(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),p=m==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},j=Dd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:p,offsetParent:x,strategy:c}):p);return{top:(g.top-j.top+w.top)/N.y,bottom:(j.bottom-g.bottom+w.bottom)/N.y,left:(g.left-j.left+w.left)/N.x,right:(j.right-g.right+w.right)/N.x}}const X6=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Us(e,t)||{};if(d==null)return{};const m=lj(u),h={x:r,y:n},b=qp(a),w=Wp(b),v=await o.getDimensions(d),y=b==="y",g=y?"top":"left",p=y?"bottom":"right",x=y?"clientHeight":"clientWidth",N=i.reference[w]+i.reference[b]-h[b]-i.floating[w],j=h[b]-i.reference[b],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let S=k?k[x]:0;(!S||!await(o.isElement==null?void 0:o.isElement(k)))&&(S=l.floating[x]||i.floating[w]);const _=N/2-j/2,C=S/2-v[w]/2-1,E=Tn(m[g],C),$=Tn(m[p],C),D=E,L=S-v[w]-$,W=S/2-v[w]/2+_,ae=cf(D,W,L),ee=!c.arrow&&lo(a)!=null&&W!==ae&&i.reference[w]/2-(W<D?E:$)-v[w]/2<0,X=ee?W<D?W-D:W-L:0;return{[b]:h[b]+X,data:{[b]:ae,centerOffset:W-ae-X,...ee&&{alignmentOffset:X}},reset:ee}}}),Z6=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,...y}=Us(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const g=zs(a),p=In(l),x=zs(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=h||(x||!v?[Td(l)]:G6(l)),k=w!=="none";!h&&k&&j.push(...Y6(l,v,w,N));const S=[l,...j],_=await kl(t,y),C=[];let E=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&C.push(_[g]),m){const W=H6(a,o,N);C.push(_[W[0]],_[W[1]])}if(E=[...E,{placement:a,overflows:C}],!C.every(W=>W<=0)){var $,D;const W=((($=i.flip)==null?void 0:$.index)||0)+1,ae=S[W];if(ae)return{data:{index:W,overflows:E},reset:{placement:ae}};let ee=(D=E.filter(X=>X.overflows[0]<=0).sort((X,T)=>X.overflows[1]-T.overflows[1])[0])==null?void 0:D.placement;if(!ee)switch(b){case"bestFit":{var L;const X=(L=E.filter(T=>{if(k){const q=In(T.placement);return q===p||q==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(q=>q>0).reduce((q,I)=>q+I,0)]).sort((T,q)=>T[1]-q[1])[0])==null?void 0:L[0];X&&(ee=X);break}case"initialPlacement":ee=l;break}if(a!==ee)return{reset:{placement:ee}}}return{}}}};function z0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function B0(e){return W6.some(t=>e[t]>=0)}const e3=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=Us(e,t);switch(n){case"referenceHidden":{const i=await kl(t,{...a,elementContext:"reference"}),o=z0(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:B0(o)}}}case"escaped":{const i=await kl(t,{...a,altBoundary:!0}),o=z0(i,r.floating);return{data:{escapedOffsets:o,escaped:B0(o)}}}default:return{}}}}};async function t3(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=zs(r),l=lo(r),c=In(r)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,m=Us(t,e);let{mainAxis:h,crossAxis:b,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof w=="number"&&(b=l==="end"?w*-1:w),c?{x:b*u,y:h*d}:{x:h*d,y:b*u}}const r3=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await t3(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},s3=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:g,y:p}=y;return{x:g,y:p}}},...c}=Us(e,t),d={x:r,y:n},u=await kl(t,c),m=In(zs(a)),h=Bp(m);let b=d[h],w=d[m];if(i){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",p=b+u[y],x=b-u[g];b=cf(p,b,x)}if(o){const y=m==="y"?"top":"left",g=m==="y"?"bottom":"right",p=w+u[y],x=w-u[g];w=cf(p,w,x)}const v=l.fn({...t,[h]:b,[m]:w});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[h]:i,[m]:o}}}}}},n3=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Us(e,t),u={x:r,y:n},m=In(a),h=Bp(m);let b=u[h],w=u[m];const v=Us(l,t),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const x=h==="y"?"height":"width",N=i.reference[h]-i.floating[x]+y.mainAxis,j=i.reference[h]+i.reference[x]-y.mainAxis;b<N?b=N:b>j&&(b=j)}if(d){var g,p;const x=h==="y"?"width":"height",N=["top","left"].includes(zs(a)),j=i.reference[m]-i.floating[x]+(N&&((g=o.offset)==null?void 0:g[m])||0)+(N?0:y.crossAxis),k=i.reference[m]+i.reference[x]+(N?0:((p=o.offset)==null?void 0:p[m])||0)-(N?y.crossAxis:0);w<j?w=j:w>k&&(w=k)}return{[h]:b,[m]:w}}}},a3=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Us(e,t),u=await kl(t,d),m=zs(a),h=lo(a),b=In(a)==="y",{width:w,height:v}=i.floating;let y,g;m==="top"||m==="bottom"?(y=m,g=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(g=m,y=h==="end"?"top":"bottom");const p=v-u.top-u.bottom,x=w-u.left-u.right,N=Tn(v-u[y],p),j=Tn(w-u[g],x),k=!t.middlewareData.shift;let S=N,_=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(_=x),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=p),k&&!h){const E=dr(u.left,0),$=dr(u.right,0),D=dr(u.top,0),L=dr(u.bottom,0);b?_=w-2*(E!==0||$!==0?E+$:dr(u.left,u.right)):S=v-2*(D!==0||L!==0?D+L:dr(u.top,u.bottom))}await c({...t,availableWidth:_,availableHeight:S});const C=await o.getDimensions(l.floating);return w!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function vu(){return typeof window<"u"}function co(e){return cj(e)?(e.nodeName||"").toLowerCase():"#document"}function pr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xs(e){var t;return(t=(cj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function cj(e){return vu()?e instanceof Node||e instanceof pr(e).Node:!1}function Jr(e){return vu()?e instanceof Element||e instanceof pr(e).Element:!1}function ms(e){return vu()?e instanceof HTMLElement||e instanceof pr(e).HTMLElement:!1}function W0(e){return!vu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pr(e).ShadowRoot}function Kl(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Xr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function i3(e){return["table","td","th"].includes(co(e))}function yu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Vp(e){const t=Hp(),r=Jr(e)?Xr(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function o3(e){let t=On(e);for(;ms(t)&&!Hi(t);){if(Vp(t))return t;if(yu(t))return null;t=On(t)}return null}function Hp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hi(e){return["html","body","#document"].includes(co(e))}function Xr(e){return pr(e).getComputedStyle(e)}function bu(e){return Jr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function On(e){if(co(e)==="html")return e;const t=e.assignedSlot||e.parentNode||W0(e)&&e.host||xs(e);return W0(t)?t.host:t}function dj(e){const t=On(e);return Hi(t)?e.ownerDocument?e.ownerDocument.body:e.body:ms(t)&&Kl(t)?t:dj(t)}function Cl(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=dj(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=pr(a);if(i){const l=uf(o);return t.concat(o,o.visualViewport||[],Kl(a)?a:[],l&&r?Cl(l):[])}return t.concat(a,Cl(a,[],r))}function uf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function uj(e){const t=Xr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=ms(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=Rd(r)!==i||Rd(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Gp(e){return Jr(e)?e:e.contextElement}function ui(e){const t=Gp(e);if(!ms(t))return Dn(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=uj(t);let o=(i?Rd(r.width):r.width)/n,l=(i?Rd(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const l3=Dn(0);function hj(e){const t=pr(e);return!Hp()||!t.visualViewport?l3:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function c3(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==pr(e)?!1:t}function Na(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=Gp(e);let o=Dn(1);t&&(n?Jr(n)&&(o=ui(n)):o=ui(e));const l=c3(i,r,n)?hj(i):Dn(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,m=a.height/o.y;if(i){const h=pr(i),b=n&&Jr(n)?pr(n):n;let w=h,v=uf(w);for(;v&&n&&b!==w;){const y=ui(v),g=v.getBoundingClientRect(),p=Xr(v),x=g.left+(v.clientLeft+parseFloat(p.paddingLeft))*y.x,N=g.top+(v.clientTop+parseFloat(p.paddingTop))*y.y;c*=y.x,d*=y.y,u*=y.x,m*=y.y,c+=x,d+=N,w=pr(v),v=uf(w)}}return Dd({width:u,height:m,x:c,y:d})}function d3(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=xs(n),l=t?yu(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Dn(1);const u=Dn(0),m=ms(n);if((m||!m&&!i)&&((co(n)!=="body"||Kl(o))&&(c=bu(n)),ms(n))){const h=Na(n);d=ui(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x,y:r.y*d.y-c.scrollTop*d.y+u.y}}function u3(e){return Array.from(e.getClientRects())}function hf(e,t){const r=bu(e).scrollLeft;return t?t.left+r:Na(xs(e)).left+r}function h3(e){const t=xs(e),r=bu(e),n=e.ownerDocument.body,a=dr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=dr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+hf(e);const l=-r.scrollTop;return Xr(n).direction==="rtl"&&(o+=dr(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function m3(e,t){const r=pr(e),n=xs(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=Hp();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function f3(e,t){const r=Na(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=ms(e)?ui(e):Dn(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function q0(e,t,r){let n;if(t==="viewport")n=m3(e,r);else if(t==="document")n=h3(xs(e));else if(Jr(t))n=f3(t,r);else{const a=hj(e);n={...t,x:t.x-a.x,y:t.y-a.y}}return Dd(n)}function mj(e,t){const r=On(e);return r===t||!Jr(r)||Hi(r)?!1:Xr(r).position==="fixed"||mj(r,t)}function p3(e,t){const r=t.get(e);if(r)return r;let n=Cl(e,[],!1).filter(l=>Jr(l)&&co(l)!=="body"),a=null;const i=Xr(e).position==="fixed";let o=i?On(e):e;for(;Jr(o)&&!Hi(o);){const l=Xr(o),c=Vp(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Kl(o)&&!c&&mj(e,o))?n=n.filter(u=>u!==o):a=l,o=On(o)}return t.set(e,n),n}function x3(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?yu(t)?[]:p3(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const m=q0(t,u,a);return d.top=dr(m.top,d.top),d.right=Tn(m.right,d.right),d.bottom=Tn(m.bottom,d.bottom),d.left=dr(m.left,d.left),d},q0(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function g3(e){const{width:t,height:r}=uj(e);return{width:t,height:r}}function v3(e,t,r){const n=ms(t),a=xs(t),i=r==="fixed",o=Na(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Dn(0);if(n||!n&&!i)if((co(t)!=="body"||Kl(a))&&(l=bu(t)),n){const b=Na(t,!0,i,t);c.x=b.x+t.clientLeft,c.y=b.y+t.clientTop}else a&&(c.x=hf(a));let d=0,u=0;if(a&&!n&&!i){const b=a.getBoundingClientRect();u=b.top+l.scrollTop,d=b.left+l.scrollLeft-hf(a,b)}const m=o.left+l.scrollLeft-c.x-d,h=o.top+l.scrollTop-c.y-u;return{x:m,y:h,width:o.width,height:o.height}}function Nh(e){return Xr(e).position==="static"}function V0(e,t){if(!ms(e)||Xr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return xs(e)===r&&(r=r.ownerDocument.body),r}function fj(e,t){const r=pr(e);if(yu(e))return r;if(!ms(e)){let a=On(e);for(;a&&!Hi(a);){if(Jr(a)&&!Nh(a))return a;a=On(a)}return r}let n=V0(e,t);for(;n&&i3(n)&&Nh(n);)n=V0(n,t);return n&&Hi(n)&&Nh(n)&&!Vp(n)?r:n||o3(e)||r}const y3=async function(e){const t=this.getOffsetParent||fj,r=this.getDimensions,n=await r(e.floating);return{reference:v3(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function b3(e){return Xr(e).direction==="rtl"}const w3={convertOffsetParentRelativeRectToViewportRelativeRect:d3,getDocumentElement:xs,getClippingRect:x3,getOffsetParent:fj,getElementRects:y3,getClientRects:u3,getDimensions:g3,getScale:ui,isElement:Jr,isRTL:b3};function j3(e,t){let r=null,n;const a=xs(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:d,top:u,width:m,height:h}=e.getBoundingClientRect();if(l||t(),!m||!h)return;const b=Sc(u),w=Sc(a.clientWidth-(d+m)),v=Sc(a.clientHeight-(u+h)),y=Sc(d),p={rootMargin:-b+"px "+-w+"px "+-v+"px "+-y+"px",threshold:dr(0,Tn(1,c))||1};let x=!0;function N(j){const k=j[0].intersectionRatio;if(k!==c){if(!x)return o();k?o(!1,k):n=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{r=new IntersectionObserver(N,{...p,root:a.ownerDocument})}catch{r=new IntersectionObserver(N,p)}r.observe(e)}return o(!0),i}function N3(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Gp(e),u=a||i?[...d?Cl(d):[],...Cl(t)]:[];u.forEach(g=>{a&&g.addEventListener("scroll",r,{passive:!0}),i&&g.addEventListener("resize",r)});const m=d&&l?j3(d,r):null;let h=-1,b=null;o&&(b=new ResizeObserver(g=>{let[p]=g;p&&p.target===d&&b&&(b.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var x;(x=b)==null||x.observe(t)})),r()}),d&&!c&&b.observe(d),b.observe(t));let w,v=c?Na(e):null;c&&y();function y(){const g=Na(e);v&&(g.x!==v.x||g.y!==v.y||g.width!==v.width||g.height!==v.height)&&r(),v=g,w=requestAnimationFrame(y)}return r(),()=>{var g;u.forEach(p=>{a&&p.removeEventListener("scroll",r),i&&p.removeEventListener("resize",r)}),m==null||m(),(g=b)==null||g.disconnect(),b=null,c&&cancelAnimationFrame(w)}}const _3=r3,S3=s3,k3=Z6,C3=a3,E3=e3,H0=X6,P3=n3,A3=(e,t,r)=>{const n=new Map,a={platform:w3,...r},i={...a.platform,_c:n};return J6(e,t,{...a,platform:i})};var Vc=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Id(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Id(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Id(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function pj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function G0(e,t){const r=pj(e);return Math.round(t*r)/r}function _h(e){const t=f.useRef(e);return Vc(()=>{t.current=e}),t}function R3(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,m]=f.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,b]=f.useState(n);Id(h,n)||b(n);const[w,v]=f.useState(null),[y,g]=f.useState(null),p=f.useCallback(T=>{T!==k.current&&(k.current=T,v(T))},[]),x=f.useCallback(T=>{T!==S.current&&(S.current=T,g(T))},[]),N=i||w,j=o||y,k=f.useRef(null),S=f.useRef(null),_=f.useRef(u),C=c!=null,E=_h(c),$=_h(a),D=_h(d),L=f.useCallback(()=>{if(!k.current||!S.current)return;const T={placement:t,strategy:r,middleware:h};$.current&&(T.platform=$.current),A3(k.current,S.current,T).then(q=>{const I={...q,isPositioned:D.current!==!1};W.current&&!Id(_.current,I)&&(_.current=I,Xi.flushSync(()=>{m(I)}))})},[h,t,r,$,D]);Vc(()=>{d===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,m(T=>({...T,isPositioned:!1})))},[d]);const W=f.useRef(!1);Vc(()=>(W.current=!0,()=>{W.current=!1}),[]),Vc(()=>{if(N&&(k.current=N),j&&(S.current=j),N&&j){if(E.current)return E.current(N,j,L);L()}},[N,j,L,E,C]);const ae=f.useMemo(()=>({reference:k,floating:S,setReference:p,setFloating:x}),[p,x]),ee=f.useMemo(()=>({reference:N,floating:j}),[N,j]),X=f.useMemo(()=>{const T={position:r,left:0,top:0};if(!ee.floating)return T;const q=G0(ee.floating,u.x),I=G0(ee.floating,u.y);return l?{...T,transform:"translate("+q+"px, "+I+"px)",...pj(ee.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:q,top:I}},[r,l,ee.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:L,refs:ae,elements:ee,floatingStyles:X}),[u,L,ae,ee,X])}const T3=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?H0({element:n.current,padding:a}).fn(r):{}:n?H0({element:n,padding:a}).fn(r):{}}}},D3=(e,t)=>({..._3(e),options:[e,t]}),I3=(e,t)=>({...S3(e),options:[e,t]}),O3=(e,t)=>({...P3(e),options:[e,t]}),L3=(e,t)=>({...k3(e),options:[e,t]}),M3=(e,t)=>({...C3(e),options:[e,t]}),F3=(e,t)=>({...E3(e),options:[e,t]}),$3=(e,t)=>({...T3(e),options:[e,t]});var U3="Arrow",xj=f.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(xe.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});xj.displayName=U3;var z3=xj;function B3(e,t=[]){let r=[];function n(i,o){const l=f.createContext(o),c=r.length;r=[...r,o];function d(m){const{scope:h,children:b,...w}=m,v=(h==null?void 0:h[e][c])||l,y=f.useMemo(()=>w,Object.values(w));return s.jsx(v.Provider,{value:y,children:b})}function u(m,h){const b=(h==null?void 0:h[e][c])||l,w=f.useContext(b);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,W3(a,...t)]}function W3(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Kp(e){const[t,r]=f.useState(void 0);return St(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Yp="Popper",[gj,wu]=B3(Yp),[q3,vj]=gj(Yp),yj=e=>{const{__scopePopper:t,children:r}=e,[n,a]=f.useState(null);return s.jsx(q3,{scope:t,anchor:n,onAnchorChange:a,children:r})};yj.displayName=Yp;var bj="PopperAnchor",wj=f.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=vj(bj,r),o=f.useRef(null),l=Re(t,o);return f.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(xe.div,{...a,ref:l})});wj.displayName=bj;var Qp="PopperContent",[V3,H3]=gj(Qp),jj=f.forwardRef((e,t)=>{var he,Le,tt,We,Me,Fe;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:b="optimized",onPlaced:w,...v}=e,y=vj(Qp,r),[g,p]=f.useState(null),x=Re(t,Dt=>p(Dt)),[N,j]=f.useState(null),k=Kp(N),S=(k==null?void 0:k.width)??0,_=(k==null?void 0:k.height)??0,C=n+(i!=="center"?"-"+i:""),E=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},$=Array.isArray(d)?d:[d],D=$.length>0,L={padding:E,boundary:$.filter(K3),altBoundary:D},{refs:W,floatingStyles:ae,placement:ee,isPositioned:X,middlewareData:T}=R3({strategy:"fixed",placement:C,whileElementsMounted:(...Dt)=>N3(...Dt,{animationFrame:b==="always"}),elements:{reference:y.anchor},middleware:[D3({mainAxis:a+_,alignmentAxis:o}),c&&I3({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?O3():void 0,...L}),c&&L3({...L}),M3({...L,apply:({elements:Dt,rects:or,availableWidth:Aa,availableHeight:Ra})=>{const{width:Ta,height:P}=or.reference,O=Dt.floating.style;O.setProperty("--radix-popper-available-width",`${Aa}px`),O.setProperty("--radix-popper-available-height",`${Ra}px`),O.setProperty("--radix-popper-anchor-width",`${Ta}px`),O.setProperty("--radix-popper-anchor-height",`${P}px`)}}),N&&$3({element:N,padding:l}),Y3({arrowWidth:S,arrowHeight:_}),h&&F3({strategy:"referenceHidden",...L})]}),[q,I]=Sj(ee),B=wt(w);St(()=>{X&&(B==null||B())},[X,B]);const ne=(he=T.arrow)==null?void 0:he.x,ye=(Le=T.arrow)==null?void 0:Le.y,de=((tt=T.arrow)==null?void 0:tt.centerOffset)!==0,[De,Ke]=f.useState();return St(()=>{g&&Ke(window.getComputedStyle(g).zIndex)},[g]),s.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:X?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[(We=T.transformOrigin)==null?void 0:We.x,(Me=T.transformOrigin)==null?void 0:Me.y].join(" "),...((Fe=T.hide)==null?void 0:Fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(V3,{scope:r,placedSide:q,onArrowChange:j,arrowX:ne,arrowY:ye,shouldHideArrow:de,children:s.jsx(xe.div,{"data-side":q,"data-align":I,...v,ref:x,style:{...v.style,animation:X?void 0:"none"}})})})});jj.displayName=Qp;var Nj="PopperArrow",G3={top:"bottom",right:"left",bottom:"top",left:"right"},_j=f.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=H3(Nj,n),o=G3[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(z3,{...a,ref:r,style:{...a.style,display:"block"}})})});_j.displayName=Nj;function K3(e){return e!==null}var Y3=e=>({name:"transformOrigin",options:e,fn(t){var y,g,p;const{placement:r,rects:n,middlewareData:a}=t,o=((y=a.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=Sj(r),m={start:"0%",center:"50%",end:"100%"}[u],h=(((g=a.arrow)==null?void 0:g.x)??0)+l/2,b=(((p=a.arrow)==null?void 0:p.y)??0)+c/2;let w="",v="";return d==="bottom"?(w=o?m:`${h}px`,v=`${-c}px`):d==="top"?(w=o?m:`${h}px`,v=`${n.floating.height+c}px`):d==="right"?(w=`${-c}px`,v=o?m:`${b}px`):d==="left"&&(w=`${n.floating.width+c}px`,v=o?m:`${b}px`),{data:{x:w,y:v}}}});function Sj(e){const[t,r="center"]=e.split("-");return[t,r]}var kj=yj,Jp=wj,Cj=jj,Ej=_j,Q3="Portal",ju=f.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=f.useState(!1);St(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?yk.createPortal(s.jsx(xe.div,{...n,ref:t}),o):null});ju.displayName=Q3;function J3(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var Or=e=>{const{present:t,children:r}=e,n=X3(t),a=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),i=Re(n.ref,Z3(a));return typeof r=="function"||n.isPresent?f.cloneElement(a,{ref:i}):null};Or.displayName="Presence";function X3(e){const[t,r]=f.useState(),n=f.useRef({}),a=f.useRef(e),i=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=J3(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=kc(n.current);i.current=l==="mounted"?d:"none"},[l]),St(()=>{const d=n.current,u=a.current;if(u!==e){const h=i.current,b=kc(d);e?c("MOUNT"):b==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),St(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=b=>{const v=kc(n.current).includes(b.animationName);if(b.target===t&&v&&(c("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=b=>{b.target===t&&(i.current=kc(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function kc(e){return(e==null?void 0:e.animationName)||"none"}function Z3(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ln({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=eA({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,l=wt(r),c=f.useCallback(d=>{if(i){const m=typeof d=="function"?d(e):d;m!==e&&l(m)}else a(d)},[i,e,a,l]);return[o,c]}function eA({defaultProp:e,onChange:t}){const r=f.useState(e),[n]=r,a=f.useRef(n),i=wt(t);return f.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var tA=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Fa=new WeakMap,Cc=new WeakMap,Ec={},Sh=0,Pj=function(e){return e&&(e.host||Pj(e.parentNode))},rA=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Pj(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},sA=function(e,t,r,n){var a=rA(t,Array.isArray(e)?e:[e]);Ec[r]||(Ec[r]=new WeakMap);var i=Ec[r],o=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(l.has(h))u(h);else try{var b=h.getAttribute(n),w=b!==null&&b!=="false",v=(Fa.get(h)||0)+1,y=(i.get(h)||0)+1;Fa.set(h,v),i.set(h,y),o.push(h),v===1&&w&&Cc.set(h,!0),y===1&&h.setAttribute(r,"true"),w||h.setAttribute(n,"true")}catch(g){console.error("aria-hidden: cannot operate on ",h,g)}})};return u(t),l.clear(),Sh++,function(){o.forEach(function(m){var h=Fa.get(m)-1,b=i.get(m)-1;Fa.set(m,h),i.set(m,b),h||(Cc.has(m)||m.removeAttribute(n),Cc.delete(m)),b||m.removeAttribute(r)}),Sh--,Sh||(Fa=new WeakMap,Fa=new WeakMap,Cc=new WeakMap,Ec={})}},Xp=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=tA(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),sA(n,a,r,"aria-hidden")):function(){return null}},ls=function(){return ls=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ls.apply(this,arguments)};function Aj(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function nA(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Hc="right-scroll-bar-position",Gc="width-before-scroll-bar",aA="with-scroll-bars-hidden",iA="--removed-body-scroll-bar-size";function kh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function oA(e,t){var r=f.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var lA=typeof window<"u"?f.useLayoutEffect:f.useEffect,K0=new WeakMap;function cA(e,t){var r=oA(null,function(n){return e.forEach(function(a){return kh(a,n)})});return lA(function(){var n=K0.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||kh(l,null)}),i.forEach(function(l){a.has(l)||kh(l,o)})}K0.set(r,e)},[e]),r}function dA(e){return e}function uA(e,t){t===void 0&&(t=dA);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function hA(e){e===void 0&&(e={});var t=uA(null);return t.options=ls({async:!0,ssr:!1},e),t}var Rj=function(e){var t=e.sideCar,r=Aj(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,ls({},r))};Rj.isSideCarExport=!0;function mA(e,t){return e.useMedium(t),Rj}var Tj=hA(),Ch=function(){},Nu=f.forwardRef(function(e,t){var r=f.useRef(null),n=f.useState({onScrollCapture:Ch,onWheelCapture:Ch,onTouchMoveCapture:Ch}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,h=e.sideCar,b=e.noIsolation,w=e.inert,v=e.allowPinchZoom,y=e.as,g=y===void 0?"div":y,p=e.gapMode,x=Aj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=h,j=cA([r,t]),k=ls(ls({},x),a);return f.createElement(f.Fragment,null,u&&f.createElement(N,{sideCar:Tj,removeScrollBar:d,shards:m,noIsolation:b,inert:w,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:p}),o?f.cloneElement(f.Children.only(l),ls(ls({},k),{ref:j})):f.createElement(g,ls({},k,{className:c,ref:j}),l))});Nu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Nu.classNames={fullWidth:Gc,zeroRight:Hc};var fA=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function pA(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=fA();return t&&e.setAttribute("nonce",t),e}function xA(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function gA(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var vA=function(){var e=0,t=null;return{add:function(r){e==0&&(t=pA())&&(xA(t,r),gA(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},yA=function(){var e=vA();return function(t,r){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Dj=function(){var e=yA(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},bA={left:0,top:0,right:0,gap:0},Eh=function(e){return parseInt(e||"",10)||0},wA=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Eh(r),Eh(n),Eh(a)]},jA=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return bA;var t=wA(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},NA=Dj(),hi="data-scroll-locked",_A=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(aA,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(hi,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Gc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Hc," .").concat(Hc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Gc," .").concat(Gc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(hi,`] {
    `).concat(iA,": ").concat(l,`px;
  }
`)},Y0=function(){var e=parseInt(document.body.getAttribute(hi)||"0",10);return isFinite(e)?e:0},SA=function(){f.useEffect(function(){return document.body.setAttribute(hi,(Y0()+1).toString()),function(){var e=Y0()-1;e<=0?document.body.removeAttribute(hi):document.body.setAttribute(hi,e.toString())}},[])},kA=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;SA();var i=f.useMemo(function(){return jA(a)},[a]);return f.createElement(NA,{styles:_A(i,!t,a,r?"":"!important")})},mf=!1;if(typeof window<"u")try{var Pc=Object.defineProperty({},"passive",{get:function(){return mf=!0,!0}});window.addEventListener("test",Pc,Pc),window.removeEventListener("test",Pc,Pc)}catch{mf=!1}var $a=mf?{passive:!1}:!1,CA=function(e){return e.tagName==="TEXTAREA"},Ij=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!CA(e)&&r[t]==="visible")},EA=function(e){return Ij(e,"overflowY")},PA=function(e){return Ij(e,"overflowX")},Q0=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=Oj(e,n);if(a){var i=Lj(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},AA=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},RA=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Oj=function(e,t){return e==="v"?EA(t):PA(t)},Lj=function(e,t){return e==="v"?AA(t):RA(t)},TA=function(e,t){return e==="h"&&t==="rtl"?-1:1},DA=function(e,t,r,n,a){var i=TA(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),d=!1,u=o>0,m=0,h=0;do{var b=Lj(e,l),w=b[0],v=b[1],y=b[2],g=v-y-i*w;(w||g)&&Oj(e,l)&&(m+=g,h+=w),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(m)<1||!a)||!u&&(Math.abs(h)<1||!a))&&(d=!0),d},Ac=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},J0=function(e){return[e.deltaX,e.deltaY]},X0=function(e){return e&&"current"in e?e.current:e},IA=function(e,t){return e[0]===t[0]&&e[1]===t[1]},OA=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},LA=0,Ua=[];function MA(e){var t=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),a=f.useState(LA++)[0],i=f.useState(Dj)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=nA([e.lockRef.current],(e.shards||[]).map(X0),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var g=Ac(v),p=r.current,x="deltaX"in v?v.deltaX:p[0]-g[0],N="deltaY"in v?v.deltaY:p[1]-g[1],j,k=v.target,S=Math.abs(x)>Math.abs(N)?"h":"v";if("touches"in v&&S==="h"&&k.type==="range")return!1;var _=Q0(S,k);if(!_)return!0;if(_?j=S:(j=S==="v"?"h":"v",_=Q0(S,k)),!_)return!1;if(!n.current&&"changedTouches"in v&&(x||N)&&(n.current=j),!j)return!0;var C=n.current||j;return DA(C,y,v,C==="h"?x:N,!0)},[]),c=f.useCallback(function(v){var y=v;if(!(!Ua.length||Ua[Ua.length-1]!==i)){var g="deltaY"in y?J0(y):Ac(y),p=t.current.filter(function(j){return j.name===y.type&&(j.target===y.target||y.target===j.shadowParent)&&IA(j.delta,g)})[0];if(p&&p.should){y.cancelable&&y.preventDefault();return}if(!p){var x=(o.current.shards||[]).map(X0).filter(Boolean).filter(function(j){return j.contains(y.target)}),N=x.length>0?l(y,x[0]):!o.current.noIsolation;N&&y.cancelable&&y.preventDefault()}}},[]),d=f.useCallback(function(v,y,g,p){var x={name:v,delta:y,target:g,should:p,shadowParent:FA(g)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(N){return N!==x})},1)},[]),u=f.useCallback(function(v){r.current=Ac(v),n.current=void 0},[]),m=f.useCallback(function(v){d(v.type,J0(v),v.target,l(v,e.lockRef.current))},[]),h=f.useCallback(function(v){d(v.type,Ac(v),v.target,l(v,e.lockRef.current))},[]);f.useEffect(function(){return Ua.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,$a),document.addEventListener("touchmove",c,$a),document.addEventListener("touchstart",u,$a),function(){Ua=Ua.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,$a),document.removeEventListener("touchmove",c,$a),document.removeEventListener("touchstart",u,$a)}},[]);var b=e.removeScrollBar,w=e.inert;return f.createElement(f.Fragment,null,w?f.createElement(i,{styles:OA(a)}):null,b?f.createElement(kA,{gapMode:e.gapMode}):null)}function FA(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const $A=mA(Tj,MA);var _u=f.forwardRef(function(e,t){return f.createElement(Nu,ls({},e,{ref:t,sideCar:$A}))});_u.classNames=Nu.classNames;var Zp="Popover",[Mj,KO]=ps(Zp,[wu]),Yl=wu(),[UA,Wn]=Mj(Zp),Fj=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=Yl(t),c=f.useRef(null),[d,u]=f.useState(!1),[m=!1,h]=Ln({prop:n,defaultProp:a,onChange:i});return s.jsx(kj,{...l,children:s.jsx(UA,{scope:t,contentId:Ds(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(b=>!b),[h]),hasCustomAnchor:d,onCustomAnchorAdd:f.useCallback(()=>u(!0),[]),onCustomAnchorRemove:f.useCallback(()=>u(!1),[]),modal:o,children:r})})};Fj.displayName=Zp;var $j="PopoverAnchor",zA=f.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Wn($j,r),i=Yl(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return f.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Jp,{...i,...n,ref:t})});zA.displayName=$j;var Uj="PopoverTrigger",zj=f.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Wn(Uj,r),i=Yl(r),o=Re(t,a.triggerRef),l=s.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Hj(a.open),...n,ref:o,onClick:pe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Jp,{asChild:!0,...i,children:l})});zj.displayName=Uj;var ex="PopoverPortal",[BA,WA]=Mj(ex,{forceMount:void 0}),Bj=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Wn(ex,t);return s.jsx(BA,{scope:t,forceMount:r,children:s.jsx(Or,{present:r||i.open,children:s.jsx(ju,{asChild:!0,container:a,children:n})})})};Bj.displayName=ex;var Gi="PopoverContent",Wj=f.forwardRef((e,t)=>{const r=WA(Gi,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Wn(Gi,e.__scopePopover);return s.jsx(Or,{present:n||i.open,children:i.modal?s.jsx(qA,{...a,ref:t}):s.jsx(VA,{...a,ref:t})})});Wj.displayName=Gi;var qA=f.forwardRef((e,t)=>{const r=Wn(Gi,e.__scopePopover),n=f.useRef(null),a=Re(t,n),i=f.useRef(!1);return f.useEffect(()=>{const o=n.current;if(o)return Xp(o)},[]),s.jsx(_u,{as:Rn,allowPinchZoom:!0,children:s.jsx(qj,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:pe(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:pe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),VA=f.forwardRef((e,t)=>{const r=Wn(Gi,e.__scopePopover),n=f.useRef(!1),a=f.useRef(!1);return s.jsx(qj,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),qj=f.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,h=Wn(Gi,r),b=Yl(r);return zp(),s.jsx(gu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(xu,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(Cj,{"data-state":Hj(h.open),role:"dialog",id:h.contentId,...b,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Vj="PopoverClose",HA=f.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Wn(Vj,r);return s.jsx(xe.button,{type:"button",...n,ref:t,onClick:pe(e.onClick,()=>a.onOpenChange(!1))})});HA.displayName=Vj;var GA="PopoverArrow",KA=f.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Yl(r);return s.jsx(Ej,{...a,...n,ref:t})});KA.displayName=GA;function Hj(e){return e?"open":"closed"}var YA=Fj,QA=zj,JA=Bj,Gj=Wj;const XA=YA,ZA=QA,Kj=f.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(JA,{children:s.jsx(Gj,{ref:a,align:t,sideOffset:r,className:ve("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Kj.displayName=Gj.displayName;class eR{success(t,r){return _e.success(t,{duration:(r==null?void 0:r.duration)||4e3,position:(r==null?void 0:r.position)||"top-center",icon:(r==null?void 0:r.icon)||"",style:{background:"#10B981",color:"#fff",borderRadius:"8px",fontSize:"14px",fontWeight:"500"}})}error(t,r){return _e.error(t,{duration:(r==null?void 0:r.duration)||5e3,position:(r==null?void 0:r.position)||"top-center",icon:(r==null?void 0:r.icon)||"",style:{background:"#EF4444",color:"#fff",borderRadius:"8px",fontSize:"14px",fontWeight:"500"}})}info(t,r){return _e(t,{duration:(r==null?void 0:r.duration)||4e3,position:(r==null?void 0:r.position)||"top-center",icon:(r==null?void 0:r.icon)||"",style:{background:"#3B82F6",color:"#fff",borderRadius:"8px",fontSize:"14px",fontWeight:"500"}})}loading(t,r){return _e.loading(t,{position:(r==null?void 0:r.position)||"top-center",style:{background:"#6B7280",color:"#fff",borderRadius:"8px",fontSize:"14px",fontWeight:"500"}})}promise(t,r,n){return _e.promise(t,r,{position:(n==null?void 0:n.position)||"top-center",style:{borderRadius:"8px",fontSize:"14px",fontWeight:"500"},success:{style:{background:"#10B981",color:"#fff"},icon:""},error:{style:{background:"#EF4444",color:"#fff"},icon:""},loading:{style:{background:"#6B7280",color:"#fff"}}})}dismissAll(){_e.dismiss()}dismiss(t){_e.dismiss(t)}}const se=new eR,Te=()=>{const[e,t]=f.useState({siteName:"EasyPaisa",currencyCode:"PKR",currencySymbol:"Rs.",supportedCurrencies:{}}),[r,n]=f.useState(!0);f.useEffect(()=>{a()},[]);const a=async()=>{try{const{data:i,error:o}=await A.from("system_settings").select("setting_key, setting_value").in("setting_key",["site_name","default_currency_code","default_currency_symbol","supported_currencies"]);if(o){console.error("Error fetching system settings:",o);return}const l={};i==null||i.forEach(d=>{l[d.setting_key]=d.setting_value||""});let c={};try{l.supported_currencies&&(c=JSON.parse(l.supported_currencies))}catch(d){console.warn("Failed to parse supported currencies:",d)}t({siteName:l.site_name||"EasyPaisa",currencyCode:l.default_currency_code||"PKR",currencySymbol:l.default_currency_symbol||"Rs.",supportedCurrencies:c})}catch(i){console.error("Error parsing system settings:",i)}finally{n(!1)}};return{settings:e,loading:r,refetch:a}},tR=({pageTitle:e})=>{const t=Gl(),{user:r}=Ze(),{settings:n}=Te(),[a,i]=f.useState(!1),[o,l]=f.useState([]),[c,d]=f.useState(!1),[u,m]=f.useState(null),h=o.filter(_=>_.source==="admin"?!_.user_has_read:!_.is_read).length,b=async()=>{if(r)try{const{data:_,error:C}=await A.from("users").select("id, full_name, profile_image_url").eq("id",r.id).single();C?console.error("Error fetching user data:",C):m(_)}catch(_){console.error("Error:",_)}};f.useEffect(()=>{b()},[r]),f.useEffect(()=>{if(!(r!=null&&r.id))return;const _=A.channel("header-user-changes").on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${r.id}`},C=>{console.log("User data updated in header:",C),C.new&&m(E=>E?{...E,...C.new}:null)}).subscribe();return()=>{A.removeChannel(_)}},[r==null?void 0:r.id]);const w=async()=>{if(r){d(!0);try{console.log("Fetching all notifications for user:",r.id);const{data:_,error:C}=await A.from("notifications").select("*").eq("is_broadcast",!0).order("created_at",{ascending:!1}).limit(5);C&&console.error("Error fetching admin notifications:",C);const{data:E,error:$}=await A.from("notifications_user").select("*").eq("user_id",r.id).order("created_at",{ascending:!1}).limit(5);$&&console.error("Error fetching user notifications:",$),console.log("Admin notifications found:",(_==null?void 0:_.length)||0),console.log("User notifications found:",(E==null?void 0:E.length)||0);const D=(_||[]).map(X=>X.id);let L=[];if(D.length>0){const{data:X,error:T}=await A.from("user_notification_reads").select("notification_id").eq("user_id",r.id).in("notification_id",D);!T&&X&&(L=X.map(q=>q.notification_id))}const W=(_||[]).map(X=>({...X,source:"admin",user_has_read:L.includes(X.id)})),ae=(E||[]).map(X=>({...X,source:"user"})),ee=[...W,...ae].sort((X,T)=>new Date(T.created_at).getTime()-new Date(X.created_at).getTime()).slice(0,8);console.log("Total notifications combined:",ee.length),l(ee)}catch(_){console.error("Error fetching notifications:",_)}finally{d(!1)}}};f.useEffect(()=>{w()},[r]),f.useEffect(()=>{if(!r)return;const _=A.channel("header-notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:"is_broadcast=eq.true"},C=>{console.log("Admin notification change detected:",C),w()}).on("postgres_changes",{event:"*",schema:"public",table:"notifications_user",filter:`user_id=eq.${r.id}`},C=>{console.log("User notification change detected:",C),w()}).subscribe();return()=>{A.removeChannel(_)}},[r]);const v=async _=>{if(r)try{if(_.source==="admin"){const{error:C}=await A.rpc("mark_notification_read_with_user",{p_notification_id:_.id,p_user_id:r.id});if(C)throw C}else{const{error:C}=await A.rpc("mark_user_notification_read_with_user",{p_notification_id:_.id,p_user_id:r.id});if(C)throw C}l(o.map(C=>C.id===_.id?_.source==="admin"?{...C,user_has_read:!0}:{...C,is_read:!0}:C))}catch(C){console.error("Error marking notification as read:",C),se.error("Failed to mark notification as read")}},y=async()=>{if(r)try{const _=o.filter(E=>E.source==="admin"&&!E.user_has_read);for(const E of _)await A.rpc("mark_notification_read_with_user",{p_notification_id:E.id,p_user_id:r.id});const C=o.filter(E=>E.source==="user"&&!E.is_read);for(const E of C)await A.rpc("mark_user_notification_read_with_user",{p_notification_id:E.id,p_user_id:r.id});l(o.map(E=>E.source==="admin"?{...E,user_has_read:!0}:{...E,is_read:!0})),se.success("All notifications marked as read")}catch(_){console.error("Error marking all notifications as read:",_),se.error("Failed to mark all notifications as read")}},g=async _=>{if(r)try{if(_.source==="admin")await v(_);else{const{error:C}=await A.rpc("clear_user_notification_with_user",{p_notification_id:_.id,p_user_id:r.id});if(C)throw C}l(o.filter(C=>C.id!==_.id)),se.success("Notification removed")}catch(C){console.error("Error deleting notification:",C),se.error("Failed to remove notification")}},p=_=>{switch(_){case"deposit":return"bg-green-50 border-l-green-400 hover:bg-green-100";case"withdrawal":return"bg-blue-50 border-l-blue-400 hover:bg-blue-100";case"investment":return"bg-purple-50 border-l-purple-400 hover:bg-purple-100";case"security":return"bg-orange-50 border-l-orange-400 hover:bg-orange-100";case"admin":case"system":return"bg-red-50 border-l-red-400 hover:bg-red-100";default:return"bg-gray-50 border-l-gray-400 hover:bg-gray-100"}},x=_=>{const C=new Date(_),$=new Date().getTime()-C.getTime(),D=$/(1e3*60*60),L=$/(1e3*60*60*24);return D<1?`${Math.floor($/6e4)} minutes ago`:D<24?`${Math.floor(D)} hours ago`:L<7?`${Math.floor(L)} days ago`:C.toLocaleDateString()},N=_=>_.source==="admin"?!_.user_has_read:!_.is_read,j=_=>_.replace(/Rs\.\s?/g,`${n.currencySymbol} `),k=_=>_.split(" ").map(C=>C.charAt(0)).join("").toUpperCase().slice(0,2),S=(u==null?void 0:u.profile_image_url)||"/lovable-uploads/ecb13db3-ef6b-460e-bcad-5ce0e5bd11dd.png";return s.jsxs("div",{className:"bg-gradient-to-r from-emerald-400 via-green-400 to-teal-400 p-3 pt-safe sticky top-0 z-20 shadow-lg backdrop-blur-sm",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 via-green-500/10 to-teal-500/10"}),s.jsxs("div",{className:"relative z-10 flex items-center justify-between max-w-screen-lg mx-auto",children:[s.jsx("div",{className:"flex items-center",children:s.jsx(me,{to:"/my-account",className:"group",children:s.jsxs("div",{className:"relative",children:[s.jsxs(ao,{className:"h-9 w-9 border-2 border-white/30 shadow-lg ring-1 ring-white/20 transition-all duration-200 group-hover:scale-105",children:[s.jsx(io,{src:S,alt:"Profile",className:"object-cover"}),s.jsx(oo,{className:"bg-white/20 text-white font-bold text-sm backdrop-blur-sm",children:u!=null&&u.full_name?k(u.full_name):r!=null&&r.full_name?k(r.full_name):"DP"})]}),s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 border-2 border-white rounded-full shadow-sm"})]})})}),s.jsx("div",{className:"text-center flex-1 mx-3",children:s.jsx("h1",{className:"text-white text-lg font-bold tracking-wide drop-shadow-sm",children:e||"easypaisa"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"relative focus:outline-none group p-2 rounded-lg bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-200 hover:scale-105 active:scale-95","aria-label":"Search",children:s.jsx(qs,{size:t?18:20,className:"text-white drop-shadow-sm group-hover:text-white/90 transition-colors"})}),s.jsxs(XA,{open:a,onOpenChange:i,children:[s.jsx(ZA,{asChild:!0,children:s.jsxs("button",{className:"relative focus:outline-none group p-2 rounded-lg bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-all duration-200 hover:scale-105 active:scale-95","aria-label":"Notifications",children:[s.jsx(Pn,{size:t?18:20,className:"text-white drop-shadow-sm group-hover:text-white/90 transition-colors"}),h>0&&s.jsx("div",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-gradient-to-r from-red-500 to-pink-500 rounded-full shadow-lg border-2 border-white flex items-center justify-center animate-pulse",children:s.jsx("span",{className:"text-[10px] text-white font-bold px-1",children:h>9?"9+":h})})]})}),s.jsx(Kj,{className:"w-96 p-0 mr-4 shadow-xl border-0 bg-white/95 backdrop-blur-sm",align:"end",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-emerald-50 to-green-50 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"Notifications"}),h>0&&s.jsx("div",{className:"flex items-center mt-1",children:s.jsxs(ke,{variant:"secondary",className:"bg-emerald-100 text-emerald-700 hover:bg-emerald-200",children:[h," new"]})})]}),h>0&&s.jsxs("button",{onClick:y,className:"flex items-center space-x-1 text-sm text-emerald-600 hover:text-emerald-800 font-medium bg-emerald-100 hover:bg-emerald-200 px-3 py-1.5 rounded-full transition-colors",children:[s.jsx(jP,{size:14}),s.jsx("span",{children:"Mark all read"})]})]})}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:c?s.jsxs("div",{className:"px-6 py-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500 mx-auto"}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Loading notifications..."})]}):o.length>0?s.jsx("div",{className:"divide-y divide-gray-50",children:o.map(_=>s.jsxs("div",{className:`relative px-6 py-4 border-l-4 transition-all duration-200 cursor-pointer group ${p(_.type)} ${N(_)?"shadow-sm":""}`,onClick:()=>v(_),children:[N(_)&&s.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-emerald-500 rounded-full shadow-sm"}),s.jsx("button",{onClick:C=>{C.stopPropagation(),g(_)},className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-200 rounded-full transition-all duration-200",children:s.jsx(Hl,{size:12,className:"text-gray-400 hover:text-gray-600"})}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center text-lg border border-gray-100",children:_.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsx("h4",{className:`font-semibold text-gray-900 text-sm leading-tight ${N(_)?"font-bold":""}`,children:_.title})}),s.jsx("p",{className:"text-gray-600 text-sm mt-1 leading-relaxed",children:j(_.message)}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:x(_.created_at)}),s.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[_.source==="admin"&&s.jsx(ke,{variant:"outline",className:"text-xs px-2 py-0 bg-red-50 text-red-600 border-red-200",children:"Admin"}),_.source==="user"&&s.jsx(ke,{variant:"outline",className:"text-xs px-2 py-0 bg-blue-50 text-blue-600 border-blue-200",children:"Activity"}),N(_)&&s.jsx(ke,{variant:"outline",className:"text-xs px-2 py-0 bg-emerald-50 text-emerald-600 border-emerald-200",children:"New"})]})]})]})]})]},_.id))}):s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(Pn,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"No notifications yet"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"We'll notify you when something important happens"})]})}),o.length>0&&s.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-100",children:s.jsx(me,{to:"/notifications",onClick:()=>i(!1),className:"text-sm text-emerald-600 hover:text-emerald-800 font-medium w-full text-center py-1 hover:bg-emerald-50 rounded transition-colors block",children:"View all notifications"})})]})})]})]})]})]})},rR=()=>{const t=br().pathname,r=Gl(),n=[{icon:s.jsx(Lp,{size:r?16:18}),label:"Home",to:"/",isActive:t==="/"},{icon:s.jsx(gr,{size:r?16:18}),label:"Add Money",to:"/deposit",isActive:t==="/deposit"},{icon:s.jsx(qe,{size:r?16:18}),label:"Invest",to:"/investment-plans",isActive:t==="/investment-plans"},{icon:s.jsx(Jo,{size:r?16:18}),label:"History",to:"/transactions",isActive:t==="/transactions"}];return s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-200 z-40 shadow-2xl",children:s.jsx("div",{className:"max-w-md mx-auto",children:s.jsxs("div",{className:"flex justify-between items-center py-2 px-4",children:[n.slice(0,2).map(a=>s.jsx(Z0,{...a},a.to)),s.jsx("div",{className:"relative -mt-5",children:s.jsx(me,{to:"/my-account",className:"block",children:s.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center text-white shadow-xl border-4 border-white hover:scale-105 transition-transform",children:s.jsx(jt,{size:r?"20":"24"})})})}),n.slice(2).map(a=>s.jsx(Z0,{...a},a.to))]})})})},Z0=({icon:e,label:t,to:r,isActive:n=!1,hasNotification:a=!1})=>{const i=Gl();return s.jsxs(me,{to:r,className:`flex flex-col items-center ${i?"px-1":"px-2"} py-1 transition-all duration-200 ${n?"text-green-500 transform scale-110":"text-gray-500 hover:text-gray-700"}`,children:[s.jsxs("div",{className:"flex justify-center items-center relative",children:[s.jsx("div",{className:`flex justify-center items-center p-1 rounded-lg transition-all ${n?"bg-green-100":""}`,children:e}),a&&s.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 sm:w-2.5 sm:h-2.5 bg-red-500 rounded-full border border-white animate-pulse"})]}),s.jsx("span",{className:`text-[9px] sm:text-[10px] mt-0.5 text-center ${n?"font-bold":"font-medium"}`,children:t})]})},Ne=({children:e,showHeader:t=!0,showBottomNav:r=!0,headerTitle:n,className:a=""})=>s.jsxs("div",{className:"bg-gray-50 min-h-screen max-w-md mx-auto shadow-lg overflow-hidden relative",children:[t&&s.jsx(tR,{pageTitle:n}),s.jsx("div",{className:`${r?"pb-20":"pb-4"} ${a} min-h-screen`,children:e}),r&&s.jsx(rR,{})]}),M=f.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ve("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));M.displayName="Card";const K=f.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ve("flex flex-col space-y-1.5 p-6",e),...t}));K.displayName="CardHeader";const Q=f.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:ve("text-2xl font-semibold leading-none tracking-tight",e),...t}));Q.displayName="CardTitle";const sR=f.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:ve("text-sm text-muted-foreground",e),...t}));sR.displayName="CardDescription";const U=f.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ve("p-6 pt-0",e),...t}));U.displayName="CardContent";const nR=f.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ve("flex items-center p-6 pt-0",e),...t}));nR.displayName="CardFooter";const tx=({queryKey:e,queryFn:t,cacheTime:r=3e5,staleTime:n=3e4,...a})=>eC({queryKey:e,queryFn:t,gcTime:r,staleTime:n,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1,...a}),Xn=class Xn{constructor(){vs(this,"cache",new Map);vs(this,"CACHE_DURATION",3e4)}static getInstance(){return Xn.instance||(Xn.instance=new Xn),Xn.instance}isValidCache(t){const r=this.cache.get(t);return r?Date.now()-r.timestamp<this.CACHE_DURATION:!1}async getUserById(t){if(console.log("UserService.getUserById called with:",t),!t||t==="undefined"||t==="null")return console.warn("UserService.getUserById: Invalid userId provided:",t),null;const r=`user_${t}`;if(this.isValidCache(r))return console.log("UserService.getUserById: Returning cached data for:",t),this.cache.get(r).data;try{console.log("UserService.getUserById: Fetching user from database:",t);const{data:n,error:a}=await A.from("users").select(`
          id,
          full_name,
          email,
          phone_number,
          available_balance,
          account_status,
          current_plan_id,
          created_at,
          last_login_at,
          total_deposits,
          total_withdrawals,
          kyc_status,
          address,
          city,
          country,
          referral_code,
          referred_by_user_id,
          profile_image_url,
          user_level,
          investment_plans:current_plan_id (name)
        `).eq("id",t).single();if(a)throw console.error("UserService.getUserById: Error fetching user:",a),a;if(!n)return console.warn("UserService.getUserById: No user found with ID:",t),null;const{data:i}=await A.from("transactions").select("id, type, amount, status, created_at").eq("user_id",t).order("created_at",{ascending:!1}).limit(10),{data:o}=await A.from("user_investments").select(`
          id,
          amount,
          status,
          created_at,
          start_date,
          total_profit_earned,
          investment_plans:investment_plan_id (name)
        `).eq("user_id",t).order("created_at",{ascending:!1}),{count:l}=await A.from("users").select("id",{count:"exact"}).eq("referred_by_user_id",t);await A.rpc("calculate_user_level",{user_id:t});const{data:c}=await A.from("users").select("user_level").eq("id",t).single(),d=(c==null?void 0:c.user_level)||1,{data:u}=await A.from("user_levels").select("name, description, color, benefits, bonus_amount").eq("level",d).eq("is_active",!0).single(),m=(o==null?void 0:o.map(w=>{var v;return{id:w.id,amount:w.amount,plan_name:((v=w.investment_plans)==null?void 0:v.name)||"Unknown Plan",status:w.status,created_at:w.created_at,start_date:w.start_date,total_profit_earned:w.total_profit_earned,investment_plans:w.investment_plans}}))||[],h=w=>w?Array.isArray(w)?w.map(v=>String(v)):[]:[],b={...n,recentTransactions:i||[],investmentHistory:m,totalReferrals:l||0,user_level:d,levelInfo:u?{name:u.name,description:u.description,color:u.color,benefits:h(u.benefits),bonus_amount:Number(u.bonus_amount)}:void 0};return console.log("UserService.getUserById: Successfully fetched user data:",b),this.cache.set(r,{data:b,timestamp:Date.now()}),b}catch(n){throw console.error("UserService.getUserById: Unexpected error:",n),n}}async updateUserLevel(t,r){try{const{error:n}=await A.from("users").update({user_level:r,updated_at:new Date().toISOString()}).eq("id",t);n&&console.error("Error updating user level:",n),console.log(`User level updated to ${r} for user ${t}`),this.clearCache(t)}catch(n){console.error("Error in updateUserLevel:",n)}}async updateUserProfile(t,r){const{error:n}=await A.from("users").update({...r,updated_at:new Date().toISOString()}).eq("id",t);if(n)throw n;this.clearCache(t)}async updateUserBalance(t,r){const{error:n}=await A.from("users").update({available_balance:r}).eq("id",t);if(n)throw n;const a=`user_${t}`,i=this.cache.get(a);i&&(i.data.available_balance=r)}clearCache(t){t?this.cache.delete(`user_${t}`):this.cache.clear()}async getUserLevels(){try{const{data:t,error:r}=await A.from("user_levels").select("*").eq("is_active",!0).order("level",{ascending:!0});return r?(console.error("Error fetching user levels:",r),[]):t||[]}catch(t){return console.error("Error fetching user levels:",t),[]}}};vs(Xn,"instance");let ff=Xn;const rx=ff.getInstance(),aR=()=>{var d;const[e,t]=f.useState(!1),{user:r}=Ze(),{settings:n}=Te(),{data:a,isLoading:i}=tx({queryKey:["user",r==null?void 0:r.id],queryFn:()=>rx.getUserById(r.id),enabled:!!(r!=null&&r.id),staleTime:1e4,cacheTime:6e4}),o=(a==null?void 0:a.available_balance)||0,l=((d=a==null?void 0:a.investment_plans)==null?void 0:d.name)||null,c=()=>t(!e);return i?s.jsx("div",{className:"px-4 py-4",children:s.jsx(M,{className:"bg-gradient-to-br from-green-400 via-green-500 to-emerald-600 p-4 sm:p-6 text-white border-0 shadow-xl rounded-2xl overflow-hidden relative min-h-[140px]",children:s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"})})})}):s.jsx("div",{className:"px-4 py-4",children:s.jsxs(M,{className:"bg-gradient-to-br from-green-400 via-green-500 to-emerald-600 p-4 sm:p-6 text-white border-0 shadow-xl rounded-2xl overflow-hidden relative min-h-[140px]",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 sm:w-32 sm:h-32 bg-white/10 rounded-full -translate-y-12 sm:-translate-y-16 translate-x-12 sm:translate-x-16"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 sm:w-24 sm:h-24 bg-white/5 rounded-full translate-y-8 sm:translate-y-12 -translate-x-8 sm:-translate-x-12"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3 sm:mb-4",children:[s.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 backdrop-blur-sm rounded-lg mr-2 sm:mr-3 flex-shrink-0 flex items-center justify-center",children:s.jsx(Wi,{size:14,className:"sm:w-4 sm:h-4 text-white"})}),s.jsxs("span",{className:"text-xs sm:text-sm font-semibold text-white/90 truncate",children:[n.siteName," Account"]})]}),s.jsxs("div",{className:"flex items-center bg-white/20 backdrop-blur-sm rounded-full px-2 sm:px-3 py-1 flex-shrink-0 ml-2",children:[s.jsx("span",{className:"text-[10px] sm:text-xs mr-1 sm:mr-2 text-white/90 font-medium",children:l||"No Plan"}),s.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-yellow-400 flex-shrink-0 shadow-sm"})]})]}),s.jsx("div",{className:"text-[10px] sm:text-xs text-white/80 mb-2 font-medium",children:"Available Balance"}),s.jsxs("div",{className:"flex justify-between items-end gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("h3",{className:"text-lg sm:text-2xl font-bold text-white mr-2 sm:mr-3 truncate",children:e?"":Y(o,n)}),s.jsx("button",{onClick:c,className:"text-white/80 hover:text-white transition-colors p-1 rounded-full hover:bg-white/10 flex-shrink-0",children:e?s.jsx(An,{size:16,className:"sm:w-[18px] sm:h-[18px]"}):s.jsx(Ed,{size:16,className:"sm:w-[18px] sm:h-[18px]"})})]}),s.jsx("div",{children:s.jsxs("span",{className:"text-[10px] sm:text-xs text-white/70",children:["Tap to ",e?"show":"hide"," balance"]})})]}),s.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0",children:[s.jsxs(me,{to:"/deposit",className:"bg-white/20 backdrop-blur-sm hover:bg-white/30 rounded-xl px-3 sm:px-5 py-2 sm:py-2.5 text-xs sm:text-sm font-semibold text-white transition-all duration-200 flex items-center space-x-1 sm:space-x-2 shadow-lg hover:shadow-xl transform hover:scale-105 whitespace-nowrap",children:[s.jsx(gr,{size:14,className:"sm:w-4 sm:h-4"}),s.jsx("span",{children:"Add Cash"})]}),s.jsx(me,{to:"/investment-plans",className:"bg-white/10 backdrop-blur-sm hover:bg-white/20 rounded-xl px-3 sm:px-5 py-1.5 sm:py-2 text-xs font-medium text-white transition-all duration-200 border border-white/20 whitespace-nowrap text-center",children:"Upgrade Account"})]})]})]})]})})},iR=()=>{const e=[{icon:s.jsx(pa,{size:20,className:"text-green-600"}),label:"Deposit",to:"/deposit",bgColor:"bg-green-50",hoverColor:"hover:bg-green-100"},{icon:s.jsx(Mi,{size:20,className:"text-red-600"}),label:"Withdraw",to:"/withdraw",bgColor:"bg-red-50",hoverColor:"hover:bg-red-100"},{icon:s.jsx(qe,{size:20,className:"text-blue-600"}),label:"Investment",to:"/investment-plans",bgColor:"bg-blue-50",hoverColor:"hover:bg-blue-100"}];return s.jsx("div",{className:"px-4 py-4",children:s.jsx("div",{className:"grid grid-cols-3 gap-3 sm:gap-4",children:e.map((t,r)=>s.jsxs(me,{to:t.to,className:"bg-white p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-sm hover:shadow-md transition-all duration-300 flex flex-col items-center justify-center transform hover:scale-105 border border-gray-100 min-h-[80px] sm:min-h-[100px]",children:[s.jsx("div",{className:`mb-2 sm:mb-3 ${t.bgColor} ${t.hoverColor} p-2.5 sm:p-3 rounded-xl sm:rounded-2xl transition-colors duration-200 shadow-sm flex items-center justify-center`,children:t.icon}),s.jsx("div",{className:"text-[10px] sm:text-xs text-gray-700 font-semibold text-center leading-tight px-1",children:t.label})]},r))})})},oR=()=>{const[e,t]=f.useState(0),{settings:r}=Te(),n=[{icon:s.jsx(qe,{size:18,className:"text-blue-600"}),label:"Invest",to:"/investment-plans",bgColor:"bg-blue-50"},{icon:s.jsx(pa,{size:18,className:"text-green-600"}),label:"Deposit",to:"/deposit",bgColor:"bg-green-50"},{icon:s.jsx(Mi,{size:18,className:"text-red-600"}),label:"Withdraw",to:"/withdraw",bgColor:"bg-red-50"},{icon:s.jsx(Jo,{size:18,className:"text-purple-600"}),label:"Transaction",to:"/transactions",bgColor:"bg-purple-50"},{icon:s.jsx(Jo,{size:18,className:"text-blue-600"}),label:"Deposit History",to:"/deposit-history",bgColor:"bg-blue-50"},{icon:s.jsx(Jo,{size:18,className:"text-orange-600"}),label:"Withdraw History",to:"/withdraw-history",bgColor:"bg-orange-50"},{icon:s.jsx(jt,{size:18,className:"text-indigo-600"}),label:"Profile",to:"/my-account",bgColor:"bg-indigo-50"},{icon:s.jsx(Vl,{size:18,className:"text-emerald-600"}),label:"Commission",to:"/commission",bgColor:"bg-emerald-50"},{icon:s.jsx(Fp,{size:18,className:"text-pink-600"}),label:"Invite & Earn",to:"/invite-earn",bgColor:"bg-pink-50"},{icon:s.jsx(xa,{size:18,className:"text-purple-600"}),label:`${r.currencySymbol}1 Game`,to:"/game",bgColor:"bg-purple-50"},{icon:s.jsx(ct,{size:18,className:"text-teal-600"}),label:"Our Team",to:"/team",bgColor:"bg-teal-50"}],a=9,i=Math.ceil(n.length/a),o=()=>{const u=e*a,m=u+a,h=n.slice(u,m);return e<i-1&&h.length===a&&(h[8]={icon:s.jsx(Fi,{size:18,className:"text-gray-600"}),label:"See More",to:"#",bgColor:"bg-gray-50",isMore:!0}),h},l=()=>{e<i-1&&t(e+1)},c=()=>{e>0&&t(e-1)},d=o();return s.jsxs("div",{className:"px-4 py-2 pb-24",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsxs("h2",{className:"text-base sm:text-lg font-bold text-gray-800 mb-1",children:["More with ",r.siteName.toLowerCase()]}),e>0&&s.jsxs("button",{onClick:c,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[s.jsx(Be,{size:16,className:"mr-1"}),"Go Back"]})]}),s.jsxs("div",{className:"bg-white rounded-2xl sm:rounded-3xl p-4 sm:p-6 shadow-sm border border-gray-100",children:[s.jsx("div",{className:"grid grid-cols-3 gap-4 sm:gap-6",children:d.map((u,m)=>u.isMore?s.jsxs("button",{onClick:l,className:"flex flex-col items-center justify-center group",children:[s.jsx("div",{className:`mb-2 sm:mb-3 ${u.bgColor} p-2.5 sm:p-3 rounded-xl sm:rounded-2xl shadow-sm flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 group-hover:shadow-md transition-all duration-200 group-hover:scale-110`,children:u.icon}),s.jsx("div",{className:"text-[9px] sm:text-[10px] font-medium text-center text-gray-700 px-1 leading-tight group-hover:text-gray-900 transition-colors line-clamp-2",children:u.label})]},m):s.jsxs(me,{to:u.to,className:"flex flex-col items-center justify-center group",children:[s.jsx("div",{className:`mb-2 sm:mb-3 ${u.bgColor} p-2.5 sm:p-3 rounded-xl sm:rounded-2xl shadow-sm flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 group-hover:shadow-md transition-all duration-200 group-hover:scale-110`,children:u.icon}),s.jsx("div",{className:"text-[9px] sm:text-[10px] font-medium text-center text-gray-700 px-1 leading-tight group-hover:text-gray-900 transition-colors line-clamp-2",children:u.label})]},m))}),s.jsx("div",{className:"flex justify-center mt-6 sm:mt-8 space-x-2 sm:space-x-3",children:Array.from({length:i},(u,m)=>s.jsx("div",{className:`h-1.5 sm:h-2 rounded-full shadow-sm transition-all duration-300 ${m===e?"w-6 sm:w-8 bg-gradient-to-r from-green-400 to-emerald-500":"w-1.5 sm:w-2 bg-gray-300"}`},m))})]})]})},lR=()=>{const{user:e,loading:t}=Ze(),r=Oe();return f.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):e?s.jsx(Ne,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(aR,{}),s.jsx(iR,{}),s.jsx(oR,{})]})}):null},sx=pu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=f.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?Rn:"button";return s.jsx(o,{className:ve(sx({variant:t,size:r,className:e})),ref:i,...a})});F.displayName="Button";const H=f.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));H.displayName="Input";var Ql=e=>e.type==="checkbox",aa=e=>e instanceof Date,Wt=e=>e==null;const Yj=e=>typeof e=="object";var ut=e=>!Wt(e)&&!Array.isArray(e)&&Yj(e)&&!aa(e),cR=e=>ut(e)&&e.target?Ql(e.target)?e.target.checked:e.target.value:e,dR=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,uR=(e,t)=>e.has(dR(t)),hR=e=>{const t=e.constructor&&e.constructor.prototype;return ut(t)&&t.hasOwnProperty("isPrototypeOf")},nx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function wr(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(nx&&(e instanceof Blob||e instanceof FileList))&&(r||ut(e)))if(t=r?[]:{},!r&&!hR(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=wr(e[n]));else return e;return t}var Su=e=>Array.isArray(e)?e.filter(Boolean):[],ot=e=>e===void 0,ce=(e,t,r)=>{if(!t||!ut(e))return r;const n=Su(t.split(/[,[\].]+?/)).reduce((a,i)=>Wt(a)?a:a[i],e);return ot(n)||n===e?ot(e[t])?r:e[t]:n},rs=e=>typeof e=="boolean",ax=e=>/^\w*$/.test(e),Qj=e=>Su(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Je=(e,t,r)=>{let n=-1;const a=ax(t)?[t]:Qj(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const d=e[l];c=ut(d)||Array.isArray(d)?d:isNaN(+a[n+1])?{}:[]}if(l==="__proto__")return;e[l]=c,e=e[l]}return e};const ev={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Hr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ws={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};He.createContext(null);var mR=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Hr.all&&(t._proxyFormState[o]=!n||Hr.all),e[o]}});return a},Zt=e=>ut(e)&&!Object.keys(e).length,fR=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Zt(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===Hr.all)},Kc=e=>Array.isArray(e)?e:[e];function pR(e){const t=He.useRef(e);t.current=e,He.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var cs=e=>typeof e=="string",xR=(e,t,r,n,a)=>cs(e)?(n&&t.watch.add(e),ce(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),ce(r,i))):(n&&(t.watchAll=!0),r),gR=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},tv=e=>({isOnSubmit:!e||e===Hr.onSubmit,isOnBlur:e===Hr.onBlur,isOnChange:e===Hr.onChange,isOnAll:e===Hr.all,isOnTouch:e===Hr.onTouched}),rv=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Zo=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=ce(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Zo(l,t))break}else if(ut(l)&&Zo(l,t))break}}};var vR=(e,t,r)=>{const n=Kc(ce(e,r));return Je(n,"root",t[r]),Je(e,r,n),e},ix=e=>e.type==="file",Rs=e=>typeof e=="function",Od=e=>{if(!nx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Yc=e=>cs(e),ox=e=>e.type==="radio",Ld=e=>e instanceof RegExp;const sv={value:!1,isValid:!1},nv={value:!0,isValid:!0};var Jj=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ot(e[0].attributes.value)?ot(e[0].value)||e[0].value===""?nv:{value:e[0].value,isValid:!0}:nv:sv}return sv};const av={isValid:!1,value:null};var Xj=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,av):av;function iv(e,t,r="validate"){if(Yc(e)||Array.isArray(e)&&e.every(Yc)||rs(e)&&!e)return{type:r,message:Yc(e)?e:"",ref:t}}var za=e=>ut(e)&&!Ld(e)?e:{value:e,message:""},ov=async(e,t,r,n,a)=>{const{ref:i,refs:o,required:l,maxLength:c,minLength:d,min:u,max:m,pattern:h,validate:b,name:w,valueAsNumber:v,mount:y,disabled:g}=e._f,p=ce(t,w);if(!y||g)return{};const x=o?o[0]:i,N=D=>{n&&x.reportValidity&&(x.setCustomValidity(rs(D)?"":D||""),x.reportValidity())},j={},k=ox(i),S=Ql(i),_=k||S,C=(v||ix(i))&&ot(i.value)&&ot(p)||Od(i)&&i.value===""||p===""||Array.isArray(p)&&!p.length,E=gR.bind(null,w,r,j),$=(D,L,W,ae=ws.maxLength,ee=ws.minLength)=>{const X=D?L:W;j[w]={type:D?ae:ee,message:X,ref:i,...E(D?ae:ee,X)}};if(a?!Array.isArray(p)||!p.length:l&&(!_&&(C||Wt(p))||rs(p)&&!p||S&&!Jj(o).isValid||k&&!Xj(o).isValid)){const{value:D,message:L}=Yc(l)?{value:!!l,message:l}:za(l);if(D&&(j[w]={type:ws.required,message:L,ref:x,...E(ws.required,L)},!r))return N(L),j}if(!C&&(!Wt(u)||!Wt(m))){let D,L;const W=za(m),ae=za(u);if(!Wt(p)&&!isNaN(p)){const ee=i.valueAsNumber||p&&+p;Wt(W.value)||(D=ee>W.value),Wt(ae.value)||(L=ee<ae.value)}else{const ee=i.valueAsDate||new Date(p),X=I=>new Date(new Date().toDateString()+" "+I),T=i.type=="time",q=i.type=="week";cs(W.value)&&p&&(D=T?X(p)>X(W.value):q?p>W.value:ee>new Date(W.value)),cs(ae.value)&&p&&(L=T?X(p)<X(ae.value):q?p<ae.value:ee<new Date(ae.value))}if((D||L)&&($(!!D,W.message,ae.message,ws.max,ws.min),!r))return N(j[w].message),j}if((c||d)&&!C&&(cs(p)||a&&Array.isArray(p))){const D=za(c),L=za(d),W=!Wt(D.value)&&p.length>+D.value,ae=!Wt(L.value)&&p.length<+L.value;if((W||ae)&&($(W,D.message,L.message),!r))return N(j[w].message),j}if(h&&!C&&cs(p)){const{value:D,message:L}=za(h);if(Ld(D)&&!p.match(D)&&(j[w]={type:ws.pattern,message:L,ref:i,...E(ws.pattern,L)},!r))return N(L),j}if(b){if(Rs(b)){const D=await b(p,t),L=iv(D,x);if(L&&(j[w]={...L,...E(ws.validate,L.message)},!r))return N(L.message),j}else if(ut(b)){let D={};for(const L in b){if(!Zt(D)&&!r)break;const W=iv(await b[L](p,t),x,L);W&&(D={...W,...E(L,W.message)},N(W.message),r&&(j[w]=D))}if(!Zt(D)&&(j[w]={ref:x,...D},!r))return j}}return N(!0),j};function yR(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=ot(e)?n++:e[t[n++]];return e}function bR(e){for(const t in e)if(e.hasOwnProperty(t)&&!ot(e[t]))return!1;return!0}function ft(e,t){const r=Array.isArray(t)?t:ax(t)?[t]:Qj(t),n=r.length===1?e:yR(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(ut(n)&&Zt(n)||Array.isArray(n)&&bR(n))&&ft(e,r.slice(0,-1)),e}var Ph=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},pf=e=>Wt(e)||!Yj(e);function an(e,t){if(pf(e)||pf(t))return e===t;if(aa(e)&&aa(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const a of r){const i=e[a];if(!n.includes(a))return!1;if(a!=="ref"){const o=t[a];if(aa(i)&&aa(o)||ut(i)&&ut(o)||Array.isArray(i)&&Array.isArray(o)?!an(i,o):i!==o)return!1}}return!0}var Zj=e=>e.type==="select-multiple",wR=e=>ox(e)||Ql(e),Ah=e=>Od(e)&&e.isConnected,e1=e=>{for(const t in e)if(Rs(e[t]))return!0;return!1};function Md(e,t={}){const r=Array.isArray(e);if(ut(e)||r)for(const n in e)Array.isArray(e[n])||ut(e[n])&&!e1(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Md(e[n],t[n])):Wt(e[n])||(t[n]=!0);return t}function t1(e,t,r){const n=Array.isArray(e);if(ut(e)||n)for(const a in e)Array.isArray(e[a])||ut(e[a])&&!e1(e[a])?ot(t)||pf(r[a])?r[a]=Array.isArray(e[a])?Md(e[a],[]):{...Md(e[a])}:t1(e[a],Wt(t)?{}:t[a],r[a]):r[a]=!an(e[a],t[a]);return r}var No=(e,t)=>t1(e,t,Md(t)),r1=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>ot(e)?e:t?e===""?NaN:e&&+e:r&&cs(e)?new Date(e):n?n(e):e;function Rh(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return ix(t)?t.files:ox(t)?Xj(e.refs).value:Zj(t)?[...t.selectedOptions].map(({value:r})=>r):Ql(t)?Jj(e.refs).value:r1(ot(t.value)?e.ref.value:t.value,e)}var jR=(e,t,r,n)=>{const a={};for(const i of e){const o=ce(t,i);o&&Je(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},_o=e=>ot(e)?e:Ld(e)?e.source:ut(e)?Ld(e.value)?e.value.source:e.value:e;const lv="AsyncFunction";var NR=e=>(!e||!e.validate)&&!!(Rs(e.validate)&&e.validate.constructor.name===lv||ut(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===lv)),_R=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function cv(e,t,r){const n=ce(e,r);if(n||ax(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=ce(t,i),l=ce(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};a.pop()}return{name:r}}var SR=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,kR=(e,t)=>!Su(ce(e,t)).length&&ft(e,t);const CR={mode:Hr.onSubmit,reValidateMode:Hr.onChange,shouldFocusError:!0};function ER(e={}){let t={...CR,...e},r={submitCount:0,isDirty:!1,isLoading:Rs(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=ut(t.defaultValues)||ut(t.values)?wr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:wr(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:Ph(),array:Ph(),state:Ph()},h=tv(t.mode),b=tv(t.reValidateMode),w=t.criteriaMode===Hr.all,v=P=>O=>{clearTimeout(d),d=setTimeout(P,O)},y=async P=>{if(!e.disabled&&(u.isValid||P)){const O=t.resolver?Zt((await _()).errors):await E(n,!0);O!==r.isValid&&m.state.next({isValid:O})}},g=(P,O)=>{!e.disabled&&(u.isValidating||u.validatingFields)&&((P||Array.from(l.mount)).forEach(z=>{z&&(O?Je(r.validatingFields,z,O):ft(r.validatingFields,z))}),m.state.next({validatingFields:r.validatingFields,isValidating:!Zt(r.validatingFields)}))},p=(P,O=[],z,ie,re=!0,Z=!0)=>{if(ie&&z&&!e.disabled){if(o.action=!0,Z&&Array.isArray(ce(n,P))){const fe=z(ce(n,P),ie.argA,ie.argB);re&&Je(n,P,fe)}if(Z&&Array.isArray(ce(r.errors,P))){const fe=z(ce(r.errors,P),ie.argA,ie.argB);re&&Je(r.errors,P,fe),kR(r.errors,P)}if(u.touchedFields&&Z&&Array.isArray(ce(r.touchedFields,P))){const fe=z(ce(r.touchedFields,P),ie.argA,ie.argB);re&&Je(r.touchedFields,P,fe)}u.dirtyFields&&(r.dirtyFields=No(a,i)),m.state.next({name:P,isDirty:D(P,O),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Je(i,P,O)},x=(P,O)=>{Je(r.errors,P,O),m.state.next({errors:r.errors})},N=P=>{r.errors=P,m.state.next({errors:r.errors,isValid:!1})},j=(P,O,z,ie)=>{const re=ce(n,P);if(re){const Z=ce(i,P,ot(z)?ce(a,P):z);ot(Z)||ie&&ie.defaultChecked||O?Je(i,P,O?Z:Rh(re._f)):ae(P,Z),o.mount&&y()}},k=(P,O,z,ie,re)=>{let Z=!1,fe=!1;const Se={name:P};if(!e.disabled){const gt=!!(ce(n,P)&&ce(n,P)._f&&ce(n,P)._f.disabled);if(!z||ie){u.isDirty&&(fe=r.isDirty,r.isDirty=Se.isDirty=D(),Z=fe!==Se.isDirty);const vt=gt||an(ce(a,P),O);fe=!!(!gt&&ce(r.dirtyFields,P)),vt||gt?ft(r.dirtyFields,P):Je(r.dirtyFields,P,!0),Se.dirtyFields=r.dirtyFields,Z=Z||u.dirtyFields&&fe!==!vt}if(z){const vt=ce(r.touchedFields,P);vt||(Je(r.touchedFields,P,z),Se.touchedFields=r.touchedFields,Z=Z||u.touchedFields&&vt!==z)}Z&&re&&m.state.next(Se)}return Z?Se:{}},S=(P,O,z,ie)=>{const re=ce(r.errors,P),Z=u.isValid&&rs(O)&&r.isValid!==O;if(e.delayError&&z?(c=v(()=>x(P,z)),c(e.delayError)):(clearTimeout(d),c=null,z?Je(r.errors,P,z):ft(r.errors,P)),(z?!an(re,z):re)||!Zt(ie)||Z){const fe={...ie,...Z&&rs(O)?{isValid:O}:{},errors:r.errors,name:P};r={...r,...fe},m.state.next(fe)}},_=async P=>{g(P,!0);const O=await t.resolver(i,t.context,jR(P||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return g(P),O},C=async P=>{const{errors:O}=await _(P);if(P)for(const z of P){const ie=ce(O,z);ie?Je(r.errors,z,ie):ft(r.errors,z)}else r.errors=O;return O},E=async(P,O,z={valid:!0})=>{for(const ie in P){const re=P[ie];if(re){const{_f:Z,...fe}=re;if(Z){const Se=l.array.has(Z.name),gt=re._f&&NR(re._f);gt&&u.validatingFields&&g([ie],!0);const vt=await ov(re,i,w,t.shouldUseNativeValidation&&!O,Se);if(gt&&u.validatingFields&&g([ie]),vt[Z.name]&&(z.valid=!1,O))break;!O&&(ce(vt,Z.name)?Se?vR(r.errors,vt,Z.name):Je(r.errors,Z.name,vt[Z.name]):ft(r.errors,Z.name))}!Zt(fe)&&await E(fe,O,z)}}return z.valid},$=()=>{for(const P of l.unMount){const O=ce(n,P);O&&(O._f.refs?O._f.refs.every(z=>!Ah(z)):!Ah(O._f.ref))&&Ke(P)}l.unMount=new Set},D=(P,O)=>!e.disabled&&(P&&O&&Je(i,P,O),!an(B(),a)),L=(P,O,z)=>xR(P,l,{...o.mount?i:ot(O)?a:cs(P)?{[P]:O}:O},z,O),W=P=>Su(ce(o.mount?i:a,P,e.shouldUnregister?ce(a,P,[]):[])),ae=(P,O,z={})=>{const ie=ce(n,P);let re=O;if(ie){const Z=ie._f;Z&&(!Z.disabled&&Je(i,P,r1(O,Z)),re=Od(Z.ref)&&Wt(O)?"":O,Zj(Z.ref)?[...Z.ref.options].forEach(fe=>fe.selected=re.includes(fe.value)):Z.refs?Ql(Z.ref)?Z.refs.length>1?Z.refs.forEach(fe=>(!fe.defaultChecked||!fe.disabled)&&(fe.checked=Array.isArray(re)?!!re.find(Se=>Se===fe.value):re===fe.value)):Z.refs[0]&&(Z.refs[0].checked=!!re):Z.refs.forEach(fe=>fe.checked=fe.value===re):ix(Z.ref)?Z.ref.value="":(Z.ref.value=re,Z.ref.type||m.values.next({name:P,values:{...i}})))}(z.shouldDirty||z.shouldTouch)&&k(P,re,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&I(P)},ee=(P,O,z)=>{for(const ie in O){const re=O[ie],Z=`${P}.${ie}`,fe=ce(n,Z);(l.array.has(P)||ut(re)||fe&&!fe._f)&&!aa(re)?ee(Z,re,z):ae(Z,re,z)}},X=(P,O,z={})=>{const ie=ce(n,P),re=l.array.has(P),Z=wr(O);Je(i,P,Z),re?(m.array.next({name:P,values:{...i}}),(u.isDirty||u.dirtyFields)&&z.shouldDirty&&m.state.next({name:P,dirtyFields:No(a,i),isDirty:D(P,Z)})):ie&&!ie._f&&!Wt(Z)?ee(P,Z,z):ae(P,Z,z),rv(P,l)&&m.state.next({...r}),m.values.next({name:o.mount?P:void 0,values:{...i}})},T=async P=>{o.mount=!0;const O=P.target;let z=O.name,ie=!0;const re=ce(n,z),Z=()=>O.type?Rh(re._f):cR(P),fe=Se=>{ie=Number.isNaN(Se)||aa(Se)&&isNaN(Se.getTime())||an(Se,ce(i,z,Se))};if(re){let Se,gt;const vt=Z(),Hn=P.type===ev.BLUR||P.type===ev.FOCUS_OUT,z_=!_R(re._f)&&!t.resolver&&!ce(r.errors,z)&&!re._f.deps||SR(Hn,ce(r.touchedFields,z),r.isSubmitted,b,h),Iu=rv(z,l,Hn);Je(i,z,vt),Hn?(re._f.onBlur&&re._f.onBlur(P),c&&c(0)):re._f.onChange&&re._f.onChange(P);const Ou=k(z,vt,Hn,!1),B_=!Zt(Ou)||Iu;if(!Hn&&m.values.next({name:z,type:P.type,values:{...i}}),z_)return u.isValid&&(e.mode==="onBlur"?Hn&&y():y()),B_&&m.state.next({name:z,...Iu?{}:Ou});if(!Hn&&Iu&&m.state.next({...r}),t.resolver){const{errors:Rx}=await _([z]);if(fe(vt),ie){const W_=cv(r.errors,n,z),Tx=cv(Rx,n,W_.name||z);Se=Tx.error,z=Tx.name,gt=Zt(Rx)}}else g([z],!0),Se=(await ov(re,i,w,t.shouldUseNativeValidation))[z],g([z]),fe(vt),ie&&(Se?gt=!1:u.isValid&&(gt=await E(n,!0)));ie&&(re._f.deps&&I(re._f.deps),S(z,gt,Se,Ou))}},q=(P,O)=>{if(ce(r.errors,O)&&P.focus)return P.focus(),1},I=async(P,O={})=>{let z,ie;const re=Kc(P);if(t.resolver){const Z=await C(ot(P)?P:re);z=Zt(Z),ie=P?!re.some(fe=>ce(Z,fe)):z}else P?(ie=(await Promise.all(re.map(async Z=>{const fe=ce(n,Z);return await E(fe&&fe._f?{[Z]:fe}:fe)}))).every(Boolean),!(!ie&&!r.isValid)&&y()):ie=z=await E(n);return m.state.next({...!cs(P)||u.isValid&&z!==r.isValid?{}:{name:P},...t.resolver||!P?{isValid:z}:{},errors:r.errors}),O.shouldFocus&&!ie&&Zo(n,q,P?re:l.mount),ie},B=P=>{const O={...o.mount?i:a};return ot(P)?O:cs(P)?ce(O,P):P.map(z=>ce(O,z))},ne=(P,O)=>({invalid:!!ce((O||r).errors,P),isDirty:!!ce((O||r).dirtyFields,P),error:ce((O||r).errors,P),isValidating:!!ce(r.validatingFields,P),isTouched:!!ce((O||r).touchedFields,P)}),ye=P=>{P&&Kc(P).forEach(O=>ft(r.errors,O)),m.state.next({errors:P?r.errors:{}})},de=(P,O,z)=>{const ie=(ce(n,P,{_f:{}})._f||{}).ref,re=ce(r.errors,P)||{},{ref:Z,message:fe,type:Se,...gt}=re;Je(r.errors,P,{...gt,...O,ref:ie}),m.state.next({name:P,errors:r.errors,isValid:!1}),z&&z.shouldFocus&&ie&&ie.focus&&ie.focus()},De=(P,O)=>Rs(P)?m.values.subscribe({next:z=>P(L(void 0,O),z)}):L(P,O,!0),Ke=(P,O={})=>{for(const z of P?Kc(P):l.mount)l.mount.delete(z),l.array.delete(z),O.keepValue||(ft(n,z),ft(i,z)),!O.keepError&&ft(r.errors,z),!O.keepDirty&&ft(r.dirtyFields,z),!O.keepTouched&&ft(r.touchedFields,z),!O.keepIsValidating&&ft(r.validatingFields,z),!t.shouldUnregister&&!O.keepDefaultValue&&ft(a,z);m.values.next({values:{...i}}),m.state.next({...r,...O.keepDirty?{isDirty:D()}:{}}),!O.keepIsValid&&y()},he=({disabled:P,name:O,field:z,fields:ie,value:re})=>{if(rs(P)&&o.mount||P){const Z=P?void 0:ot(re)?Rh(z?z._f:ce(ie,O)._f):re;Je(i,O,Z),k(O,Z,!1,!1,!0)}},Le=(P,O={})=>{let z=ce(n,P);const ie=rs(O.disabled)||rs(e.disabled);return Je(n,P,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:P}},name:P,mount:!0,...O}}),l.mount.add(P),z?he({field:z,disabled:rs(O.disabled)?O.disabled:e.disabled,name:P,value:O.value}):j(P,!0,O.value),{...ie?{disabled:O.disabled||e.disabled}:{},...t.progressive?{required:!!O.required,min:_o(O.min),max:_o(O.max),minLength:_o(O.minLength),maxLength:_o(O.maxLength),pattern:_o(O.pattern)}:{},name:P,onChange:T,onBlur:T,ref:re=>{if(re){Le(P,O),z=ce(n,P);const Z=ot(re.value)&&re.querySelectorAll&&re.querySelectorAll("input,select,textarea")[0]||re,fe=wR(Z),Se=z._f.refs||[];if(fe?Se.find(gt=>gt===Z):Z===z._f.ref)return;Je(n,P,{_f:{...z._f,...fe?{refs:[...Se.filter(Ah),Z,...Array.isArray(ce(a,P))?[{}]:[]],ref:{type:Z.type,name:P}}:{ref:Z}}}),j(P,!1,void 0,Z)}else z=ce(n,P,{}),z._f&&(z._f.mount=!1),(t.shouldUnregister||O.shouldUnregister)&&!(uR(l.array,P)&&o.action)&&l.unMount.add(P)}}},tt=()=>t.shouldFocusError&&Zo(n,q,l.mount),We=P=>{rs(P)&&(m.state.next({disabled:P}),Zo(n,(O,z)=>{const ie=ce(n,z);ie&&(O.disabled=ie._f.disabled||P,Array.isArray(ie._f.refs)&&ie._f.refs.forEach(re=>{re.disabled=ie._f.disabled||P}))},0,!1))},Me=(P,O)=>async z=>{let ie;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let re=wr(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:Z,values:fe}=await _();r.errors=Z,re=fe}else await E(n);if(ft(r.errors,"root"),Zt(r.errors)){m.state.next({errors:{}});try{await P(re,z)}catch(Z){ie=Z}}else O&&await O({...r.errors},z),tt(),setTimeout(tt);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Zt(r.errors)&&!ie,submitCount:r.submitCount+1,errors:r.errors}),ie)throw ie},Fe=(P,O={})=>{ce(n,P)&&(ot(O.defaultValue)?X(P,wr(ce(a,P))):(X(P,O.defaultValue),Je(a,P,wr(O.defaultValue))),O.keepTouched||ft(r.touchedFields,P),O.keepDirty||(ft(r.dirtyFields,P),r.isDirty=O.defaultValue?D(P,wr(ce(a,P))):D()),O.keepError||(ft(r.errors,P),u.isValid&&y()),m.state.next({...r}))},Dt=(P,O={})=>{const z=P?wr(P):a,ie=wr(z),re=Zt(P),Z=re?a:ie;if(O.keepDefaultValues||(a=z),!O.keepValues){if(O.keepDirtyValues){const fe=new Set([...l.mount,...Object.keys(No(a,i))]);for(const Se of Array.from(fe))ce(r.dirtyFields,Se)?Je(Z,Se,ce(i,Se)):X(Se,ce(Z,Se))}else{if(nx&&ot(P))for(const fe of l.mount){const Se=ce(n,fe);if(Se&&Se._f){const gt=Array.isArray(Se._f.refs)?Se._f.refs[0]:Se._f.ref;if(Od(gt)){const vt=gt.closest("form");if(vt){vt.reset();break}}}}n={}}i=e.shouldUnregister?O.keepDefaultValues?wr(a):{}:wr(Z),m.array.next({values:{...Z}}),m.values.next({values:{...Z}})}l={mount:O.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!O.keepIsValid||!!O.keepDirtyValues,o.watch=!!e.shouldUnregister,m.state.next({submitCount:O.keepSubmitCount?r.submitCount:0,isDirty:re?!1:O.keepDirty?r.isDirty:!!(O.keepDefaultValues&&!an(P,a)),isSubmitted:O.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:re?{}:O.keepDirtyValues?O.keepDefaultValues&&i?No(a,i):r.dirtyFields:O.keepDefaultValues&&P?No(a,P):O.keepDirty?r.dirtyFields:{},touchedFields:O.keepTouched?r.touchedFields:{},errors:O.keepErrors?r.errors:{},isSubmitSuccessful:O.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},or=(P,O)=>Dt(Rs(P)?P(i):P,O);return{control:{register:Le,unregister:Ke,getFieldState:ne,handleSubmit:Me,setError:de,_executeSchema:_,_getWatch:L,_getDirty:D,_updateValid:y,_removeUnmounted:$,_updateFieldArray:p,_updateDisabledField:he,_getFieldArray:W,_reset:Dt,_resetDefaultValues:()=>Rs(t.defaultValues)&&t.defaultValues().then(P=>{or(P,t.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:P=>{r={...r,...P}},_disableForm:We,_subjects:m,_proxyFormState:u,_setErrors:N,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(P){o=P},get _defaultValues(){return a},get _names(){return l},set _names(P){l=P},get _formState(){return r},set _formState(P){r=P},get _options(){return t},set _options(P){t={...t,...P}}},trigger:I,register:Le,handleSubmit:Me,watch:De,setValue:X,getValues:B,reset:or,resetField:Fe,clearErrors:ye,unregister:Ke,setError:de,setFocus:(P,O={})=>{const z=ce(n,P),ie=z&&z._f;if(ie){const re=ie.refs?ie.refs[0]:ie.ref;re.focus&&(re.focus(),O.shouldSelect&&re.select())}},getFieldState:ne}}function ku(e={}){const t=He.useRef(),r=He.useRef(),[n,a]=He.useState({isDirty:!1,isValidating:!1,isLoading:Rs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Rs(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...ER(e),formState:n});const i=t.current.control;return i._options=e,pR({subject:i._subjects.state,next:o=>{fR(o,i._proxyFormState,i._updateFormState)&&a({...i._formState})}}),He.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),He.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),He.useEffect(()=>{e.values&&!an(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[e.values,i]),He.useEffect(()=>{e.errors&&i._setErrors(e.errors)},[e.errors,i]),He.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),He.useEffect(()=>{e.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[e.shouldUnregister,i]),He.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[n]),t.current.formState=mR(n,i),t.current}const PR=()=>{const[e,t]=f.useState(!1),[r,n]=f.useState("username"),[a,i]=f.useState(!1),o=Oe(),{user:l,signIn:c}=Ze(),d=ku({defaultValues:{emailOrUsername:"",password:""}});f.useEffect(()=>{l&&o("/")},[l,o]);const u=async b=>{console.log("Login attempt:",b),i(!0);try{const w=await c(b);console.log("Login successful:",w),_e.success("Login successful!"),o("/")}catch(w){console.error("Login error:",w),w.message.includes("suspended")?_e.error("Account suspended. Please contact support."):w.message.includes("banned")?_e.error("Account banned. Please contact support."):_e.error(w.message||"Login failed. Please try again.")}finally{i(!1)}},m=()=>t(!e),h=()=>{n(r==="email"?"username":"email"),d.setValue("emailOrUsername","")};return s.jsx(Ne,{showHeader:!1,showBottomNav:!1,children:s.jsxs("div",{className:"flex flex-col min-h-screen w-full bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-48 h-48 sm:w-72 sm:h-72 bg-gradient-to-br from-emerald-400/20 to-green-400/20 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 sm:w-96 sm:h-96 bg-gradient-to-tl from-teal-400/20 to-emerald-400/20 rounded-full blur-3xl translate-x-1/3 translate-y-1/3"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-32 h-32 sm:w-64 sm:h-64 bg-gradient-to-br from-green-300/10 to-emerald-300/10 rounded-full blur-2xl -translate-x-1/2 -translate-y-1/2"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen w-full max-w-md mx-auto px-4",children:[s.jsxs("div",{className:"flex justify-between items-center pt-8 pb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-500 rounded-lg flex items-center justify-center",children:s.jsx(fu,{size:14,className:"sm:w-4 sm:h-4 text-white"})}),s.jsx("span",{className:"text-emerald-600 font-bold text-base sm:text-lg",children:"Easypaisa"})]}),s.jsx(me,{to:"/signup",className:"bg-white/80 backdrop-blur-sm px-4 py-2 sm:px-6 rounded-full text-emerald-600 font-medium text-xs sm:text-sm shadow-lg border border-emerald-100 hover:bg-white/90 transition-all duration-200 hover:scale-105",children:"Sign Up"})]}),s.jsx("div",{className:"pt-4 pb-8",children:s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-500 rounded-3xl mb-4 sm:mb-6 shadow-2xl",children:s.jsx(Ht,{size:24,className:"sm:w-8 sm:h-8 text-white"})}),s.jsx("h1",{className:"text-2xl sm:text-4xl font-bold bg-gradient-to-r from-emerald-600 via-green-600 to-teal-600 bg-clip-text text-transparent mb-2 sm:mb-3",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-600 text-base sm:text-lg font-medium",children:"Sign in to your account"}),s.jsxs("p",{className:"text-gray-500 text-xs sm:text-sm mt-1 sm:mt-2",children:["Login with your ",r==="email"?"email":"username"," and password"]})]})}),s.jsxs("div",{className:"flex-1 pb-6",children:[s.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl sm:rounded-3xl p-4 sm:p-8 shadow-2xl border border-white/20",children:s.jsxs("form",{onSubmit:d.handleSubmit(u),className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"space-y-3 sm:space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 block",children:r==="email"?"Email Address":"Username"}),s.jsxs("button",{type:"button",onClick:h,className:"text-xs text-emerald-600 font-medium hover:text-emerald-700 transition-colors",children:["Use ",r==="email"?"Username":"Email"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:r==="email"?"email":"text",placeholder:r==="email"?"Enter your email":"Enter your username",...d.register("emailOrUsername",{required:`${r==="email"?"Email":"Username"} is required`}),className:"pl-10 sm:pl-12 h-12 sm:h-14 text-sm sm:text-lg bg-white/50 backdrop-blur-sm border-gray-200 focus:border-emerald-400 focus:ring-emerald-400/20 rounded-xl sm:rounded-2xl shadow-sm",disabled:a}),s.jsx("div",{className:"absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:r==="email"?s.jsx(Mp,{size:16,className:"sm:w-5 sm:h-5"}):s.jsx(jt,{size:16,className:"sm:w-5 sm:h-5"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 block",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:e?"text":"password",placeholder:"Enter your password",...d.register("password",{required:"Password is required"}),className:"pl-10 sm:pl-12 pr-10 sm:pr-12 h-12 sm:h-14 text-sm sm:text-lg bg-white/50 backdrop-blur-sm border-gray-200 focus:border-emerald-400 focus:ring-emerald-400/20 rounded-xl sm:rounded-2xl shadow-sm",disabled:a}),s.jsx("div",{className:"absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:s.jsx(Ad,{size:16,className:"sm:w-5 sm:h-5"})}),s.jsx("button",{type:"button",onClick:m,className:"absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:a,children:e?s.jsx(Ed,{size:16,className:"sm:w-5 sm:h-5"}):s.jsx(An,{size:16,className:"sm:w-5 sm:h-5"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-1 sm:pt-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",className:"w-3 h-3 sm:w-4 sm:h-4 text-emerald-600 border-gray-300 rounded focus:ring-emerald-500"}),s.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Remember me"})]}),s.jsx(me,{to:"/forgot-password",className:"text-xs sm:text-sm text-emerald-600 hover:text-emerald-700 font-medium",children:"Forgot password?"})]})]}),s.jsx(F,{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 hover:from-emerald-600 hover:via-green-600 hover:to-teal-600 text-white font-semibold py-4 sm:py-6 rounded-xl sm:rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] group disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[s.jsx("span",{className:"text-sm sm:text-base",children:a?"Signing in...":"Sign In"}),!a&&s.jsx(Li,{size:16,className:"sm:w-[18px] sm:h-[18px] group-hover:translate-x-1 transition-transform"})]})}),s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg sm:rounded-xl p-3 sm:p-4 text-center",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-emerald-800 mb-1 sm:mb-2",children:"Login Options"}),s.jsx("p",{className:"text-xs text-emerald-600",children:"You can login with either your email address or username - your choice!"})]}),s.jsxs("p",{className:"text-center text-xs text-gray-500 pt-2 sm:pt-4",children:["By signing in, you agree to our"," ",s.jsx(me,{to:"/terms",className:"text-emerald-600 hover:text-emerald-700 font-medium",children:"Terms & Conditions"})," ","and"," ",s.jsx(me,{to:"/privacy",className:"text-emerald-600 hover:text-emerald-700 font-medium",children:"Privacy Policy"})]})]})}),s.jsx("div",{className:"text-center mt-4 sm:mt-8",children:s.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["Don't have an account?"," ",s.jsx(me,{to:"/signup",className:"text-emerald-600 hover:text-emerald-700 font-semibold hover:underline transition-colors",children:"Create one now"})]})})]})]})]})})},AR=async()=>{try{const{data:e,error:t}=await A.from("referral_settings").select("*");if(t)throw console.error("Error fetching referral settings:",t),t;const r={isEnabled:!0,enableSignupBonus:!0,signupBonus:50,level1Percentage:5,level2Percentage:3,level3Percentage:2,level4Percentage:1,level5Percentage:.5};return e==null||e.forEach(n=>{switch(n.setting_key){case"referral_system_enabled":r.isEnabled=n.setting_value==="true";break;case"enable_signup_bonus":r.enableSignupBonus=n.setting_value==="true";break;case"referral_signup_bonus":r.signupBonus=parseFloat(n.setting_value)||50;break;case"level1_percentage":r.level1Percentage=parseFloat(n.setting_value)||5;break;case"level2_percentage":r.level2Percentage=parseFloat(n.setting_value)||3;break;case"level3_percentage":r.level3Percentage=parseFloat(n.setting_value)||2;break;case"level4_percentage":r.level4Percentage=parseFloat(n.setting_value)||1;break;case"level5_percentage":r.level5Percentage=parseFloat(n.setting_value)||.5;break}}),r}catch(e){return console.error("Error in getReferralSettings:",e),{isEnabled:!0,enableSignupBonus:!0,signupBonus:50,level1Percentage:5,level2Percentage:3,level3Percentage:2,level4Percentage:1,level5Percentage:.5}}},RR=()=>{const[e,t]=f.useState(1),[r,n]=f.useState(!1),[a,i]=f.useState(!1),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,m]=f.useState(!1),[h,b]=f.useState(""),[w,v]=f.useState(!1),[y,g]=f.useState(""),[p,x]=f.useState(""),[N,j]=f.useState({fullName:"",username:"",password:"",email:""}),k=Oe(),S=br(),{signUp:_}=Ze(),C=ku({defaultValues:{phoneNumber:"",withdrawPin:"",fullName:"",username:"",password:"",email:"",referralCode:""}});f.useEffect(()=>{(()=>{const I=new URLSearchParams(S.search).get("ref");I&&!h&&(b(I),v(!0),C.setValue("referralCode",I),se.success(`Referral code ${I} applied!`));const B=S.pathname.split("/"),ne=B.indexOf("ref");if(ne!==-1&&B[ne+1]&&!I){const ye=B[ne+1];b(ye),v(!0),C.setValue("referralCode",ye),se.success(`Referral code ${ye} applied!`)}})()},[S,C,h]);const E=T=>{if(g(""),!T.phoneNumber||T.phoneNumber.trim()===""){g("Please enter a valid phone number");return}if(T.phoneNumber.length<10){g("Phone number must be at least 10 digits");return}console.log("Phone submitted:",T.phoneNumber),l(T.phoneNumber),t(2),se.success("Phone number verified! Please set your PIN")},$=T=>{if(x(""),!T.withdrawPin||T.withdrawPin.trim()===""){x("Please enter a 4-digit PIN");return}if(T.withdrawPin.length!==4){x("PIN must be exactly 4 digits");return}if(!/^\d+$/.test(T.withdrawPin)){x("PIN must contain only numbers");return}console.log("PIN submitted:",T.withdrawPin),d(T.withdrawPin),t(3),se.success("PIN set successfully! Complete your profile")},D=async T=>{var q;if(j({fullName:"",username:"",password:"",email:""}),!T.fullName||T.fullName.trim()===""){j(I=>({...I,fullName:"Please enter your full name"}));return}if(!T.username||T.username.trim()===""){j(I=>({...I,username:"Please enter a username"}));return}if(!T.password||T.password.trim()===""){j(I=>({...I,password:"Please enter a password"}));return}if(T.password.length<6){j(I=>({...I,password:"Password must be at least 6 characters long"}));return}if(T.email&&T.email.trim()!==""&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email)){j(B=>({...B,email:"Please enter a valid email address"}));return}m(!0);try{const I={phoneNumber:o,withdrawPin:c,referralCode:T.referralCode||h,...T};console.log("Attempting to create account with data:",{...I,password:"[HIDDEN]",withdrawPin:"[HIDDEN]"});const B=await _(I);if(!B.success){console.error("Signup error:",B.error),B.error.includes("phone number")||B.error.includes("Phone")?(g("This phone number is already registered. Please use a different phone number."),t(1),se.error("This phone number is already registered. Please use a different phone number.")):B.error.includes("username")||B.error.includes("Username")?(j(ne=>({...ne,username:"This username is already taken. Please choose another one."})),se.error("This username is already taken. Please choose another one.")):B.error.includes("email")||B.error.includes("Email")?(j(ne=>({...ne,email:"This email is already registered. Please use a different email."})),se.error("This email is already registered. Please use a different email.")):B.error.includes("duplicate")||B.error.includes("unique")?se.error("An account with these details already exists."):se.error(B.error||"Failed to create account. Please try again."),m(!1);return}if((q=B.user)!=null&&q.id){console.log(" Processing signup bonus for new user:",B.user.id);try{const ne=await AR();if(console.log(" Referral settings:",ne),ne.enableSignupBonus&&ne.signupBonus>0){console.log(" Adding signup bonus to new user account:",ne.signupBonus);const{data:ye,error:de}=await A.from("users").select("available_balance").eq("id",B.user.id).single();if(de)console.error(" Error fetching new user balance:",de);else{const De=(ye.available_balance||0)+ne.signupBonus,{error:Ke}=await A.from("users").update({available_balance:De,updated_at:new Date().toISOString()}).eq("id",B.user.id);if(Ke)console.error(" Error updating new user balance:",Ke);else{console.log(" Updated new user balance:",{newBalance:De,bonusAmount:ne.signupBonus});const he=I.referralCode?`Welcome bonus for signing up with referral code - Rs. ${ne.signupBonus}`:`Welcome bonus for new account registration - Rs. ${ne.signupBonus}`,{error:Le}=await A.from("transactions").insert({user_id:B.user.id,type:"signup_bonus",amount:ne.signupBonus,status:"completed",description:he,reference_type:"signup_bonus",reference_id:B.user.id});Le?console.error(" Error creating signup bonus transaction:",Le):console.log(" Signup bonus transaction created successfully");try{const tt=I.referralCode?`Congratulations! You received Rs. ${ne.signupBonus} as a welcome bonus for joining with a referral code!`:`Welcome to Easypaisa! You received Rs. ${ne.signupBonus} as a welcome bonus for creating your account!`;await A.rpc("create_user_activity_notification",{p_user_id:B.user.id,p_type:"signup_bonus",p_title:"Welcome Bonus Received!",p_message:tt,p_icon:"",p_priority:"high",p_metadata:{bonus_amount:ne.signupBonus,referral_code:I.referralCode||null,signup_type:I.referralCode?"with_referral":"direct"}})}catch(tt){console.error(" Failed to create signup bonus notification:",tt)}se.success(`Welcome! You received Rs. ${ne.signupBonus} as a signup bonus!`)}}}else console.log(" Signup bonus is disabled or amount is 0"),ne.enableSignupBonus||console.log(" Signup bonus feature is disabled in admin settings")}catch(ne){console.error(" Error processing signup bonus:",ne)}}se.success("Account created successfully! Welcome to Easypaisa"),console.log(" Account created successfully, redirecting to login..."),setTimeout(()=>{k("/login")},1500)}catch(I){console.error("Unexpected signup error:",I);const B=(I==null?void 0:I.message)||"";B.includes("phone number")||B.includes("Phone")?(g("This phone number is already registered. Please use a different phone number."),t(1),se.error("This phone number is already registered. Please use a different phone number.")):B.includes("username")||B.includes("Username")?(j(ne=>({...ne,username:"This username is already taken. Please choose another one."})),se.error("This username is already taken. Please choose another one.")):B.includes("email")||B.includes("Email")?(j(ne=>({...ne,email:"This email is already registered. Please use a different email."})),se.error("This email is already registered. Please use a different email.")):B.includes("duplicate")||B.includes("unique")?se.error("An account with these details already exists."):se.error("Failed to create account. Please try again."),m(!1)}},L=()=>n(!r),W=()=>i(!a),ae=()=>{e>1&&(t(e-1),se.info("Returning to previous step"))},ee=()=>{C.setValue("referralCode",""),b(""),se.info("Referral code cleared")},X=["No hidden fees or charges","24/7 customer support","Earn rewards on every transaction","Pay bills and shop online easily","Access to exclusive offers"];return s.jsx(Ne,{showHeader:!1,showBottomNav:!1,children:s.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-green-50 via-emerald-50 to-green-100 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"absolute top-0 left-0 w-48 h-48 bg-gradient-to-br from-green-400/20 to-emerald-400/20 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-gradient-to-tl from-emerald-400/20 to-green-400/20 rounded-full blur-3xl translate-x-1/3 translate-y-1/3"})]}),s.jsxs("div",{className:"relative z-10 flex-shrink-0",children:[s.jsxs("div",{className:"flex justify-between items-center px-4 pt-4 pb-2",children:[e>1&&s.jsx("button",{onClick:ae,className:"p-2 rounded-full bg-white/80 backdrop-blur-sm shadow-sm hover:bg-white/90 transition-all duration-200",children:s.jsx(Be,{size:18,className:"text-gray-600"})}),s.jsx("div",{className:"flex-1"}),s.jsx(me,{to:"/login",className:"bg-white/80 backdrop-blur-sm px-4 py-1.5 rounded-full text-green-600 font-medium text-sm shadow-lg border border-green-100 hover:bg-white/90 transition-all duration-200",children:"Login"})]}),s.jsxs("div",{className:"px-4 pb-2",children:[s.jsx("div",{className:"flex items-center justify-center space-x-2",children:[1,2,3].map(T=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold transition-all duration-300 ${T<e?"bg-green-600 text-white":T===e?"bg-green-600 text-white ring-2 ring-green-200":"bg-gray-200 text-gray-400"}`,children:T<e?s.jsx(Vt,{size:14}):T}),T<3&&s.jsx("div",{className:`w-6 h-0.5 mx-1 rounded-full transition-all duration-300 ${T<e?"bg-green-600":"bg-gray-200"}`})]},T))}),s.jsx("div",{className:"text-center mt-1",children:s.jsxs("p",{className:"text-xs text-gray-600",children:[e===1&&"Verify phone number",e===2&&"Set security PIN",e===3&&"Complete profile"]})})]})]}),s.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto px-4 pb-4",children:[e===1&&s.jsxs("div",{className:"h-full flex flex-col justify-center",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"mb-4 flex justify-center",children:s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 via-green-600 to-emerald-600 rounded-2xl flex items-center justify-center shadow-xl",children:s.jsx(sf,{size:28,className:"text-white"})})}),s.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Welcome to ",s.jsx("span",{className:"bg-gradient-to-r from-green-600 via-green-700 to-emerald-600 bg-clip-text text-transparent",children:"Easypaisa"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Pakistan's most trusted digital wallet"})]}),s.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-xl border border-white/20",children:s.jsxs("form",{onSubmit:C.handleSubmit(E),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 block",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:"tel",placeholder:"03XXXXXXXXX",...C.register("phoneNumber",{required:!0}),className:"pl-12 h-12 text-base rounded-xl border-2 border-green-100 focus:border-green-500 focus:ring-green-500/20 bg-white/70 backdrop-blur-sm transition-all duration-200"}),s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-600",children:s.jsx(sf,{size:18})})]}),y&&s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-red-600 rounded-full"}),y]}),s.jsx("p",{className:"text-xs text-gray-500",children:"We'll send you a verification code to confirm your number"})]}),s.jsx(F,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 via-green-600 to-emerald-600 hover:from-green-600 hover:via-green-700 hover:to-emerald-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200",children:"Continue to Verification"})]})})]}),e===2&&s.jsxs("div",{className:"h-full flex flex-col justify-center",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"mb-4 flex justify-center",children:s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 via-green-600 to-emerald-600 rounded-2xl flex items-center justify-center shadow-xl",children:s.jsx(Ht,{size:28,className:"text-white"})})}),s.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Secure Your ",s.jsx("span",{className:"bg-gradient-to-r from-green-600 via-green-700 to-emerald-600 bg-clip-text text-transparent",children:"Account"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:"Create a 4-digit PIN for secure transactions"}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 via-emerald-50 to-green-100 rounded-xl p-3 mb-4 border border-green-200/50",children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm mb-2",children:"Why we need a PIN?"}),s.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-green-600 rounded-full"}),s.jsx("p",{className:"text-xs text-gray-700",children:"Protect money from unauthorized access"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-green-600 rounded-full"}),s.jsx("p",{className:"text-xs text-gray-700",children:"Secure transactions and withdrawals"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-green-600 rounded-full"}),s.jsx("p",{className:"text-xs text-gray-700",children:"Bank-level security standards"})]})]})]})]}),s.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-xl border border-white/20",children:s.jsxs("form",{onSubmit:C.handleSubmit($),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 block",children:"Withdraw PIN"}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:a?"text":"password",placeholder:"",maxLength:4,...C.register("withdrawPin",{required:!0,minLength:4,maxLength:4}),className:"pl-12 pr-12 h-12 text-base text-center tracking-[0.5rem] rounded-xl border-2 border-green-100 focus:border-green-500 focus:ring-green-500/20 bg-white/70 backdrop-blur-sm transition-all duration-200"}),s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-600",children:s.jsx(Ad,{size:18})}),s.jsx("button",{type:"button",onClick:W,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-green-600 transition-colors duration-200",children:a?s.jsx(Ed,{size:18}):s.jsx(An,{size:18})})]}),p&&s.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-red-600 rounded-full"}),p]}),s.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Choose a PIN that's easy to remember but hard to guess"})]}),s.jsx(F,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 via-green-600 to-emerald-600 hover:from-green-600 hover:via-green-700 hover:to-emerald-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200",children:"Set PIN & Continue"})]})})]}),e===3&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-3 flex justify-center",children:s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 via-green-600 to-emerald-600 rounded-2xl flex items-center justify-center shadow-xl",children:s.jsx(jt,{size:28,className:"text-white"})})}),s.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Complete Your ",s.jsx("span",{className:"bg-gradient-to-r from-green-600 via-green-700 to-emerald-600 bg-clip-text text-transparent",children:"Profile"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3",children:"Just a few more details to get started"}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 via-emerald-50 to-green-100 rounded-xl p-3 mb-3 border border-green-200/50",children:[s.jsxs("h3",{className:"font-semibold text-gray-800 text-sm mb-2 flex items-center justify-center",children:[s.jsx(sr,{className:"mr-1 text-green-600",size:16}),"What you get with Easypaisa"]}),s.jsx("div",{className:"space-y-1",children:X.slice(0,3).map((T,q)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vt,{size:12,className:"text-green-600 flex-shrink-0"}),s.jsx("p",{className:"text-xs text-gray-700",children:T})]},q))})]})]}),s.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-4 shadow-xl border border-white/20",children:s.jsxs("form",{onSubmit:C.handleSubmit(D),className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 block",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:"text",placeholder:"Enter your full name",...C.register("fullName",{required:!0}),className:`pl-10 h-10 text-sm rounded-lg border-2 ${N.fullName?"border-red-500 focus:border-red-500":"border-green-100 focus:border-green-500"} focus:ring-green-500/20 bg-white/70 backdrop-blur-sm transition-all duration-200`}),s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-600",children:s.jsx(jt,{size:16})})]}),N.fullName&&s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[s.jsx("span",{className:"w-1 h-1 bg-red-600 rounded-full"}),N.fullName]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 block",children:"Username"}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:"text",placeholder:"Choose a unique username",...C.register("username",{required:!0}),className:`pl-10 h-10 text-sm rounded-lg border-2 ${N.username?"border-red-500 focus:border-red-500":"border-green-100 focus:border-green-500"} focus:ring-green-500/20 bg-white/70 backdrop-blur-sm transition-all duration-200`}),s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-600",children:s.jsx(jt,{size:16})})]}),N.username&&s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[s.jsx("span",{className:"w-1 h-1 bg-red-600 rounded-full"}),N.username]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 block",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:r?"text":"password",placeholder:"Create a strong password",...C.register("password",{required:!0}),className:`pl-10 pr-10 h-10 text-sm rounded-lg border-2 ${N.password?"border-red-500 focus:border-red-500":"border-green-100 focus:border-green-500"} focus:ring-green-500/20 bg-white/70 backdrop-blur-sm transition-all duration-200`}),s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-600",children:s.jsx(Ad,{size:16})}),s.jsx("button",{type:"button",onClick:L,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-green-600 transition-colors duration-200",children:r?s.jsx(Ed,{size:16}):s.jsx(An,{size:16})})]}),N.password&&s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[s.jsx("span",{className:"w-1 h-1 bg-red-600 rounded-full"}),N.password]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 block",children:"Email (Optional)"}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:"email",placeholder:"Enter your email for security",...C.register("email"),className:`pl-10 h-10 text-sm rounded-lg border-2 ${N.email?"border-red-500 focus:border-red-500":"border-green-100 focus:border-green-500"} focus:ring-green-500/20 bg-white/70 backdrop-blur-sm transition-all duration-200`}),s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-600",children:s.jsx(jt,{size:16})})]}),N.email&&s.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[s.jsx("span",{className:"w-1 h-1 bg-red-600 rounded-full"}),N.email]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 block",children:"Referral Code (Optional)"}),h&&s.jsx("button",{type:"button",onClick:ee,className:"text-xs text-gray-500 hover:text-red-500 transition-colors",children:"Clear"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:"text",placeholder:w?"Referral code applied!":"Enter referral code",value:h,onChange:T=>{b(T.target.value),C.setValue("referralCode",T.target.value)},className:`pl-10 h-10 text-sm rounded-lg border-2 ${w?"border-green-300 bg-green-50/70 text-green-700":"border-green-100 bg-white/70"} focus:border-green-500 focus:ring-green-500/20 backdrop-blur-sm transition-all duration-200`,readOnly:w}),s.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-600",children:s.jsx(Qr,{size:16})}),w&&s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-600",children:s.jsx(Vt,{size:16})})]}),w?s.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[s.jsx(Vt,{size:10}),"Referral code automatically applied!"]}):s.jsx("p",{className:"text-xs text-gray-500",children:"Have a referral code? Enter it to earn bonus rewards!"})]})]}),s.jsx(F,{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-green-500 via-green-600 to-emerald-600 hover:from-green-600 hover:via-green-700 hover:to-emerald-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed",children:u?"Creating Account...":"Create My Account"}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsxs("p",{className:"text-xs text-gray-500",children:["By creating an account, you agree to our"," ",s.jsx(me,{to:"/terms",className:"text-green-600 font-medium hover:text-green-700 transition-colors duration-200",children:"Terms & Conditions"})," ","and"," ",s.jsx(me,{to:"/privacy",className:"text-green-600 font-medium hover:text-green-700 transition-colors duration-200",children:"Privacy Policy"})]}),s.jsxs("div",{className:"flex justify-center items-center space-x-3 pt-2",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ht,{size:12,className:"text-green-600"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Secure"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ct,{size:12,className:"text-green-600"}),s.jsx("span",{className:"text-xs text-gray-600",children:"10M+ Users"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(sr,{size:12,className:"text-green-600"}),s.jsx("span",{className:"text-xs text-gray-600",children:"4.8 Rating"})]})]})]})]})})]})]})]})})};function TR(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let xf=1;class DR{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:xf++,o=this.toasts.find(c=>c.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:n}),{...c,...t,id:i,dismissible:l,title:n}):c):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const l=a.then(async d=>{if(o=["resolve",d],He.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(OR(d)&&!d.ok){i=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,h=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description,w=typeof m=="object"&&!He.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:h,...w})}else if(d instanceof Error){i=!1;const m=typeof r.error=="function"?await r.error(d):r.error,h=typeof r.description=="function"?await r.description(d):r.description,w=typeof m=="object"&&!He.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:h,...w})}else if(r.success!==void 0){i=!1;const m=typeof r.success=="function"?await r.success(d):r.success,h=typeof r.description=="function"?await r.description(d):r.description,w=typeof m=="object"&&!He.isValidElement(m)?m:{message:m};this.create({id:n,type:"success",description:h,...w})}}).catch(async d=>{if(o=["reject",d],r.error!==void 0){i=!1;const u=typeof r.error=="function"?await r.error(d):r.error,m=typeof r.description=="function"?await r.description(d):r.description,b=typeof u=="object"&&!He.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:m,...b})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((d,u)=>l.then(()=>o[0]==="reject"?u(o[1]):d(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(t,r)=>{const n=(r==null?void 0:r.id)||xf++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const jr=new DR,IR=(e,t)=>{const r=(t==null?void 0:t.id)||xf++;return jr.addToast({title:e,...t,id:r}),r},OR=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",LR=IR,MR=()=>jr.toasts,FR=()=>jr.getActiveToasts(),J=Object.assign(LR,{success:jr.success,info:jr.info,warning:jr.warning,error:jr.error,custom:jr.custom,message:jr.message,promise:jr.promise,dismiss:jr.dismiss,loading:jr.loading},{getHistory:MR,getToasts:FR});TR("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const $R=()=>{const{user:e,signOut:t}=Ze(),[r,n]=f.useState(null),[a,i]=f.useState(!0);f.useEffect(()=>{(async()=>{if(e)try{const{data:d,error:u}=await A.from("users").select("id, full_name, phone_number, email, profile_image_url, account_status").eq("email",e.email).single();u?(console.error("Error fetching user data:",u),J.error("Failed to load user data")):n(d)}catch(d){console.error("Error:",d)}i(!1)})()},[e]),f.useEffect(()=>{if(!(r!=null&&r.id))return;const c=A.channel("account-header-changes").on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${r.id}`},d=>{console.log("Account header data updated:",d),d.new&&n(u=>u?{...u,...d.new}:null)}).subscribe();return()=>{A.removeChannel(c)}},[r==null?void 0:r.id]);const o=async()=>{try{await t(),J.success("Signed out successfully")}catch(c){console.error("Error signing out:",c),J.error("Failed to sign out")}};if(a)return s.jsx("div",{className:"bg-gradient-to-br from-emerald-600 via-green-500 to-teal-600 p-4 shadow-xl",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-12 bg-white/20 rounded-xl mb-3"}),s.jsx("div",{className:"h-16 bg-white/15 rounded-xl"})]})});const l=c=>c.split(" ").map(d=>d.charAt(0)).join("").toUpperCase().slice(0,2);return s.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 via-green-500 to-teal-600 p-4 shadow-xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-400/20 via-green-400/20 to-teal-400/20"}),s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-white/10 to-transparent rounded-full -translate-y-16 translate-x-16"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-white/5 to-transparent rounded-full translate-y-12 -translate-x-12"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(me,{to:"/",className:"group p-2 rounded-lg bg-white/20 backdrop-blur-lg hover:bg-white/30 transition-all duration-200 border border-white/30",children:s.jsx(Be,{size:18,className:"text-white group-hover:text-white/90 transition-colors"})}),s.jsx("div",{className:"text-center",children:s.jsx("h1",{className:"text-lg font-bold text-white tracking-wide drop-shadow-lg",children:"My Account"})}),s.jsxs(F,{onClick:o,variant:"outline",size:"sm",className:"bg-white/20 hover:bg-white/30 text-white border-white/30 px-2 py-1 h-auto text-xs rounded-lg flex items-center gap-1 shadow-lg backdrop-blur-sm transition-all duration-200",children:[s.jsx(rf,{size:12}),s.jsx("span",{children:"Sign Out"})]})]}),s.jsx("div",{className:"bg-white/15 backdrop-blur-lg rounded-xl p-3 border border-white/20 shadow-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(ao,{className:"w-12 h-12 border-2 border-white/40 shadow-lg ring-1 ring-white/20",children:[s.jsx(io,{src:r==null?void 0:r.profile_image_url,alt:"Profile"}),s.jsx(oo,{className:"bg-white/30 text-white font-bold text-sm backdrop-blur-sm",children:r!=null&&r.full_name?l(r.full_name):"U"})]}),s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-green-400 border-2 border-white rounded-full shadow-sm"})]}),s.jsxs("div",{className:"ml-3 flex-1 min-w-0",children:[s.jsx("h2",{className:"text-base font-bold text-white truncate drop-shadow-sm",children:(r==null?void 0:r.full_name)||"Loading..."}),s.jsxs("p",{className:"text-white/90 text-xs drop-shadow-sm flex items-center",children:[s.jsx("span",{className:"w-1 h-1 bg-green-400 rounded-full mr-1"}),(r==null?void 0:r.phone_number)||"N/A"]}),s.jsx("p",{className:"text-white/80 text-xs truncate drop-shadow-sm",children:(r==null?void 0:r.email)||(e==null?void 0:e.email)||"N/A"})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.jsx("div",{children:s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${(r==null?void 0:r.account_status)==="active"?"bg-green-500/30 text-green-100":"bg-yellow-500/30 text-yellow-100"}`,children:(r==null?void 0:r.account_status)||"Unknown"})}),s.jsx(me,{to:"/profile-edit",children:s.jsxs(F,{variant:"outline",size:"sm",className:"bg-white/95 hover:bg-white text-emerald-700 border-none px-2 py-1 h-auto text-xs rounded-lg flex items-center gap-1 shadow-lg backdrop-blur-sm transition-all duration-200 font-semibold",children:[s.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M11 4H4V20H20V13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M18.5 2.5L21.5 5.5L12 15L8 16L9 12L18.5 2.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),s.jsx("span",{children:"Edit"})]})})]})]})})]})]})},UR=()=>s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),s.jsx("path",{d:"M7 8H17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),s.jsx("path",{d:"M7 12H17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),s.jsx("path",{d:"M7 16H12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),zR=()=>s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M4 10L4 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),s.jsx("path",{d:"M12 6L12 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),s.jsx("path",{d:"M20 14L20 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),BR=()=>s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),s.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2",stroke:"currentColor",strokeWidth:"2"})]}),WR=()=>s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",stroke:"currentColor",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",stroke:"currentColor",strokeWidth:"2"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75",stroke:"currentColor",strokeWidth:"2"})]}),qR=()=>s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2",stroke:"currentColor",strokeWidth:"2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2"}),s.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87",stroke:"currentColor",strokeWidth:"2"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75",stroke:"currentColor",strokeWidth:"2"})]}),VR=()=>s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9",stroke:"currentColor",strokeWidth:"2"}),s.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0",stroke:"currentColor",strokeWidth:"2"})]}),HR=()=>{const{user:e}=Ze(),t=()=>{if(e!=null&&e.user_level)return e.user_level;const r=(e==null?void 0:e.totalReferrals)||0;return r>=25?5:r>=20?4:r>=10?3:r>=3?2:1};return s.jsx("div",{className:"px-4 pt-4 pb-20 bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:s.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl mb-4 overflow-hidden shadow-lg border border-emerald-100",children:[s.jsx(me,{to:"/user-profile",className:"block",children:s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-emerald-50 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-green-50 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"text-emerald-600 flex-shrink-0 p-2 bg-emerald-100 rounded-xl",children:s.jsx(BR,{})}),s.jsx("span",{className:"ml-3 font-semibold text-gray-800 text-sm",children:"Profile Details"})]}),s.jsx(Cs,{size:20,className:"text-emerald-400 flex-shrink-0"})]})}),s.jsx(me,{to:"/account-level",className:"block",children:s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-emerald-50 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-green-50 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"text-emerald-600 flex-shrink-0 p-2 bg-emerald-100 rounded-xl",children:s.jsx(zR,{})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("span",{className:"font-semibold text-gray-800 text-sm",children:"Account Level"}),s.jsxs("span",{className:"bg-green-500 text-white ml-2 font-bold px-2 py-1 rounded-full text-xs",children:["Level ",t()]})]})]}),s.jsx(Cs,{size:20,className:"text-emerald-400 flex-shrink-0"})]})}),s.jsx(me,{to:"/transactions",className:"block",children:s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-emerald-50 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-green-50 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"text-emerald-600 flex-shrink-0 p-2 bg-emerald-100 rounded-xl",children:s.jsx(UR,{})}),s.jsx("span",{className:"ml-3 font-semibold text-gray-800 text-sm",children:"Transaction History"})]}),s.jsx(Cs,{size:20,className:"text-emerald-400 flex-shrink-0"})]})}),s.jsx(me,{to:"/team",className:"block",children:s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-emerald-50 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-green-50 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"text-emerald-600 flex-shrink-0 p-2 bg-emerald-100 rounded-xl",children:s.jsx(qR,{})}),s.jsx("span",{className:"ml-3 font-semibold text-gray-800 text-sm",children:"My Team"})]}),s.jsx(Cs,{size:20,className:"text-emerald-400 flex-shrink-0"})]})}),s.jsx(me,{to:"/notifications",className:"block",children:s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-emerald-50 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-green-50 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"text-emerald-600 flex-shrink-0 p-2 bg-emerald-100 rounded-xl",children:s.jsx(VR,{})}),s.jsx("span",{className:"ml-3 font-semibold text-gray-800 text-sm",children:"Notifications"})]}),s.jsx(Cs,{size:20,className:"text-emerald-400 flex-shrink-0"})]})}),s.jsx(me,{to:"/invite-earn",className:"block",children:s.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-green-50 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"text-emerald-600 flex-shrink-0 p-2 bg-emerald-100 rounded-xl",children:s.jsx(WR,{})}),s.jsx("span",{className:"ml-3 font-semibold text-gray-800 text-sm",children:"Invite & Earn"})]}),s.jsx(Cs,{size:20,className:"text-emerald-400 flex-shrink-0"})]})})]})})},GR=()=>s.jsx(Ne,{showHeader:!1,className:"bg-gradient-to-br from-slate-50 via-emerald-50/30 to-green-50/40 p-0",children:s.jsxs("div",{className:"min-h-screen",children:[s.jsx($R,{}),s.jsx(HR,{})]})});var KR="Label",s1=f.forwardRef((e,t)=>s.jsx(xe.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));s1.displayName=KR;var n1=s1;const YR=pu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),V=f.forwardRef(({className:e,...t},r)=>s.jsx(n1,{ref:r,className:ve(YR(),e),...t}));V.displayName=n1.displayName;const Th=e=>!e||e==="undefined"||e==="null"||e===""?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e),a1=e=>(console.log("useUserDetails called with userId:",e),console.log("userId type:",typeof e),console.log("userId valid:",Th(e)),tx({queryKey:["userDetails",e],queryFn:()=>{if(console.log("useUserDetails queryFn executing with userId:",e),!Th(e))throw new Error(`Invalid user ID: ${e}`);return rx.getUserById(e)},enabled:Th(e),staleTime:2e4,cacheTime:12e4}));class lx{static async getSettings(){if(this.settings)return this.settings;const{data:t}=await A.from("system_settings").select("setting_key, setting_value").in("setting_key",["imagekit_id","imagekit_public_key","imagekit_private_key","imagekit_url_endpoint"]),r={};return t==null||t.forEach(n=>{r[n.setting_key]=n.setting_value}),this.settings=r,this.settings}static async uploadImage(t,r="uploads"){const n=await this.getSettings();if(!n.imagekit_id||!n.imagekit_public_key||!n.imagekit_private_key)throw new Error("ImageKit settings not configured");const a=new FormData;a.append("file",t),a.append("fileName",t.name),a.append("folder",r);const i=await fetch("https://upload.imagekit.io/api/v1/files/upload",{method:"POST",headers:{Authorization:`Basic ${btoa(n.imagekit_private_key+":")}`},body:a});if(!i.ok)throw new Error("Failed to upload image");return(await i.json()).url}static getImageUrl(t){var r;return(r=this.settings)!=null&&r.imagekit_id?`https://ik.imagekit.io/${this.settings.imagekit_id}/${t}`:t}}vs(lx,"settings",null);const QR=()=>{const e=Oe(),{user:t}=Ze(),{data:r,isLoading:n}=a1(t==null?void 0:t.id),[a,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(null),[u,m]=f.useState(""),[h,b]=f.useState({fullName:"",phoneNumber:"",email:"",address:"",city:"",country:"Pakistan",profileImageUrl:""});f.useEffect(()=>{r&&b({fullName:r.full_name||"",phoneNumber:r.phone_number||"",email:r.email||"",address:r.address||"",city:r.city||"",country:r.country||"Pakistan",profileImageUrl:r.profile_image_url||""})},[r]);const w=(p,x)=>{b(N=>({...N,[p]:x}))},v=p=>{var N;const x=(N=p.target.files)==null?void 0:N[0];if(x){if(!x.type.startsWith("image/")){se.error("Please select a valid image file");return}if(x.size>5*1024*1024){se.error("Image size should be less than 5MB");return}d(x);const j=URL.createObjectURL(x);m(j),se.success("Photo selected! Click Save Changes to update.")}},y=async()=>{if(!(t!=null&&t.id)){se.error("User not authenticated");return}i(!0);try{let p=h.profileImageUrl;if(c){l(!0);try{p=await lx.uploadImage(c,"profiles"),se.success("Profile photo uploaded successfully!")}catch(x){console.error("Photo upload failed:",x),se.error("Failed to upload photo. Saving other changes...")}finally{l(!1)}}await rx.updateUserProfile(t.id,{full_name:h.fullName,email:h.email,address:h.address,city:h.city,country:h.country,profile_image_url:p}),se.success("Your profile has been successfully updated."),c&&(d(null),m(""),URL.revokeObjectURL(u)),e("/my-account")}catch(p){console.error("Error updating profile:",p),se.error("Failed to update profile. Please try again.")}finally{i(!1)}};if(n)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:s.jsx(Ne,{showHeader:!1,showBottomNav:!1,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})})})});const g=u||h.profileImageUrl||"/lovable-uploads/ecb13db3-ef6b-460e-bcad-5ce0e5bd11dd.png";return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:s.jsxs(Ne,{showHeader:!1,showBottomNav:!1,children:[s.jsxs("div",{className:"relative bg-gradient-to-br from-emerald-500 via-green-500 to-teal-600 pt-safe pb-6 px-3 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-white/5"}),s.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -translate-y-6 translate-x-6 blur-sm"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 bg-white/10 rounded-full translate-y-6 -translate-x-6 blur-sm"}),s.jsxs("div",{className:"relative z-10 max-w-md mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 py-1",children:[s.jsx(me,{to:"/my-account",className:"p-2 rounded-xl bg-white/15 hover:bg-white/25 transition-all duration-300 backdrop-blur-md border border-white/20 shadow-lg hover:shadow-xl hover:scale-105 active:scale-95",children:s.jsx(Be,{size:18,className:"text-white"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-lg font-bold text-white mb-0.5 tracking-wide",children:"Edit Profile"}),s.jsx("p",{className:"text-white/80 text-sm",children:"Update your information"})]}),s.jsxs(F,{onClick:y,disabled:a||o,size:"sm",className:"bg-white/15 hover:bg-white/25 text-white px-3 py-1.5 h-auto text-sm backdrop-blur-md border border-white/20 font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95 disabled:opacity-50",children:[s.jsx(Ir,{size:12,className:"mr-1"}),a?"Saving...":"Save"]})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative group mb-3",children:[s.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-white/20 to-white/10 backdrop-blur-md p-1 shadow-2xl border border-white/30",children:s.jsxs(ao,{className:"w-full h-full rounded-xl",children:[s.jsx(io,{src:g,alt:"Profile",className:"rounded-xl object-cover"}),s.jsx(oo,{className:"bg-white/20 text-white text-base font-bold rounded-xl backdrop-blur-sm",children:h.fullName.split(" ").map(p=>p[0]).join("").slice(0,2)||"U"})]})}),s.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",id:"photo-upload",disabled:o}),s.jsx(F,{size:"icon",onClick:()=>{var p;return(p=document.getElementById("photo-upload"))==null?void 0:p.click()},disabled:o,className:"absolute -bottom-1 -right-1 w-7 h-7 rounded-xl bg-white text-green-600 hover:bg-gray-50 shadow-xl border-2 border-white group-hover:scale-110 transition-all duration-200 disabled:opacity-50",children:o?s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-green-600 border-t-transparent"}):c?s.jsx(Cd,{size:12}):s.jsx(bP,{size:12})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-white font-semibold text-sm mb-0.5",children:c?"Photo Selected":"Change Photo"}),s.jsx("p",{className:"text-white/70 text-xs",children:o?"Uploading...":"Tap camera to update"})]})]})]})]}),s.jsxs("div",{className:"px-3 -mt-3 pb-6 space-y-3 max-w-md mx-auto",children:[s.jsx(M,{className:"border-0 shadow-xl bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden",children:s.jsxs(U,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2.5 mb-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg",children:s.jsx(jt,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-bold text-gray-800",children:"Personal Information"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"Your basic details"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{htmlFor:"fullName",className:"text-sm font-semibold text-gray-700",children:"Full Name"}),s.jsx(H,{id:"fullName",value:h.fullName,onChange:p=>w("fullName",p.target.value),className:"h-10 rounded-xl border-2 border-gray-100 focus:border-blue-500 focus:ring-blue-500/20 bg-gray-50/80 text-sm font-medium transition-all duration-200",placeholder:"Enter your full name",disabled:a})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{htmlFor:"phoneNumber",className:"text-sm font-semibold text-gray-700",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(H,{id:"phoneNumber",value:h.phoneNumber,className:"h-10 rounded-xl border-2 border-gray-200 bg-gray-100 pr-10 text-sm font-medium",disabled:!0}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s.jsx("div",{className:"w-4 h-4 rounded-lg bg-red-100 flex items-center justify-center shadow-sm",children:s.jsx(Hl,{size:8,className:"text-red-600"})})})]}),s.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Cannot be changed for security"})]})]})]})}),s.jsx(M,{className:"border-0 shadow-xl bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden",children:s.jsxs(U,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2.5 mb-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center shadow-lg",children:s.jsx(Mp,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-bold text-gray-800",children:"Contact Information"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"How we reach you"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:"Email Address"}),s.jsx(H,{id:"email",type:"email",value:h.email,onChange:p=>w("email",p.target.value),className:"h-10 rounded-xl border-2 border-gray-100 focus:border-green-500 focus:ring-green-500/20 bg-gray-50/80 text-sm font-medium transition-all duration-200",placeholder:"Enter your email address",disabled:a})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{htmlFor:"address",className:"text-sm font-semibold text-gray-700",children:"Address"}),s.jsx(H,{id:"address",value:h.address,onChange:p=>w("address",p.target.value),placeholder:"Enter your address",className:"h-10 rounded-xl border-2 border-gray-100 focus:border-green-500 focus:ring-green-500/20 bg-gray-50/80 text-sm font-medium transition-all duration-200",disabled:a})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{htmlFor:"city",className:"text-sm font-semibold text-gray-700",children:"City"}),s.jsx(H,{id:"city",value:h.city,onChange:p=>w("city",p.target.value),placeholder:"City",className:"h-10 rounded-xl border-2 border-gray-100 focus:border-green-500 focus:ring-green-500/20 bg-gray-50/80 text-sm font-medium transition-all duration-200",disabled:a})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{htmlFor:"country",className:"text-sm font-semibold text-gray-700",children:"Country"}),s.jsx(H,{id:"country",value:h.country,onChange:p=>w("country",p.target.value),className:"h-10 rounded-xl border-2 border-gray-100 focus:border-green-500 focus:ring-green-500/20 bg-gray-50/80 text-sm font-medium transition-all duration-200",disabled:a})]})]})]})]})}),s.jsxs("div",{className:"space-y-2.5 pt-2",children:[s.jsxs(F,{onClick:y,disabled:a||o,className:"w-full h-11 bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 hover:from-green-600 hover:via-emerald-600 hover:to-teal-600 text-white text-base font-bold rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] border-0 disabled:opacity-50",children:[s.jsx(Ir,{size:16,className:"mr-2"}),a?"Saving Changes...":o?"Uploading Photo...":"Save Changes"]}),s.jsx(F,{variant:"outline",onClick:()=>e("/my-account"),disabled:a||o,className:"w-full h-10 border-2 border-gray-200 hover:border-gray-300 text-gray-700 hover:bg-gray-50 text-sm font-semibold rounded-2xl transition-all duration-200 hover:shadow-lg transform hover:scale-[1.01] active:scale-[0.99] bg-white/80 backdrop-blur-sm disabled:opacity-50",children:"Cancel"})]})]})]})})};function Ct({className:e,...t}){return s.jsx("div",{className:ve("animate-pulse rounded-md bg-muted",e),...t})}const JR=()=>{var S;const{user:e}=Ze(),t=Oe(),{settings:r,loading:n}=Te(),[a,i]=f.useState(null),[o,l]=f.useState([]),[c,d]=f.useState({total_today_profit:0,active_investments_count:0}),[u,m]=f.useState(null),[h,b]=f.useState(!0);f.useEffect(()=>{e!=null&&e.id&&(w(),v())},[e==null?void 0:e.id]);const w=async()=>{if(e!=null&&e.id)try{b(!0);const{data:_,error:C}=await A.from("users").select(`
          id,
          full_name,
          email,
          phone_number,
          available_balance,
          account_status,
          created_at,
          total_deposits,
          total_withdrawals,
          current_plan_id,
          user_level,
          profile_image_url,
          kyc_status,
          country,
          city,
          address,
          last_login_at
        `).eq("id",e.id).single();if(C){console.error("Error fetching user data:",C),_e.error("Failed to load user details");return}i(_);const{data:E,error:$}=await A.from("user_investments").select(`
          id,
          amount,
          total_profit_earned,
          status,
          start_date,
          end_date,
          last_profit_date,
          investment_plans (
            name,
            daily_profit_percentage,
            duration_days
          )
        `).eq("user_id",e.id).order("created_at",{ascending:!1});let D=[];if($?console.error("Error fetching investments:",$):(D=(E==null?void 0:E.map(I=>{var B,ne,ye;return{id:I.id,amount:I.amount,total_profit_earned:I.total_profit_earned,status:I.status,start_date:I.start_date,end_date:I.end_date,last_profit_date:I.last_profit_date,plan:{name:((B=I.investment_plans)==null?void 0:B.name)||"Unknown Plan",daily_profit_percentage:((ne=I.investment_plans)==null?void 0:ne.daily_profit_percentage)||0,duration_days:((ye=I.investment_plans)==null?void 0:ye.duration_days)||0}}}))||[],l(D)),_.user_level){const{data:I,error:B}=await A.from("user_levels").select("name, description, color, benefits, bonus_amount").eq("level",_.user_level).eq("is_active",!0).single();if(!B&&I){const ne=ye=>ye?Array.isArray(ye)?ye.map(de=>String(de)):[]:[];m({name:I.name,description:I.description,color:I.color,benefits:ne(I.benefits),bonus_amount:Number(I.bonus_amount)})}}const L=new Date().toISOString().split("T")[0],{data:W,error:ae}=await A.from("transactions").select("amount").eq("user_id",e.id).in("type",["commission","profit","referral_commission"]).gte("created_at",L+"T00:00:00.000Z").lt("created_at",L+"T23:59:59.999Z"),{data:ee,error:X}=await A.from("daily_profits").select("profit_amount").eq("user_id",e.id).eq("profit_date",L);let T=0;!ae&&W&&(T+=W.reduce((I,B)=>I+Number(B.amount),0)),!X&&ee&&(T+=ee.reduce((I,B)=>I+Number(B.profit_amount),0));const q=(D==null?void 0:D.filter(I=>I.status==="active").length)||0;d({total_today_profit:T,active_investments_count:q})}catch(_){console.error("Error fetching user data:",_),_e.error("Failed to load user details")}finally{b(!1)}},v=()=>{if(!(e!=null&&e.id))return;const _=A.channel("user-profile-updates").on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${e.id}`},C=>{if(console.log("User profile updated:",C),C.new){const E=C.new;i($=>$?{...$,available_balance:E.available_balance||0,total_deposits:E.total_deposits||0,total_withdrawals:E.total_withdrawals||0,account_status:E.account_status||"active",kyc_status:E.kyc_status||"not_submitted",user_level:E.user_level||1}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"user_investments",filter:`user_id=eq.${e.id}`},C=>{console.log("User investments updated:",C),w()}).subscribe();return()=>{A.removeChannel(_)}},y=_=>n?`Rs. ${_.toLocaleString()}`:Y(_,r),g=_=>_?new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not available",p=_=>{const C=new Date,$=new Date(_).getTime()-C.getTime();return Math.ceil($/(1e3*60*60*24))};if(h)return s.jsx(Ne,{headerTitle:"Profile",children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:s.jsx("div",{className:"p-2 sm:p-4 space-y-3 sm:space-y-6",children:[1,2,3,4].map(_=>s.jsx(M,{className:"border-0 shadow-lg sm:shadow-2xl bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-3xl overflow-hidden",children:s.jsxs(U,{className:"p-3 sm:p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 mb-3 sm:mb-4",children:[s.jsx(Ct,{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-xl sm:rounded-2xl"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Ct,{className:"h-5 sm:h-6 w-32 sm:w-48 mb-2"}),s.jsx(Ct,{className:"h-3 sm:h-4 w-24 sm:w-32"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[s.jsx(Ct,{className:"h-16 sm:h-20 rounded-xl"}),s.jsx(Ct,{className:"h-16 sm:h-20 rounded-xl"})]})]})},_))})})});if(!a)return s.jsx(Ne,{headerTitle:"Profile",children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 flex items-center justify-center p-2 sm:p-4",children:s.jsx(M,{className:"border-0 shadow-lg sm:shadow-2xl bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-3xl overflow-hidden text-center max-w-sm mx-auto",children:s.jsxs(U,{className:"p-6 sm:p-8",children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-emerald-200 to-green-200 rounded-xl sm:rounded-2xl flex items-center justify-center mx-auto mb-4 sm:mb-6",children:s.jsx(Ht,{className:"w-8 h-8 sm:w-10 sm:h-10 text-emerald-500"})}),s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2",children:"Oops!"}),s.jsx("p",{className:"text-emerald-600 font-medium mb-4",children:"Failed to load profile data"}),s.jsx(F,{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 hover:from-emerald-600 hover:via-green-600 hover:to-teal-600 shadow-lg text-sm sm:text-base",size:"sm",children:"Try Again"})]})})})});const x=o.reduce((_,C)=>_+C.amount,0),N=o.reduce((_,C)=>_+C.total_profit_earned,0),j=o.filter(_=>_.status==="active"),k=x>0?N/x*100:0;return s.jsx(Ne,{headerTitle:"Profile",children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:s.jsxs("div",{className:"p-2 sm:p-4 space-y-3 sm:space-y-6 pb-20 sm:pb-24 max-w-md mx-auto",children:[s.jsxs(M,{className:"border-0 shadow-lg sm:shadow-2xl bg-gradient-to-br from-emerald-500 via-green-500 to-teal-600 overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-white/5"}),s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 sm:w-40 sm:h-40 bg-white/10 rounded-full -translate-y-8 sm:-translate-y-12 translate-x-8 sm:translate-x-12 blur-sm"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 sm:w-32 sm:h-32 bg-white/10 rounded-full translate-y-8 sm:translate-y-12 -translate-x-8 sm:-translate-x-12 blur-sm"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-20 h-20 sm:w-24 sm:h-24 bg-white/5 rounded-full transform -translate-x-1/2 -translate-y-1/2"}),s.jsxs(U,{className:"relative z-10 p-3 sm:p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-white/20 backdrop-blur-md rounded-2xl sm:rounded-3xl flex items-center justify-center border border-white/30 shadow-lg sm:shadow-2xl",children:a!=null&&a.profile_image_url?s.jsx("img",{src:a.profile_image_url,alt:a.full_name,className:"w-full h-full object-cover rounded-2xl sm:rounded-3xl"}):s.jsx(jt,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),s.jsx("div",{className:"absolute -top-1 -right-1 sm:-top-2 sm:-right-2 w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-green-400 to-emerald-400 rounded-full flex items-center justify-center shadow-lg",children:s.jsx($s,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg sm:text-2xl font-bold mb-1 text-white drop-shadow-lg",children:a==null?void 0:a.full_name}),s.jsx("p",{className:"text-white/90 text-xs sm:text-sm mb-1",children:a==null?void 0:a.email}),s.jsx("p",{className:"text-white/80 text-xs sm:text-sm",children:a==null?void 0:a.phone_number})]})]}),s.jsxs(F,{onClick:()=>t("/profile-edit"),size:"sm",className:"bg-white/15 hover:bg-white/25 text-white border-white/20 backdrop-blur-md shadow-lg rounded-xl sm:rounded-2xl text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[s.jsx(AP,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),"Edit"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[s.jsxs("div",{className:"bg-white/15 backdrop-blur-md rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-white/20 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Wi,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white/80"}),s.jsx(ke,{className:"bg-emerald-500 text-white border-emerald-300 text-xs rounded-lg sm:rounded-xl px-2 py-0.5",children:a==null?void 0:a.account_status})]}),s.jsx("p",{className:"text-white/70 text-xs mb-1",children:"Available Balance"}),s.jsx("p",{className:"text-base sm:text-xl font-bold text-white",children:y((a==null?void 0:a.available_balance)||0)})]}),s.jsxs("div",{className:"bg-white/15 backdrop-blur-md rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-white/20 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Fi,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white/80"}),s.jsx(fu,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-300"})]}),s.jsx("p",{className:"text-white/70 text-xs mb-1",children:"Member Since"}),s.jsx("p",{className:"text-sm sm:text-lg font-bold text-white",children:g((a==null?void 0:a.created_at)||"")})]})]})]})]}),u&&s.jsxs(M,{className:"border-0 shadow-lg sm:shadow-2xl bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-3xl overflow-hidden",children:[s.jsx(K,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:s.jsxs(Q,{className:"flex items-center text-base sm:text-lg text-gray-800",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl sm:rounded-2xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg",style:{background:`linear-gradient(to bottom right, ${u.color}, ${u.color})`},children:s.jsx($s,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),"Level ",a==null?void 0:a.user_level,": ",u.name]})}),s.jsxs(U,{className:"pt-0 px-3 sm:px-6 pb-3 sm:pb-6",children:[s.jsx("p",{className:"text-gray-600 mb-3 sm:mb-4 text-sm sm:text-base",children:u.description}),s.jsx("div",{className:"space-y-1.5 sm:space-y-2",children:u.benefits.slice(0,3).map((_,C)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600",children:[s.jsx(sr,{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-500"}),s.jsx("span",{children:_})]},C))})]})]}),s.jsxs(M,{className:"border-0 shadow-lg sm:shadow-2xl bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-3xl overflow-hidden",children:[s.jsx(K,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:s.jsxs(Q,{className:"flex items-center text-base sm:text-lg text-gray-800",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl sm:rounded-2xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg",children:s.jsx(tf,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),"Today's Performance",s.jsx("div",{className:"ml-auto",children:s.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 bg-gradient-to-r from-emerald-400 to-green-400 rounded-full animate-pulse shadow-lg"})})]})}),s.jsx(U,{className:"pt-0 px-3 sm:px-6 pb-3 sm:pb-6",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-emerald-100 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-lg sm:rounded-xl flex items-center justify-center shadow-md",children:s.jsx(mt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx(ke,{className:"bg-emerald-100 text-emerald-700 text-xs border border-emerald-200 rounded-lg sm:rounded-xl px-1.5 py-0.5",children:"Today"})]}),s.jsx("p",{className:"text-emerald-600 text-xs font-medium mb-1",children:"Today's Profit"}),s.jsx("p",{className:"text-base sm:text-xl font-bold text-emerald-700",children:y(c.total_today_profit)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-teal-50 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-green-100 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg sm:rounded-xl flex items-center justify-center shadow-md",children:s.jsx(kn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx(An,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-400"})]}),s.jsx("p",{className:"text-green-600 text-xs font-medium mb-1",children:"Active Plans"}),s.jsx("p",{className:"text-base sm:text-xl font-bold text-green-700",children:c.active_investments_count})]})]})})]}),s.jsxs(M,{className:"border-0 shadow-lg sm:shadow-2xl bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-3xl overflow-hidden",children:[s.jsx(K,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:s.jsxs(Q,{className:"flex items-center text-base sm:text-lg text-gray-800",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-teal-500 to-emerald-600 rounded-xl sm:rounded-2xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg",children:s.jsx(wP,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),"Portfolio Overview",s.jsxs(ke,{className:`ml-auto text-xs sm:text-sm ${k>=0,"bg-emerald-100 text-emerald-700 border-emerald-200"} rounded-lg sm:rounded-xl px-2 py-1`,children:[k>=0?s.jsx(qe,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}):s.jsx(qe,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),k.toFixed(1),"%"]})]})}),s.jsxs(U,{className:"pt-0 px-3 sm:px-6 pb-3 sm:pb-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-emerald-50 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-teal-100 shadow-lg",children:[s.jsx("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-teal-500 to-emerald-600 rounded-lg sm:rounded-xl flex items-center justify-center shadow-md",children:s.jsx(Li,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})})}),s.jsx("p",{className:"text-emerald-600 text-xs font-medium mb-1",children:"Total Invested"}),s.jsx("p",{className:"text-base sm:text-xl font-bold text-emerald-700",children:y(x)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-emerald-100 shadow-lg",children:[s.jsx("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-lg sm:rounded-xl flex items-center justify-center shadow-md",children:s.jsx(sr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})})}),s.jsx("p",{className:"text-emerald-600 text-xs font-medium mb-1",children:"Total Profit"}),s.jsx("p",{className:"text-base sm:text-xl font-bold text-emerald-700",children:y(N)})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl sm:rounded-2xl p-2 sm:p-3 text-center border border-emerald-100 shadow-sm",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-emerald-400 to-green-500 rounded-lg sm:rounded-xl flex items-center justify-center mx-auto mb-1 sm:mb-2 shadow-md",children:s.jsx(kn,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),s.jsx("p",{className:"text-xs text-emerald-600 mb-1",children:"Active"}),s.jsx("p",{className:"text-sm sm:text-lg font-bold text-emerald-600",children:j.length})]}),s.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl sm:rounded-2xl p-2 sm:p-3 text-center border border-green-100 shadow-sm",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-green-400 to-teal-500 rounded-lg sm:rounded-xl flex items-center justify-center mx-auto mb-1 sm:mb-2 shadow-md",children:s.jsx(hs,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),s.jsx("p",{className:"text-xs text-emerald-600 mb-1",children:"Deposits"}),s.jsx("p",{className:"text-xs sm:text-sm font-bold text-green-600",children:y((a==null?void 0:a.total_deposits)||0)})]}),s.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-xl sm:rounded-2xl p-2 sm:p-3 text-center border border-teal-100 shadow-sm",children:[s.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-teal-400 to-emerald-500 rounded-lg sm:rounded-xl flex items-center justify-center mx-auto mb-1 sm:mb-2 shadow-md",children:s.jsx(Ht,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),s.jsx("p",{className:"text-xs text-emerald-600 mb-1",children:"Net Gain"}),s.jsx("p",{className:"text-xs sm:text-sm font-bold text-teal-600",children:y(N-((a==null?void 0:a.total_withdrawals)||0))})]})]})]})]}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between px-1 sm:px-2",children:[s.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 flex items-center",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl sm:rounded-2xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg",children:s.jsx(hs,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),"Active Investments"]}),s.jsxs(ke,{className:"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg rounded-lg sm:rounded-xl text-xs px-2 py-1",children:[j.length," Active"]})]}),j.length>0?j.map(_=>{const C=p(_.end_date),E=_.amount*_.plan.daily_profit_percentage;return s.jsxs(M,{className:"border-0 shadow-lg sm:shadow-2xl bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-3xl overflow-hidden",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500"}),s.jsxs(U,{className:"p-3 sm:p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3 sm:mb-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-emerald-100 to-green-100 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-md",children:s.jsx(sr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-base sm:text-lg font-bold text-gray-800",children:_.plan.name}),s.jsxs("p",{className:"text-xs sm:text-sm text-emerald-600",children:["Started: ",g(_.start_date)]})]})]})}),s.jsx(ke,{className:"bg-emerald-50 text-emerald-700 border-emerald-200 text-xs font-medium shadow-sm rounded-lg sm:rounded-xl px-2 py-1",children:_.status.charAt(0).toUpperCase()+_.status.slice(1)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 mb-3 sm:mb-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-green-100 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(_t,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500"}),s.jsx(ke,{className:"bg-green-100 text-green-700 text-xs rounded-lg sm:rounded-xl px-1.5 py-0.5",children:C>0?`${C}d`:"Expired"})]}),s.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Days Remaining"}),s.jsx("p",{className:"text-sm sm:text-lg font-bold text-green-700",children:C>0?C:"Expired"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-emerald-100 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(mt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500"}),s.jsxs(ke,{className:"bg-emerald-100 text-emerald-700 text-xs rounded-lg sm:rounded-xl px-1.5 py-0.5",children:[(_.plan.daily_profit_percentage*100).toFixed(2),"%"]})]}),s.jsx("p",{className:"text-xs text-emerald-600 font-medium mb-1",children:"Daily Profit"}),s.jsx("p",{className:"text-sm sm:text-lg font-bold text-emerald-700",children:y(E)})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[s.jsxs("div",{className:"bg-emerald-50 rounded-xl sm:rounded-2xl p-2 sm:p-3 text-center border border-emerald-100 shadow-sm",children:[s.jsx("p",{className:"text-xs text-emerald-600 font-medium mb-1",children:"Investment"}),s.jsx("p",{className:"text-xs sm:text-sm font-bold text-emerald-800",children:y(_.amount)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-xl sm:rounded-2xl p-2 sm:p-3 text-center border border-emerald-100 shadow-sm",children:[s.jsx("p",{className:"text-xs text-emerald-600 font-medium mb-1",children:"Total Earned"}),s.jsx("p",{className:"text-xs sm:text-sm font-bold text-emerald-700",children:y(_.total_profit_earned)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-teal-50 rounded-xl sm:rounded-2xl p-2 sm:p-3 text-center border border-green-100 shadow-sm",children:[s.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Expires"}),s.jsx("p",{className:"text-xs sm:text-sm font-bold text-green-700",children:g(_.end_date)})]})]})]})]},_.id)}):s.jsx(M,{className:"border-0 shadow-lg sm:shadow-2xl bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-3xl overflow-hidden",children:s.jsxs(U,{className:"p-6 sm:p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-emerald-100 to-green-100 rounded-2xl sm:rounded-3xl flex items-center justify-center mx-auto mb-4 sm:mb-6 shadow-lg",children:s.jsx(Ht,{className:"w-8 h-8 sm:w-10 sm:h-10 text-emerald-500"})}),s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 mb-2 sm:mb-3",children:"No Active Investments"}),s.jsx("p",{className:"text-emerald-600 mb-4 sm:mb-6 max-w-sm mx-auto text-sm sm:text-base",children:"Start your investment journey today and watch your money grow with our premium plans"}),s.jsxs(F,{onClick:()=>t("/investment-plans"),className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 hover:from-emerald-600 hover:via-green-600 hover:to-teal-600 text-white shadow-lg rounded-xl sm:rounded-2xl text-sm sm:text-base px-4 sm:px-6 py-2 sm:py-3",children:[s.jsx(sr,{className:"w-4 h-4 mr-2"}),"Explore Plans",s.jsx(Li,{className:"w-4 h-4 ml-2"})]})]})})]}),s.jsxs(M,{className:"border-0 shadow-lg sm:shadow-2xl bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-3xl overflow-hidden",children:[s.jsx(K,{className:"pb-2 sm:pb-3 px-3 sm:px-6 pt-3 sm:pt-6",children:s.jsxs(Q,{className:"flex items-center text-base sm:text-lg text-gray-800",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-teal-500 to-emerald-600 rounded-xl sm:rounded-2xl flex items-center justify-center mr-2 sm:mr-3 shadow-lg",children:s.jsx(hs,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),"Account Statistics"]})}),s.jsx(U,{className:"pt-0 px-3 sm:px-6 pb-3 sm:pb-6",children:s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 bg-white/70 backdrop-blur-sm rounded-xl sm:rounded-2xl border border-emerald-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-md",children:s.jsx(Fi,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("span",{className:"text-emerald-700 font-medium text-sm sm:text-base",children:"Member Since"})]}),s.jsx("span",{className:"text-emerald-800 font-bold text-sm sm:text-base",children:g((a==null?void 0:a.created_at)||"")})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 bg-white/70 backdrop-blur-sm rounded-xl sm:rounded-2xl border border-emerald-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-400 to-green-500 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-md",children:s.jsx(Sl,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("span",{className:"text-emerald-700 font-medium text-sm sm:text-base",children:"Total Withdrawals"})]}),s.jsx("span",{className:"text-emerald-600 font-bold text-sm sm:text-base",children:y((a==null?void 0:a.total_withdrawals)||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 bg-white/70 backdrop-blur-sm rounded-xl sm:rounded-2xl border border-green-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-md",children:s.jsx(kn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("span",{className:"text-emerald-700 font-medium text-sm sm:text-base",children:"Total Investments"})]}),s.jsx("span",{className:"text-green-600 font-bold text-sm sm:text-base",children:o.length})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 bg-white/70 backdrop-blur-sm rounded-xl sm:rounded-2xl border border-emerald-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-md",children:s.jsx(qe,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("span",{className:"text-emerald-700 font-medium text-sm sm:text-base",children:"Net Profit"})]}),s.jsx("span",{className:"text-emerald-600 font-bold text-sm sm:text-base",children:y(N-((a==null?void 0:a.total_withdrawals)||0))})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 bg-white/70 backdrop-blur-sm rounded-xl sm:rounded-2xl border border-emerald-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-md",children:s.jsx(Ht,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("span",{className:"text-emerald-700 font-medium text-sm sm:text-base",children:"KYC Status"})]}),s.jsx(ke,{className:`${(a==null?void 0:a.kyc_status)==="verified"?"bg-green-100 text-green-700 border-green-200":(a==null?void 0:a.kyc_status)==="pending"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-gray-100 text-gray-700 border-gray-200"} rounded-lg sm:rounded-xl text-xs px-2 py-1`,children:((S=a==null?void 0:a.kyc_status)==null?void 0:S.replace("_"," "))||"Not submitted"})]}),(a==null?void 0:a.last_login_at)&&s.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 bg-white/70 backdrop-blur-sm rounded-xl sm:rounded-2xl border border-emerald-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg sm:rounded-xl flex items-center justify-center mr-2 sm:mr-3 shadow-md",children:s.jsx(tf,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsx("span",{className:"text-emerald-700 font-medium text-sm sm:text-base",children:"Last Login"})]}),s.jsx("span",{className:"text-emerald-600 font-bold text-sm sm:text-base",children:g(a.last_login_at)})]})]})})]})]})})})},XR=()=>{const{user:e}=Ze();Oe();const{settings:t}=Te(),[r,n]=f.useState({totalInvestments:0,totalReferrals:0,totalDeposits:0,daysSinceJoined:0,currentLevel:"Bronze Explorer",nextLevelProgress:0,totalEarned:0,totalCommissionEarned:0,totalLevelBonuses:0,nextLevelReferrals:3,referralsNeeded:3}),[a,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState(!0),u=x=>({1:s.jsx(Ht,{className:"w-6 h-6 text-white"}),2:s.jsx(sr,{className:"w-6 h-6 text-white"}),3:s.jsx($s,{className:"w-6 h-6 text-white"}),4:s.jsx(nf,{className:"w-6 h-6 text-white"}),5:s.jsx(hs,{className:"w-6 h-6 text-white"})})[x]||s.jsx(Ht,{className:"w-6 h-6 text-white"});f.useEffect(()=>{e&&m()},[e]);const m=async()=>{if(e)try{d(!0);const{data:x,error:N}=await A.from("user_levels").select("*").eq("is_active",!0).order("level",{ascending:!0});if(N){console.error("Error fetching levels:",N);return}const j=(x==null?void 0:x.map(de=>({id:de.id,level:de.level,name:de.name,color:de.color,icon:u(de.level),referrals_required:de.referrals_required,description:de.description||"",benefits:Array.isArray(de.benefits)?de.benefits.map(De=>String(De)):[],bonus_amount:Number(de.bonus_amount),is_active:de.is_active})))||[];i(j);const{data:k}=await A.from("user_investments").select("amount, total_profit_earned").eq("user_id",e.id),S=(k==null?void 0:k.reduce((de,De)=>de+Number(De.amount),0))||0,_=(k==null?void 0:k.reduce((de,De)=>de+Number(De.total_profit_earned),0))||0,{data:C}=await A.from("users").select("id, total_deposits").eq("referred_by_user_id",e.id),E=(C==null?void 0:C.filter(de=>(de.total_deposits||0)>0).length)||0,{data:$}=await A.from("referral_commissions").select("commission_amount").eq("referrer_user_id",e.id).eq("status","completed"),D=($==null?void 0:$.reduce((de,De)=>de+Number(De.commission_amount),0))||0,{data:L}=await A.from("transactions").select("id, amount, description, created_at, type").eq("user_id",e.id).eq("type","level_up_bonus").order("created_at",{ascending:!1}),W=(L==null?void 0:L.reduce((de,De)=>de+Number(De.amount),0))||0;l(L||[]);let ae=j[0];for(let de=j.length-1;de>=0;de--){const De=j[de];if(E>=De.referrals_required){ae=De;break}}e.user_level!==ae.level&&await A.rpc("calculate_user_level",{user_id:e.id});const ee=j.findIndex(de=>de.level===ae.level),X=ee<j.length-1?j[ee+1]:null,T=X?X.referrals_required:ae.referrals_required,q=X?Math.max(0,X.referrals_required-E):0,I=new Date(e.created_at),ne=Math.floor((new Date().getTime()-I.getTime())/(1e3*60*60*24)),ye=_+D+W;n({totalInvestments:S,totalReferrals:E,totalDeposits:e.total_deposits,daysSinceJoined:ne,currentLevel:ae.name,nextLevelProgress:X?Math.min(E/X.referrals_required*100,100):100,totalEarned:ye,totalCommissionEarned:D,totalLevelBonuses:W,nextLevelReferrals:T,referralsNeeded:q})}catch(x){console.error("Error fetching user stats:",x)}finally{d(!1)}},h=()=>a.find(x=>x.name===r.currentLevel)||a[0],b=()=>{const x=a.findIndex(N=>N.name===r.currentLevel);return x<a.length-1?a[x+1]:null},w=()=>{const x=b();return x?Math.min(r.totalReferrals/x.referrals_required*100,100):100},v=x=>Xo(x,t.currencySymbol),y=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});if(c)return s.jsx(Ne,{headerTitle:"Account Level",children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 max-w-sm mx-auto",children:s.jsx("div",{className:"p-2 space-y-2",children:[1,2,3].map(x=>s.jsx(M,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-sm rounded-3xl overflow-hidden animate-pulse",children:s.jsxs(U,{className:"p-3",children:[s.jsx("div",{className:"h-16 bg-gradient-to-r from-emerald-200 to-green-200 rounded-2xl mb-2"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gradient-to-r from-emerald-100 to-green-100 rounded-lg"}),s.jsx("div",{className:"h-3 bg-gradient-to-r from-emerald-100 to-green-100 rounded-lg w-3/4"})]})]})},x))})})});const g=h(),p=b();return s.jsx(Ne,{headerTitle:"Account Level",children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 max-w-sm mx-auto",children:[s.jsxs("div",{className:"relative bg-gradient-to-br from-emerald-500 via-green-500 to-teal-600 text-white pb-4 px-2 overflow-hidden -mt-3",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-white/5 to-white/10"}),s.jsx("div",{className:"absolute top-2 right-2 w-16 h-16 bg-white/10 rounded-full animate-pulse"}),s.jsx("div",{className:"absolute bottom-4 left-2 w-12 h-12 bg-white/10 rounded-full animate-pulse"}),s.jsxs("div",{className:"relative z-10 max-w-md mx-auto pt-2",children:[s.jsx("div",{className:"flex justify-center mb-3",children:s.jsx("div",{className:"p-4 rounded-full shadow-2xl border-4 border-white/30",style:{background:`linear-gradient(to bottom right, ${(g==null?void 0:g.color)||"#6b7280"}, ${(g==null?void 0:g.color)||"#6b7280"})`},children:g==null?void 0:g.icon})}),s.jsx("h1",{className:"text-2xl font-bold text-center mb-1",children:r.currentLevel}),s.jsx("p",{className:"text-center text-green-100 text-sm mb-3",children:g==null?void 0:g.description}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[s.jsxs("div",{className:"text-center bg-white/15 rounded-2xl p-3 backdrop-blur-sm border border-white/20",children:[s.jsxs("div",{className:"text-xl font-bold flex items-center justify-center gap-1 mb-1",children:[s.jsx(ct,{size:16}),r.totalReferrals]}),s.jsx("div",{className:"text-xs text-green-100 font-medium",children:"Active Referrals"})]}),s.jsxs("div",{className:"text-center bg-white/15 rounded-2xl p-3 backdrop-blur-sm border border-white/20",children:[s.jsx("div",{className:"text-xl font-bold mb-1",children:v(r.totalEarned)}),s.jsx("div",{className:"text-xs text-green-100 font-medium",children:"Total Earned"})]})]})]})]}),s.jsxs("div",{className:"px-2 -mt-2 pb-4 space-y-3 max-w-md mx-auto",children:[s.jsxs(M,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-sm rounded-3xl overflow-hidden",children:[s.jsx(K,{className:"pb-3",children:s.jsxs(Q,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl shadow-lg",children:s.jsx(mt,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm",children:"Earnings Breakdown"}),s.jsx("div",{className:"text-xs text-gray-500 font-normal",children:"Your total earnings overview"})]})]})}),s.jsx(U,{className:"space-y-3",children:s.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[s.jsxs("div",{className:"flex justify-between items-center p-2 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Commission Earnings"}),s.jsx("span",{className:"font-bold text-green-600",children:v(r.totalCommissionEarned)})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Level Up Bonuses"}),s.jsx("span",{className:"font-bold text-blue-600",children:v(r.totalLevelBonuses)})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-emerald-50 rounded-lg border-2 border-emerald-200",children:[s.jsx("span",{className:"text-sm font-bold text-gray-800",children:"Total Earned"}),s.jsx("span",{className:"font-bold text-emerald-600 text-lg",children:v(r.totalEarned)})]})]})})]}),p&&s.jsxs(M,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-sm rounded-3xl overflow-hidden",children:[s.jsx(K,{className:"pb-3",children:s.jsxs(Q,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl shadow-lg",children:s.jsx(qe,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm",children:"Next Level Progress"}),s.jsxs("div",{className:"text-xs text-gray-500 font-normal",children:["Level up to ",p.name]})]})]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:r.currentLevel}),s.jsx("span",{className:"text-gray-600",children:p.name})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"h-full transition-all duration-300 rounded-full bg-gradient-to-r from-green-500 to-emerald-600",style:{width:`${w()}%`}})}),s.jsx("div",{className:"text-center",children:s.jsxs("span",{className:"text-sm font-bold text-gray-800",children:[r.totalReferrals," / ",p.referrals_required," active referrals"]})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-3 border border-green-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(kn,{size:16,className:"text-green-600"}),s.jsx("span",{className:"font-bold text-gray-800 text-sm",children:"Requirements to Level Up"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:r.referralsNeeded}),s.jsxs("div",{className:"text-xs text-gray-600",children:["more active ",r.referralsNeeded===1?"referral":"referrals"," needed"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-bold text-gray-800 flex items-center gap-2 text-sm",children:[s.jsx(Qr,{size:14,className:"text-green-600"}),p.name," Benefits"]}),s.jsx("div",{className:"space-y-1",children:p.benefits.map((x,N)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx(qi,{size:12,className:"text-yellow-500 flex-shrink-0"}),s.jsx("span",{children:x})]},N))}),s.jsx("div",{className:"bg-green-50 rounded-2xl p-2 border border-green-100",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Nl,{size:12,className:"text-green-600"}),s.jsxs("span",{className:"font-medium text-gray-800",children:["Level Up Bonus: ",v(p.bonus_amount)]})]})})]})]})]}),o.length>0&&s.jsxs(M,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-sm rounded-3xl overflow-hidden",children:[s.jsx(K,{className:"pb-3",children:s.jsxs(Q,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg",children:s.jsx(Jo,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm",children:"Bonus History"}),s.jsx("div",{className:"text-xs text-gray-500 font-normal",children:"Your level up bonuses"})]})]})}),s.jsxs(U,{className:"space-y-2",children:[o.slice(0,3).map(x=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-lg",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",children:x.description}),s.jsx("div",{className:"text-xs text-gray-600",children:y(x.created_at)})]}),s.jsxs("div",{className:"text-sm font-bold text-blue-600 ml-2",children:["+",v(x.amount)]})]},x.id)),o.length>3&&s.jsx("div",{className:"text-center pt-2",children:s.jsxs("span",{className:"text-xs text-gray-500",children:["+",o.length-3," more bonuses"]})})]})]}),s.jsxs(M,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-sm rounded-3xl overflow-hidden",children:[s.jsx(K,{className:"pb-3",children:s.jsxs(Q,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl shadow-lg",children:s.jsx($s,{size:16,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm",children:"All Levels"}),s.jsx("div",{className:"text-xs text-gray-500 font-normal",children:"Membership tiers & benefits"})]})]})}),s.jsx(U,{className:"space-y-2",children:a.map((x,N)=>{const j=x.name===r.currentLevel,k=r.totalReferrals>=x.referrals_required;return s.jsxs("div",{className:`p-3 rounded-2xl border-2 transition-all ${j?"border-green-500 bg-gradient-to-r from-green-50 to-emerald-50":k?"border-gray-300 bg-gray-50":"border-gray-200 bg-white"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 rounded-xl shadow-lg",style:{background:`linear-gradient(to bottom right, ${x.color}, ${x.color})`},children:x.icon}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-bold text-gray-800 flex items-center gap-1 text-sm",children:[x.name,j&&s.jsx("span",{className:"bg-green-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:"Current"})]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[x.referrals_required," active ",x.referrals_required===1?"referral":"referrals"," required"]})]})]}),k&&s.jsx("div",{className:"text-green-500",children:s.jsx(nf,{size:16})})]}),s.jsx("div",{className:"text-xs text-gray-600 mb-1",children:x.description}),s.jsx("div",{className:"space-y-0.5 mb-1",children:x.benefits.slice(0,2).map((S,_)=>s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[s.jsx(qi,{size:10,className:"text-yellow-500"}),s.jsx("span",{children:S})]},_))}),x.bonus_amount>0&&s.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[s.jsx(Nl,{size:10,className:"text-green-600"}),s.jsxs("span",{className:"text-green-700 font-medium",children:["Bonus: ",v(x.bonus_amount)]})]})]},x.id)})})]})]})]})})},ZR=()=>{const[e]=Ep(),[t,r]=f.useState(""),[n,a]=f.useState([]),[i,o]=f.useState(""),[l,c]=f.useState(!0),d=Oe(),{user:u}=Ze(),{settings:m}=Te(),h=e.get("amount"),b=e.get("planId"),w=e.get("planName"),v=!!(b&&w);f.useEffect(()=>{y(),h&&r(h)},[h]);const y=async()=>{try{const{data:j,error:k}=await A.from("payment_gateways").select("*").eq("type","deposit").eq("is_active",!0).order("name");if(k)throw k;a(j||[])}catch(j){console.error("Error fetching payment gateways:",j),se.error("Failed to load payment methods")}finally{c(!1)}},g=j=>{switch(j.toLowerCase()){case"bank":return s.jsx(yP,{className:"w-6 h-6"});case"mobile":return s.jsx(IP,{className:"w-6 h-6"});case"card":return s.jsx(Rt,{className:"w-6 h-6"});default:return s.jsx(mt,{className:"w-6 h-6"})}},p=(j,k)=>k*j.fees_percentage/100+j.fees_fixed,x=()=>{if(!t||parseFloat(t)<=0){se.error("Please enter a valid amount");return}if(!i){se.error("Please select a payment method");return}const j=n.find(_=>_.id===i);if(!j){se.error("Invalid payment method selected");return}const k=parseFloat(t);if(k<j.minimum_amount){se.error(`Minimum deposit amount is ${Y(j.minimum_amount,m)}`);return}if(j.maximum_amount&&k>j.maximum_amount){se.error(`Maximum deposit amount is ${Y(j.maximum_amount,m)}`);return}const S=new URLSearchParams({gateway:i,amount:t});b&&S.set("planId",b),w&&S.set("planName",w),d(`/deposit-details?${S.toString()}`)},N=[500,1e3,2e3,5e3,1e4];return s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 p-3 pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:v?"/invest":"/",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white",children:v?`Deposit for ${w}`:"Deposit Funds"})]}),s.jsx("div",{className:"p-1 bg-white/20 rounded-lg backdrop-blur-sm",children:s.jsx(gr,{className:"w-4 h-4 text-white"})})]}),s.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 border border-white/30",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-emerald-100 text-xs",children:"Current Balance"}),s.jsx("p",{className:"text-white text-xl font-bold",children:Y((u==null?void 0:u.available_balance)||0,m)}),v&&s.jsxs("p",{className:"text-emerald-100 text-xs mt-1",children:["Investment Amount: ",Y(parseFloat(t||"0"),m)]})]})})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-4",children:[v&&s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(Pd,{className:"w-4 h-4 mr-2 text-blue-600"}),"Investment Deposit"]})}),s.jsx(U,{children:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-blue-800 text-sm",children:["You're making a deposit for the ",s.jsx("strong",{children:w})," investment plan. After your deposit is approved, your investment will be automatically activated."]})})})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(mt,{className:"w-4 h-4 mr-2 text-green-600"}),"Deposit Amount"]})}),s.jsxs(U,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(H,{type:"number",placeholder:`Enter amount (${m.currencySymbol})`,value:t,onChange:j=>r(j.target.value),className:"text-lg font-semibold text-center border-2 border-emerald-200 focus:border-emerald-500 rounded-lg h-11",disabled:v}),v&&s.jsx("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"Amount is pre-filled for your investment plan"})]}),!v&&s.jsx("div",{className:"grid grid-cols-3 gap-2",children:N.map(j=>s.jsx(F,{variant:"outline",onClick:()=>r(j.toString()),className:"border-emerald-300 text-emerald-700 hover:bg-emerald-50 rounded-lg text-xs h-8",children:Y(j,m)},j))})]})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(Rt,{className:"w-4 h-4 mr-2 text-blue-600"}),"Payment Methods"]})}),s.jsx(U,{className:"space-y-2",children:l?s.jsx("div",{className:"text-center py-3",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"Loading payment methods..."})}):n.length===0?s.jsx("div",{className:"text-center py-3",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"No payment methods available"})}):n.map(j=>{const k=parseFloat(t)||0,S=p(j,k),_=k+S;return s.jsx("div",{onClick:()=>o(j.id),className:`p-3 border-2 rounded-lg cursor-pointer transition-all ${i===j.id?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-emerald-300 hover:bg-emerald-25"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`p-1.5 rounded ${i===j.id?"bg-emerald-500 text-white":"bg-gray-100 text-gray-600"}`,children:g(j.gateway_type)}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:j.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Min: ",Y(j.minimum_amount,m),j.maximum_amount&&` - Max: ${Y(j.maximum_amount,m)}`]})]})]}),s.jsx("div",{className:"text-right",children:k>0&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-xs text-gray-600",children:["Fee: ",Y(S,m)]}),s.jsxs("p",{className:"font-semibold text-emerald-600 text-sm",children:["Total: ",Y(_,m)]})]})})]})},j.id)})})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(Pd,{className:"w-4 h-4 mr-2 text-blue-600"}),"Important Information"]})}),s.jsx(U,{children:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("ul",{className:"space-y-1 text-xs text-blue-800",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Deposits are processed within 2-24 hours"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Please ensure you follow payment instructions carefully"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Upload clear screenshots for faster verification"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Contact support if you need assistance"]}),v&&s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Your investment will be activated after deposit approval"]})]})})})]}),s.jsx(F,{onClick:x,disabled:!t||!i,className:"w-full bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white font-bold py-3 rounded-xl",children:"Proceed to Payment"})]})]})})},Bs=f.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Bs.displayName="Textarea";const eT=()=>{var S;const[e,t]=f.useState(null),[r,n]=f.useState(""),[a,i]=f.useState(!1),[o,l]=f.useState(null),[c]=Ep(),d=Oe(),{user:u}=Ze(),{settings:m}=Te(),h=c.get("gateway"),b=c.get("amount"),w=c.get("planId"),v=c.get("planName"),y=!!(w&&v),g=ku({defaultValues:{amount:b||"",transactionId:"",paymentMethod:"",notes:""}});f.useEffect(()=>{h&&p()},[h]);const p=async()=>{try{const{data:_,error:C}=await A.from("payment_gateways").select("*").eq("id",h).single();if(C)throw C;l(_),g.setValue("paymentMethod",_.name)}catch(_){console.error("Error fetching gateway:",_),J.error("Failed to load payment gateway details")}},x=_=>{var E;const C=(E=_.target.files)==null?void 0:E[0];if(C){t(C);const $=URL.createObjectURL(C);n($),J.success("Screenshot uploaded successfully!")}},N=(_,C)=>{navigator.clipboard.writeText(_),J.success(`${C} copied to clipboard!`)},j=async _=>{if(!u){J.error("Please login to submit deposit");return}if(!e){J.error("Please upload payment screenshot");return}i(!0);try{let C="";try{C=await lx.uploadImage(e,"deposits")}catch(ae){console.error("ImageKit upload failed:",ae),J.error("Failed to upload screenshot. Please try again.");return}const E={user_id:u.id,amount:parseFloat(_.amount),payment_method:_.paymentMethod,transaction_id:_.transactionId,screenshot_url:C,notes:_.notes,status:"pending",...y&&{notes:`${_.notes?_.notes+" | ":""}Investment Plan: ${v} (ID: ${w})`}},{data:$,error:D}=await A.from("deposits").insert(E).select().single();if(D){console.error("Deposit creation error:",D),J.error("Failed to submit deposit. Please try again.");return}const L=y?`Investment deposit for ${v} plan`:`Deposit via ${_.paymentMethod}`,{error:W}=await A.from("transactions").insert({user_id:u.id,type:"deposit",amount:parseFloat(_.amount),status:"pending",reference_type:"deposit",reference_id:$.id,description:L});W&&console.error("Transaction creation error:",W),J.success("Deposit submitted successfully for verification!"),d("/deposit-pending")}catch(C){console.error("Submission error:",C),J.error("An unexpected error occurred")}finally{i(!1)}},k=((S=o==null?void 0:o.configuration)==null?void 0:S.bank_account_details)||{};return s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 p-2 pt-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/deposit",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-base font-bold text-white",children:"Deposit Details"})]}),s.jsx("div",{className:"p-1 bg-white/20 rounded-lg backdrop-blur-sm",children:s.jsx(Rt,{className:"w-4 h-4 text-white"})})]}),s.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-lg p-2 border border-white/30",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(_t,{className:"w-3 h-3 text-amber-200 mr-2"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-semibold text-xs",children:"Pending Verification"}),s.jsx("p",{className:"text-emerald-100 text-xs",children:"Complete payment and upload proof below"})]})]})})]}),s.jsxs("div",{className:"flex-1 p-2 space-y-3",children:[s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-lg",children:[s.jsx(K,{className:"pb-1",children:s.jsxs(Q,{className:"text-sm text-gray-800 flex items-center",children:[s.jsx(Pd,{className:"w-3 h-3 mr-1 text-blue-600"}),"Payment Instructions"]})}),s.jsx(U,{children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2",children:[s.jsx("h3",{className:"font-bold text-blue-800 mb-1 text-xs",children:"Step-by-Step Guide:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-0.5 text-xs text-blue-700",children:[s.jsx("li",{children:"Transfer money to the bank account details shown below"}),s.jsx("li",{children:"Take a screenshot of the payment confirmation"}),s.jsx("li",{children:"Fill in the payment details form"}),s.jsx("li",{children:"Upload the screenshot as proof"}),s.jsx("li",{children:"Submit for verification"})]})]})})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-lg",children:[s.jsx(K,{className:"pb-1",children:s.jsxs(Q,{className:"text-sm text-gray-800 flex items-center",children:[s.jsx(Rt,{className:"w-3 h-3 mr-1 text-green-600"}),(o==null?void 0:o.name)||"Payment Gateway"," - Bank Details"]})}),s.jsx(U,{children:s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-2",children:s.jsxs("div",{className:"space-y-1",children:[Object.entries(k).map(([_,C])=>s.jsxs("div",{className:"flex justify-between items-center p-1.5 bg-white rounded border border-green-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:_.split("_").map(E=>E.charAt(0).toUpperCase()+E.slice(1)).join(" ")}),s.jsx("p",{className:"font-bold text-gray-800 font-mono text-xs",children:C})]}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>N(C,_.split("_").join(" ")),className:"text-green-600 border-green-300 hover:bg-green-50 h-5 w-5 p-0",children:s.jsx(ti,{className:"w-2 h-2"})})]},_)),Object.keys(k).length===0&&s.jsx("div",{className:"text-center py-2 text-gray-500 text-xs",children:"No bank account details available for this gateway"})]})})})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-lg",children:[s.jsx(K,{className:"pb-1",children:s.jsxs(Q,{className:"text-sm text-gray-800 flex items-center",children:[s.jsx(Rt,{className:"w-3 h-3 mr-1 text-blue-600"}),"Payment Details"]})}),s.jsxs(U,{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:["Amount (",m.currencySymbol,") *"]}),s.jsx(H,{type:"number",placeholder:"Enter deposit amount",...g.register("amount",{required:!0}),className:"border-2 border-emerald-200 focus:border-emerald-500 rounded-lg h-8 text-xs",disabled:a})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Transaction ID"}),s.jsx(H,{placeholder:"Enter transaction ID",...g.register("transactionId"),className:"border-2 border-emerald-200 focus:border-emerald-500 rounded-lg h-8 text-xs",disabled:a})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Payment Method *"}),s.jsx(H,{value:(o==null?void 0:o.name)||"",className:"border-2 border-emerald-200 focus:border-emerald-500 rounded-lg bg-gray-50 h-8 text-xs",disabled:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"Additional Notes"}),s.jsx(Bs,{placeholder:"Any additional information...",...g.register("notes"),className:"border-2 border-emerald-200 focus:border-emerald-500 rounded-lg text-xs resize-none h-12",disabled:a})]})]})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-lg",children:[s.jsx(K,{className:"pb-1",children:s.jsxs(Q,{className:"text-sm text-gray-800 flex items-center",children:[s.jsx($w,{className:"w-3 h-3 mr-1 text-purple-600"}),"Upload Payment Screenshot *"]})}),s.jsx(U,{children:e?s.jsxs("div",{className:"border-2 border-emerald-300 rounded-lg p-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Cd,{className:"w-3 h-3 text-emerald-500 mr-1"}),s.jsx("span",{className:"font-semibold text-gray-700 text-xs",children:"Screenshot Uploaded"})]}),s.jsx(F,{type:"button",variant:"outline",onClick:()=>{var _;return(_=document.getElementById("file-upload"))==null?void 0:_.click()},className:"text-xs h-5",disabled:a,children:"Change"})]}),r&&s.jsx("div",{className:"rounded overflow-hidden",children:s.jsx("img",{src:r,alt:"Payment screenshot",className:"w-full h-20 object-cover rounded"})}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:e.name}),s.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden",id:"file-upload",disabled:a})]}):s.jsxs("div",{className:"border-2 border-dashed border-emerald-300 rounded-lg p-3 text-center",children:[s.jsx(Oo,{className:"w-6 h-6 text-emerald-500 mx-auto mb-1"}),s.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-0.5",children:"Upload Payment Proof"}),s.jsx("p",{className:"text-gray-500 mb-1 text-xs",children:"Upload screenshot of payment confirmation"}),s.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden",id:"file-upload",disabled:a}),s.jsx(F,{type:"button",onClick:()=>{var _;return(_=document.getElementById("file-upload"))==null?void 0:_.click()},className:"bg-emerald-500 hover:bg-emerald-600 text-white px-3 py-1 rounded-lg text-xs",disabled:a,children:"Choose File"})]})})]}),s.jsxs(F,{onClick:g.handleSubmit(j),disabled:a,className:"w-full bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white font-bold py-2 rounded-lg text-sm",children:[s.jsx(Cd,{className:"w-3 h-3 mr-1"}),a?"Submitting...":"Submit for Verification"]})]})]})})},tT=()=>{const{user:e}=Ze(),{settings:t}=Te(),[r,n]=f.useState("all"),[a,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState("");f.useEffect(()=>{e?u():l(!1)},[e]);const u=async()=>{if(!e){J.error("Please log in to view deposit history"),l(!1);return}try{const{data:p,error:x}=await A.from("deposits").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(x){console.error("Error fetching deposits:",x),J.error("Failed to load deposit history");return}i(p||[])}catch(p){console.error("Error in fetchDeposits:",p),J.error("Failed to load deposit history")}finally{l(!1)}},m=a.filter(p=>{var j;const x=r==="all"||p.status===r,N=!c||p.id.toLowerCase().includes(c.toLowerCase())||p.payment_method.toLowerCase().includes(c.toLowerCase())||((j=p.transaction_id)==null?void 0:j.toLowerCase().includes(c.toLowerCase()));return x&&N}),h=a.filter(p=>p.status==="approved").reduce((p,x)=>p+Number(x.amount),0),b=a.filter(p=>{const x=new Date(p.created_at),N=new Date;return p.status==="approved"&&x.getMonth()===N.getMonth()&&x.getFullYear()===N.getFullYear()}).reduce((p,x)=>p+Number(x.amount),0),w=[{id:"all",label:"All"},{id:"approved",label:"Completed"},{id:"pending",label:"Pending"},{id:"rejected",label:"Failed"}],v=p=>p==="approved"?s.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium",children:"Completed"}):p==="pending"?s.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:"Pending"}):p==="rejected"?s.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Failed"}):null,y=p=>{const x=new Date(p),j=Math.floor((new Date().getTime()-x.getTime())/(1e3*60*60));return j<1?"Just now":j<24?`${j} hour${j>1?"s":""} ago`:j<48?"1 day ago":`${Math.floor(j/24)} days ago`},g=p=>{var x;if(p.bank_details)try{const N=JSON.parse(p.bank_details);return`From ${N.bank_name||"Bank"} ****${((x=N.account_number)==null?void 0:x.slice(-4))||"****"}`}catch{return`From ${p.payment_method}`}return`From ${p.payment_method}`};return e?o?s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 p-3 pt-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-1 bg-white/20 rounded-lg backdrop-blur-sm",children:s.jsx(Bi,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white",children:"Deposit History"})]})]})}),s.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 border border-white/30",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-100 text-xs",children:"Total Deposited"}),s.jsx("p",{className:"text-white text-lg font-bold",children:Y(h,t)})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-emerald-100 text-xs flex items-center",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),"This Month"]}),s.jsx("p",{className:"text-green-200 text-sm font-semibold",children:Y(b,t)})]})]})})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-3",children:[s.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-2 shadow-lg border border-emerald-100",children:s.jsx("div",{className:"flex space-x-1",children:w.map(p=>s.jsx(F,{variant:r===p.id?"default":"ghost",className:`flex-1 rounded-lg text-xs font-medium transition-all h-8 ${r===p.id?"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-md":"text-gray-600 hover:bg-emerald-50"}`,onClick:()=>n(p.id),children:p.label},p.id))})}),s.jsxs("div",{className:"relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{placeholder:"Search deposits...",value:c,onChange:p=>d(p.target.value),className:"pl-10 bg-white/90 backdrop-blur-sm border-emerald-200 focus:border-emerald-400 rounded-xl h-10"})]}),s.jsx("div",{className:"space-y-2",children:m.length===0?s.jsx("div",{className:"text-center py-6 text-gray-500",children:s.jsx("p",{className:"text-sm",children:"No deposits found"})}):m.map(p=>s.jsx(M,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-md rounded-xl overflow-hidden hover:shadow-lg transition-all hover:scale-[1.01]",children:s.jsx(U,{className:"p-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg border border-emerald-100",children:s.jsx(pa,{className:"w-4 h-4 text-emerald-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:p.payment_method}),s.jsxs("span",{className:"font-bold text-sm text-emerald-600",children:["+",Y(Number(p.amount),t)]})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:g(p)}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-2",children:v(p.status)}),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[s.jsx(_t,{className:"w-3 h-3 mr-1"}),y(p.created_at)]})]})]})]})})},p.id))})]})]})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center p-6",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to view deposit history"}),s.jsx(me,{to:"/login",children:s.jsx(F,{children:"Go to Login"})})]})})})},rT=()=>s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 p-3 pt-6 pb-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/5 rounded-full translate-y-8 -translate-x-8"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white",children:"Deposit Status"})]})}),s.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 border border-white/30 text-center",children:[s.jsx(_t,{className:"w-10 h-10 text-amber-200 mx-auto mb-2"}),s.jsx("h2",{className:"text-white text-lg font-bold mb-1",children:"Deposit Pending"}),s.jsx("p",{className:"text-emerald-100 text-xs",children:"Your deposit is being verified by our team"})]})]})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-4 -mt-2",children:[s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(Vt,{className:"w-4 h-4 mr-2 text-green-600"}),"Submission Successful"]})}),s.jsx(U,{className:"space-y-3",children:s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:[s.jsx("p",{className:"text-green-800 font-semibold mb-2 text-sm",children:"What happens next?"}),s.jsxs("ul",{className:"space-y-1.5 text-xs text-green-700",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Your payment details and screenshot have been submitted"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Our team will verify your payment within 2-24 hours"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"You'll receive a notification once your deposit is confirmed"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Funds will be added to your account balance"]})]})]})})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(Ui,{className:"w-4 h-4 mr-2 text-blue-600"}),"Important Information"]})}),s.jsx(U,{className:"space-y-3",children:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3",children:s.jsxs("div",{className:"space-y-2 text-xs text-blue-800",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:"Processing Time:"}),s.jsx("p",{children:"Deposits are typically processed within 2-24 hours during business hours."})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:"Track Your Deposit:"}),s.jsx("p",{children:"You can check the status of your deposit in the Deposit History section."})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:"Need Help?"}),s.jsx("p",{children:"Contact our support team if you have any questions about your deposit."})]})]})})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(me,{to:"/",className:"block",children:s.jsxs(F,{className:"w-full bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white font-bold py-3 rounded-xl text-sm",children:[s.jsx(Lp,{className:"w-4 h-4 mr-2"}),"Go to Home"]})}),s.jsx(me,{to:"/deposit-history",className:"block",children:s.jsxs(F,{variant:"outline",className:"w-full border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 font-bold py-3 rounded-xl text-sm",children:[s.jsx(Ui,{className:"w-4 h-4 mr-2"}),"View Deposit History"]})})]})]})]})});function sT(e,t=[]){let r=[];function n(i,o){const l=f.createContext(o),c=r.length;r=[...r,o];function d(m){const{scope:h,children:b,...w}=m,v=(h==null?void 0:h[e][c])||l,y=f.useMemo(()=>w,Object.values(w));return s.jsx(v.Provider,{value:y,children:b})}function u(m,h){const b=(h==null?void 0:h[e][c])||l,w=f.useContext(b);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,nT(a,...t)]}function nT(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function i1(e){const t=e+"CollectionProvider",[r,n]=sT(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:w,children:v}=b,y=He.useRef(null),g=He.useRef(new Map).current;return s.jsx(a,{scope:w,itemMap:g,collectionRef:y,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=He.forwardRef((b,w)=>{const{scope:v,children:y}=b,g=i(l,v),p=Re(w,g.collectionRef);return s.jsx(Rn,{ref:p,children:y})});c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",m=He.forwardRef((b,w)=>{const{scope:v,children:y,...g}=b,p=He.useRef(null),x=Re(w,p),N=i(d,v);return He.useEffect(()=>(N.itemMap.set(p,{ref:p,...g}),()=>void N.itemMap.delete(p))),s.jsx(Rn,{[u]:"",ref:x,children:y})});m.displayName=d;function h(b){const w=i(e+"CollectionConsumer",b);return He.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const g=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(w.itemMap.values()).sort((N,j)=>g.indexOf(N.ref.current)-g.indexOf(j.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},h,n]}function aT(e,t=[]){let r=[];function n(i,o){const l=f.createContext(o),c=r.length;r=[...r,o];function d(m){const{scope:h,children:b,...w}=m,v=(h==null?void 0:h[e][c])||l,y=f.useMemo(()=>w,Object.values(w));return s.jsx(v.Provider,{value:y,children:b})}function u(m,h){const b=(h==null?void 0:h[e][c])||l,w=f.useContext(b);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,iT(a,...t)]}function iT(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var oT=f.createContext(void 0);function Jl(e){const t=f.useContext(oT);return e||t||"ltr"}var Dh="rovingFocusGroup.onEntryFocus",lT={bubbles:!1,cancelable:!0},Cu="RovingFocusGroup",[gf,o1,cT]=i1(Cu),[dT,Eu]=aT(Cu,[cT]),[uT,hT]=dT(Cu),l1=f.forwardRef((e,t)=>s.jsx(gf.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(gf.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(mT,{...e,ref:t})})}));l1.displayName=Cu;var mT=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,h=f.useRef(null),b=Re(t,h),w=Jl(i),[v=null,y]=Ln({prop:o,defaultProp:l,onChange:c}),[g,p]=f.useState(!1),x=wt(d),N=o1(r),j=f.useRef(!1),[k,S]=f.useState(0);return f.useEffect(()=>{const _=h.current;if(_)return _.addEventListener(Dh,x),()=>_.removeEventListener(Dh,x)},[x]),s.jsx(uT,{scope:r,orientation:n,dir:w,loop:a,currentTabStopId:v,onItemFocus:f.useCallback(_=>y(_),[y]),onItemShiftTab:f.useCallback(()=>p(!0),[]),onFocusableItemAdd:f.useCallback(()=>S(_=>_+1),[]),onFocusableItemRemove:f.useCallback(()=>S(_=>_-1),[]),children:s.jsx(xe.div,{tabIndex:g||k===0?-1:0,"data-orientation":n,...m,ref:b,style:{outline:"none",...e.style},onMouseDown:pe(e.onMouseDown,()=>{j.current=!0}),onFocus:pe(e.onFocus,_=>{const C=!j.current;if(_.target===_.currentTarget&&C&&!g){const E=new CustomEvent(Dh,lT);if(_.currentTarget.dispatchEvent(E),!E.defaultPrevented){const $=N().filter(ee=>ee.focusable),D=$.find(ee=>ee.active),L=$.find(ee=>ee.id===v),ae=[D,L,...$].filter(Boolean).map(ee=>ee.ref.current);u1(ae,u)}}j.current=!1}),onBlur:pe(e.onBlur,()=>p(!1))})})}),c1="RovingFocusGroupItem",d1=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,...o}=e,l=Ds(),c=i||l,d=hT(c1,r),u=d.currentTabStopId===c,m=o1(r),{onFocusableItemAdd:h,onFocusableItemRemove:b}=d;return f.useEffect(()=>{if(n)return h(),()=>b()},[n,h,b]),s.jsx(gf.ItemSlot,{scope:r,id:c,focusable:n,active:a,children:s.jsx(xe.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:pe(e.onMouseDown,w=>{n?d.onItemFocus(c):w.preventDefault()}),onFocus:pe(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:pe(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=xT(w,d.orientation,d.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let g=m().filter(p=>p.focusable).map(p=>p.ref.current);if(v==="last")g.reverse();else if(v==="prev"||v==="next"){v==="prev"&&g.reverse();const p=g.indexOf(w.currentTarget);g=d.loop?gT(g,p+1):g.slice(p+1)}setTimeout(()=>u1(g))}})})})});d1.displayName=c1;var fT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pT(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function xT(e,t,r){const n=pT(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return fT[n]}function u1(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function gT(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var h1=l1,m1=d1;function cx(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var dx="Radio",[vT,f1]=ps(dx),[yT,bT]=vT(dx),p1=f.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:d,...u}=e,[m,h]=f.useState(null),b=Re(t,y=>h(y)),w=f.useRef(!1),v=m?d||!!m.closest("form"):!0;return s.jsxs(yT,{scope:r,checked:a,disabled:o,children:[s.jsx(xe.button,{type:"button",role:"radio","aria-checked":a,"data-state":v1(a),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:b,onClick:pe(e.onClick,y=>{a||c==null||c(),v&&(w.current=y.isPropagationStopped(),w.current||y.stopPropagation())})}),v&&s.jsx(wT,{control:m,bubbles:!w.current,name:n,value:l,checked:a,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});p1.displayName=dx;var x1="RadioIndicator",g1=f.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,i=bT(x1,r);return s.jsx(Or,{present:n||i.checked,children:s.jsx(xe.span,{"data-state":v1(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});g1.displayName=x1;var wT=e=>{const{control:t,checked:r,bubbles:n=!0,...a}=e,i=f.useRef(null),o=cx(r),l=Kp(t);return f.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&m){const h=new Event("click",{bubbles:n});m.call(c,r),c.dispatchEvent(h)}},[o,r,n]),s.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function v1(e){return e?"checked":"unchecked"}var jT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ux="RadioGroup",[NT,YO]=ps(ux,[Eu,f1]),y1=Eu(),b1=f1(),[_T,ST]=NT(ux),w1=f.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...h}=e,b=y1(r),w=Jl(d),[v,y]=Ln({prop:i,defaultProp:a,onChange:m});return s.jsx(_T,{scope:r,name:n,required:o,disabled:l,value:v,onValueChange:y,children:s.jsx(h1,{asChild:!0,...b,orientation:c,dir:w,loop:u,children:s.jsx(xe.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:w,...h,ref:t})})})});w1.displayName=ux;var j1="RadioGroupItem",N1=f.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,i=ST(j1,r),o=i.disabled||n,l=y1(r),c=b1(r),d=f.useRef(null),u=Re(t,d),m=i.value===a.value,h=f.useRef(!1);return f.useEffect(()=>{const b=v=>{jT.includes(v.key)&&(h.current=!0)},w=()=>h.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",w)}},[]),s.jsx(m1,{asChild:!0,...l,focusable:!o,active:m,children:s.jsx(p1,{disabled:o,required:i.required,checked:m,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:pe(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:pe(a.onFocus,()=>{var b;h.current&&((b=d.current)==null||b.click())})})})});N1.displayName=j1;var kT="RadioGroupIndicator",_1=f.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=b1(r);return s.jsx(g1,{...a,...n,ref:t})});_1.displayName=kT;var S1=w1,k1=N1,CT=_1;const C1=f.forwardRef(({className:e,...t},r)=>s.jsx(S1,{className:ve("grid gap-2",e),...t,ref:r}));C1.displayName=S1.displayName;const E1=f.forwardRef(({className:e,...t},r)=>s.jsx(k1,{ref:r,className:ve("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(CT,{className:"flex items-center justify-center",children:s.jsx(SP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));E1.displayName=k1.displayName;const ET=()=>{const e=Oe(),{user:t,refreshUser:r}=Ze(),{settings:n}=Te(),[a,i]=f.useState(""),[o,l]=f.useState(""),[c,d]=f.useState([]),[u,m]=f.useState(!0),[h,b]=f.useState(!1),w=ku({defaultValues:{accountHolderName:"",accountNumber:"",bankName:"",iban:""}});f.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:p,error:x}=await A.from("payment_gateways").select("*").eq("type","withdraw").eq("is_active",!0).order("created_at",{ascending:!1});if(x)console.error("Error fetching withdrawal gateways:",x),se.error("Failed to load withdrawal methods");else{const N=(p==null?void 0:p.map(j=>({id:j.id,name:j.name,minimum_amount:j.minimum_amount||0,maximum_amount:j.maximum_amount||0,fees_percentage:j.fees_percentage||0,fees_fixed:j.fees_fixed||0,configuration:j.configuration||{}})))||[];d(N)}}catch(p){console.error("Error in fetchWithdrawalMethods:",p),se.error("Failed to load withdrawal information")}finally{m(!1)}},y=(p,x)=>x*p.fees_percentage/100+p.fees_fixed,g=async()=>{if(!a||parseFloat(a)<=0){se.error("Please enter a valid withdrawal amount.");return}if(!o){se.error("Please select a withdrawal method.");return}const p=parseFloat(a),x=c.find(_=>_.id===o);if(!x){se.error("Invalid withdrawal method selected");return}if(p<x.minimum_amount){se.error(`Minimum withdrawal amount is ${Y(x.minimum_amount,n)}`);return}if(x.maximum_amount&&p>x.maximum_amount){se.error(`Maximum withdrawal amount is ${Y(x.maximum_amount,n)}`);return}const N=y(x,p),j=p+N;if(!(t!=null&&t.available_balance)||t.available_balance<j){se.error(`Insufficient balance. You need ${Y(j,n)} (including ${Y(N,n)} fees)`);return}const k=w.getValues();if(!k.accountHolderName||!k.accountNumber||!k.bankName){se.error("Please fill in all required account details.");return}b(!0);const S=se.loading("Processing withdrawal request...");try{const _={instructions:"Transfer money to the bank account details shown below",bank_account_details:{iban:k.iban||"",bank_name:k.bankName,account_number:k.accountNumber,account_holder_name:k.accountHolderName}},C=t.available_balance-j,{error:E}=await A.from("users").update({available_balance:C,total_withdrawals:(t.total_withdrawals||0)+p,updated_at:new Date().toISOString()}).eq("id",t==null?void 0:t.id);if(E){console.error("Error updating balance:",E),se.dismiss(S),se.error("Failed to update balance. Please try again.");return}const{data:$,error:D}=await A.from("withdrawals").insert({user_id:t==null?void 0:t.id,gateway_id:o,amount:p,withdrawal_method:x.name,status:"pending",account_details:_}).select().single();if(D){console.error("Error creating withdrawal:",D),await A.from("users").update({available_balance:t.available_balance,total_withdrawals:t.total_withdrawals||0,updated_at:new Date().toISOString()}).eq("id",t==null?void 0:t.id),se.dismiss(S),se.error("Failed to create withdrawal request. Please try again.");return}const{error:L}=await A.from("transactions").insert({user_id:t==null?void 0:t.id,type:"withdrawal",amount:-p,description:`Withdrawal request to ${k.bankName} - ${k.accountNumber}`,status:"pending",reference_type:"withdrawal",reference_id:$.id});L&&(console.error("Error creating transaction history:",L),console.warn("Transaction history creation failed, but withdrawal request was successful")),await r(),se.dismiss(S),se.success(`Withdrawal request of ${Y(p,n)} submitted successfully! Your request is being processed.`),e("/withdraw-pending")}catch(_){console.error("Error in handleWithdraw:",_),se.dismiss(S),se.error("An unexpected error occurred. Please try again later.")}finally{b(!1)}};return u?s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 p-3 pt-6 pb-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/5 rounded-full translate-y-8 -translate-x-8"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-1 bg-white/20 rounded-lg backdrop-blur-sm",children:s.jsx(Bi,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white",children:"Withdraw Money"})]})]})}),s.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 border border-white/30 shadow-xl",children:[s.jsx("p",{className:"text-emerald-100 text-xs",children:"Available Balance"}),s.jsx("p",{className:"text-white text-lg font-bold",children:Y((t==null?void 0:t.available_balance)||0,n)})]})]})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-3 relative z-10",children:[s.jsxs(M,{className:"border-0 shadow-lg bg-white/90 backdrop-blur-sm rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(E0,{className:"w-4 h-4 mr-2 text-red-600"}),"Enter Amount"]})}),s.jsxs(U,{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(H,{type:"number",placeholder:"0.00",value:a,onChange:p=>i(p.target.value),className:"text-xl font-bold text-center h-12 border-2 border-emerald-200 focus:border-emerald-500 rounded-lg"}),s.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-lg font-semibold",children:(n==null?void 0:n.currencySymbol)||"Rs."})]}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[50,100,500,1e3].map(p=>s.jsx(F,{variant:"outline",className:"h-9 border border-emerald-200 hover:bg-emerald-50 hover:border-emerald-400 rounded-lg text-xs font-medium text-emerald-700",onClick:()=>i(p.toString()),children:Y(p,n)},p))})]})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white/90 backdrop-blur-sm rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(Qo,{className:"w-4 h-4 mr-2 text-blue-600"}),"Select Bank"]})}),s.jsx(U,{className:"space-y-2",children:c.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No banks available for withdrawal"}):s.jsx(C1,{value:o,onValueChange:l,children:c.map(p=>{const x=parseFloat(a)||0,N=y(p,x),j=x+N;return s.jsx("div",{className:`p-3 rounded-lg border-2 cursor-pointer transition-all ${o===p.id?"border-emerald-500 bg-emerald-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>l(p.id),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(E1,{value:p.id,id:p.id}),s.jsx("div",{className:`p-1.5 rounded-lg ${o===p.id?"bg-emerald-500 text-white":"bg-gray-100 text-gray-600"}`,children:s.jsx(Qo,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:p.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Min: ",Y(p.minimum_amount||0,n),p.maximum_amount&&p.maximum_amount>0&&` - Max: ${Y(p.maximum_amount,n)}`]})]})]}),s.jsx("div",{className:"text-right",children:x>0&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-xs text-gray-600",children:["Fee: ",Y(N,n)]}),s.jsxs("p",{className:"font-medium text-red-600 text-sm",children:["Total: ",Y(j,n)]})]})})]})},p.id)})})})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white/90 backdrop-blur-sm rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(jt,{className:"w-4 h-4 mr-2 text-green-600"}),"Account Details"]})}),s.jsx(U,{children:o?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[s.jsx(jt,{className:"w-3 h-3 inline mr-1"}),"Account Holder Name *"]}),s.jsx(H,{placeholder:"Enter full name as per bank account",...w.register("accountHolderName"),className:"border border-emerald-200 focus:border-emerald-500 rounded-lg h-9 text-sm",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[s.jsx(Op,{className:"w-3 h-3 inline mr-1"}),"Account Number *"]}),s.jsx(H,{placeholder:"Enter bank account number",...w.register("accountNumber"),className:"border border-emerald-200 focus:border-emerald-500 rounded-lg h-9 text-sm",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[s.jsx(Qo,{className:"w-3 h-3 inline mr-1"}),"Bank Name *"]}),s.jsx(H,{placeholder:"Enter bank name",...w.register("bankName"),className:"border border-emerald-200 focus:border-emerald-500 rounded-lg h-9 text-sm",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[s.jsx(Rt,{className:"w-3 h-3 inline mr-1"}),"IBAN (Optional)"]}),s.jsx(H,{placeholder:"Enter IBAN if available",...w.register("iban"),className:"border border-emerald-200 focus:border-emerald-500 rounded-lg h-9 text-sm"})]})]}):s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"Please select a bank above to continue"})})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3",children:s.jsxs("p",{className:"text-xs text-blue-800",children:[s.jsx("strong",{children:"Security Notice:"})," Your account details are used only for this withdrawal request and are not saved to your profile."]})}),s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:s.jsxs("p",{className:"text-xs text-amber-800",children:[s.jsx("strong",{children:"Note:"})," Processing fees apply depending on the withdrawal method selected. Minimum withdrawal amount varies by method."]})}),s.jsxs(F,{onClick:g,className:"w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white font-bold py-3 rounded-xl text-base",disabled:!a||!o||h,children:[s.jsx(E0,{className:"w-4 h-4 mr-2"}),h?"Processing...":`Withdraw ${Y(parseFloat(a)||0,n)}`]})]})]})})},PT=()=>{const{user:e}=Ze(),{settings:t}=Te(),[r,n]=f.useState("all"),[a,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState("");f.useEffect(()=>{e?u():l(!1)},[e]);const u=async()=>{if(!e){J.error("Please log in to view withdrawal history"),l(!1);return}try{const{data:p,error:x}=await A.from("withdrawals").select(`
          *,
          payment_gateways (
            name,
            gateway_type
          )
        `).eq("user_id",e.id).order("created_at",{ascending:!1});if(x){console.error("Error fetching withdrawals:",x),J.error("Failed to load withdrawal history");return}i(p||[])}catch(p){console.error("Error in fetchWithdrawals:",p),J.error("Failed to load withdrawal history")}finally{l(!1)}},m=a.filter(p=>{var j;const x=r==="all"||p.status===r,N=!c||p.id.toLowerCase().includes(c.toLowerCase())||p.withdrawal_method.toLowerCase().includes(c.toLowerCase())||((j=p.transaction_id)==null?void 0:j.toLowerCase().includes(c.toLowerCase()));return x&&N}),h=a.filter(p=>p.status==="completed").reduce((p,x)=>p+Number(x.amount),0),b=a.filter(p=>{const x=new Date(p.created_at),N=new Date;return p.status==="completed"&&x.getMonth()===N.getMonth()&&x.getFullYear()===N.getFullYear()}).reduce((p,x)=>p+Number(x.amount),0),w=[{id:"all",label:"All"},{id:"completed",label:"Completed"},{id:"pending",label:"Pending"},{id:"failed",label:"Failed"}],v=p=>p==="completed"?s.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium",children:"Completed"}):p==="pending"?s.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:"Pending"}):p==="failed"?s.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Failed"}):null,y=p=>{const x=new Date(p),j=Math.floor((new Date().getTime()-x.getTime())/(1e3*60*60));return j<1?"Just now":j<24?`${j} hour${j>1?"s":""} ago`:j<48?"1 day ago":`${Math.floor(j/24)} days ago`},g=p=>{var x,N;if((x=p.account_details)!=null&&x.bank_account_details){const j=p.account_details.bank_account_details;return`To ${j.bank_name} ****${(N=j.account_number)==null?void 0:N.slice(-4)}`}return`To ${p.withdrawal_method}`};return e?o?s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 p-3 pt-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-1 bg-white/20 rounded-lg backdrop-blur-sm",children:s.jsx(Bi,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white",children:"Withdraw History"})]})]})}),s.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 border border-white/30",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-100 text-xs",children:"Total Withdrawn"}),s.jsx("p",{className:"text-white text-lg font-bold",children:Y(h,t)})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-emerald-100 text-xs flex items-center",children:[s.jsx(Sl,{className:"w-3 h-3 mr-1"}),"This Month"]}),s.jsx("p",{className:"text-emerald-200 text-sm font-semibold",children:Y(b,t)})]})]})})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-3",children:[s.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-2 shadow-lg border border-emerald-100",children:s.jsx("div",{className:"flex space-x-1",children:w.map(p=>s.jsx(F,{variant:r===p.id?"default":"ghost",className:`flex-1 rounded-lg text-xs font-medium transition-all h-8 ${r===p.id?"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-md":"text-gray-600 hover:bg-emerald-50"}`,onClick:()=>n(p.id),children:p.label},p.id))})}),s.jsxs("div",{className:"relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{placeholder:"Search withdrawals...",value:c,onChange:p=>d(p.target.value),className:"pl-10 bg-white/90 backdrop-blur-sm border-emerald-200 focus:border-emerald-400 rounded-xl h-10"})]}),s.jsx("div",{className:"space-y-2",children:m.length===0?s.jsx("div",{className:"text-center py-6 text-gray-500",children:s.jsx("p",{className:"text-sm",children:"No withdrawals found"})}):m.map(p=>s.jsx(M,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-md rounded-xl overflow-hidden hover:shadow-lg transition-all hover:scale-[1.01]",children:s.jsx(U,{className:"p-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg border border-emerald-100",children:s.jsx(Mi,{className:"w-4 h-4 text-emerald-500"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:p.withdrawal_method}),s.jsxs("span",{className:"font-bold text-sm text-emerald-600",children:["-",Y(Number(p.amount),t)]})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:g(p)}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-2",children:v(p.status)}),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[s.jsx(_t,{className:"w-3 h-3 mr-1"}),y(p.created_at)]})]})]})]})})},p.id))})]})]})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center p-6",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to view withdrawal history"}),s.jsx(me,{to:"/login",children:s.jsx(F,{children:"Go to Login"})})]})})})},AT=()=>{var d;Oe();const{user:e}=Ze(),[t]=Ep(),[r,n]=f.useState(null),[a,i]=f.useState(!0),o=t.get("withdrawalId");f.useEffect(()=>{o?l():c()},[o,e]);const l=async()=>{if(!(!e||!o))try{const{data:u,error:m}=await A.from("withdrawals").select(`
          *,
          payment_gateways (
            name,
            gateway_type
          )
        `).eq("id",o).eq("user_id",e.id).single();if(m){console.error("Error fetching withdrawal details:",m);return}n(u)}catch(u){console.error("Error in fetchWithdrawalDetails:",u)}finally{i(!1)}},c=async()=>{if(e)try{const{data:u,error:m}=await A.from("withdrawals").select(`
          *,
          payment_gateways (
            name,
            gateway_type
          )
        `).eq("user_id",e.id).eq("status","pending").order("created_at",{ascending:!1}).limit(1).single();if(m){console.error("Error fetching latest withdrawal:",m);return}n(u)}catch(u){console.error("Error in fetchLatestWithdrawal:",u)}finally{i(!1)}};return a?s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):r?s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 p-3 pt-6 pb-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/5 rounded-full translate-y-8 -translate-x-8"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-1 bg-white/20 rounded-lg backdrop-blur-sm",children:s.jsx(Bi,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white",children:"Withdrawal Status"})]})]})}),s.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 border border-white/30 text-center",children:[s.jsx(_t,{className:"w-10 h-10 text-amber-200 mx-auto mb-2"}),s.jsx("h2",{className:"text-white text-lg font-bold mb-1",children:"Withdrawal Pending"}),s.jsx("p",{className:"text-emerald-100 text-xs",children:"Your withdrawal is being processed by our team"})]})]})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-4 -mt-2",children:[s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(Vt,{className:"w-4 h-4 mr-2 text-green-600"}),"Withdrawal Submitted"]})}),s.jsxs(U,{className:"space-y-3",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:[s.jsx("p",{className:"text-green-800 font-semibold mb-2 text-sm",children:"What happens next?"}),s.jsxs("ul",{className:"space-y-1.5 text-xs text-green-700",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Your withdrawal request has been submitted successfully"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"Our team will process your request within 1-3 business days"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"You'll receive a notification once funds are transferred"]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-1.5 mr-2 flex-shrink-0"}),"The amount will be credited to your selected account"]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3",children:[s.jsx("h3",{className:"font-bold text-blue-800 mb-2 text-sm",children:"Transaction Details"}),s.jsxs("div",{className:"space-y-1.5 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-blue-700",children:"Amount:"}),s.jsxs("span",{className:"font-bold text-blue-800",children:["Rs. ",r.amount.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-blue-700",children:"Method:"}),s.jsx("span",{className:"font-bold text-blue-800",children:((d=r.payment_gateways)==null?void 0:d.name)||r.withdrawal_method})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-blue-700",children:"Processing Time:"}),s.jsx("span",{className:"font-bold text-blue-800",children:"1-3 business days"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-blue-700",children:"Transaction ID:"}),s.jsxs("span",{className:"font-bold text-blue-800",children:["#",r.transaction_id||r.id.slice(0,8).toUpperCase()]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-blue-700",children:"Date Submitted:"}),s.jsx("span",{className:"font-bold text-blue-800",children:new Date(r.created_at).toLocaleDateString()})]})]})]})]})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(Ui,{className:"w-4 h-4 mr-2 text-blue-600"}),"Important Information"]})}),s.jsx(U,{className:"space-y-3",children:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-3",children:s.jsxs("div",{className:"space-y-2 text-xs text-blue-800",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:"Processing Time:"}),s.jsx("p",{children:"Withdrawals are typically processed within 1-3 business days during business hours."})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:"Track Your Withdrawal:"}),s.jsx("p",{children:"You can check the status of your withdrawal in the Withdrawal History section."})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:"Need Help?"}),s.jsx("p",{children:"Contact our support team if you have any questions about your withdrawal."})]})]})})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(me,{to:"/",className:"block",children:s.jsxs(F,{className:"w-full bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white font-bold py-3 rounded-xl text-sm",children:[s.jsx(Lp,{className:"w-4 h-4 mr-2"}),"Go to Home"]})}),s.jsx(me,{to:"/withdraw-history",className:"block",children:s.jsxs(F,{variant:"outline",className:"w-full border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 font-bold py-3 rounded-xl text-sm",children:[s.jsx(Ui,{className:"w-4 h-4 mr-2"}),"View Withdrawal History"]})})]})]})]})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600",children:"No pending withdrawal found"}),s.jsx(me,{to:"/withdraw",className:"text-emerald-600 hover:underline mt-2 block",children:"Make a new withdrawal"})]})})})},RT=()=>{const{user:e}=Ze(),{settings:t}=Te(),[r,n]=f.useState("all"),[a,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState("");f.useEffect(()=>{e?u():l(!1)},[e]);const u=async()=>{if(!e){console.log("No user found, cannot fetch transactions"),l(!1);return}console.log("Fetching transactions for user:",e.id);try{const{data:j,error:k}=await A.from("transactions").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(console.log("Transactions query result:",{data:j,error:k}),k){console.error("Error fetching transactions:",k),J.error("Failed to load transactions: "+k.message);return}console.log("Fetched transactions:",j),i(j||[])}catch(j){console.error("Error in fetchTransactions:",j),J.error("Failed to load transactions")}finally{l(!1)}},m=a.filter(j=>{var _;const k=r==="all"||r==="deposit"&&(j.type==="deposit"||j.type==="signup_bonus")||r==="withdraw"&&(j.type==="withdrawal"||j.type==="investment")||r==="profit"&&(j.type==="profit"||j.type==="daily_profit"||j.type==="referral_commission"||j.type==="commission"||j.type==="referral_bonus"||j.type==="game"),S=!c||j.id.toLowerCase().includes(c.toLowerCase())||((_=j.description)==null?void 0:_.toLowerCase().includes(c.toLowerCase()))||j.type.toLowerCase().includes(c.toLowerCase());return k&&S}),h=(e==null?void 0:e.available_balance)||0,b=a.filter(j=>{const k=new Date(j.created_at),S=new Date;return k.getMonth()===S.getMonth()&&k.getFullYear()===S.getFullYear()}).reduce((j,k)=>k.type==="deposit"||k.type==="commission"||k.type==="referral_bonus"||k.type==="referral_commission"||k.type==="daily_profit"||k.type==="profit"||k.type==="signup_bonus"?j+Number(k.amount):k.type==="withdrawal"||k.type==="investment"?j-Number(k.amount):k.type==="game"?j+Number(k.amount):j,0),w=[{id:"all",label:"All"},{id:"deposit",label:"Deposit"},{id:"withdraw",label:"Withdraw"},{id:"profit",label:"Profit"}],v=j=>j==="completed"?s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Completed"}):j==="pending"?s.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Pending"}):j==="failed"?s.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Failed"}):null,y=j=>j.type==="deposit"||j.type==="referral_commission"||j.type==="commission"||j.type==="referral_bonus"||j.type==="daily_profit"||j.type==="profit"||j.type==="signup_bonus"?s.jsx(pa,{className:"w-5 h-5 text-green-600"}):j.type==="withdrawal"||j.type==="investment"?s.jsx(Mi,{className:"w-5 h-5 text-red-500"}):j.type==="game"?Number(j.amount)>=0?s.jsx(pa,{className:"w-5 h-5 text-green-600"}):s.jsx(Mi,{className:"w-5 h-5 text-red-500"}):s.jsx(pa,{className:"w-5 h-5 text-green-600"}),g=j=>{switch(j.type){case"deposit":return"Deposit";case"withdrawal":return"Withdrawal";case"referral_commission":return"Referral Commission";case"commission":return"Daily Profit";case"daily_profit":return"Daily Profit";case"profit":return"Investment Profit";case"referral_bonus":return"Referral Bonus";case"signup_bonus":return"Signup Bonus";case"investment":return"Investment";case"game":return Number(j.amount)>=0?"Game Win":"Game Play";default:return j.type}},p=j=>{const k=Number(j.amount);return j.type==="deposit"||j.type==="referral_commission"||j.type==="commission"||j.type==="referral_bonus"||j.type==="daily_profit"||j.type==="profit"||j.type==="signup_bonus"?`+${Y(k,t)}`:j.type==="withdrawal"||j.type==="investment"?`-${Y(Math.abs(k),t)}`:j.type==="game"?k>=0?`+${Y(k,t)}`:`-${Y(Math.abs(k),t)}`:Y(k,t)},x=j=>j.type==="deposit"||j.type==="referral_commission"||j.type==="commission"||j.type==="referral_bonus"||j.type==="daily_profit"||j.type==="profit"||j.type==="signup_bonus"?"text-green-600":j.type==="withdrawal"||j.type==="investment"?"text-red-500":j.type==="game"?Number(j.amount)>=0?"text-green-600":"text-red-500":"text-green-600",N=j=>{const k=new Date(j),_=Math.floor((new Date().getTime()-k.getTime())/(1e3*60*60));return _<1?"Just now":_<24?`${_} hour${_>1?"s":""} ago`:_<48?"1 day ago":`${Math.floor(_/24)} days ago`};return e?o?s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-slate-50 via-emerald-50/30 to-green-50/40",children:[s.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 via-emerald-500 to-green-600 p-3 pt-6 pb-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/15 to-transparent rounded-full -translate-y-12 translate-x-12"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 bg-gradient-to-tr from-white/10 to-transparent rounded-full translate-y-10 -translate-x-10"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 w-32 h-32 bg-gradient-to-r from-white/5 to-transparent rounded-full transform -translate-x-1/2 -translate-y-1/2"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all duration-200",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-1 bg-white/20 rounded-lg backdrop-blur-sm border border-white/30",children:s.jsx(Bi,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white drop-shadow-sm",children:"Transactions"})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(F,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/20 p-1 rounded-full backdrop-blur-sm",children:s.jsx(Pn,{className:"w-4 h-4"})}),s.jsx(F,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/20 p-1 rounded-full backdrop-blur-sm",children:s.jsx(mu,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"bg-white/20 backdrop-blur-lg rounded-xl p-3 border border-white/30 shadow-xl",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-100 text-xs font-medium mb-1",children:"Available Balance"}),s.jsx("p",{className:"text-white text-lg font-bold drop-shadow-sm",children:Y(h,t)})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-emerald-100 text-xs flex items-center justify-end font-medium mb-1",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),"This Month"]}),s.jsxs("p",{className:`text-sm font-bold drop-shadow-sm ${b>=0?"text-green-200":"text-red-200"}`,children:[b>=0?"+":"",Y(Math.abs(b),t)]})]})]})})]})]}),s.jsxs("div",{className:"flex-1 p-3 relative z-10",children:[s.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-1 mb-3 shadow-lg border border-emerald-100/50",children:s.jsx("div",{className:"grid grid-cols-4 gap-0",children:w.map(j=>s.jsx(F,{variant:r===j.id?"default":"ghost",className:`rounded-lg text-xs font-medium transition-all duration-200 h-8 ${r===j.id?"bg-gradient-to-r from-emerald-600 to-green-600 text-white shadow-md transform scale-[1.02]":"text-gray-600 hover:bg-emerald-50 hover:text-emerald-700"}`,onClick:()=>n(j.id),children:j.label},j.id))})}),s.jsx("div",{className:"mb-3",children:s.jsx("div",{className:"relative",children:s.jsx(H,{placeholder:"Search transactions...",value:c,onChange:j=>d(j.target.value),className:"bg-white/95 backdrop-blur-sm border-emerald-200/70 focus:border-emerald-400 rounded-xl h-10 shadow-sm text-sm"})})}),s.jsx("div",{className:"space-y-2",children:m.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-100 to-green-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:s.jsx(Bi,{className:"w-6 h-6 text-emerald-400"})}),s.jsx("p",{className:"text-base font-medium text-gray-600 mb-1",children:"No transactions found"}),a.length===0&&s.jsx("p",{className:"text-xs text-gray-500",children:"You haven't made any transactions yet."})]}):m.map(j=>s.jsx(M,{className:"bg-white/95 backdrop-blur-sm border-0 shadow-md rounded-xl overflow-hidden hover:shadow-lg transition-all duration-200 hover:scale-[1.01] border border-emerald-100/30",children:s.jsx(U,{className:"p-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-50 to-green-50 rounded-lg border border-emerald-200/50",children:y(j)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:g(j)}),s.jsx("span",{className:`font-bold text-sm ${x(j)}`,children:p(j)})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:j.description||`${j.type} transaction`}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-2",children:v(j.status)}),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[s.jsx(_t,{className:"w-3 h-3 mr-1"}),N(j.created_at)]})]})]})]})})},j.id))}),m.length>10&&s.jsx("div",{className:"mt-4 text-center",children:s.jsx(F,{variant:"outline",className:"bg-white/90 backdrop-blur-sm border-emerald-300 hover:bg-emerald-50 hover:border-emerald-400 rounded-xl px-6 text-emerald-700 font-medium shadow-sm text-sm h-8",children:"Load More Transactions"})})]})]})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center p-6",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to view transactions"}),s.jsx(me,{to:"/login",children:s.jsx(F,{children:"Go to Login"})})]})})})},TT=async({userId:e,planId:t,amount:r})=>{try{const{data:n,error:a}=await A.from("users").select("available_balance").eq("id",e).single();if(a)throw new Error("Failed to fetch user balance");if(n.available_balance<r)throw new Error("Insufficient balance");const{data:i,error:o}=await A.from("investment_plans").select("name, duration_days").eq("id",t).single();if(o)throw new Error("Failed to fetch plan details");const l=new Date,c=new Date;c.setDate(c.getDate()+i.duration_days);const{data:d,error:u}=await A.rpc("subscribe_to_investment_plan",{p_user_id:e,p_plan_id:t,p_amount:r});if(u)throw u;const{error:m}=await A.from("users").update({available_balance:n.available_balance-r,updated_at:new Date().toISOString()}).eq("id",e);if(m)throw m;const{error:h}=await A.from("transactions").insert({user_id:e,type:"investment",amount:r,status:"completed",reference_type:"investment",reference_id:d,description:`Investment in ${i.name} - Rs. ${r.toLocaleString()}`});if(h)throw console.error("Failed to create transaction record:",h),new Error("Failed to create transaction record");const{error:b}=await A.rpc("create_user_activity_notification",{p_user_id:e,p_type:"investment",p_title:"Investment Successful",p_message:`Your investment of Rs. ${r.toLocaleString()} in ${i.name} has been successfully activated and will start generating daily returns.`,p_icon:"",p_priority:"high",p_metadata:{investment_id:d,plan_name:i.name,amount:r,duration_days:i.duration_days}});return b&&console.error("Failed to create notification:",b),{success:!0,investmentId:d}}catch(n){throw console.error("Investment subscription error:",n),new Error(n.message||"Failed to subscribe to investment plan")}},DT=()=>{const e=br(),t=Oe(),{user:r}=Ze(),{settings:n}=Te(),a=e.state,[i,o]=f.useState(""),[l,c]=f.useState(null),[d,u]=f.useState(0),[m,h]=f.useState(!1),[b,w]=f.useState(!0);f.useEffect(()=>{r!=null&&r.id?v():w(!1)},[r]),f.useEffect(()=>{a||(_e.error("Please select an investment plan first"),t("/investment-plans"))},[a,t]);const v=async()=>{if(r!=null&&r.id)try{w(!0);const{data:_,error:C}=await A.from("users").select("available_balance").eq("id",r.id).single();if(C){console.error("Error fetching user balance:",C),_e.error("Failed to fetch balance");return}console.log("Fetched user balance:",_.available_balance),u(_.available_balance||0)}catch(_){console.error("Error fetching user balance:",_),_e.error("Failed to fetch balance")}finally{w(!1)}};if(!a)return null;const y=_=>{const C=parseFloat(_);(_===""||!isNaN(C)&&C>=0)&&o(_)},g=()=>{const _=parseFloat(i);return isNaN(_)?0:_*a.dailyReturn/100},p=()=>{const _=parseFloat(i);return isNaN(_)?0:_*a.dailyReturn*a.duration/100},x=()=>{const _=parseFloat(i);return isNaN(_)?0:_+p()},N=()=>{const _=parseFloat(i);return!(isNaN(_)||_<a.minAmount||a.maxAmount&&_>a.maxAmount)},j=()=>{const _=parseFloat(i);return!isNaN(_)&&_<=d},k=async()=>{if(!(r!=null&&r.id))return _e.error("Please log in to invest"),!1;const _=parseFloat(i);try{return h(!0),_e.loading("Processing investment..."),await TT({userId:r.id,planId:a.planId,amount:_}),u(C=>C-_),_e.dismiss(),_e.success(`Successfully invested Rs ${_.toLocaleString()} in ${a.planName}! Check your transactions and notifications.`),setTimeout(()=>{t("/")},2e3),!0}catch(C){return console.error("Error processing investment:",C),_e.dismiss(),_e.error(C.message||"Failed to process investment"),!1}finally{h(!1)}},S=async()=>{if(!N()||!l){_e.error("Please enter a valid amount and select payment method");return}if(l==="balance"&&!j()){_e.error("You don't have enough balance for this investment");return}l==="deposit"?t(`/deposit?amount=${i}&planId=${a.planId}&planName=${encodeURIComponent(a.planName)}`):await k()};return s.jsx(Ne,{headerTitle:"Start Investment Journey",className:"bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:s.jsxs("div",{className:"p-3 space-y-4",children:[s.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>t("/investment-plans"),className:"flex items-center text-gray-600 hover:text-gray-800 hover:bg-white/60 rounded-full px-3 py-1.5 text-sm transition-all duration-300",children:[s.jsx(Be,{className:"w-3 h-3 mr-2"}),"Back to Plans"]}),s.jsxs("div",{className:"text-center py-4",children:[s.jsxs("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mb-3 shadow-xl relative",children:[s.jsx(qe,{className:"w-8 h-8 text-white"}),s.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center",children:s.jsx(sr,{className:"w-2.5 h-2.5 text-yellow-800"})})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-1 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:"Start Your Investment Journey"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Choose your investment amount and payment method"})]}),s.jsxs(M,{className:"border-0 shadow-xl bg-gradient-to-br from-green-500 to-emerald-600 text-white overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -translate-y-12 translate-x-12"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 bg-white/10 rounded-full translate-y-10 -translate-x-10"}),s.jsx(K,{className:"relative z-10 pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx(sr,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(Q,{className:"text-lg font-bold",children:a.planName}),s.jsx("p",{className:"text-white/80 text-xs",children:"Premium Investment Plan"})]})]}),s.jsx(ke,{className:"bg-yellow-400 text-yellow-800 border-0 px-2 py-0.5 font-semibold text-xs",children:"Popular"})]})}),s.jsxs(U,{className:"relative z-10 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-white/10 rounded-lg p-3 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),s.jsx("span",{className:"text-xs text-white/80",children:"Daily Return"})]}),s.jsxs("div",{className:"text-lg font-bold",children:[a.dailyReturn,"%"]})]}),s.jsxs("div",{className:"bg-white/10 rounded-lg p-3 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx(_t,{className:"w-3 h-3 mr-1"}),s.jsx("span",{className:"text-xs text-white/80",children:"Duration"})]}),s.jsxs("div",{className:"text-lg font-bold",children:[a.duration," days"]})]}),s.jsxs("div",{className:"bg-white/10 rounded-lg p-3 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx(mt,{className:"w-3 h-3 mr-1"}),s.jsx("span",{className:"text-xs text-white/80",children:"Min Amount"})]}),s.jsx("div",{className:"text-sm font-bold",children:Y(a.minAmount,n)})]}),s.jsxs("div",{className:"bg-white/10 rounded-lg p-3 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center mb-1",children:[s.jsx(mt,{className:"w-3 h-3 mr-1"}),s.jsx("span",{className:"text-xs text-white/80",children:"Max Amount"})]}),s.jsx("div",{className:"text-sm font-bold",children:a.maxAmount?Y(a.maxAmount,n):"No limit"})]})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-3 pt-1",children:[s.jsxs("div",{className:"flex items-center text-white/90",children:[s.jsx(Ht,{className:"w-3 h-3 mr-1"}),s.jsx("span",{className:"text-xs",children:"Secure Investment"})]}),s.jsx("div",{className:"w-1 h-1 bg-white/50 rounded-full"}),s.jsxs("div",{className:"flex items-center text-white/90",children:[s.jsx(k0,{className:"w-3 h-3 mr-1"}),s.jsx("span",{className:"text-xs",children:"Guaranteed Returns"})]})]})]})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white",children:[s.jsx(K,{className:"border-b border-gray-100 pb-2",children:s.jsxs(Q,{className:"flex items-center text-gray-800 text-sm",children:[s.jsx(k0,{className:"w-4 h-4 mr-2 text-green-500"}),"Investment Amount"]})}),s.jsxs(U,{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsxs(V,{htmlFor:"amount",className:"text-gray-700 font-medium text-sm",children:["Enter Amount (",n.currencySymbol,")"]}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx(H,{id:"amount",type:"number",value:i,onChange:_=>y(_.target.value),placeholder:`Minimum ${Y(a.minAmount,n)}`,className:"text-sm h-10 pl-10 border-2 border-gray-200 focus:border-green-500 focus:ring-green-500 rounded-lg"}),s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]}),i&&!N()&&s.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center",children:[s.jsx("span",{className:"w-3 h-3 mr-1",children:""}),"Amount must be between ",Y(a.minAmount,n),a.maxAmount&&` and ${Y(a.maxAmount,n)}`]})]}),i&&N()&&s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border-2 border-green-200",children:[s.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center text-sm",children:[s.jsx(qe,{className:"w-3 h-3 mr-1 text-green-600"}),"Investment Summary"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"text-center p-2 bg-white rounded-lg shadow-sm",children:[s.jsx("div",{className:"text-lg font-bold text-green-600",children:Y(g(),n)}),s.jsx("span",{className:"text-xs text-gray-600",children:"Daily Profit"})]}),s.jsxs("div",{className:"text-center p-2 bg-white rounded-lg shadow-sm",children:[s.jsx("div",{className:"text-lg font-bold text-green-600",children:Y(p(),n)}),s.jsx("span",{className:"text-xs text-gray-600",children:"Total Profit"})]})]}),s.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg text-white text-center",children:[s.jsxs("div",{className:"text-xs opacity-90",children:["Total Return After ",a.duration," Days"]}),s.jsx("div",{className:"text-xl font-bold",children:Y(x(),n)})]})]})]})]}),i&&N()&&s.jsxs(M,{className:"border-0 shadow-lg bg-white",children:[s.jsx(K,{className:"border-b border-gray-100 pb-2",children:s.jsx(Q,{className:"text-gray-800 text-sm",children:"Select Payment Method"})}),s.jsxs(U,{className:"p-4 space-y-3",children:[s.jsx("div",{className:`p-3 border-2 rounded-lg cursor-pointer transition-all duration-300 ${l==="balance"?"border-green-500 bg-green-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,onClick:()=>c("balance"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l==="balance"?"bg-green-100":"bg-gray-100"}`,children:s.jsx(Wi,{className:`w-5 h-5 ${l==="balance"?"text-green-600":"text-gray-600"}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Use Available Balance"}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Current Balance: ",b?s.jsx("span",{className:"inline-block w-12 h-3 bg-gray-200 animate-pulse rounded"}):Y(d,n)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[!b&&(j()?s.jsx(ke,{className:"bg-green-100 text-green-800 border-green-200 text-xs",children:"Available"}):s.jsx(ke,{variant:"secondary",className:"bg-red-100 text-red-800 border-red-200 text-xs",children:"Insufficient"})),s.jsx("div",{className:`w-4 h-4 rounded-full border-2 transition-all ${l==="balance"?"bg-green-500 border-green-500":"border-gray-300"}`,children:l==="balance"&&s.jsx("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]})]})}),s.jsx("div",{className:`p-3 border-2 rounded-lg cursor-pointer transition-all duration-300 ${l==="deposit"?"border-emerald-500 bg-emerald-50 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,onClick:()=>c("deposit"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l==="deposit"?"bg-emerald-100":"bg-gray-100"}`,children:s.jsx(Rt,{className:`w-5 h-5 ${l==="deposit"?"text-emerald-600":"text-gray-600"}`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Make New Deposit"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Deposit funds and invest immediately"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ke,{className:"bg-emerald-100 text-emerald-800 border-emerald-200 text-xs",children:"Available"}),s.jsx("div",{className:`w-4 h-4 rounded-full border-2 transition-all ${l==="deposit"?"bg-emerald-500 border-emerald-500":"border-gray-300"}`,children:l==="deposit"&&s.jsx("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]})]})})]})]}),i&&N()&&l&&s.jsx("div",{className:"pb-4",children:s.jsx(F,{onClick:S,disabled:m||b,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold py-3 text-sm rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",size:"lg",children:m?s.jsx(s.Fragment,{children:"Processing..."}):l==="balance"?s.jsxs(s.Fragment,{children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Invest Now"]}):s.jsxs(s.Fragment,{children:[s.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Proceed to Deposit"]})})})]})})},mi={async getAll(){const{data:e,error:t}=await A.from("investment_plans").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async getActive(){const{data:e,error:t}=await A.from("investment_plans").select("*").eq("is_active",!0).order("minimum_amount",{ascending:!0});if(t)throw t;return e},async getById(e){const{data:t,error:r}=await A.from("investment_plans").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){const{data:t,error:r}=await A.from("investment_plans").insert(e).select().single();if(r)throw r;return t},async update(e,t){const{data:r,error:n}=await A.from("investment_plans").update(t).eq("id",e).select().single();if(n)throw n;return r},async delete(e){const{error:t}=await A.from("investment_plans").delete().eq("id",e);if(t)throw t},async toggleStatus(e,t){const{data:r,error:n}=await A.from("investment_plans").update({is_active:t}).eq("id",e).select().single();if(n)throw n;return r}},IT=()=>{const e=Oe(),{settings:t,loading:r}=Te(),[n,a]=f.useState([]),[i,o]=f.useState(null),[l,c]=f.useState([]),[d,u]=f.useState(!0);f.useEffect(()=>{m(),h(),b()},[]);const m=async()=>{try{const k=await mi.getActive();a(k||[])}catch(k){_e.error("Failed to load investment plans"),console.error("Error fetching plans:",k)}},h=async()=>{const k=localStorage.getItem("currentUser");if(!k){console.log("No user found in localStorage"),u(!1);return}try{const S=JSON.parse(k);console.log("Checking user data for:",S.id);const{data:_,error:C}=await A.from("users").select("id, available_balance").eq("id",S.id).single();if(_&&!C){console.log("Fresh user data from database:",_);const E=_;o({id:E.id,available_balance:E.available_balance||0})}else console.error("Error fetching user data:",C),o({id:S.id,available_balance:S.available_balance||0})}catch(S){console.error("Error parsing user data:",S),_e.error("Failed to load user data")}finally{u(!1)}},b=async()=>{const k=localStorage.getItem("currentUser");if(k)try{const S=JSON.parse(k),{data:_,error:C}=await A.from("user_investments").select("*").eq("user_id",S.id).eq("status","active");C?console.error("Error fetching user investments:",C):c(_||[])}catch(S){console.error("Error fetching user investments:",S)}};f.useEffect(()=>{if(!(i!=null&&i.id))return;console.log("Setting up real-time subscription for user:",i.id);const k=A.channel("user-data-changes").on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${i.id}`},S=>{if(console.log("Real-time user data updated:",S),S.new){const _=S.new;o(C=>C?{...C,available_balance:_.available_balance||0}:null)}}).subscribe();return()=>{console.log("Cleaning up real-time subscription"),A.removeChannel(k)}},[i==null?void 0:i.id]),f.useEffect(()=>{if(!(i!=null&&i.id))return;const k=A.channel("user-investments-changes").on("postgres_changes",{event:"*",schema:"public",table:"user_investments",filter:`user_id=eq.${i.id}`},()=>{b()}).subscribe();return()=>{A.removeChannel(k)}},[i==null?void 0:i.id]);const w=k=>{console.log("Selecting plan:",k.name),e("/invest",{state:{planId:k.id,planName:k.name,minAmount:k.minimum_amount,maxAmount:k.maximum_amount,dailyReturn:k.daily_profit_percentage*100,duration:k.duration_days}})},v=k=>l.filter(S=>S.investment_plan_id===k).length,y=k=>l.filter(S=>S.investment_plan_id===k).reduce((S,_)=>S+Number(_.amount),0),g=(k,S)=>k*S,p=(k,S,_)=>k+k*S*_,x=k=>{const S=[sr,qe,qi,hs];return S[k%S.length]},N=k=>{const S=["from-emerald-400 to-green-500","from-green-400 to-teal-500","from-teal-400 to-emerald-500","from-emerald-500 to-green-600"];return S[k%S.length]},j=k=>{const S=["Most Popular","Best Value","Premium","Elite"];return S[k%S.length]};return d||r?s.jsx(Ne,{headerTitle:"Investment Plans",className:"bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:s.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})})}):s.jsx(Ne,{headerTitle:"Investment Plans",className:"bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:s.jsxs("div",{className:"p-3 space-y-4",children:[i&&s.jsx("div",{className:"relative overflow-hidden",children:s.jsxs(M,{className:"bg-gradient-to-r from-emerald-500 via-green-600 to-teal-600 text-white border-0 shadow-lg",children:[s.jsx("div",{className:"absolute inset-0 bg-black/10"}),s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full translate-y-8 -translate-x-8"}),s.jsxs(U,{className:"relative p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-100 text-xs mb-1 font-medium",children:"Available Balance"}),s.jsx("p",{className:"text-2xl font-bold tracking-tight",children:Y(i.available_balance,t)}),s.jsx("p",{className:"text-emerald-200 text-xs mt-1",children:"Ready to invest"})]}),s.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:s.jsx(mt,{className:"w-6 h-6 text-white"})})]}),l.length>0&&s.jsx("div",{className:"mt-3 p-2 bg-emerald-400/20 rounded-lg border border-emerald-300/30",children:s.jsxs("p",{className:"text-emerald-100 text-xs font-medium",children:[" You have ",l.length," active investment",l.length>1?"s":""]})})]})]})}),s.jsx("div",{className:"space-y-3",children:n.map((k,S)=>{const _=x(S),C=N(S),E=j(S),$=g(k.minimum_amount,k.daily_profit_percentage),D=p(k.minimum_amount,k.daily_profit_percentage,k.duration_days),L=D-k.minimum_amount,W=v(k.id),ae=y(k.id);return s.jsxs(M,{className:"border-0 shadow-lg bg-white overflow-hidden hover:shadow-xl transition-all duration-500 hover:-translate-y-1 group",children:[s.jsx("div",{className:`h-1.5 bg-gradient-to-r ${C}`}),s.jsx("div",{className:"absolute top-3 right-3 z-10",children:s.jsxs(ke,{className:`bg-gradient-to-r ${C} text-white text-xs font-semibold px-2 py-0.5 shadow-lg`,children:[s.jsx(sr,{className:"w-2.5 h-2.5 mr-1"}),E]})}),s.jsxs(U,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:`bg-gradient-to-r ${C} p-3 rounded-xl mr-3 shadow-lg group-hover:scale-110 transition-transform duration-300`,children:s.jsx(_,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-0.5",children:k.name}),s.jsx("p",{className:"text-gray-500 text-xs font-medium",children:"Premium Investment Plan"}),k.description&&s.jsx("p",{className:"text-gray-600 text-xs mt-0.5 line-clamp-2",children:k.description})]})]}),W>0&&s.jsx("div",{className:"mb-3 p-2 bg-gradient-to-r from-emerald-50 to-green-50 rounded-lg border border-emerald-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs font-medium text-emerald-700",children:[" ",W," Active Investment",W>1?"s":""]}),s.jsxs("span",{className:"text-xs font-bold text-emerald-800",children:["Total: ",Y(ae,t)]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-emerald-50 to-green-50 rounded-xl border border-emerald-100",children:[s.jsx(qe,{className:"w-4 h-4 text-emerald-600 mx-auto mb-1"}),s.jsx("p",{className:"text-xs text-gray-600 mb-0.5 font-medium",children:"Daily Profit"}),s.jsx("p",{className:"text-sm font-bold text-emerald-600",children:Y($,t)})]}),s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-green-50 to-teal-50 rounded-xl border border-green-100",children:[s.jsx(_t,{className:"w-4 h-4 text-green-600 mx-auto mb-1"}),s.jsx("p",{className:"text-xs text-gray-600 mb-0.5 font-medium",children:"Duration"}),s.jsxs("p",{className:"text-sm font-bold text-green-600",children:[k.duration_days," Days"]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 rounded-xl p-3 mb-4 border border-emerald-100",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center",children:[s.jsx(kn,{className:"w-3 h-3 mr-1 text-emerald-600"}),"Investment Range"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Min Amount"}),s.jsx("span",{className:"font-bold text-gray-800 text-xs",children:Y(k.minimum_amount,t)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Max Amount"}),s.jsx("span",{className:"font-bold text-gray-800 text-xs",children:k.maximum_amount?Y(k.maximum_amount,t):"No Limit"})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-3 mb-4 border border-green-100",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center",children:[s.jsx(hs,{className:"w-3 h-3 mr-1 text-green-600"}),"Profit Projection (Min. Investment)"]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Total Profit"}),s.jsx("span",{className:"font-bold text-green-700 text-xs",children:Y(L,t)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Total Return"}),s.jsx("span",{className:"font-bold text-green-700 text-xs",children:Y(D,t)})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(Fi,{className:"w-4 h-4 text-gray-500 mx-auto mb-0.5"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Created"}),s.jsx("p",{className:"text-xs font-semibold text-gray-700",children:new Date(k.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(Ht,{className:"w-4 h-4 text-green-500 mx-auto mb-0.5"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Status"}),s.jsx("p",{className:"text-xs font-semibold text-green-600",children:k.is_active?"Active":"Inactive"})]})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4 text-xs text-gray-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ht,{className:"w-3 h-3 mr-1 text-emerald-500"}),s.jsx("span",{children:"Secure Investment"})]}),s.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(qi,{className:"w-3 h-3 mr-1 text-green-500"}),s.jsx("span",{children:"Daily Returns"})]})]}),s.jsxs(F,{className:`w-full bg-gradient-to-r ${C} hover:shadow-xl text-white font-semibold py-3 rounded-xl text-sm transition-all duration-300 group-hover:scale-105`,onClick:()=>w(k),children:[W>0?"Invest Again":"Start Investment",s.jsx(Li,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})]},k.id)})}),n.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"bg-emerald-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:s.jsx(qe,{className:"w-8 h-8 text-emerald-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No Investment Plans Available"}),s.jsx("p",{className:"text-gray-500 max-w-sm mx-auto text-sm",children:"We're working on bringing you exciting investment opportunities. Check back soon!"})]})]})})},OT=()=>{const e=Oe(),[t,r]=f.useState(null),[n,a]=f.useState([]),[i,o]=f.useState(null),[l,c]=f.useState(!0),d=n.reduce((g,p)=>g+p.amount,0),u=n.reduce((g,p)=>g+p.total_profit_earned,0);f.useEffect(()=>{m(),h()},[]);const m=async()=>{const g=localStorage.getItem("currentUser");if(g){const p=JSON.parse(g);try{const{data:x,error:N}=await A.from("users").select("id, full_name, email, available_balance, current_plan_id, created_at").eq("id",p.id).single();if(x&&!N){if(r(x),x.current_plan_id){const j=await mi.getById(x.current_plan_id);o(j)}}else console.error("Error fetching user data:",N),_e.error("Failed to load user data")}catch(x){console.error("Error fetching user data:",x),_e.error("Failed to load user data")}}c(!1)},h=async()=>{const g=localStorage.getItem("currentUser");if(g){const p=JSON.parse(g);try{const{data:x,error:N}=await A.from("user_investments").select(`
            id,
            amount,
            total_profit_earned,
            status,
            created_at,
            investment_plans (
              name,
              daily_profit_percentage,
              duration_days
            )
          `).eq("user_id",p.id).order("created_at",{ascending:!1});if(x&&!N){const j=x.map(k=>{var S,_,C;return{id:k.id,amount:k.amount,total_profit_earned:k.total_profit_earned,status:k.status,created_at:k.created_at,plan:{name:((S=k.investment_plans)==null?void 0:S.name)||"Unknown Plan",daily_profit_percentage:((_=k.investment_plans)==null?void 0:_.daily_profit_percentage)||0,duration_days:((C=k.investment_plans)==null?void 0:C.duration_days)||0}}});a(j)}}catch(x){console.error("Error fetching investments:",x)}}};f.useEffect(()=>{if(!(t!=null&&t.id))return;const g=A.channel("investment-profile-changes").on("postgres_changes",{event:"*",schema:"public",table:"users",filter:`id=eq.${t.id}`},p=>{if(console.log("Investment profile data updated:",p),p.new){const x=p.new;r(N=>N?{...N,available_balance:x.available_balance||0,current_plan_id:x.current_plan_id}:null)}}).subscribe();return()=>{A.removeChannel(g)}},[t==null?void 0:t.id]);const b=g=>new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",minimumFractionDigits:0}).format(g).replace("PKR","Rs."),w=(g,p)=>g===0?0:(p/g*100).toFixed(2),v=(g,p)=>g*p,y=g=>{switch(g.toLowerCase()){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return l?s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:s.jsx("div",{className:"w-full max-w-sm mx-auto bg-white shadow-2xl rounded-3xl overflow-hidden",children:s.jsx("div",{className:"bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-500 border-t-transparent mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading Investment Profile..."})]})})})}):s.jsx("div",{className:"min-h-screen bg-gray-100 flex items-start justify-center py-4",children:s.jsxs("div",{className:"w-full max-w-sm mx-auto bg-white shadow-2xl rounded-3xl overflow-hidden border-8 border-gray-300 relative",children:[s.jsxs("div",{className:"bg-black text-white text-xs flex justify-between items-center px-4 py-1",children:[s.jsx("span",{children:"9:41"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-4 h-2 bg-white rounded-sm"}),s.jsx("div",{className:"w-1 h-2 bg-white rounded-sm"}),s.jsx("div",{className:"w-6 h-3 border border-white rounded-sm",children:s.jsx("div",{className:"w-4 h-full bg-white rounded-sm"})})]})]}),s.jsx(Ne,{headerTitle:"Investment Profile",className:"bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50 min-h-screen",children:s.jsxs("div",{className:"p-4 space-y-6 pb-32",children:[t&&s.jsx("div",{className:"relative overflow-hidden",children:s.jsxs(M,{className:"bg-gradient-to-r from-emerald-500 via-green-600 to-teal-600 text-white border-0 shadow-xl",children:[s.jsx("div",{className:"absolute inset-0 bg-black/10"}),s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"}),s.jsxs(U,{className:"relative p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-white/20 p-4 rounded-2xl backdrop-blur-sm mr-4",children:s.jsx(jt,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:t.full_name}),s.jsx("p",{className:"text-emerald-100 text-sm",children:t.email})]})]}),s.jsx(ke,{className:"bg-white/20 text-white border-white/30",children:"Investor"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-emerald-100 text-xs mb-1",children:"Available Balance"}),s.jsx("p",{className:"text-lg font-bold",children:b(t.available_balance)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-emerald-100 text-xs mb-1",children:"Total Invested"}),s.jsx("p",{className:"text-lg font-bold",children:b(d)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-emerald-100 text-xs mb-1",children:"Total Profit"}),s.jsx("p",{className:"text-lg font-bold",children:b(u)})]})]})]})]})}),i&&s.jsxs(M,{className:"border-0 shadow-lg bg-white overflow-hidden",children:[s.jsx("div",{className:"h-2 bg-gradient-to-r from-emerald-400 to-green-500"}),s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsxs(ke,{className:"bg-gradient-to-r from-emerald-400 to-green-500 text-white text-xs font-semibold px-3 py-1 shadow-lg",children:[s.jsx(tf,{className:"w-3 h-3 mr-1"}),"Active Plan"]})}),s.jsxs(U,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-emerald-400 to-green-500 p-4 rounded-2xl mr-4 shadow-lg",children:s.jsx(qe,{className:"w-7 h-7 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-1",children:i.name}),s.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Your Current Investment Plan"}),i.description&&s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:i.description})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-emerald-50 to-green-50 rounded-2xl border border-emerald-100",children:[s.jsx(_t,{className:"w-6 h-6 text-emerald-600 mx-auto mb-2"}),s.jsx("p",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Duration"}),s.jsxs("p",{className:"text-lg font-bold text-emerald-600",children:[i.duration_days," Days"]})]}),s.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-teal-50 rounded-2xl border border-green-100",children:[s.jsx(kn,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),s.jsx("p",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Daily Return"}),s.jsxs("p",{className:"text-lg font-bold text-green-600",children:[(i.daily_profit_percentage*100).toFixed(2),"%"]})]})]}),s.jsxs(F,{className:"w-full bg-gradient-to-r from-emerald-400 to-green-500 hover:shadow-2xl text-white font-semibold py-4 rounded-2xl text-lg",onClick:()=>e("/investment-plans"),children:["View All Plans",s.jsx(Li,{className:"w-5 h-5 ml-2"})]})]})]}),t&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(M,{className:"bg-white border-0 shadow-lg",children:s.jsxs(U,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Portfolio ROI"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Return on Investment"})]}),s.jsx("div",{className:"bg-gradient-to-r from-emerald-100 to-green-100 p-3 rounded-xl",children:s.jsx(hs,{className:"w-6 h-6 text-emerald-600"})})]}),s.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:[w(d,u),"%"]})]})}),s.jsx(M,{className:"bg-white border-0 shadow-lg",children:s.jsxs(U,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Investment Status"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Current Status"})]}),s.jsx("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 p-3 rounded-xl",children:s.jsx(Ht,{className:"w-6 h-6 text-green-600"})})]}),s.jsx("p",{className:"text-lg font-bold text-green-600",children:i?"Active Investor":"Ready to Invest"})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Investment History"}),n.map(g=>s.jsxs(M,{className:"border-0 shadow-lg bg-white overflow-hidden",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-emerald-400 to-green-500"}),s.jsxs(U,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:g.plan.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Started on ",new Date(g.created_at).toLocaleDateString()]})]}),s.jsx(ke,{className:`${y(g.status)} text-xs font-semibold px-3 py-1`,children:g.status})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Investment"}),s.jsx("p",{className:"font-bold text-gray-800",children:b(g.amount)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Daily Profit"}),s.jsx("p",{className:"font-bold text-green-600",children:b(v(g.amount,g.plan.daily_profit_percentage))})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Profit"}),s.jsx("p",{className:"font-bold text-emerald-600",children:b(g.total_profit_earned)})]})]})]})]},g.id)),n.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"bg-emerald-100 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6",children:s.jsx(qe,{className:"w-12 h-12 text-emerald-600"})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"No Investment History"}),s.jsx("p",{className:"text-gray-500 max-w-sm mx-auto mb-6",children:"Start your investment journey today and build your wealth with our premium plans."}),s.jsxs(F,{className:"bg-gradient-to-r from-emerald-500 to-green-600 hover:shadow-xl text-white font-semibold px-6 py-3 rounded-xl",onClick:()=>e("/investment-plans"),children:["Start Investing",s.jsx(Li,{className:"w-5 h-5 ml-2"})]})]})]})]})})]})})},LT=()=>{const[e,t]=f.useState(!1),[r,n]=f.useState({totalReferrals:0,totalCommissionEarned:0,level:"Bronze"}),[a,i]=f.useState({welcome_bonus:100,referral_bonus:50,commission_percentage:15}),{user:o}=Ze(),{settings:l}=Te(),c=window.location.origin,d=(o==null?void 0:o.referral_code)||"Loading...",u=`${c}/ref/${d}`;f.useEffect(()=>{(async()=>{if(o!=null&&o.id)try{const{count:v}=await A.from("users").select("*",{count:"exact",head:!0}).eq("referred_by_user_id",o.id),{data:y,error:g}=await A.from("referral_commissions").select("commission_amount").eq("referrer_user_id",o.id).eq("status","completed");g&&console.error("Error fetching commission data:",g);const p=(y==null?void 0:y.reduce((N,j)=>N+(j.commission_amount||0),0))||0;let x="Bronze";v>=20?x="Gold":v>=10&&(x="Silver"),n({totalReferrals:v||0,totalCommissionEarned:p,level:x})}catch(v){console.error("Error fetching referral stats:",v)}})()},[o==null?void 0:o.id]),f.useEffect(()=>{(async()=>{try{const{data:v,error:y}=await A.from("referral_settings").select("setting_key, setting_value").in("setting_key",["referral_signup_bonus","referral_bonus_amount","referral_commission_percentage"]);if(y){console.error("Error fetching referral settings:",y);return}if(v){const g=v.reduce((p,x)=>(p[x.setting_key]=parseFloat(x.setting_value),p),{});i({welcome_bonus:g.referral_signup_bonus||100,referral_bonus:g.referral_bonus_amount||50,commission_percentage:g.referral_commission_percentage||15})}}catch(v){console.error("Error fetching reward settings:",v)}})()},[]);const m=()=>{navigator.clipboard.writeText(u),t(!0),se.success("Referral link copied to clipboard"),setTimeout(()=>t(!1),2e3)},h=()=>{const v=`https://wa.me/?text=${encodeURIComponent(` Join easypaisa with my referral code ${d} and get ${Xo(a.welcome_bonus,l.currencySymbol)} bonus! 

${u}`)}`;window.open(v,"_blank")};Xo(a.welcome_bonus,l.currencySymbol),`${Vi(a.commission_percentage)}`;const b=[{icon:s.jsx(gh,{size:14}),title:"Share Code",desc:"Send your referral code to friends"},{icon:s.jsx(ct,{size:14}),title:"Friends Join",desc:"They sign up using your code"},{icon:s.jsx(Nl,{size:14}),title:"Earn Together",desc:"Both get instant rewards!"}];return s.jsx(Ne,{headerTitle:"Invite & Earn",children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[s.jsxs("div",{className:"relative bg-gradient-to-br from-emerald-500 via-green-500 to-teal-600 text-white pb-6 px-2 overflow-hidden -mt-3",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-white/5 to-white/10"}),s.jsx("div",{className:"absolute top-2 right-2 w-12 h-12 bg-white/10 rounded-full animate-pulse"}),s.jsx("div",{className:"absolute top-8 left-3 w-8 h-8 bg-white/15 rounded-full animate-bounce"}),s.jsx("div",{className:"absolute bottom-4 right-4 w-10 h-10 bg-white/10 rounded-full animate-pulse"}),s.jsx("div",{className:"absolute bottom-8 left-2 w-6 h-6 bg-white/20 rounded-full animate-bounce"}),s.jsxs("div",{className:"relative z-10 max-w-sm mx-auto pt-2",children:[s.jsx("div",{className:"flex justify-center mb-3",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-full shadow-2xl animate-scale-in backdrop-blur-sm border border-white/30",children:s.jsx(Qr,{size:28,className:"text-white animate-pulse"})}),s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center animate-bounce",children:s.jsx(fu,{size:8,className:"text-yellow-800"})})]})}),s.jsx("h1",{className:"text-xl font-bold text-center mb-2 animate-fade-in",children:" Invite Friends & Earn Big! "}),s.jsx("p",{className:"text-center text-green-100 text-sm mb-4 animate-fade-in leading-relaxed",children:"Share the love, share the wealth! Every friend you invite makes both of you richer "}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[s.jsxs("div",{className:"text-center bg-white/15 rounded-lg p-2 backdrop-blur-sm border border-white/20 animate-fade-in hover:bg-white/20 transition-all",children:[s.jsxs("div",{className:"text-lg font-bold flex items-center justify-center gap-1 mb-0.5",children:[s.jsx(ct,{size:12}),r.totalReferrals]}),s.jsx("div",{className:"text-xs text-green-100 font-medium",children:"Friends Invited"})]}),s.jsxs("div",{className:"text-center bg-white/15 rounded-lg p-2 backdrop-blur-sm border border-white/20 animate-fade-in hover:bg-white/20 transition-all",children:[s.jsx("div",{className:"text-lg font-bold mb-0.5",children:Xo(r.totalCommissionEarned,l.currencySymbol)}),s.jsx("div",{className:"text-xs text-green-100 font-medium",children:"Total Commission"})]}),s.jsxs("div",{className:"text-center bg-white/15 rounded-lg p-2 backdrop-blur-sm border border-white/20 animate-fade-in hover:bg-white/20 transition-all",children:[s.jsxs("div",{className:"text-lg font-bold flex items-center justify-center gap-1 mb-0.5",children:[s.jsx($s,{size:12}),r.level]}),s.jsx("div",{className:"text-xs text-green-100 font-medium",children:"Your Level"})]})]})]})]}),s.jsxs("div",{className:"px-2 -mt-4 pb-4 space-y-3 max-w-sm mx-auto",children:[s.jsxs(M,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm rounded-xl overflow-hidden animate-fade-in",children:[s.jsx(K,{className:"pb-2 bg-gradient-to-r from-green-50 to-emerald-50",children:s.jsxs(Q,{className:"text-sm font-bold text-gray-800 flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg shadow-lg",children:s.jsx(gh,{size:12,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm",children:"Your Magic Code "}),s.jsx("div",{className:"text-xs text-gray-500 font-normal",children:"Share & earn together!"})]})]})}),s.jsxs(U,{className:"space-y-3 p-3",children:[s.jsxs("div",{className:"relative bg-gradient-to-r from-green-50 via-emerald-50 to-teal-50 p-4 rounded-xl border-2 border-dashed border-green-200 shadow-inner",children:[s.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 bg-white px-2 py-0.5 rounded-full text-xs font-medium text-green-600 border border-green-200",children:"REFERRAL CODE"}),s.jsxs("div",{className:"text-center pt-1",children:[s.jsx("div",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 mb-2 tracking-widest animate-pulse",children:d}),s.jsxs("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1",children:[s.jsx(qi,{size:10,className:"text-yellow-500"}),"Instant rewards for both of you!",s.jsx(qi,{size:10,className:"text-yellow-500"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(F,{onClick:m,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 py-3 text-xs font-semibold rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-1",children:[e?s.jsx(Vt,{size:12}):s.jsx(ti,{size:12}),e?"Copied! ":"Copy Link"]})}),s.jsx(F,{onClick:h,variant:"outline",className:"border-2 border-green-500 text-green-600 hover:bg-green-50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 py-3 text-xs font-semibold rounded-lg bg-white/80 backdrop-blur-sm",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gh,{size:12}),"WhatsApp "]})})]})]})]}),s.jsx(M,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm rounded-xl overflow-hidden animate-fade-in",children:s.jsxs(U,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center shadow-lg",children:s.jsx(kn,{size:12,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"How It Works"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Simple steps to earn"})]})]}),s.jsx("div",{className:"space-y-2",children:b.map((w,v)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100 hover:shadow-md transition-all",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-lg flex-shrink-0",children:s.jsxs("div",{className:"flex items-center",children:[w.icon,s.jsx("span",{className:"text-white font-bold ml-0.5 text-xs",children:v+1})]})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-800 text-xs",children:w.title}),s.jsx("div",{className:"text-xs text-gray-600",children:w.desc})]})]},v))})]})}),s.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-500 py-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{children:"Instant Rewards"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"}),s.jsx("span",{children:"No Limits"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-pulse"}),s.jsx("span",{children:"Easy Sharing"})]})]})]})]})})},MT=()=>{const[e,t]=f.useState({totalReferrals:0,totalEarnings:0,totalCommissionEarned:0,currentLevel:1,referredUsers:[]}),[r,n]=f.useState(!0),{user:a}=Ze();return f.useEffect(()=>{(async()=>{if(!(a!=null&&a.id)){n(!1);return}try{const{data:o,error:l}=await A.from("users").select(`
            id,
            full_name,
            email,
            phone_number,
            created_at,
            user_level,
            available_balance,
            total_deposits
          `).eq("referred_by_user_id",a.id).order("created_at",{ascending:!1});if(l){console.error("Error fetching referred users:",l),n(!1);return}const{data:c,error:d}=await A.from("referral_commissions").select("commission_amount").eq("referrer_user_id",a.id).eq("status","completed");d&&console.error("Error fetching commission data:",d);const u=(c==null?void 0:c.reduce((b,w)=>b+(w.commission_amount||0),0))||0,m=u,h=await Promise.all((o||[]).map(async b=>{const{data:w}=await A.from("user_levels").select("name, color").eq("level",b.user_level).eq("is_active",!0).single();return{...b,levelInfo:w||{name:"Bronze Explorer",color:"#cd7f32"}}}));t({totalReferrals:(o==null?void 0:o.length)||0,totalEarnings:m,totalCommissionEarned:u,currentLevel:a.user_level||1,referredUsers:h})}catch(o){console.error("Error in fetchReferralData:",o)}finally{n(!1)}})()},[a==null?void 0:a.id,a==null?void 0:a.user_level]),{referralData:e,loading:r}};function Pt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function FT(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Rc=43200,dv=1440;let $T={};function UT(){return $T}function uv(e){const t=Pt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Qc(e,t){const r=Pt(e),n=Pt(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function zT(e){return FT(e,Date.now())}function BT(e,t){const r=Pt(e),n=Pt(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function WT(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function qT(e,t){return+Pt(e)-+Pt(t)}function VT(e){const t=Pt(e);return t.setHours(23,59,59,999),t}function HT(e){const t=Pt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function GT(e){const t=Pt(e);return+VT(t)==+HT(t)}function KT(e,t){const r=Pt(e),n=Pt(t),a=Qc(r,n),i=Math.abs(BT(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let l=Qc(r,n)===-a;GT(Pt(e))&&i===1&&Qc(e,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function YT(e,t,r){const n=qT(e,t)/1e3;return WT(r==null?void 0:r.roundingMethod)(n)}const QT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JT=(e,t,r)=>{let n;const a=QT[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Ih(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const XT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ZT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eD={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tD={date:Ih({formats:XT,defaultWidth:"full"}),time:Ih({formats:ZT,defaultWidth:"full"}),dateTime:Ih({formats:eD,defaultWidth:"full"})},rD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sD=(e,t,r,n)=>rD[e];function So(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const nD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},aD={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},iD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},oD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dD=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},uD={ordinalNumber:dD,era:So({values:nD,defaultWidth:"wide"}),quarter:So({values:aD,defaultWidth:"wide",argumentCallback:e=>e-1}),month:So({values:iD,defaultWidth:"wide"}),day:So({values:oD,defaultWidth:"wide"}),dayPeriod:So({values:lD,defaultWidth:"wide",formattingValues:cD,defaultFormattingWidth:"wide"})};function ko(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?mD(l,m=>m.test(o)):hD(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function hD(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function mD(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function fD(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const pD=/^(\d+)(th|st|nd|rd)?/i,xD=/\d+/i,gD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vD={any:[/^b/i,/^(a|c)/i]},yD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bD={any:[/1/i,/2/i,/3/i,/4/i]},wD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ND={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_D={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},CD={ordinalNumber:fD({matchPattern:pD,parsePattern:xD,valueCallback:e=>parseInt(e,10)}),era:ko({matchPatterns:gD,defaultMatchWidth:"wide",parsePatterns:vD,defaultParseWidth:"any"}),quarter:ko({matchPatterns:yD,defaultMatchWidth:"wide",parsePatterns:bD,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ko({matchPatterns:wD,defaultMatchWidth:"wide",parsePatterns:jD,defaultParseWidth:"any"}),day:ko({matchPatterns:ND,defaultMatchWidth:"wide",parsePatterns:_D,defaultParseWidth:"any"}),dayPeriod:ko({matchPatterns:SD,defaultMatchWidth:"any",parsePatterns:kD,defaultParseWidth:"any"})},ED={code:"en-US",formatDistance:JT,formatLong:tD,formatRelative:sD,localize:uD,match:CD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function PD(e,t,r){const n=UT(),a=(r==null?void 0:r.locale)??n.locale??ED,i=2520,o=Qc(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,d;o>0?(c=Pt(t),d=Pt(e)):(c=Pt(e),d=Pt(t));const u=YT(d,c),m=(uv(d)-uv(c))/1e3,h=Math.round((u-m)/60);let b;if(h<2)return r!=null&&r.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):h===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",h,l);if(h<45)return a.formatDistance("xMinutes",h,l);if(h<90)return a.formatDistance("aboutXHours",1,l);if(h<dv){const w=Math.round(h/60);return a.formatDistance("aboutXHours",w,l)}else{if(h<i)return a.formatDistance("xDays",1,l);if(h<Rc){const w=Math.round(h/dv);return a.formatDistance("xDays",w,l)}else if(h<Rc*2)return b=Math.round(h/Rc),a.formatDistance("aboutXMonths",b,l)}if(b=KT(d,c),b<12){const w=Math.round(h/Rc);return a.formatDistance("xMonths",w,l)}else{const w=b%12,v=Math.trunc(b/12);return w<3?a.formatDistance("aboutXYears",v,l):w<9?a.formatDistance("overXYears",v,l):a.formatDistance("almostXYears",v+1,l)}}function AD(e,t){return PD(e,zT(e),t)}const RD=()=>{const{referralData:e}=MT(),{settings:t}=Te();return s.jsx(Ne,{headerTitle:"Referral Team",children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[s.jsxs("div",{className:"relative bg-gradient-to-br from-emerald-500 via-green-500 to-teal-600 pt-2 pb-4 px-2 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-white/5"}),s.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-white/10 rounded-full -translate-y-4 translate-x-4 blur-sm"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-14 h-14 bg-white/10 rounded-full translate-y-4 -translate-x-4 blur-sm"}),s.jsxs("div",{className:"relative z-10 max-w-sm mx-auto",children:[s.jsx("div",{className:"flex justify-center mb-2",children:s.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:s.jsx(Fp,{size:18,className:"text-white"})})}),s.jsx("h1",{className:"text-lg font-bold mb-1 text-center text-white",children:"Your Referral Team"}),s.jsx("p",{className:"text-green-100 text-center text-xs",children:"Members who joined through your referral! "})]})]}),s.jsxs("div",{className:"px-2 -mt-2 pb-4 space-y-2 max-w-sm mx-auto",children:[s.jsx(M,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm rounded-xl overflow-hidden",children:s.jsxs(U,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center shadow-md",children:s.jsx(qe,{size:12,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xs font-bold text-gray-800",children:"Team Statistics"}),s.jsx("p",{className:"text-gray-500 text-xs",children:"Your referral performance"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-2 text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-green-600 flex items-center justify-center gap-1",children:[s.jsx(ct,{size:14}),e.totalReferrals]}),s.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Team Members"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-2 text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-green-600 flex items-center justify-center gap-1",children:[s.jsx($s,{size:14}),e.currentLevel]}),s.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Your Level"})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 rounded-lg p-2 border border-emerald-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center shadow-md",children:s.jsx(Vl,{size:12,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-bold text-gray-800",children:"Total Commission"}),s.jsx("p",{className:"text-xs text-gray-600",children:"From referral activities"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-emerald-600",children:Y(e.totalCommissionEarned,t)}),s.jsx("div",{className:"text-xs text-emerald-600 font-medium",children:"Earned"})]})]})})]})}),s.jsx(M,{className:"border-0 shadow-lg bg-white/95 backdrop-blur-sm rounded-xl overflow-hidden",children:s.jsxs(U,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-md",children:s.jsx(ct,{size:12,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xs font-bold text-gray-800",children:"Team Members"}),s.jsxs("p",{className:"text-gray-500 text-xs",children:[e.totalReferrals," members in your team"]})]})]}),e.referredUsers.length>0?s.jsx("div",{className:"space-y-2",children:e.referredUsers.map(r=>{var n,a,i;return s.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-green-50/50 rounded-lg p-2 border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shadow-md",style:{background:`linear-gradient(135deg, ${((n=r.levelInfo)==null?void 0:n.color)||"#6b7280"}, ${((a=r.levelInfo)==null?void 0:a.color)||"#6b7280"}dd)`},children:s.jsx(ct,{size:12,className:"text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-gray-800 text-xs truncate",children:r.full_name}),s.jsxs("p",{className:"text-xs text-green-600 font-medium flex items-center gap-1 truncate",children:[s.jsx($s,{size:8}),"Level ",r.user_level," - ",((i=r.levelInfo)==null?void 0:i.name)||"Bronze Explorer"]}),s.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-0.5",children:s.jsxs("span",{className:"flex items-center gap-1 truncate",children:[s.jsx(Fi,{size:6}),"Joined ",AD(new Date(r.created_at),{addSuffix:!0})]})})]})]}),s.jsxs("div",{className:"text-right ml-2",children:[s.jsx("div",{className:"text-xs font-bold text-green-600",children:Y(r.available_balance,t)}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 font-medium",children:[s.jsx(mt,{size:6}),s.jsx("span",{children:"Balance"})]}),r.total_deposits>0&&s.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:["Deposits: ",Y(r.total_deposits,t)]})]})]})},r.id)})}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx(ct,{size:16,className:"text-gray-400"})}),s.jsx("h3",{className:"font-semibold text-gray-700 mb-1 text-xs",children:"No team members yet"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Start inviting friends to build your team and earn rewards!"}),s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-2 border border-green-100",children:s.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-700 font-medium text-xs",children:[s.jsx(Qr,{size:10}),s.jsx("span",{children:"Share your referral code to get started"})]})})]})]})})]})]})})},TD=()=>{const[e,t]=f.useState("all"),[r,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(0),[c,d]=f.useState(""),[u,m]=f.useState(0),{user:h}=Ze(),{settings:b}=Te();f.useEffect(()=>{h!=null&&h.id&&w()},[h==null?void 0:h.id]);const w=async()=>{try{i(!0);const{data:S,error:_}=await A.from("referral_commissions").select(`
          *,
          referred_user:users!referral_commissions_referred_user_id_fkey(full_name)
        `).eq("referrer_user_id",h==null?void 0:h.id).order("created_at",{ascending:!1});if(_){console.error("Error fetching commissions:",_);return}n(S||[]);const C=(S||[]).reduce(($,D)=>$+(D.commission_amount||0),0);l(C);const E=(S||[]).filter($=>{const D=new Date($.created_at),L=new Date;return D.getMonth()===L.getMonth()&&D.getFullYear()===L.getFullYear()}).reduce(($,D)=>$+Number(D.commission_amount),0);m(E)}catch(S){console.error("Error:",S)}finally{i(!1)}},v=S=>`${b.currencySymbol} ${Vi(S)}`,y=[{id:"all",label:"All"},{id:"deposit",label:"Deposit"}],g=r.filter(S=>{var E,$;const _=e==="all"||S.trigger_type===e,C=!c||(($=(E=S.referred_user)==null?void 0:E.full_name)==null?void 0:$.toLowerCase().includes(c.toLowerCase()))||S.trigger_type.toLowerCase().includes(c.toLowerCase());return _&&C}),p=S=>S==="completed"?s.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium",children:"Completed"}):S==="pending"?s.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:"Pending"}):null,x=S=>S==="deposit"?s.jsx(Qr,{className:"w-4 h-4 text-emerald-600"}):s.jsx(Qr,{className:"w-4 h-4 text-emerald-600"}),N=S=>{const _=S.trigger_type==="deposit"?"Deposit":"Commission";return`Level ${S.level} ${_} Commission`},j=S=>{var E;const _=((E=S.referred_user)==null?void 0:E.full_name)||"Unknown User",C=S.trigger_type==="deposit"?"deposit":"transaction";return`From ${_}'s ${C} of ${v(S.trigger_amount)}`},k=S=>{const _=new Date(S),E=Math.floor((new Date().getTime()-_.getTime())/(1e3*60*60));return E<1?"Just now":E<24?`${E} hour${E>1?"s":""} ago`:E<48?"1 day ago":`${Math.floor(E/24)} days ago`};return a?s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-500"})})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 p-3 pt-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-1 bg-white/20 rounded-lg backdrop-blur-sm",children:s.jsx(Vl,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white",children:"Commission History"})]})]})}),s.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 border border-white/30",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-emerald-100 text-xs",children:"Total Commission"}),s.jsx("p",{className:"text-white text-lg font-bold",children:v(o)})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-emerald-100 text-xs flex items-center",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),"This Month"]}),s.jsxs("p",{className:"text-green-200 text-sm font-semibold",children:["+",v(u)]})]})]})})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-3",children:[s.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-2 shadow-lg border border-emerald-100",children:s.jsx("div",{className:"flex space-x-1",children:y.map(S=>s.jsx(F,{variant:e===S.id?"default":"ghost",className:`flex-1 rounded-lg text-xs font-medium transition-all h-8 ${e===S.id?"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-md":"text-gray-600 hover:bg-emerald-50"}`,onClick:()=>t(S.id),children:S.label},S.id))})}),s.jsxs("div",{className:"relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{placeholder:"Search commissions...",value:c,onChange:S=>d(S.target.value),className:"pl-10 bg-white/90 backdrop-blur-sm border-emerald-200 focus:border-emerald-400 rounded-xl h-10"})]}),s.jsx("div",{className:"space-y-2",children:g.length===0?s.jsx("div",{className:"text-center py-6 text-gray-500",children:s.jsx("p",{className:"text-sm",children:"No commission records found"})}):g.map(S=>s.jsx(M,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-md rounded-xl overflow-hidden hover:shadow-lg transition-all hover:scale-[1.01]",children:s.jsx(U,{className:"p-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg border border-emerald-100",children:x(S.trigger_type)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:N(S)}),s.jsxs("span",{className:"font-bold text-sm text-emerald-600",children:["+",v(S.commission_amount)]})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:j(S)}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-1.5",children:[p(S.status),s.jsxs("span",{className:"text-xs text-emerald-600 bg-emerald-100 px-1.5 py-0.5 rounded-full",children:["Level ",S.level]}),s.jsxs("span",{className:"text-xs text-green-600 bg-green-100 px-1.5 py-0.5 rounded-full",children:[Vi(S.commission_percentage),"%"]})]}),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[s.jsx(_t,{className:"w-3 h-3 mr-1"}),k(S.created_at)]})]})]})]})})},S.id))}),g.length>10&&s.jsx("div",{className:"mt-4 text-center",children:s.jsx(F,{variant:"outline",className:"bg-white/80 backdrop-blur-sm border-emerald-200 hover:bg-emerald-50 rounded-xl px-6 text-emerald-700 font-medium text-sm h-9",children:"Load More Commissions"})})]})]})})},DD=()=>{const[e,t]=f.useState("all"),[r,n]=f.useState(""),[a,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(0),[u,m]=f.useState(0),{user:h}=Ze(),{settings:b}=Te();f.useEffect(()=>{h!=null&&h.id&&w()},[h==null?void 0:h.id]);const w=async()=>{try{l(!0);const{data:S,error:_}=await A.from("referral_commissions").select(`
          *,
          referred_user:users!referral_commissions_referred_user_id_fkey(full_name)
        `).eq("referrer_user_id",h==null?void 0:h.id).order("created_at",{ascending:!1});if(_){console.error("Error fetching commissions:",_);return}i(S||[]);const C=(S||[]).reduce(($,D)=>$+(D.commission_amount||0),0);d(C);const E=(S||[]).filter($=>{const D=new Date($.created_at),L=new Date;return D.getMonth()===L.getMonth()&&D.getFullYear()===L.getFullYear()}).reduce(($,D)=>$+Number(D.commission_amount),0);m(E)}catch(S){console.error("Error:",S)}finally{l(!1)}},v=S=>`${b.currencySymbol} ${Vi(S)}`,y=[{id:"all",label:"All"},{id:"deposit",label:"Deposit"}],g=a.filter(S=>{var E,$;const _=e==="all"||S.trigger_type===e,C=!r||(($=(E=S.referred_user)==null?void 0:E.full_name)==null?void 0:$.toLowerCase().includes(r.toLowerCase()))||S.trigger_type.toLowerCase().includes(r.toLowerCase());return _&&C}),p=S=>S==="completed"?s.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium",children:"Completed"}):S==="pending"?s.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:"Pending"}):null,x=S=>S==="deposit"?s.jsx(Qr,{className:"w-4 h-4 text-emerald-600"}):s.jsx(Qr,{className:"w-4 h-4 text-emerald-600"}),N=S=>{const _=S.trigger_type==="deposit"?"Deposit":"Commission";return`Level ${S.level} ${_} Commission`},j=S=>{var E;const _=((E=S.referred_user)==null?void 0:E.full_name)||"Unknown User",C=S.trigger_type==="deposit"?"deposit":"transaction";return`From ${_}'s ${C} of ${v(S.trigger_amount)}`},k=S=>{const _=new Date(S),E=Math.floor((new Date().getTime()-_.getTime())/(1e3*60*60));return E<1?"Just now":E<24?`${E} hour${E>1?"s":""} ago`:E<48?"1 day ago":`${Math.floor(E/24)} days ago`};return o?s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"})})}):s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-rose-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 p-3 pt-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/commission",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-1 bg-white/20 rounded-lg backdrop-blur-sm",children:s.jsx(Vl,{className:"w-4 h-4 text-white"})}),s.jsx("h1",{className:"text-lg font-bold text-white",children:"Commission History"})]})]})}),s.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-3 border border-white/30",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-100 text-xs",children:"Total Commission"}),s.jsx("p",{className:"text-white text-lg font-bold",children:v(c)})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-purple-100 text-xs flex items-center",children:[s.jsx(qe,{className:"w-3 h-3 mr-1"}),"This Month"]}),s.jsxs("p",{className:"text-pink-200 text-sm font-semibold",children:["+",v(u)]})]})]})})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-3",children:[s.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-2 shadow-lg border border-purple-100",children:s.jsx("div",{className:"flex space-x-1",children:y.map(S=>s.jsx(F,{variant:e===S.id?"default":"ghost",className:`flex-1 rounded-lg text-xs font-medium transition-all h-8 ${e===S.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md":"text-gray-600 hover:bg-purple-50"}`,onClick:()=>t(S.id),children:S.label},S.id))})}),s.jsxs("div",{className:"relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{placeholder:"Search commissions...",value:r,onChange:S=>n(S.target.value),className:"pl-10 bg-white/90 backdrop-blur-sm border-purple-200 focus:border-purple-400 rounded-xl h-10"})]}),s.jsx("div",{className:"space-y-2",children:g.length===0?s.jsx("div",{className:"text-center py-6 text-gray-500",children:s.jsx("p",{className:"text-sm",children:"No commission records found"})}):g.map(S=>s.jsx(M,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-md rounded-xl overflow-hidden hover:shadow-lg transition-all hover:scale-[1.01]",children:s.jsx(U,{className:"p-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-purple-50 rounded-lg border border-purple-100",children:x(S.trigger_type)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:N(S)}),s.jsxs("span",{className:"font-bold text-sm text-emerald-600",children:["+",v(S.commission_amount)]})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:j(S)}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-1.5",children:[p(S.status),s.jsxs("span",{className:"text-xs text-purple-600 bg-purple-100 px-1.5 py-0.5 rounded-full",children:["Level ",S.level]}),s.jsxs("span",{className:"text-xs text-pink-600 bg-pink-100 px-1.5 py-0.5 rounded-full",children:[Vi(S.commission_percentage),"%"]})]}),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[s.jsx(_t,{className:"w-3 h-3 mr-1"}),k(S.created_at)]})]})]})]})})},S.id))}),g.length>10&&s.jsx("div",{className:"mt-4 text-center",children:s.jsx(F,{variant:"outline",className:"bg-white/80 backdrop-blur-sm border-purple-200 hover:bg-purple-50 rounded-xl px-6 text-purple-700 font-medium text-sm h-9",children:"Load More Commissions"})})]})]})})},ID=()=>{const{user:e}=Ze(),{settings:t}=Te(),[r,n]=f.useState([]),[a,i]=f.useState(!1),o=async()=>{if(e){i(!0);try{console.log("Fetching all notifications for user:",e.id);const{data:v,error:y}=await A.from("notifications").select("*").eq("is_broadcast",!0).order("created_at",{ascending:!1});y&&console.error("Error fetching admin notifications:",y);const{data:g,error:p}=await A.from("notifications_user").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});p&&console.error("Error fetching user notifications:",p),console.log("Admin notifications:",v),console.log("User notifications:",g);const x=(v||[]).map(_=>_.id);let N=[];if(x.length>0){const{data:_,error:C}=await A.from("user_notification_reads").select("notification_id").eq("user_id",e.id).in("notification_id",x);!C&&_&&(N=_.map(E=>E.notification_id))}const j=(v||[]).map(_=>({..._,source:"admin",user_has_read:N.includes(_.id)})),k=(g||[]).map(_=>({..._,source:"user"})),S=[...j,...k].sort((_,C)=>new Date(C.created_at).getTime()-new Date(_.created_at).getTime());console.log("Combined notifications:",S),n(S)}catch(v){console.error("Error fetching notifications:",v)}finally{i(!1)}}};f.useEffect(()=>{o()},[e]);const l=async v=>{if(e)try{if(v.source==="admin"){const{error:y}=await A.rpc("mark_notification_read_with_user",{p_notification_id:v.id,p_user_id:e.id});if(y)throw y}else{const{error:y}=await A.rpc("mark_user_notification_read_with_user",{p_notification_id:v.id,p_user_id:e.id});if(y)throw y}n(r.map(y=>y.id===v.id?v.source==="admin"?{...y,user_has_read:!0}:{...y,is_read:!0}:y))}catch(y){console.error("Error marking notification as read:",y)}},c=async v=>{if(e)try{if(v.source==="admin")await l(v);else{const{error:y}=await A.rpc("clear_user_notification_with_user",{p_notification_id:v.id,p_user_id:e.id});if(y)throw y}n(r.filter(y=>y.id!==v.id))}catch(y){console.error("Error clearing notification:",y)}},d=v=>{switch(v){case"deposit":return s.jsx(Qr,{className:"w-4 h-4"});case"withdrawal":return s.jsx(_P,{className:"w-4 h-4"});case"investment":return s.jsx(sr,{className:"w-4 h-4"});case"security":return s.jsx(Fw,{className:"w-4 h-4"});case"admin":case"system":return s.jsx($s,{className:"w-4 h-4"});default:return s.jsx(Pd,{className:"w-4 h-4"})}},u=v=>{switch(v){case"deposit":return{bg:"bg-gradient-to-br from-green-50 to-emerald-50",border:"border-l-green-500",icon:"text-green-600 bg-green-100",glow:"shadow-green-100"};case"withdrawal":return{bg:"bg-gradient-to-br from-green-50 to-teal-50",border:"border-l-teal-500",icon:"text-teal-600 bg-teal-100",glow:"shadow-teal-100"};case"investment":return{bg:"bg-gradient-to-br from-emerald-50 to-green-50",border:"border-l-emerald-500",icon:"text-emerald-600 bg-emerald-100",glow:"shadow-emerald-100"};case"security":return{bg:"bg-gradient-to-br from-amber-50 to-yellow-50",border:"border-l-amber-500",icon:"text-amber-600 bg-amber-100",glow:"shadow-amber-100"};case"admin":case"system":return{bg:"bg-gradient-to-br from-green-50 to-lime-50",border:"border-l-green-600",icon:"text-green-700 bg-green-200",glow:"shadow-green-100"};default:return{bg:"bg-gradient-to-br from-green-50 to-emerald-50",border:"border-l-green-400",icon:"text-green-600 bg-green-100",glow:"shadow-green-100"}}},m=v=>{const y=new Date(v),p=new Date().getTime()-y.getTime(),x=p/(1e3*60*60),N=p/(1e3*60*60*24);return x<1?`${Math.floor(p/6e4)}m ago`:x<24?`${Math.floor(x)}h ago`:N<7?`${Math.floor(N)}d ago`:y.toLocaleDateString()},h=v=>v.source==="admin"?!v.user_has_read:!v.is_read,b=v=>v.replace(/Rs\.\s?/g,`${t.currencySymbol} `),w=r.filter(h).length;return s.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 min-h-screen max-w-sm mx-auto shadow-lg relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-gradient-to-br from-green-200/20 to-emerald-300/20 rounded-full blur-2xl"}),s.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-gradient-to-br from-teal-200/20 to-green-300/20 rounded-full blur-2xl"})]}),s.jsxs("div",{className:"relative bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white sticky top-0 z-10 shadow-lg",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/10"}),s.jsxs("div",{className:"relative p-2 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(me,{to:"/",className:"p-1 hover:bg-white/20 rounded-lg transition-all duration-200",children:s.jsx(Be,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-sm font-bold flex items-center",children:["Notifications",s.jsx(fu,{className:"w-3 h-3 ml-1 text-yellow-300"})]}),w>0&&s.jsxs("p",{className:"text-xs text-green-100 font-medium flex items-center",children:[s.jsx(vP,{className:"w-2 h-2 mr-1"}),w," unread"]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"bg-white/20 backdrop-blur-md p-2 rounded-lg border border-white/30",children:s.jsx(Pn,{className:"w-4 h-4"})}),w>0&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center font-bold animate-pulse",children:w>9?"9+":w})]})]}),s.jsxs("div",{className:"flex items-center justify-between bg-white/10 backdrop-blur-md rounded-lg p-2 border border-white/20",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-bold",children:r.length}),s.jsx("div",{className:"text-xs text-green-100",children:"Total"})]}),s.jsx("div",{className:"w-px h-4 bg-white/30"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-bold text-yellow-300",children:w}),s.jsx("div",{className:"text-xs text-green-100",children:"Unread"})]}),s.jsx("div",{className:"w-px h-4 bg-white/30"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-bold",children:r.filter(v=>v.source==="admin").length}),s.jsx("div",{className:"text-xs text-green-100",children:"Admin"})]})]})]})]}),s.jsx("div",{className:"relative p-2",children:a?s.jsx("div",{className:"space-y-2",children:[1,2,3].map(v=>s.jsxs(M,{className:"border-0 shadow-md animate-pulse overflow-hidden bg-white/80",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-green-200 via-emerald-300 to-green-200"}),s.jsx(U,{className:"p-2",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-200 rounded-lg"}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("div",{className:"h-3 bg-green-200 rounded w-3/4"}),s.jsx("div",{className:"h-2 bg-green-100 rounded w-1/2"})]})]})})]},v))}):r.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsxs("div",{className:"bg-white/90 backdrop-blur-lg rounded-xl p-6 shadow-lg border border-white/50",children:[s.jsx("div",{className:"bg-gradient-to-br from-green-100 to-emerald-200 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(Pn,{className:"w-6 h-6 text-green-600"})}),s.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2",children:"All caught up! "}),s.jsx("p",{className:"text-gray-500 mb-3 text-xs",children:"You have no new notifications"}),s.jsxs(F,{className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-4 py-1 rounded-lg shadow-md text-xs",children:[s.jsx(so,{className:"w-3 h-3 mr-1"}),"Settings"]})]})}):s.jsx("div",{className:"space-y-2",children:r.map((v,y)=>{const g=u(v.type),p=h(v);return s.jsxs(M,{className:`border-l-4 cursor-pointer transition-all duration-300 hover:shadow-lg group border-0 shadow-md overflow-hidden bg-white/90 backdrop-blur-sm transform hover:scale-[1.01] ${g.border} ${p?`shadow-lg ${g.glow}`:"opacity-95"}`,onClick:()=>l(v),children:[s.jsx("div",{className:`h-1 ${p?"bg-gradient-to-r from-green-400 to-emerald-400":"bg-gray-200"}`}),s.jsx(U,{className:`p-2 ${g.bg} relative`,children:s.jsxs("div",{className:"flex items-start space-x-2 relative z-10",children:[s.jsxs("div",{className:"flex-shrink-0 relative",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shadow-sm ${g.icon}`,children:d(v.type)}),p&&s.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-1",children:[s.jsx("h4",{className:`font-semibold text-xs leading-tight ${p?"text-gray-900":"text-gray-700"}`,children:v.title}),s.jsxs("div",{className:"flex items-center space-x-1 ml-1",children:[v.source==="admin"&&s.jsxs(ke,{className:"text-xs px-1 py-0 bg-green-100 text-green-700 border-green-200 rounded-full",children:[s.jsx($s,{className:"w-2 h-2 mr-0.5"}),"Admin"]}),p&&s.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})]})]}),s.jsx("p",{className:"text-gray-600 text-xs leading-relaxed mb-2",children:b(v.message)}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:m(v.created_at)}),s.jsx("button",{onClick:x=>{x.stopPropagation(),c(v)},className:"opacity-0 group-hover:opacity-100 p-0.5 hover:bg-white/80 rounded-full transition-all duration-200",children:s.jsx(Hl,{className:"w-2 h-2 text-gray-400 hover:text-red-500"})})]})]})]})})]},v.id)})})})]})},Zn=class Zn{static getInstance(){return Zn.instance||(Zn.instance=new Zn),Zn.instance}async getGameSettings(){const{data:t,error:r}=await A.from("system_settings").select("setting_key, setting_value").in("setting_key",["game_enabled","game_cost_per_play","game_min_prize","game_max_prize","game_win_rate","game_daily_play_limit","game_min_balance_required"]);if(r)throw r;const n={};return t==null||t.forEach(a=>{const i=a.setting_key;let o=a.setting_value;i==="game_enabled"?o=o==="true":o=parseFloat(o||"0"),n[i]=o}),n}async getUserDailyStats(t){const r=new Date().toISOString().split("T")[0],{data:n,error:a}=await A.from("game_plays").select("*").eq("user_id",t).eq("play_date",r);if(a)throw a;const i=n||[],o=await this.getGameSettings();return{today_plays:i.length,today_wins:i.filter(l=>l.is_winner).length,today_total_paid:i.reduce((l,c)=>l+Number(c.amount_paid),0),today_total_won:i.reduce((l,c)=>l+Number(c.prize_won),0),daily_limit_reached:i.length>=o.game_daily_play_limit}}async canUserPlay(t){try{const[r,n,a]=await Promise.all([this.getGameSettings(),this.getUserDailyStats(t),A.from("users").select("available_balance").eq("id",t).single()]);return r.game_enabled?n.daily_limit_reached?{canPlay:!1,reason:`Daily limit of ${r.game_daily_play_limit} plays reached`}:a.error?{canPlay:!1,reason:"Unable to check balance"}:a.data.available_balance<r.game_cost_per_play?{canPlay:!1,reason:"Insufficient balance"}:{canPlay:!0}:{canPlay:!1,reason:"Game is currently disabled"}}catch(r){return console.error("Error checking if user can play:",r),{canPlay:!1,reason:"Error checking game eligibility"}}}async playGame(t){try{const r=await this.canUserPlay(t);if(!r.canPlay)return{success:!1,isWin:!1,prize:0,message:r.reason||"Cannot play game"};const n=await this.getGameSettings(),a=Math.random()*100<n.game_win_rate,i=a?Math.floor(Math.random()*(n.game_max_prize-n.game_min_prize+1))+n.game_min_prize:0,{data:o,error:l}=await A.rpc("record_game_play",{p_user_id:t,p_amount_paid:n.game_cost_per_play,p_prize_won:i,p_is_winner:a});if(l)throw l;return{success:!0,isWin:a,prize:i,message:a?`Congratulations! You won Rs.${i}!`:"Better luck next time!"}}catch(r){return console.error("Error playing game:",r),{success:!1,isWin:!1,prize:0,message:"Error processing game play"}}}async getUserGameHistory(t,r=10){const{data:n,error:a}=await A.from("game_plays").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(r);if(a)throw a;return n||[]}async getGameStatsForAdmin(){const t=new Date().toISOString().split("T")[0],{data:r,error:n}=await A.from("game_plays").select("*").eq("play_date",t);if(n)throw n;const a=r||[],i=a.length,o=a.filter(d=>d.is_winner).length,l=a.reduce((d,u)=>d+Number(u.amount_paid),0),c=a.reduce((d,u)=>d+Number(u.prize_won),0);return{today_total_plays:i,today_total_wins:o,today_win_rate:i>0?(o/i*100).toFixed(2):0,today_total_paid:l,today_total_won:c,today_profit:l-c}}};vs(Zn,"instance");let vf=Zn;const el=vf.getInstance(),OD=()=>{const{user:e,refreshUser:t}=Ze(),{settings:r}=Te(),[n,a]=f.useState(null),[i,o]=f.useState(null),[l,c]=f.useState(!1),[d,u]=f.useState(null),[m,h]=f.useState(!1),[b,w]=f.useState(0);f.useEffect(()=>{e&&v()},[e]);const v=async()=>{try{const[N,j]=await Promise.all([el.getGameSettings(),el.getUserDailyStats(e.id)]);a(N),o(j)}catch(N){console.error("Error loading game data:",N),J.error("Failed to load game data")}},y=async()=>{if(!(!e||!n)){c(!0),h(!0),u(null);try{const N=await el.playGame(e.id);setTimeout(async()=>{N.success?(u(N.isWin?"win":"lose"),w(N.prize),J.success(N.message),await Promise.all([t(),v()])):J.error(N.message),h(!1),c(!1)},2e3)}catch(N){console.error("Error playing game:",N),J.error("Error playing game"),h(!1),c(!1)}}},g=()=>{u(null),w(0)},p=()=>!n||!i||!e?!1:n.game_enabled&&!i.daily_limit_reached&&e.available_balance>=n.game_cost_per_play,x=()=>n?l?"Playing...":n.game_enabled?i!=null&&i.daily_limit_reached?"Daily Limit Reached":!e||e.available_balance<n.game_cost_per_play?"Insufficient Balance":`Play (${Y(n.game_cost_per_play,r)})`:"Game Disabled":"Loading...";return s.jsx(Ne,{showHeader:!1,showBottomNav:!0,children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-emerald-50 via-green-50 to-teal-50",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 p-3 pt-6 pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(me,{to:"/",className:"mr-2 p-1 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-all",children:s.jsx(Be,{className:"w-4 h-4 text-white"})}),s.jsxs("h1",{className:"text-lg font-bold text-white",children:[Y((n==null?void 0:n.game_cost_per_play)||1,r)," Game"]})]}),s.jsxs("div",{className:"flex items-center bg-white/20 backdrop-blur-md rounded-full px-2 py-1 border border-white/30",children:[s.jsx(Nl,{className:"w-3 h-3 text-yellow-300 mr-1"}),s.jsx("span",{className:"text-white font-bold text-sm",children:Y((e==null?void 0:e.available_balance)||0,r)})]})]}),s.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-xl p-2 border border-white/30",children:[s.jsx("p",{className:"text-emerald-100 text-xs",children:"Current Balance"}),s.jsx("p",{className:"text-white text-lg font-bold",children:Y((e==null?void 0:e.available_balance)||0,r)})]})]}),s.jsxs("div",{className:"flex-1 p-3 space-y-3 mt-1",children:[(!(n!=null&&n.game_enabled)||(i==null?void 0:i.daily_limit_reached))&&s.jsx(M,{className:"border-0 shadow-lg bg-orange-50 border-orange-200 rounded-xl",children:s.jsxs(U,{className:"p-3 flex items-center space-x-2",children:[s.jsx(Fw,{className:"w-4 h-4 text-orange-600"}),s.jsx("div",{children:s.jsx("p",{className:"text-orange-800 font-medium text-sm",children:n!=null&&n.game_enabled?`Daily limit reached (${i==null?void 0:i.today_plays}/${n==null?void 0:n.game_daily_play_limit} plays)`:"Game is temporarily disabled"})})]})}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsxs(K,{className:"pb-2",children:[s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(xa,{className:"w-4 h-4 mr-2 text-emerald-600"}),"Spin to Win!"]}),s.jsxs("p",{className:"text-gray-600 text-xs",children:["Pay ",Y((n==null?void 0:n.game_cost_per_play)||1,r),", win up to ",Y((n==null?void 0:n.game_max_prize)||11,r),"!"]})]}),s.jsxs(U,{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`w-32 h-32 rounded-full bg-gradient-to-r from-emerald-400 via-green-500 to-teal-500 flex items-center justify-center shadow-2xl ${m?"animate-spin":""} transition-all duration-2000`,children:s.jsx("div",{className:"w-24 h-24 rounded-full bg-white flex items-center justify-center shadow-inner",children:d==="win"?s.jsxs("div",{className:"text-center animate-bounce",children:[s.jsx(nf,{className:"w-8 h-8 text-yellow-500 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-green-600",children:["+",Y(b,r)]}),s.jsx("div",{className:"text-xs text-green-600",children:"You Won!"})]}):d==="lose"?s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:""}),s.jsx("div",{className:"text-xs text-gray-500",children:"Try Again"})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(sr,{className:"w-8 h-8 text-emerald-500 mx-auto mb-1"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Ready"})]})})}),s.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-2",children:s.jsx("div",{className:"w-0 h-0 border-l-3 border-r-3 border-b-6 border-l-transparent border-r-transparent border-b-emerald-600"})})]})}),d&&!m&&s.jsx("div",{className:`text-center p-3 rounded-xl ${d==="win"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:d==="win"?s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-green-600 font-bold text-base",children:" Congratulations!"}),s.jsxs("div",{className:"text-green-700 text-sm",children:["You won ",Y(b,r),"!"]}),s.jsx("div",{className:"text-xs text-green-600",children:"Your balance has been updated."})]}):s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-red-600 font-bold text-base",children:"Better luck next time!"}),s.jsx("div",{className:"text-xs text-red-600",children:"Try again for a chance to win!"})]})}),s.jsxs("div",{className:"flex justify-center space-x-2",children:[s.jsx(F,{onClick:y,disabled:l||!p(),className:"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white px-4 py-2 rounded-xl shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:l?s.jsxs(s.Fragment,{children:[s.jsx(TP,{className:"w-3 h-3 mr-1 animate-spin"}),"Playing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(RP,{className:"w-3 h-3 mr-1"}),x()]})}),d&&!l&&s.jsx(F,{onClick:g,variant:"outline",className:"px-3 py-2 rounded-xl border-2 border-emerald-200 hover:bg-emerald-50 hover:border-emerald-400 text-sm",children:"Play Again"})]}),e&&e.available_balance<((n==null?void 0:n.game_cost_per_play)||1)&&s.jsxs("div",{className:"text-center bg-red-50 p-3 rounded-xl border border-red-200",children:[s.jsx("p",{className:"text-red-600 font-medium mb-2 text-sm",children:"Insufficient balance!"}),s.jsx(me,{to:"/deposit",children:s.jsxs(F,{className:"bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-xl text-sm",children:[s.jsx(gr,{className:"w-3 h-3 mr-1"}),"Add Money"]})})]})]})]}),s.jsxs(M,{className:"border-0 shadow-lg bg-white rounded-xl",children:[s.jsx(K,{className:"pb-2",children:s.jsxs(Q,{className:"text-base text-gray-800 flex items-center",children:[s.jsx(Qr,{className:"w-4 h-4 mr-2 text-emerald-600"}),"How to Play"]})}),s.jsxs(U,{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(ke,{className:"bg-emerald-100 text-emerald-700 rounded-full px-1.5 py-0.5 text-xs font-semibold",children:"1"}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Pay ",Y((n==null?void 0:n.game_cost_per_play)||1,r)," to spin the wheel"]})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(ke,{className:"bg-green-100 text-green-700 rounded-full px-1.5 py-0.5 text-xs font-semibold",children:"2"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Wait for the wheel to stop spinning"})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(ke,{className:"bg-teal-100 text-teal-700 rounded-full px-1.5 py-0.5 text-xs font-semibold",children:"3"}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Win ",Y((n==null?void 0:n.game_min_prize)||2,r),"-",Y((n==null?void 0:n.game_max_prize)||11,r)," instantly or try again!"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsx(M,{className:"border-0 shadow-lg bg-gradient-to-br from-emerald-500 to-green-600 text-white rounded-xl",children:s.jsxs(U,{className:"p-3 text-center",children:[s.jsx("div",{className:"text-lg font-bold",children:Y((e==null?void 0:e.available_balance)||0,r)}),s.jsx("div",{className:"text-xs opacity-90",children:"Balance"})]})}),s.jsx(M,{className:"border-0 shadow-lg bg-gradient-to-br from-green-500 to-teal-600 text-white rounded-xl",children:s.jsxs(U,{className:"p-3 text-center",children:[s.jsxs("div",{className:"text-lg font-bold",children:[(i==null?void 0:i.today_plays)||0,"/",(n==null?void 0:n.game_daily_play_limit)||50]}),s.jsx("div",{className:"text-xs opacity-90",children:"Today's Plays"})]})})]})]})]})})},LD=()=>{const e=br();return f.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx(Ne,{showHeader:!1,showBottomNav:!1,children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})})},MD=()=>{const{user:e,loading:t}=Ze();return f.useEffect(()=>{localStorage.getItem("adminUser")&&localStorage.removeItem("adminUser")},[]),t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):e?s.jsx(iw,{}):s.jsx(aw,{to:"/login",replace:!0})},FD=()=>{const[e,t]=f.useState(null),[r,n]=f.useState(!0);return f.useEffect(()=>{(localStorage.getItem("user")||localStorage.getItem("currentUser"))&&(localStorage.removeItem("user"),localStorage.removeItem("currentUser"))},[]),f.useEffect(()=>{(async()=>{try{const i=localStorage.getItem("adminUser");if(i){const o=JSON.parse(i);console.log("Found admin user in localStorage:",o);const{data:l,error:c}=await A.from("admin_users").select("*").eq("username",o.username).eq("is_active",!0).single();!c&&l?(console.log("Admin verified in database:",l),t(!0)):(console.log("Admin not found or inactive in database"),localStorage.removeItem("adminUser"),t(!1))}else console.log("No admin user found in localStorage"),t(!1)}catch(i){console.error("Error checking admin auth:",i),localStorage.removeItem("adminUser"),t(!1)}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):e?s.jsx(iw,{}):s.jsx(aw,{to:"/admin/login",replace:!0})},$D=()=>{const e=Oe(),[t,r]=f.useState({username:"",password:""}),[n,a]=f.useState(!1),i=l=>{r({...t,[l.target.name]:l.target.value})},o=async l=>{l.preventDefault(),a(!0);try{const{data:c,error:d}=await A.from("admin_users").select("*").eq("username",t.username).eq("password",t.password).eq("is_active",!0).single();if(d||!c){console.error("Admin login error:",d),J.error("Invalid username or password"),a(!1);return}localStorage.setItem("adminUser",JSON.stringify({id:c.id,username:c.username,full_name:c.full_name,email:c.email,isAdmin:!0})),J.success("Login successful! Welcome to admin panel"),e("/admin/dashboard")}catch(c){console.error("Login error:",c),J.error("Login failed. Please try again.")}finally{a(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center p-4",children:s.jsxs(M,{className:"w-full max-w-md shadow-2xl",children:[s.jsxs(K,{className:"text-center pb-2",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-emerald-500 to-green-500 rounded-full flex items-center justify-center mb-4",children:s.jsx(Ht,{className:"w-8 h-8 text-white"})}),s.jsx(Q,{className:"text-2xl font-bold text-gray-800",children:"Admin Login"}),s.jsx("p",{className:"text-gray-600",children:"Enter your credentials to access admin panel"})]}),s.jsxs(U,{children:[s.jsxs("form",{onSubmit:o,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(V,{htmlFor:"username",className:"text-sm font-medium text-gray-700",children:"Username"}),s.jsxs("div",{className:"relative",children:[s.jsx(jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(H,{id:"username",name:"username",type:"text",value:t.username,onChange:i,className:"pl-10 h-12 border-2 border-gray-200 focus:border-emerald-500 rounded-lg",placeholder:"Enter your username",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(V,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ad,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(H,{id:"password",name:"password",type:"password",value:t.password,onChange:i,className:"pl-10 h-12 border-2 border-gray-200 focus:border-emerald-500 rounded-lg",placeholder:"Enter your password",required:!0})]})]}),s.jsx(F,{type:"submit",disabled:n,className:"w-full h-12 bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white font-semibold rounded-lg transition-all duration-200 transform hover:scale-105",children:n?"Signing in...":"Sign In to Admin Panel"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:"Only authorized administrators can access this panel"})})]})]})})};var hx="Dialog",[P1,A1]=ps(hx),[UD,Zr]=P1(hx),R1=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=f.useRef(null),c=f.useRef(null),[d=!1,u]=Ln({prop:n,defaultProp:a,onChange:i});return s.jsx(UD,{scope:t,triggerRef:l,contentRef:c,contentId:Ds(),titleId:Ds(),descriptionId:Ds(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(m=>!m),[u]),modal:o,children:r})};R1.displayName=hx;var T1="DialogTrigger",D1=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zr(T1,r),i=Re(t,a.triggerRef);return s.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":px(a.open),...n,ref:i,onClick:pe(e.onClick,a.onOpenToggle)})});D1.displayName=T1;var mx="DialogPortal",[zD,I1]=P1(mx,{forceMount:void 0}),O1=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Zr(mx,t);return s.jsx(zD,{scope:t,forceMount:r,children:f.Children.map(n,o=>s.jsx(Or,{present:r||i.open,children:s.jsx(ju,{asChild:!0,container:a,children:o})}))})};O1.displayName=mx;var Fd="DialogOverlay",L1=f.forwardRef((e,t)=>{const r=I1(Fd,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Zr(Fd,e.__scopeDialog);return i.modal?s.jsx(Or,{present:n||i.open,children:s.jsx(BD,{...a,ref:t})}):null});L1.displayName=Fd;var BD=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zr(Fd,r);return s.jsx(_u,{as:Rn,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(xe.div,{"data-state":px(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),_a="DialogContent",M1=f.forwardRef((e,t)=>{const r=I1(_a,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Zr(_a,e.__scopeDialog);return s.jsx(Or,{present:n||i.open,children:i.modal?s.jsx(WD,{...a,ref:t}):s.jsx(qD,{...a,ref:t})})});M1.displayName=_a;var WD=f.forwardRef((e,t)=>{const r=Zr(_a,e.__scopeDialog),n=f.useRef(null),a=Re(t,r.contentRef,n);return f.useEffect(()=>{const i=n.current;if(i)return Xp(i)},[]),s.jsx(F1,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:pe(e.onFocusOutside,i=>i.preventDefault())})}),qD=f.forwardRef((e,t)=>{const r=Zr(_a,e.__scopeDialog),n=f.useRef(!1),a=f.useRef(!1);return s.jsx(F1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),F1=f.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Zr(_a,r),c=f.useRef(null),d=Re(t,c);return zp(),s.jsxs(s.Fragment,{children:[s.jsx(gu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(xu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":px(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(HD,{titleId:l.titleId}),s.jsx(KD,{contentRef:c,descriptionId:l.descriptionId})]})]})}),fx="DialogTitle",$1=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zr(fx,r);return s.jsx(xe.h2,{id:a.titleId,...n,ref:t})});$1.displayName=fx;var U1="DialogDescription",z1=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zr(U1,r);return s.jsx(xe.p,{id:a.descriptionId,...n,ref:t})});z1.displayName=U1;var B1="DialogClose",W1=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Zr(B1,r);return s.jsx(xe.button,{type:"button",...n,ref:t,onClick:pe(e.onClick,()=>a.onOpenChange(!1))})});W1.displayName=B1;function px(e){return e?"open":"closed"}var q1="DialogTitleWarning",[VD,V1]=LP(q1,{contentName:_a,titleName:fx,docsSlug:"dialog"}),HD=({titleId:e})=>{const t=V1(q1),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},GD="DialogDescriptionWarning",KD=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${V1(GD).contentName}}.`;return f.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},H1=R1,G1=D1,K1=O1,xx=L1,gx=M1,vx=$1,yx=z1,bx=W1;const YD=H1,QD=G1,JD=K1,Y1=f.forwardRef(({className:e,...t},r)=>s.jsx(xx,{className:ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Y1.displayName=xx.displayName;const XD=pu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Q1=f.forwardRef(({side:e="right",className:t,children:r,...n},a)=>s.jsxs(JD,{children:[s.jsx(Y1,{}),s.jsxs(gx,{ref:a,className:ve(XD({side:e}),t),...n,children:[r,s.jsxs(bx,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(Hl,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Q1.displayName=gx.displayName;const ZD=f.forwardRef(({className:e,...t},r)=>s.jsx(vx,{ref:r,className:ve("text-lg font-semibold text-foreground",e),...t}));ZD.displayName=vx.displayName;const eI=f.forwardRef(({className:e,...t},r)=>s.jsx(yx,{ref:r,className:ve("text-sm text-muted-foreground",e),...t}));eI.displayName=yx.displayName;const be=({children:e})=>{const t=br(),r=Oe(),n=Gl(),a=()=>{const w=t.pathname,v=[];return w.includes("/admin/deposits")&&v.push("deposits"),w.includes("/admin/withdrawals")&&v.push("withdrawals"),v},[i,o]=f.useState(a()),[l,c]=f.useState(!1),d=()=>{localStorage.removeItem("adminToken"),r("/admin/login")},u=w=>t.pathname===w||t.pathname.startsWith(w+"/"),m=w=>{o(v=>v.includes(w)?v.filter(y=>y!==w):[...v,w])},h=[{icon:CP,label:"Dashboard",path:"/admin/dashboard"},{icon:ct,label:"Users",path:"/admin/users"},{icon:Rt,label:"Deposits",path:"/admin/deposits",subItems:[{label:"All Deposits",path:"/admin/deposits/all"},{label:"Pending",path:"/admin/deposits/pending"},{label:"Approved",path:"/admin/deposits/approved"},{label:"Rejected",path:"/admin/deposits/rejected"}]},{icon:S0,label:"Withdrawals",path:"/admin/withdrawals",subItems:[{label:"All Withdrawals",path:"/admin/withdrawals/all"},{label:"Pending",path:"/admin/withdrawals/pending"},{label:"Approved",path:"/admin/withdrawals/approved"},{label:"Rejected",path:"/admin/withdrawals/rejected"}]},{icon:S0,label:"Transactions",path:"/admin/transactions"},{icon:qe,label:"Investment Plans",path:"/admin/investment-plans"},{icon:hs,label:"User Level Settings",path:"/admin/user-level-settings"},{icon:xa,label:"Game Settings",path:"/admin/settings/game"},{icon:Pn,label:"Notifications",path:"/admin/notifications"},{icon:OP,label:"Referral Settings",path:"/admin/referral-settings"},{icon:kP,label:"General Settings",path:"/admin/general-settings"},{icon:so,label:"Settings",path:"/admin/settings"}],b=()=>s.jsxs("div",{className:"h-full flex flex-col bg-white",children:[s.jsx("div",{className:"p-4 lg:p-6 border-b",children:s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Admin Panel"})}),s.jsx("nav",{className:"flex-1 overflow-y-auto p-2 lg:p-4",children:h.map(w=>{const v=w.icon,y=w.subItems&&w.subItems.length>0,g=i.includes(w.label.toLowerCase()),p=u(w.path);return s.jsxs("div",{className:"mb-1",children:[s.jsxs("div",{className:`flex items-center px-3 py-2.5 text-sm font-medium transition-colors cursor-pointer rounded-lg group ${p?"bg-emerald-50 text-emerald-700 border-l-4 border-emerald-500":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,onClick:()=>{y?m(w.label.toLowerCase()):(r(w.path),n&&c(!1))},children:[s.jsx(v,{className:"w-5 h-5 mr-3 flex-shrink-0"}),s.jsx("span",{className:"flex-1",children:w.label}),y&&(g?s.jsx(Ip,{className:"w-4 h-4 flex-shrink-0"}):s.jsx(Cs,{className:"w-4 h-4 flex-shrink-0"}))]}),y&&g&&s.jsx("div",{className:"ml-4 mt-1 space-y-1",children:w.subItems.map(x=>s.jsx(me,{to:x.path,onClick:()=>n&&c(!1),className:`block px-8 py-2 text-sm transition-colors rounded-lg ${t.pathname===x.path?"bg-emerald-50 text-emerald-700 border-l-4 border-emerald-500":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}`,children:x.label},x.path))})]},w.path)})}),s.jsx("div",{className:"p-4 border-t bg-white",children:s.jsxs(F,{onClick:d,variant:"outline",className:"w-full flex items-center justify-center",children:[s.jsx(rf,{className:"w-4 h-4 mr-2"}),"Logout"]})})]});return n?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"bg-white shadow-sm border-b px-4 py-3 flex items-center justify-between sticky top-0 z-40",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(YD,{open:l,onOpenChange:c,children:[s.jsx(QD,{asChild:!0,children:s.jsx(F,{variant:"ghost",size:"sm",className:"p-2",children:s.jsx(PP,{className:"w-5 h-5"})})}),s.jsx(Q1,{side:"left",className:"p-0 w-80",children:s.jsx(b,{})})]}),s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Admin Panel"})]}),s.jsx(F,{onClick:d,variant:"ghost",size:"sm",className:"p-2",children:s.jsx(rf,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"w-full",children:e})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx("div",{className:"w-64 bg-white shadow-lg",children:s.jsx(b,{})}),s.jsx("div",{className:"flex-1 overflow-auto",children:e})]})},ea=class ea{constructor(){vs(this,"cache",new Map);vs(this,"CACHE_DURATION",1e4)}static getInstance(){return ea.instance||(ea.instance=new ea),ea.instance}isValidCache(t){const r=this.cache.get(t);return r?Date.now()-r.timestamp<this.CACHE_DURATION:!1}async getDashboardStats(){var j,k,S,_,C,E,$,D,L,W,ae,ee,X,T,q;const t="admin_dashboard";if(this.isValidCache(t))return this.cache.get(t).data;const r=new Date().toISOString().split("T")[0],[n,a,i,o,l,c,d,u,m,h]=await Promise.all([A.from("deposits").select("amount").gte("created_at",r),A.from("withdrawals").select("amount").gte("created_at",r),A.from("users").select("id").gte("created_at",r),A.from("users").select("*",{count:"exact",head:!0}),A.from("deposits").select("amount").eq("status","pending"),A.from("withdrawals").select("amount").eq("status","pending"),A.from("deposits").select("amount"),A.from("withdrawals").select("amount"),A.from("deposits").select("id, amount, status, users!deposits_user_id_fkey(full_name)").order("created_at",{ascending:!1}).limit(3),A.from("withdrawals").select("id, amount, status, users!withdrawals_user_id_fkey(full_name)").order("created_at",{ascending:!1}).limit(3)]),b=((j=n.data)==null?void 0:j.reduce((I,B)=>I+Number(B.amount||0),0))||0,w=((k=a.data)==null?void 0:k.reduce((I,B)=>I+Number(B.amount||0),0))||0,v=((S=l.data)==null?void 0:S.reduce((I,B)=>I+Number(B.amount||0),0))||0,y=((_=c.data)==null?void 0:_.reduce((I,B)=>I+Number(B.amount||0),0))||0,g=((C=d.data)==null?void 0:C.reduce((I,B)=>I+Number(B.amount||0),0))||0,p=((E=u.data)==null?void 0:E.reduce((I,B)=>I+Number(B.amount||0),0))||0,x=[...(($=m.data)==null?void 0:$.map(I=>{var B;return{id:I.id,user:((B=I.users)==null?void 0:B.full_name)||"Unknown",type:"Deposit",amount:`Rs. ${Number(I.amount||0).toLocaleString()}`,status:I.status.charAt(0).toUpperCase()+I.status.slice(1)}}))||[],...((D=h.data)==null?void 0:D.map(I=>{var B;return{id:I.id,user:((B=I.users)==null?void 0:B.full_name)||"Unknown",type:"Withdraw",amount:`Rs. ${Number(I.amount||0).toLocaleString()}`,status:I.status.charAt(0).toUpperCase()+I.status.slice(1)}}))||[]].slice(0,5),N={todayDeposits:{amount:b,count:((L=n.data)==null?void 0:L.length)||0,change:"0%"},todayWithdrawals:{amount:w,count:((W=a.data)==null?void 0:W.length)||0,change:"0%"},todayNewUsers:{count:((ae=i.data)==null?void 0:ae.length)||0,change:"0%"},totalUsers:{count:o.count||0,change:"0%"},todayActivePlans:{count:0,change:"0%"},activeUsersWithPlans:{count:0,change:"0%"},pendingDeposits:{amount:v,count:((ee=l.data)==null?void 0:ee.length)||0,change:"0%"},pendingWithdrawals:{amount:y,count:((X=c.data)==null?void 0:X.length)||0,change:"0%"},totalDeposits:{amount:g,count:((T=d.data)==null?void 0:T.length)||0,change:"0%"},totalWithdrawals:{amount:p,count:((q=u.data)==null?void 0:q.length)||0,change:"0%"},totalDepositCharges:{amount:0,change:"0%"},totalWithdrawalCharges:{amount:0,change:"0%"},recentTransactions:x};return this.cache.set(t,{data:N,timestamp:Date.now()}),N}clearCache(){this.cache.clear()}};vs(ea,"instance");let yf=ea;const tI=yf.getInstance(),rI=()=>tx({queryKey:["adminDashboard"],queryFn:()=>tI.getDashboardStats(),staleTime:1e4,cacheTime:3e4}),sI=()=>{var d,u,m,h,b,w,v,y,g,p,x,N,j,k,S,_,C,E,$,D,L,W,ae,ee,X,T,q,I,B,ne;const{data:e,isLoading:t,error:r}=rI(),{settings:n,loading:a}=Te(),i=({stat:ye,isToday:de=!1})=>{var he;const De=ye.icon,Ke=(he=ye.change)==null?void 0:he.includes("+");return s.jsxs(M,{children:[s.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Q,{className:"text-sm font-medium text-gray-600",children:ye.title}),s.jsx(De,{className:`w-4 h-4 ${de?"text-blue-500":"text-gray-400"}`})]}),s.jsxs(U,{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ye.value}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[Ke?s.jsx(qe,{className:"w-3 h-3 text-green-500"}):s.jsx(Sl,{className:"w-3 h-3 text-red-500"}),s.jsx("span",{className:Ke?"text-green-600":"text-red-600",children:ye.change}),s.jsx("span",{className:"text-gray-500",children:"vs yesterday"})]})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ye.description})]})]})};if(t||a)return s.jsx(be,{children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"px-2 sm:px-4 lg:px-6 py-4",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Welcome to the admin dashboard"})]}),s.jsxs("div",{className:"px-2 sm:px-4 lg:px-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4",children:"Today's Activity"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[1,2,3,4].map(ye=>s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Ct,{className:"h-4 w-32"})}),s.jsxs(U,{children:[s.jsx(Ct,{className:"h-8 w-24 mb-2"}),s.jsx(Ct,{className:"h-4 w-20"})]})]},ye))})]})]})});if(r)return s.jsx(be,{children:s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 py-4",children:s.jsx("div",{className:"text-center text-red-600",children:s.jsx("p",{children:"Error loading dashboard data. Please try again."})})})});const o=[{title:"Today's Deposits",value:Y((e==null?void 0:e.todayDeposits.amount)||0,n),icon:pa,change:(e==null?void 0:e.todayDeposits.change)||"+0%",changeType:(d=e==null?void 0:e.todayDeposits.change)!=null&&d.includes("+")?"increase":"decrease",description:`${(e==null?void 0:e.todayDeposits.count)||0} transactions`},{title:"Today's Withdrawals",value:Y((e==null?void 0:e.todayWithdrawals.amount)||0,n),icon:Mi,change:(e==null?void 0:e.todayWithdrawals.change)||"+0%",changeType:(u=e==null?void 0:e.todayWithdrawals.change)!=null&&u.includes("+")?"increase":"decrease",description:`${(e==null?void 0:e.todayWithdrawals.count)||0} transactions`},{title:"Today's New Users",value:((m=e==null?void 0:e.todayNewUsers.count)==null?void 0:m.toString())||"0",icon:Fp,change:(e==null?void 0:e.todayNewUsers.change)||"+0%",changeType:(h=e==null?void 0:e.todayNewUsers.change)!=null&&h.includes("+")?"increase":"decrease",description:"New registrations"},{title:"Today's Active Plans",value:((b=e==null?void 0:e.todayActivePlans.count)==null?void 0:b.toString())||"0",icon:kn,change:(e==null?void 0:e.todayActivePlans.change)||"+0%",changeType:(w=e==null?void 0:e.todayActivePlans.change)!=null&&w.includes("+")?"increase":"decrease",description:"Plans activated"}],l=[{title:"Total Users",value:((v=e==null?void 0:e.totalUsers.count)==null?void 0:v.toLocaleString())||"0",icon:ct,change:(e==null?void 0:e.totalUsers.change)||"+0%",changeType:(y=e==null?void 0:e.totalUsers.change)!=null&&y.includes("+")?"increase":"decrease",description:"Registered users"},{title:"Active Users with Plans",value:((g=e==null?void 0:e.activeUsersWithPlans.count)==null?void 0:g.toLocaleString())||"0",icon:Vt,change:(e==null?void 0:e.activeUsersWithPlans.change)||"+0%",changeType:(p=e==null?void 0:e.activeUsersWithPlans.change)!=null&&p.includes("+")?"increase":"decrease",description:"Users with active plans"},{title:"Pending Deposits",value:Y((e==null?void 0:e.pendingDeposits.amount)||0,n),icon:_t,change:(e==null?void 0:e.pendingDeposits.change)||"+0%",changeType:(x=e==null?void 0:e.pendingDeposits.change)!=null&&x.includes("+")?"increase":"decrease",description:`${(e==null?void 0:e.pendingDeposits.count)||0} pending requests`},{title:"Pending Withdrawals",value:Y((e==null?void 0:e.pendingWithdrawals.amount)||0,n),icon:_t,change:(e==null?void 0:e.pendingWithdrawals.change)||"+0%",changeType:(N=e==null?void 0:e.pendingWithdrawals.change)!=null&&N.includes("+")?"increase":"decrease",description:`${(e==null?void 0:e.pendingWithdrawals.count)||0} pending requests`}],c=[{title:"Total Deposits",value:Y(((j=e==null?void 0:e.totalDeposits)==null?void 0:j.amount)||0,n),icon:Rt,change:((k=e==null?void 0:e.totalDeposits)==null?void 0:k.change)||"+0%",changeType:(_=(S=e==null?void 0:e.totalDeposits)==null?void 0:S.change)!=null&&_.includes("+")?"increase":"decrease",description:`${((C=e==null?void 0:e.totalDeposits)==null?void 0:C.count)||0} total transactions`},{title:"Total Withdrawals",value:Y(((E=e==null?void 0:e.totalWithdrawals)==null?void 0:E.amount)||0,n),icon:gP,change:(($=e==null?void 0:e.totalWithdrawals)==null?void 0:$.change)||"+0%",changeType:(L=(D=e==null?void 0:e.totalWithdrawals)==null?void 0:D.change)!=null&&L.includes("+")?"increase":"decrease",description:`${((W=e==null?void 0:e.totalWithdrawals)==null?void 0:W.count)||0} total transactions`},{title:"Total Deposit Charges",value:Y(((ae=e==null?void 0:e.totalDepositCharges)==null?void 0:ae.amount)||0,n),icon:mt,change:((ee=e==null?void 0:e.totalDepositCharges)==null?void 0:ee.change)||"+0%",changeType:(T=(X=e==null?void 0:e.totalDepositCharges)==null?void 0:X.change)!=null&&T.includes("+")?"increase":"decrease",description:"Platform fees collected"},{title:"Total Withdrawal Charges",value:Y(((q=e==null?void 0:e.totalWithdrawalCharges)==null?void 0:q.amount)||0,n),icon:mt,change:((I=e==null?void 0:e.totalWithdrawalCharges)==null?void 0:I.change)||"+0%",changeType:(ne=(B=e==null?void 0:e.totalWithdrawalCharges)==null?void 0:B.change)!=null&&ne.includes("+")?"increase":"decrease",description:"Platform fees collected"}];return s.jsx(be,{children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"px-2 sm:px-4 lg:px-6 py-4",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Dashboard"}),s.jsxs("p",{className:"text-gray-600 text-sm sm:text-base",children:["Welcome to the admin dashboard - Real-time data (",n.currencyCode,")"]})]}),s.jsxs("div",{className:"px-2 sm:px-4 lg:px-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4",children:"Today's Activity"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:o.map((ye,de)=>s.jsx(i,{stat:ye,isToday:!0},de))})]}),s.jsxs("div",{className:"px-2 sm:px-4 lg:px-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4",children:"Financial Summary"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:c.map((ye,de)=>s.jsx(i,{stat:ye},de))})]}),s.jsxs("div",{className:"px-2 sm:px-4 lg:px-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4",children:"Overall Statistics"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:l.map((ye,de)=>s.jsx(i,{stat:ye},de))})]})]})})};function bf(e,[t,r]){return Math.min(r,Math.max(t,e))}var nI="VisuallyHidden",J1=f.forwardRef((e,t)=>s.jsx(xe.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));J1.displayName=nI;var aI=[" ","Enter","ArrowUp","ArrowDown"],iI=[" ","Enter"],Xl="Select",[Pu,Au,oI]=i1(Xl),[uo,QO]=ps(Xl,[oI,wu]),Ru=wu(),[lI,qn]=uo(Xl),[cI,dI]=uo(Xl),X1=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:h,required:b,form:w}=e,v=Ru(t),[y,g]=f.useState(null),[p,x]=f.useState(null),[N,j]=f.useState(!1),k=Jl(d),[S=!1,_]=Ln({prop:n,defaultProp:a,onChange:i}),[C,E]=Ln({prop:o,defaultProp:l,onChange:c}),$=f.useRef(null),D=y?w||!!y.closest("form"):!0,[L,W]=f.useState(new Set),ae=Array.from(L).map(ee=>ee.props.value).join(";");return s.jsx(kj,{...v,children:s.jsxs(lI,{required:b,scope:t,trigger:y,onTriggerChange:g,valueNode:p,onValueNodeChange:x,valueNodeHasChildren:N,onValueNodeHasChildrenChange:j,contentId:Ds(),value:C,onValueChange:E,open:S,onOpenChange:_,dir:k,triggerPointerDownPosRef:$,disabled:h,children:[s.jsx(Pu.Provider,{scope:t,children:s.jsx(cI,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(ee=>{W(X=>new Set(X).add(ee))},[]),onNativeOptionRemove:f.useCallback(ee=>{W(X=>{const T=new Set(X);return T.delete(ee),T})},[]),children:r})}),D?s.jsxs(NN,{"aria-hidden":!0,required:b,tabIndex:-1,name:u,autoComplete:m,value:C,onChange:ee=>E(ee.target.value),disabled:h,form:w,children:[C===void 0?s.jsx("option",{value:""}):null,Array.from(L)]},ae):null]})})};X1.displayName=Xl;var Z1="SelectTrigger",eN=f.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=Ru(r),o=qn(Z1,r),l=o.disabled||n,c=Re(t,o.onTriggerChange),d=Au(r),u=f.useRef("touch"),[m,h,b]=_N(v=>{const y=d().filter(x=>!x.disabled),g=y.find(x=>x.value===o.value),p=SN(y,v,g);p!==void 0&&o.onValueChange(p.value)}),w=v=>{l||(o.onOpenChange(!0),b()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return s.jsx(Jp,{asChild:!0,...i,children:s.jsx(xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":jN(o.value)?"":void 0,...a,ref:c,onClick:pe(a.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&w(v)}),onPointerDown:pe(a.onPointerDown,v=>{u.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:pe(a.onKeyDown,v=>{const y=m.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(y&&v.key===" ")&&aI.includes(v.key)&&(w(),v.preventDefault())})})})});eN.displayName=Z1;var tN="SelectValue",rN=f.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=qn(tN,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=Re(t,c.onValueNodeChange);return St(()=>{d(u)},[d,u]),s.jsx(xe.span,{...l,ref:m,style:{pointerEvents:"none"},children:jN(c.value)?s.jsx(s.Fragment,{children:o}):i})});rN.displayName=tN;var uI="SelectIcon",sN=f.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(xe.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});sN.displayName=uI;var hI="SelectPortal",nN=e=>s.jsx(ju,{asChild:!0,...e});nN.displayName=hI;var Sa="SelectContent",aN=f.forwardRef((e,t)=>{const r=qn(Sa,e.__scopeSelect),[n,a]=f.useState();if(St(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Xi.createPortal(s.jsx(iN,{scope:e.__scopeSelect,children:s.jsx(Pu.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(oN,{...e,ref:t})});aN.displayName=Sa;var $r=10,[iN,Vn]=uo(Sa),mI="SelectContentImpl",oN=f.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:b,sticky:w,hideWhenDetached:v,avoidCollisions:y,...g}=e,p=qn(Sa,r),[x,N]=f.useState(null),[j,k]=f.useState(null),S=Re(t,he=>N(he)),[_,C]=f.useState(null),[E,$]=f.useState(null),D=Au(r),[L,W]=f.useState(!1),ae=f.useRef(!1);f.useEffect(()=>{if(x)return Xp(x)},[x]),zp();const ee=f.useCallback(he=>{const[Le,...tt]=D().map(Fe=>Fe.ref.current),[We]=tt.slice(-1),Me=document.activeElement;for(const Fe of he)if(Fe===Me||(Fe==null||Fe.scrollIntoView({block:"nearest"}),Fe===Le&&j&&(j.scrollTop=0),Fe===We&&j&&(j.scrollTop=j.scrollHeight),Fe==null||Fe.focus(),document.activeElement!==Me))return},[D,j]),X=f.useCallback(()=>ee([_,x]),[ee,_,x]);f.useEffect(()=>{L&&X()},[L,X]);const{onOpenChange:T,triggerPointerDownPosRef:q}=p;f.useEffect(()=>{if(x){let he={x:0,y:0};const Le=We=>{var Me,Fe;he={x:Math.abs(Math.round(We.pageX)-(((Me=q.current)==null?void 0:Me.x)??0)),y:Math.abs(Math.round(We.pageY)-(((Fe=q.current)==null?void 0:Fe.y)??0))}},tt=We=>{he.x<=10&&he.y<=10?We.preventDefault():x.contains(We.target)||T(!1),document.removeEventListener("pointermove",Le),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",Le),document.addEventListener("pointerup",tt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Le),document.removeEventListener("pointerup",tt,{capture:!0})}}},[x,T,q]),f.useEffect(()=>{const he=()=>T(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[T]);const[I,B]=_N(he=>{const Le=D().filter(Me=>!Me.disabled),tt=Le.find(Me=>Me.ref.current===document.activeElement),We=SN(Le,he,tt);We&&setTimeout(()=>We.ref.current.focus())}),ne=f.useCallback((he,Le,tt)=>{const We=!ae.current&&!tt;(p.value!==void 0&&p.value===Le||We)&&(C(he),We&&(ae.current=!0))},[p.value]),ye=f.useCallback(()=>x==null?void 0:x.focus(),[x]),de=f.useCallback((he,Le,tt)=>{const We=!ae.current&&!tt;(p.value!==void 0&&p.value===Le||We)&&$(he)},[p.value]),De=n==="popper"?wf:lN,Ke=De===wf?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:b,sticky:w,hideWhenDetached:v,avoidCollisions:y}:{};return s.jsx(iN,{scope:r,content:x,viewport:j,onViewportChange:k,itemRefCallback:ne,selectedItem:_,onItemLeave:ye,itemTextRefCallback:de,focusSelectedItem:X,selectedItemText:E,position:n,isPositioned:L,searchRef:I,children:s.jsx(_u,{as:Rn,allowPinchZoom:!0,children:s.jsx(gu,{asChild:!0,trapped:p.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:pe(a,he=>{var Le;(Le=p.trigger)==null||Le.focus({preventScroll:!0}),he.preventDefault()}),children:s.jsx(xu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:s.jsx(De,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:he=>he.preventDefault(),...g,...Ke,onPlaced:()=>W(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:pe(g.onKeyDown,he=>{const Le=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!Le&&he.key.length===1&&B(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let We=D().filter(Me=>!Me.disabled).map(Me=>Me.ref.current);if(["ArrowUp","End"].includes(he.key)&&(We=We.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const Me=he.target,Fe=We.indexOf(Me);We=We.slice(Fe+1)}setTimeout(()=>ee(We)),he.preventDefault()}})})})})})})});oN.displayName=mI;var fI="SelectItemAlignedPosition",lN=f.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=qn(Sa,r),o=Vn(Sa,r),[l,c]=f.useState(null),[d,u]=f.useState(null),m=Re(t,S=>u(S)),h=Au(r),b=f.useRef(!1),w=f.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:g,focusSelectedItem:p}=o,x=f.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&v&&y&&g){const S=i.trigger.getBoundingClientRect(),_=d.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),E=g.getBoundingClientRect();if(i.dir!=="rtl"){const Me=E.left-_.left,Fe=C.left-Me,Dt=S.left-Fe,or=S.width+Dt,Aa=Math.max(or,_.width),Ra=window.innerWidth-$r,Ta=bf(Fe,[$r,Math.max($r,Ra-Aa)]);l.style.minWidth=or+"px",l.style.left=Ta+"px"}else{const Me=_.right-E.right,Fe=window.innerWidth-C.right-Me,Dt=window.innerWidth-S.right-Fe,or=S.width+Dt,Aa=Math.max(or,_.width),Ra=window.innerWidth-$r,Ta=bf(Fe,[$r,Math.max($r,Ra-Aa)]);l.style.minWidth=or+"px",l.style.right=Ta+"px"}const $=h(),D=window.innerHeight-$r*2,L=v.scrollHeight,W=window.getComputedStyle(d),ae=parseInt(W.borderTopWidth,10),ee=parseInt(W.paddingTop,10),X=parseInt(W.borderBottomWidth,10),T=parseInt(W.paddingBottom,10),q=ae+ee+L+T+X,I=Math.min(y.offsetHeight*5,q),B=window.getComputedStyle(v),ne=parseInt(B.paddingTop,10),ye=parseInt(B.paddingBottom,10),de=S.top+S.height/2-$r,De=D-de,Ke=y.offsetHeight/2,he=y.offsetTop+Ke,Le=ae+ee+he,tt=q-Le;if(Le<=de){const Me=$.length>0&&y===$[$.length-1].ref.current;l.style.bottom="0px";const Fe=d.clientHeight-v.offsetTop-v.offsetHeight,Dt=Math.max(De,Ke+(Me?ye:0)+Fe+X),or=Le+Dt;l.style.height=or+"px"}else{const Me=$.length>0&&y===$[0].ref.current;l.style.top="0px";const Dt=Math.max(de,ae+v.offsetTop+(Me?ne:0)+Ke)+tt;l.style.height=Dt+"px",v.scrollTop=Le-de+v.offsetTop}l.style.margin=`${$r}px 0`,l.style.minHeight=I+"px",l.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>b.current=!0)}},[h,i.trigger,i.valueNode,l,d,v,y,g,i.dir,n]);St(()=>x(),[x]);const[N,j]=f.useState();St(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const k=f.useCallback(S=>{S&&w.current===!0&&(x(),p==null||p(),w.current=!1)},[x,p]);return s.jsx(xI,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:b,onScrollButtonChange:k,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(xe.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});lN.displayName=fI;var pI="SelectPopperPosition",wf=f.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=$r,...i}=e,o=Ru(r);return s.jsx(Cj,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wf.displayName=pI;var[xI,wx]=uo(Sa,{}),jf="SelectViewport",cN=f.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Vn(jf,r),o=wx(jf,r),l=Re(t,i.onViewportChange),c=f.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(Pu.Slot,{scope:r,children:s.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:pe(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&m){const b=Math.abs(c.current-u.scrollTop);if(b>0){const w=window.innerHeight-$r*2,v=parseFloat(m.style.minHeight),y=parseFloat(m.style.height),g=Math.max(v,y);if(g<w){const p=g+b,x=Math.min(w,p),N=p-x;m.style.height=x+"px",m.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});cN.displayName=jf;var dN="SelectGroup",[gI,vI]=uo(dN),yI=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ds();return s.jsx(gI,{scope:r,id:a,children:s.jsx(xe.div,{role:"group","aria-labelledby":a,...n,ref:t})})});yI.displayName=dN;var uN="SelectLabel",hN=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=vI(uN,r);return s.jsx(xe.div,{id:a.id,...n,ref:t})});hN.displayName=uN;var $d="SelectItem",[bI,mN]=uo($d),fN=f.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=qn($d,r),c=Vn($d,r),d=l.value===n,[u,m]=f.useState(i??""),[h,b]=f.useState(!1),w=Re(t,p=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,p,n,a)}),v=Ds(),y=f.useRef("touch"),g=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(bI,{scope:r,value:n,disabled:a,textId:v,isSelected:d,onItemTextChange:f.useCallback(p=>{m(x=>x||((p==null?void 0:p.textContent)??"").trim())},[]),children:s.jsx(Pu.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(xe.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:w,onFocus:pe(o.onFocus,()=>b(!0)),onBlur:pe(o.onBlur,()=>b(!1)),onClick:pe(o.onClick,()=>{y.current!=="mouse"&&g()}),onPointerUp:pe(o.onPointerUp,()=>{y.current==="mouse"&&g()}),onPointerDown:pe(o.onPointerDown,p=>{y.current=p.pointerType}),onPointerMove:pe(o.onPointerMove,p=>{var x;y.current=p.pointerType,a?(x=c.onItemLeave)==null||x.call(c):y.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,p=>{var x;p.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:pe(o.onKeyDown,p=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&p.key===" "||(iI.includes(p.key)&&g(),p.key===" "&&p.preventDefault())})})})})});fN.displayName=$d;var Lo="SelectItemText",pN=f.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=qn(Lo,r),l=Vn(Lo,r),c=mN(Lo,r),d=dI(Lo,r),[u,m]=f.useState(null),h=Re(t,g=>m(g),c.onItemTextChange,g=>{var p;return(p=l.itemTextRefCallback)==null?void 0:p.call(l,g,c.value,c.disabled)}),b=u==null?void 0:u.textContent,w=f.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:b},c.value),[c.disabled,c.value,b]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=d;return St(()=>(v(w),()=>y(w)),[v,y,w]),s.jsxs(s.Fragment,{children:[s.jsx(xe.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Xi.createPortal(i.children,o.valueNode):null]})});pN.displayName=Lo;var xN="SelectItemIndicator",gN=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return mN(xN,r).isSelected?s.jsx(xe.span,{"aria-hidden":!0,...n,ref:t}):null});gN.displayName=xN;var Nf="SelectScrollUpButton",vN=f.forwardRef((e,t)=>{const r=Vn(Nf,e.__scopeSelect),n=wx(Nf,e.__scopeSelect),[a,i]=f.useState(!1),o=Re(t,n.onScrollButtonChange);return St(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(bN,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});vN.displayName=Nf;var _f="SelectScrollDownButton",yN=f.forwardRef((e,t)=>{const r=Vn(_f,e.__scopeSelect),n=wx(_f,e.__scopeSelect),[a,i]=f.useState(!1),o=Re(t,n.onScrollButtonChange);return St(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(bN,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});yN.displayName=_f;var bN=f.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Vn("SelectScrollButton",r),o=f.useRef(null),l=Au(r),c=f.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),St(()=>{var u;const d=l().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(xe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:pe(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:pe(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:pe(a.onPointerLeave,()=>{c()})})}),wI="SelectSeparator",wN=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(xe.div,{"aria-hidden":!0,...n,ref:t})});wN.displayName=wI;var Sf="SelectArrow",jI=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ru(r),i=qn(Sf,r),o=Vn(Sf,r);return i.open&&o.position==="popper"?s.jsx(Ej,{...a,...n,ref:t}):null});jI.displayName=Sf;function jN(e){return e===""||e===void 0}var NN=f.forwardRef((e,t)=>{const{value:r,...n}=e,a=f.useRef(null),i=Re(t,a),o=cx(r);return f.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const m=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(m)}},[o,r]),s.jsx(J1,{asChild:!0,children:s.jsx("select",{...n,ref:i,defaultValue:r})})});NN.displayName="BubbleSelect";function _N(e){const t=wt(e),r=f.useRef(""),n=f.useRef(0),a=f.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=f.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function SN(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=NI(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function NI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var _I=X1,kN=eN,SI=rN,kI=sN,CI=nN,CN=aN,EI=cN,EN=hN,PN=fN,PI=pN,AI=gN,AN=vN,RN=yN,TN=wN;const Er=_I,Pr=SI,hr=f.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(kN,{ref:n,className:ve("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(kI,{asChild:!0,children:s.jsx(Ip,{className:"h-4 w-4 opacity-50"})})]}));hr.displayName=kN.displayName;const DN=f.forwardRef(({className:e,...t},r)=>s.jsx(AN,{ref:r,className:ve("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(NP,{className:"h-4 w-4"})}));DN.displayName=AN.displayName;const IN=f.forwardRef(({className:e,...t},r)=>s.jsx(RN,{ref:r,className:ve("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ip,{className:"h-4 w-4"})}));IN.displayName=RN.displayName;const mr=f.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(CI,{children:s.jsxs(CN,{ref:a,className:ve("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(DN,{}),s.jsx(EI,{className:ve("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(IN,{})]})}));mr.displayName=CN.displayName;const RI=f.forwardRef(({className:e,...t},r)=>s.jsx(EN,{ref:r,className:ve("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));RI.displayName=EN.displayName;const $e=f.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(PN,{ref:n,className:ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(AI,{children:s.jsx(Cd,{className:"h-4 w-4"})})}),s.jsx(PI,{children:t})]}));$e.displayName=PN.displayName;const TI=f.forwardRef(({className:e,...t},r)=>s.jsx(TN,{ref:r,className:ve("-mx-1 my-1 h-px bg-muted",e),...t}));TI.displayName=TN.displayName;const DI=()=>{const e=Oe(),t=Gl(),[r,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(""),[c,d]=f.useState("all"),[u,m]=f.useState(1),h=10,{settings:b,loading:w}=Te();f.useEffect(()=>{v()},[]);const v=async()=>{try{i(!0);const{data:C,error:E}=await A.from("users").select("*").order("created_at",{ascending:!1});if(E){console.error("Error fetching users:",E),J.error("Failed to load users");return}n(C||[])}catch(C){console.error("Error:",C),J.error("Failed to load users")}finally{i(!1)}},y=r.filter(C=>{const E=C.full_name.toLowerCase().includes(o.toLowerCase())||C.email.toLowerCase().includes(o.toLowerCase())||C.phone_number.includes(o),$=c==="all"||C.account_status===c;return E&&$}),g=Math.ceil(y.length/h),p=(u-1)*h,x=p+h,N=y.slice(p,x),j=()=>{u>1&&m(u-1)},k=()=>{u<g&&m(u+1)};f.useEffect(()=>{m(1)},[o,c]);const S=C=>{switch(C){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"suspended":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},_=C=>Y(C,b);return a||w?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):s.jsx(be,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 px-2 sm:px-4 lg:px-6 py-4",children:s.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Users Management"}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Manage and monitor user accounts"})]})})}),s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-6",children:[s.jsxs(M,{children:[s.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Q,{className:"text-xs lg:text-sm font-medium",children:"Total Users"}),s.jsx(ct,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(U,{children:s.jsx("div",{className:"text-lg lg:text-2xl font-bold",children:r.length})})]}),s.jsxs(M,{children:[s.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Q,{className:"text-xs lg:text-sm font-medium",children:"Active Users"}),s.jsx(ct,{className:"h-4 w-4 text-green-600"})]}),s.jsx(U,{children:s.jsx("div",{className:"text-lg lg:text-2xl font-bold text-green-600",children:r.filter(C=>C.account_status==="active").length})})]}),s.jsxs(M,{children:[s.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Q,{className:"text-xs lg:text-sm font-medium",children:"Inactive"}),s.jsx(ct,{className:"h-4 w-4 text-red-600"})]}),s.jsx(U,{children:s.jsx("div",{className:"text-lg lg:text-2xl font-bold text-red-600",children:r.filter(C=>C.account_status==="inactive").length})})]}),s.jsxs(M,{children:[s.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Q,{className:"text-xs lg:text-sm font-medium",children:"Suspended"}),s.jsx(ct,{className:"h-4 w-4 text-yellow-600"})]}),s.jsx(U,{children:s.jsx("div",{className:"text-lg lg:text-2xl font-bold text-yellow-600",children:r.filter(C=>C.account_status==="suspended").length})})]})]})}),s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 pb-4",children:s.jsx(M,{children:s.jsx(U,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(qs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(H,{placeholder:"Search users by name, email, or phone...",value:o,onChange:C=>l(C.target.value),className:"pl-10 h-10"})]})}),s.jsxs(Er,{value:c,onValueChange:d,children:[s.jsxs(hr,{className:"w-full sm:w-[180px] h-10",children:[s.jsx(mu,{className:"w-4 h-4 mr-2"}),s.jsx(Pr,{placeholder:"Filter by status"})]}),s.jsxs(mr,{children:[s.jsx($e,{value:"all",children:"All Status"}),s.jsx($e,{value:"active",children:"Active"}),s.jsx($e,{value:"inactive",children:"Inactive"}),s.jsx($e,{value:"suspended",children:"Suspended"})]})]})]})})})}),s.jsxs("div",{className:"px-2 sm:px-4 lg:px-6 pb-6",children:[s.jsxs(M,{children:[s.jsxs(K,{className:"flex flex-row items-center justify-between",children:[s.jsxs(Q,{children:["Users (",y.length,")"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",N.length," of ",y.length," users"]})]}),s.jsxs(U,{className:"p-0",children:[t?s.jsx("div",{className:"space-y-4 p-4",children:N.map(C=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium truncate text-sm sm:text-base",children:C.full_name}),s.jsx(ke,{className:S(C.account_status),children:C.account_status})]}),s.jsxs("div",{className:"space-y-1 text-xs sm:text-sm text-gray-600",children:[s.jsx("p",{className:"truncate",children:C.email}),s.jsx("p",{children:C.phone_number}),s.jsxs("p",{className:"font-medium",children:["Balance: ",_(C.available_balance||0)]}),s.jsx("p",{children:new Date(C.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(F,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:()=>e(`/admin/users/${C.id}`),children:[s.jsx(An,{className:"w-3 h-3 mr-1"}),"View"]}),s.jsxs(F,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:()=>e(`/admin/users/${C.id}/edit`),children:[s.jsx(_l,{className:"w-3 h-3 mr-1"}),"Edit"]})]})]},C.id))}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(C=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.full_name}),s.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",C.id.slice(0,8),"..."]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-gray-900",children:C.email}),s.jsx("div",{className:"text-sm text-gray-500",children:C.phone_number})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:_(C.available_balance||0)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(ke,{className:S(C.account_status),children:C.account_status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(C.created_at).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>e(`/admin/users/${C.id}`),children:s.jsx(An,{className:"w-4 h-4"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>e(`/admin/users/${C.id}/edit`),children:s.jsx(_l,{className:"w-4 h-4"})})]})]},C.id))})]})}),N.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ct,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]}),y.length>0&&g>1&&s.jsx("div",{className:"mt-6",children:s.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",u," of ",g]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(F,{variant:"outline",size:"sm",onClick:j,disabled:u===1,className:"flex items-center border-gray-300 hover:bg-gray-50",children:[s.jsx(Mw,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Previous"}),s.jsx("span",{className:"sm:hidden",children:"Prev"})]}),s.jsxs(F,{variant:"outline",size:"sm",onClick:k,disabled:u===g,className:"flex items-center border-gray-300 hover:bg-gray-50",children:[s.jsx("span",{className:"hidden sm:inline",children:"Next"}),s.jsx("span",{className:"sm:hidden",children:"Next"}),s.jsx(Cs,{className:"w-4 h-4 ml-1"})]})]})]})})]})]})})},II=()=>{var p;const{userId:e}=Ul(),t=Oe(),[r,n]=f.useState(!0),[a,i]=f.useState(!1),[o,l]=f.useState(0),{settings:c,loading:d}=Te(),[u,m]=f.useState({full_name:"",email:"",phone_number:"",country:"Pakistan",address:"",account_status:"active",kyc_status:"not_submitted",available_balance:0,city:"",postal_code:"",user_level:1,profile_image_url:""}),h=x=>x>=100?10:x>=75?9:x>=50?8:x>=40?7:x>=30?6:x>=25?5:x>=20?4:x>=10?3:x>=3?2:1,b=x=>!x||x==="undefined"||x==="null"||x===""?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(x);f.useEffect(()=>{if(!b(e)){console.error("Invalid userId in URL:",e),se.error("Invalid user ID. Please check the URL."),t("/admin/users");return}w()},[e,t]);const w=async()=>{if(b(e))try{console.log("Fetching user data for ID:",e);const{data:x,error:N}=await A.from("users").select("*").eq("id",e).single();if(N){console.error("Error fetching user:",N),se.error("Failed to fetch user data.");return}if(x){console.log("User data fetched successfully:",x);const{count:j}=await A.from("users").select("id",{count:"exact"}).eq("referred_by_user_id",e),k=j||0;l(k);const S=h(k);m({full_name:x.full_name||"",email:x.email||"",phone_number:x.phone_number||"",country:x.country||"Pakistan",address:x.address||"",account_status:x.account_status||"active",kyc_status:x.kyc_status||"not_submitted",available_balance:x.available_balance||0,city:x.city||"",postal_code:x.postal_code||"",user_level:S,profile_image_url:x.profile_image_url||""})}else console.log("No user found with ID:",e),se.error("User not found."),t("/admin/users")}catch(x){console.error("Error:",x),se.error("An unexpected error occurred while fetching user data.")}finally{n(!1)}},v=(x,N)=>{m(j=>({...j,[x]:N}))},y=async()=>{i(!0);try{const x={...u,updated_at:new Date().toISOString()},{error:N}=await A.from("users").update(x).eq("id",e);if(N){console.error("Error updating user:",N),se.error("Failed to update user information.");return}se.success("User information has been successfully updated."),t(`/admin/users/${e}`)}catch(x){console.error("Error:",x),se.error("An unexpected error occurred.")}finally{i(!1)}};if(r||d)return s.jsx(be,{children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"text-center",children:"Loading user data..."})})});const g=Es(c);return s.jsx(be,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50/30",children:[s.jsx("div",{className:"bg-white border-b border-gray-200/60 shadow-sm",children:s.jsx("div",{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx(F,{variant:"outline",size:"sm",className:"w-fit",asChild:!0,children:s.jsxs(me,{to:`/admin/users/${e}`,children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to User Details"]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(ao,{className:"w-16 h-16",children:[s.jsx(io,{src:u.profile_image_url,alt:u.full_name,className:"object-cover"}),s.jsx(oo,{className:"text-lg bg-green-500 text-white",children:((p=u.full_name)==null?void 0:p.split(" ").map(x=>x[0]).join("").toUpperCase())||"U"})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Edit User"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Modify user information and settings"})]})]})]})})}),s.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(M,{className:"shadow-sm border-gray-200/60",children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center space-x-2",children:[s.jsx(jt,{className:"w-5 h-5"}),s.jsx("span",{children:"Personal Information"})]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"full_name",children:"Full Name"}),s.jsx(H,{id:"full_name",value:u.full_name,onChange:x=>v("full_name",x.target.value)})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"email",children:"Email Address"}),s.jsx(H,{id:"email",type:"email",value:u.email,onChange:x=>v("email",x.target.value)})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"phone_number",children:"Phone Number"}),s.jsx(H,{id:"phone_number",value:u.phone_number,onChange:x=>v("phone_number",x.target.value)})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"country",children:"Country"}),s.jsxs(Er,{value:u.country,onValueChange:x=>v("country",x),children:[s.jsx(hr,{children:s.jsx(Pr,{})}),s.jsxs(mr,{children:[s.jsx($e,{value:"Pakistan",children:"Pakistan"}),s.jsx($e,{value:"India",children:"India"}),s.jsx($e,{value:"Bangladesh",children:"Bangladesh"}),s.jsx($e,{value:"United States",children:"United States"}),s.jsx($e,{value:"United Kingdom",children:"United Kingdom"})]})]})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"city",children:"City"}),s.jsx(H,{id:"city",value:u.city,onChange:x=>v("city",x.target.value)})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"postal_code",children:"Postal Code"}),s.jsx(H,{id:"postal_code",value:u.postal_code,onChange:x=>v("postal_code",x.target.value)})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"address",children:"Address"}),s.jsx(Bs,{id:"address",value:u.address,onChange:x=>v("address",x.target.value),rows:3})]})]})]}),s.jsxs(M,{className:"shadow-sm border-gray-200/60",children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center space-x-2",children:[s.jsx(Ht,{className:"w-5 h-5"}),s.jsx("span",{children:"Account Status & Level"})]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(hs,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-medium text-blue-900",children:"Current Level Status"})]}),s.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:["User has ",s.jsxs("span",{className:"font-bold",children:[o," referrals"]})]}),s.jsxs("p",{className:"text-sm text-blue-600",children:["Auto-calculated level: ",s.jsxs("span",{className:"font-bold",children:["Level ",h(o)]})]})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"account_status",children:"Account Status"}),s.jsxs(Er,{value:u.account_status,onValueChange:x=>v("account_status",x),children:[s.jsx(hr,{children:s.jsx(Pr,{})}),s.jsxs(mr,{children:[s.jsx($e,{value:"active",children:"Active"}),s.jsx($e,{value:"suspended",children:"Suspended"}),s.jsx($e,{value:"banned",children:"Banned"}),s.jsx($e,{value:"pending",children:"Pending"})]})]})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"kyc_status",children:"KYC Status"}),s.jsxs(Er,{value:u.kyc_status,onValueChange:x=>v("kyc_status",x),children:[s.jsx(hr,{children:s.jsx(Pr,{})}),s.jsxs(mr,{children:[s.jsx($e,{value:"verified",children:"Verified"}),s.jsx($e,{value:"pending",children:"Pending"}),s.jsx($e,{value:"rejected",children:"Rejected"}),s.jsx($e,{value:"not_submitted",children:"Not Submitted"})]})]})]}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(mt,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Balance Management"})]}),s.jsxs("div",{children:[s.jsxs(V,{htmlFor:"available_balance",children:["Available Balance (",g,")"]}),s.jsx(H,{id:"available_balance",type:"number",step:"0.01",value:u.available_balance,onChange:x=>v("available_balance",parseFloat(x.target.value)||0)})]}),s.jsx("div",{className:"text-sm text-gray-600 mt-2",children:s.jsx("p",{children:"Use caution when manually adjusting balances. All changes are logged."})})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[s.jsx(F,{variant:"outline",asChild:!0,children:s.jsx(me,{to:`/admin/users/${e}`,children:"Cancel"})}),s.jsxs(F,{onClick:y,disabled:a,className:"bg-emerald-600 hover:bg-emerald-700",children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]})]})]})]})})},Co=()=>{const[e,t]=f.useState(""),[r,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(null),u=br(),m=Oe(),{settings:h}=Te(),b=f.useMemo(()=>u.pathname.includes("/pending")?"pending":u.pathname.includes("/approved")?"approved":u.pathname.includes("/rejected")?"rejected":"all",[u.pathname]),w=async()=>{try{let j=A.from("deposits").select(`
          *,
          users!deposits_user_id_fkey(full_name, username)
        `).order("created_at",{ascending:!1});b!=="all"&&(j=j.eq("status",b));const{data:k,error:S}=await j;if(S){console.error("Error fetching deposits:",S),_e.error("Failed to fetch deposits");return}n(k||[])}catch(j){console.error("Error:",j),_e.error("An error occurred while fetching deposits")}finally{i(!1)}};f.useEffect(()=>{w()},[b]);const v=r.filter(j=>{var S,_,C,E,$;return((_=(S=j.users)==null?void 0:S.full_name)==null?void 0:_.toLowerCase().includes(e.toLowerCase()))||j.id.toLowerCase().includes(e.toLowerCase())||((C=j.transaction_id)==null?void 0:C.toLowerCase().includes(e.toLowerCase()))||(($=(E=j.users)==null?void 0:E.username)==null?void 0:$.toLowerCase().includes(e.toLowerCase()))}),y=async(j,k)=>{var S;try{l(j),d(k);const _=r.find($=>$.id===j);if(!_)return;console.log("Processing deposit:",_);const{error:C}=await A.from("deposits").update({status:k,processed_at:new Date().toISOString()}).eq("id",j);if(C){console.error("Error updating deposit:",C),_e.error("Failed to update deposit status");return}const{error:E}=await A.from("transactions").update({status:k==="approved"?"completed":"failed"}).eq("reference_id",j).eq("reference_type","deposit");if(E&&console.error("Error updating transaction:",E),k==="approved"){const{data:$,error:D}=await A.from("users").select("available_balance, total_deposits").eq("id",_.user_id).single();if(D){console.error("Error fetching user data:",D),_e.error("Failed to fetch user balance");return}const L=($.available_balance||0)+_.amount,W=($.total_deposits||0)+_.amount,{error:ae}=await A.from("users").update({available_balance:L,total_deposits:W,updated_at:new Date().toISOString()}).eq("id",_.user_id);if(ae){console.error("Error updating balance:",ae),_e.error("Failed to update user balance");return}if((S=_.notes)==null?void 0:S.includes("Investment Plan:")){console.log("Processing investment deposit:",_.notes);const X=_.notes.match(/ID: ([a-f0-9-]+)\)/),T=X?X[1]:null;if(T){console.log("Creating investment for plan ID:",T);const{data:q,error:I}=await A.from("investment_plans").select("duration_days, name").eq("id",T).single();if(I){console.error("Error fetching plan data:",I),_e.error("Failed to fetch investment plan details");return}const B=new Date,ne=new Date;ne.setDate(ne.getDate()+q.duration_days);const ye=L-_.amount,{error:de}=await A.from("users").update({available_balance:ye,current_plan_id:T,updated_at:new Date().toISOString()}).eq("id",_.user_id);if(de){console.error("Error deducting investment amount:",de),_e.error("Failed to process investment amount");return}const{error:De}=await A.from("user_investments").insert({user_id:_.user_id,investment_plan_id:T,amount:_.amount,start_date:B.toISOString(),end_date:ne.toISOString(),status:"active",total_profit_earned:0,last_profit_date:null});if(De){console.error("Error creating investment:",De),await A.from("users").update({available_balance:L,updated_at:new Date().toISOString()}).eq("id",_.user_id),_e.error("Failed to create investment record");return}console.log("Investment created successfully for plan:",q.name),_e.success(`Investment plan "${q.name}" activated successfully!`)}else console.error("Could not extract plan ID from notes:",_.notes)}}else k==="rejected"&&console.log("Deposit rejected, no balance changes made");_e.success(`Deposit ${k} successfully`),w()}catch(_){console.error("Error:",_),_e.error("An error occurred")}finally{l(null),d(null)}},g=j=>{m(`/admin/deposits/${j}`)},p=j=>{switch(j){case"approved":return s.jsx(Vt,{className:"w-4 h-4 text-green-500"});case"pending":return s.jsx(_t,{className:"w-4 h-4 text-yellow-500"});case"rejected":return s.jsx($i,{className:"w-4 h-4 text-red-500"});default:return null}},x=()=>{switch(b){case"pending":return"Pending Deposits";case"approved":return"Approved Deposits";case"rejected":return"Rejected Deposits";default:return"All Deposits"}},N=j=>{if(j!=null&&j.includes("Investment Plan:")){const k=j.match(/Investment Plan: ([^(]+)/);return{type:"Investment",planName:k?k[1].trim():"Unknown Plan",icon:s.jsx(qe,{className:"w-4 h-4 text-blue-500"})}}return{type:"Direct Deposit",planName:null,icon:s.jsx(Rt,{className:"w-4 h-4 text-gray-500"})}};return a?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"text-lg",children:"Loading deposits..."})})}):s.jsx(be,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:x()}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Monitor and manage deposit requests"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx("span",{className:"font-medium",children:v.length}),s.jsx("span",{children:"deposits found"})]})]})}),s.jsx("div",{className:"bg-white border-b border-gray-200 px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{placeholder:"Search by user, deposit ID, or transaction ID...",value:e,onChange:j=>t(j.target.value),className:"pl-10 h-10"})]}),s.jsxs(F,{variant:"outline",className:"h-10",children:[s.jsx(mu,{className:"w-4 h-4 mr-2"}),"More Filters"]})]})}),s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 py-6",children:v.length===0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 sm:p-12 text-center",children:s.jsx("div",{className:"text-gray-500 text-base sm:text-lg",children:"No deposits found for the selected criteria."})}):s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"block lg:hidden",children:v.map(j=>{var _,C;const k=N(j.notes),S=o===j.id;return s.jsxs("div",{className:"border-b border-gray-200 p-3 sm:p-4 last:border-b-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-gray-900 truncate text-sm sm:text-base",children:(_=j.users)==null?void 0:_.full_name}),s.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:["@",(C=j.users)==null?void 0:C.username]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[p(j.status),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs capitalize whitespace-nowrap ${j.status==="approved"?"bg-green-100 text-green-700":j.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:j.status})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 text-xs sm:text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Amount"}),s.jsx("div",{className:"font-bold text-green-600",children:Y(j.amount,h)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Method"}),s.jsx("div",{className:"font-medium",children:j.payment_method})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Type"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[k.icon,s.jsx("span",{className:"text-xs sm:text-sm",children:k.type})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Date"}),s.jsx("div",{className:"text-xs sm:text-sm",children:new Date(j.created_at).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx(F,{size:"sm",className:"bg-green-600 hover:bg-green-700 flex-1 min-w-0 text-xs",onClick:()=>y(j.id,"approved"),disabled:S,children:S&&c==="approved"?"Approving...":"Approve"}),s.jsx(F,{size:"sm",variant:"destructive",className:"flex-1 min-w-0 text-xs",onClick:()=>y(j.id,"rejected"),disabled:S,children:S&&c==="rejected"?"Rejecting...":"Reject"})]}),s.jsx(F,{variant:"outline",size:"sm",className:"flex-1 min-w-0 text-xs",onClick:()=>g(j.id),children:"View Details"})]})]},j.id)})}),s.jsx("div",{className:"hidden lg:block overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Deposit ID"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"User"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Amount"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Type"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Method"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Date"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Status"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:v.map(j=>{var _,C;const k=N(j.notes),S=o===j.id;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"py-4 px-6",children:[s.jsxs("div",{className:"font-medium text-sm",children:[j.id.slice(0,8),"..."]}),j.transaction_id&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:j.transaction_id})]}),s.jsxs("td",{className:"py-4 px-6",children:[s.jsx("div",{className:"font-medium text-sm",children:(_=j.users)==null?void 0:_.full_name}),s.jsxs("div",{className:"text-xs text-gray-500",children:["@",(C=j.users)==null?void 0:C.username]})]}),s.jsx("td",{className:"py-4 px-6 font-bold text-green-600",children:Y(j.amount,h)}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[k.icon,s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:k.type}),k.planName&&s.jsx("div",{className:"text-xs text-blue-600",children:k.planName})]})]})}),s.jsx("td",{className:"py-4 px-6 text-sm",children:j.payment_method}),s.jsx("td",{className:"py-4 px-6 text-sm",children:new Date(j.created_at).toLocaleDateString()}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[p(j.status),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs capitalize ${j.status==="approved"?"bg-green-100 text-green-700":j.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:j.status})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex space-x-2",children:[j.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx(F,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>y(j.id,"approved"),disabled:S,children:S&&c==="approved"?"Approving...":"Approve"}),s.jsx(F,{size:"sm",variant:"destructive",onClick:()=>y(j.id,"rejected"),disabled:S,children:S&&c==="rejected"?"Rejecting...":"Reject"})]}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>g(j.id),children:"View Details"})]})})]},j.id)})})]})})]})})]})})},OI=async(e,t,r)=>{try{console.log("=== STARTING DEPOSIT APPROVAL PROCESS ==="),console.log("Deposit ID:",e),console.log("User ID:",t),console.log("Amount:",r);const{data:n,error:a}=await A.from("users").select("available_balance, total_deposits, referred_by_user_id, full_name").eq("id",t).single();if(a)throw console.error(" Error fetching user data:",a),new Error(`Failed to fetch user data: ${a.message}`);if(!n)throw console.error(" User not found:",t),new Error("User not found");console.log(" Current user data:",{balance:n.available_balance,totalDeposits:n.total_deposits,hasReferrer:!!n.referred_by_user_id,referrerId:n.referred_by_user_id});const i=(n.available_balance||0)+r,o=(n.total_deposits||0)+r;console.log(" Updating user balance:",{oldBalance:n.available_balance,newBalance:i,oldTotalDeposits:n.total_deposits,newTotalDeposits:o});const{error:l}=await A.from("users").update({available_balance:i,total_deposits:o,updated_at:new Date().toISOString()}).eq("id",t);if(l)throw console.error(" Error updating user balance:",l),new Error(`Failed to update user balance: ${l.message}`);console.log(" User balance updated successfully");const{error:c}=await A.from("transactions").insert({user_id:t,type:"deposit",amount:r,status:"completed",description:`Deposit approved - Rs. ${r}`,reference_type:"deposit",reference_id:e});if(c)throw console.error(" Error creating deposit transaction:",c),new Error(`Failed to create transaction record: ${c.message}`);return console.log(" Deposit transaction created successfully"),console.log(" Referral commissions will be processed automatically by database trigger"),console.log("=== DEPOSIT APPROVAL PROCESS COMPLETED SUCCESSFULLY ==="),{success:!0,message:"Deposit approved successfully. Referral commissions processed automatically.",userBalance:i,totalDeposits:o}}catch(n){throw console.error(" CRITICAL ERROR in processDepositApproval:",n),n}},LI=()=>{var w,v,y;const{id:e}=Ul(),t=Oe(),[r,n]=f.useState(null),[a,i]=f.useState(!0),[o,l]=f.useState(null),{settings:c,loading:d}=Te();f.useEffect(()=>{e&&u()},[e]);const u=async()=>{try{i(!0),console.log("Fetching deposit with ID:",e);const{data:g,error:p}=await A.from("deposits").select(`
          *,
          users!deposits_user_id_fkey (
            full_name,
            email,
            phone_number
          )
        `).eq("id",e).single();if(p){console.error("Error fetching deposit:",p),J.error("Failed to load deposit details");return}console.log("Fetched deposit data:",g),n(g)}catch(g){console.error("Error:",g),J.error("Failed to load deposit details")}finally{i(!1)}},m=g=>{switch(g){case"approved":return s.jsx(Vt,{className:"w-5 h-5 text-green-500"});case"pending":return s.jsx(_t,{className:"w-5 h-5 text-yellow-500"});case"rejected":return s.jsx($i,{className:"w-5 h-5 text-red-500"});default:return null}},h=async g=>{if(r){l(g);try{if(g==="approved")await b();else{const{error:p}=await A.from("deposits").update({status:g,processed_at:new Date().toISOString()}).eq("id",r.id);if(p){console.error("Error updating deposit status:",p),J.error("Failed to update deposit status");return}J.success(`Deposit ${g} successfully`),n({...r,status:g})}}catch(p){console.error("Error:",p),J.error("Failed to update deposit status")}finally{l(null)}}},b=async()=>{if(r){l("approved");try{console.log(" Starting deposit approval process...");const{error:g}=await A.from("deposits").update({status:"approved",processed_at:new Date().toISOString()}).eq("id",r.id);if(g)throw console.error(" Error updating deposit status:",g),new Error(`Failed to update deposit status: ${g.message}`);const p=await OI(r.id,r.user_id,r.amount);if(!p.success)throw new Error(p.message||"Failed to process deposit approval");console.log(" Deposit approval completed successfully"),J.success("Deposit approved successfully! User balance updated and referral commissions processed automatically.",{duration:5e3}),n({...r,status:"approved"})}catch(g){console.error(" Error approving deposit:",g);const p=g instanceof Error?g.message:"Unknown error occurred";J.error(`Failed to approve deposit: ${p}`)}finally{l(null)}}};return a||d?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):r?s.jsx(be,{children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>t("/admin/deposits"),children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Deposit Details"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"View and manage deposit request"})]})]}),r&&r.status==="pending"&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(F,{onClick:()=>h("rejected"),variant:"destructive",disabled:o!==null,className:"flex items-center",children:[o==="rejected"?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):s.jsx($i,{className:"w-4 h-4 mr-2"}),o==="rejected"?"Rejecting...":"Reject"]}),s.jsxs(F,{onClick:()=>h("approved"),className:"bg-green-600 hover:bg-green-700 flex items-center",disabled:o!==null,children:[o==="approved"?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):s.jsx(Vt,{className:"w-4 h-4 mr-2"}),o==="approved"?"Approving & Processing...":"Approve"]})]})]})}),r&&r.status==="approved"&&s.jsx("div",{className:"px-2 sm:px-4 lg:px-6",children:s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vt,{className:"w-5 h-5 text-green-500 mr-2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Deposit Approved"}),s.jsx("p",{className:"text-sm text-green-700 mt-1",children:"This deposit has been approved. User balance updated and referral commissions processed automatically by the database trigger."})]})]})})}),s.jsx("div",{className:"px-2 sm:px-4 lg:px-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsx("span",{children:"Transaction Information"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[m(r.status),s.jsx(ke,{variant:r.status==="approved"?"default":r.status==="pending"?"secondary":"destructive",children:r.status.toUpperCase()})]})]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Deposit ID"}),s.jsxs("p",{className:"font-medium break-all",children:[r.id.slice(0,8),"..."]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Transaction ID"}),s.jsx("p",{className:"font-medium break-all",children:r.transaction_id||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Amount"}),s.jsx("p",{className:"font-bold text-green-600 text-lg",children:Y(r.amount,c)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Payment Method"}),s.jsx("p",{className:"font-medium",children:r.payment_method})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Date & Time"}),s.jsx("p",{className:"font-medium",children:new Date(r.created_at).toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Status"}),s.jsx("p",{className:"font-medium capitalize",children:r.status})]})]}),r.notes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Notes"}),s.jsx("p",{className:"font-medium break-words",children:r.notes})]})]})]}),r.screenshot_url&&s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx($w,{className:"w-5 h-5 mr-2"}),"Payment Screenshot"]})}),s.jsx(U,{children:s.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[s.jsx("img",{src:r.screenshot_url,alt:"Payment Screenshot",className:"w-full max-w-md mx-auto rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>window.open(r.screenshot_url,"_blank")}),s.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:"Click to view full size"})]})})]})]}),s.jsx("div",{className:"space-y-4 sm:space-y-6",children:s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(jt,{className:"w-5 h-5 mr-2"}),"User Information"]})}),s.jsxs(U,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Name"}),s.jsx("p",{className:"font-medium",children:((w=r.users)==null?void 0:w.full_name)||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"font-medium break-all",children:((v=r.users)==null?void 0:v.email)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("p",{className:"font-medium",children:((y=r.users)==null?void 0:y.phone_number)||"N/A"})]}),s.jsx(F,{variant:"outline",className:"w-full",onClick:()=>t(`/admin/users/${r.user_id}`),children:"View User Profile"})]})]})})]})})]})}):s.jsx(be,{children:s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Deposit Not Found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"The deposit you're looking for doesn't exist."}),s.jsxs(F,{onClick:()=>t("/admin/deposits"),children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to Deposits"]})]})})})},Eo=()=>{const[e,t]=f.useState(""),[r,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),c=br(),d=Oe(),{settings:u,loading:m}=Te(),h=f.useMemo(()=>c.pathname.includes("/pending")?"pending":c.pathname.includes("/approved")?"completed":c.pathname.includes("/rejected")?"failed":"all",[c.pathname]);f.useEffect(()=>{b()},[h]);const b=async()=>{try{let x=A.from("withdrawals").select(`
          *,
          users!withdrawals_user_id_fkey (
            id,
            full_name,
            email,
            phone_number,
            available_balance,
            total_withdrawals
          ),
          payment_gateways (
            name,
            gateway_type
          )
        `).order("created_at",{ascending:!1});h!=="all"&&(x=x.eq("status",h));const{data:N,error:j}=await x;if(j){console.error("Error fetching withdrawals:",j),J.error("Failed to load withdrawals");return}n(N||[])}catch(x){console.error("Error in fetchWithdrawals:",x),J.error("Failed to load withdrawals")}finally{i(!1)}},w=r.filter(x=>{var j,k,S;return((k=(j=x.users)==null?void 0:j.full_name)==null?void 0:k.toLowerCase().includes(e.toLowerCase()))||x.id.toLowerCase().includes(e.toLowerCase())||((S=x.transaction_id)==null?void 0:S.toLowerCase().includes(e.toLowerCase()))}),v=async(x,N)=>{var k,S,_;const j=r.find(C=>C.id===x);if(!j){J.error("Withdrawal not found");return}l(x);try{console.log(`Updating withdrawal ${x} to status: ${N}`);const{error:C}=await A.from("withdrawals").update({status:N,processed_at:new Date().toISOString()}).eq("id",x);if(C){console.error("Error updating withdrawal status:",C),J.error("Failed to update withdrawal status");return}const{error:E}=await A.from("transactions").update({status:N}).eq("reference_id",x).eq("reference_type","withdrawal");if(E&&(console.error("Error updating transaction status:",E),console.warn("Transaction status update failed, but withdrawal status was updated")),N==="completed"){const D=(((k=j.users)==null?void 0:k.available_balance)||0)-j.amount;if(D<0){J.error("User has insufficient balance for this withdrawal"),await A.from("withdrawals").update({status:"pending",processed_at:null}).eq("id",x);return}const{error:L}=await A.from("users").update({available_balance:D,total_withdrawals:(((S=j.users)==null?void 0:S.total_withdrawals)||0)+j.amount}).eq("id",j.user_id);if(L){console.error("Error updating user balance:",L),J.error("Failed to update user balance"),await A.from("withdrawals").update({status:"pending",processed_at:null}).eq("id",x);return}const{error:W}=await A.from("transactions").insert({user_id:j.user_id,type:"withdrawal_completed",amount:-j.amount,description:`Withdrawal approved - ${j.withdrawal_method}`,status:"completed",reference_type:"withdrawal",reference_id:x});W&&(console.error("Error creating balance transaction:",W),console.warn("Balance transaction creation failed, but withdrawal was processed")),J.success("Withdrawal approved and user balance updated successfully!")}else if(N==="failed"){const D=(((_=j.users)==null?void 0:_.available_balance)||0)+j.amount,{error:L}=await A.from("users").update({available_balance:D}).eq("id",j.user_id);if(L){console.error("Error updating user balance:",L),J.error("Failed to return money to user balance");return}const{error:W}=await A.from("transactions").insert({user_id:j.user_id,type:"withdrawal_rejected",amount:j.amount,description:"Withdrawal rejected - Amount returned to balance",status:"completed",reference_type:"withdrawal",reference_id:x});W&&(console.error("Error creating return transaction:",W),console.warn("Return transaction creation failed, but money was returned")),J.success("Withdrawal rejected and amount returned to user balance!")}await b()}catch(C){console.error("Error in handleStatusUpdate:",C),J.error("Failed to process withdrawal request")}finally{l(null)}},y=x=>{console.log("Navigating to withdrawal details:",x),d(`/admin/withdrawals/${x}`)},g=x=>{switch(x){case"completed":return s.jsx(Vt,{className:"w-4 h-4 text-green-500"});case"pending":return s.jsx(_t,{className:"w-4 h-4 text-yellow-500"});case"failed":return s.jsx($i,{className:"w-4 h-4 text-red-500"});default:return null}},p=()=>{switch(h){case"pending":return"Pending Withdrawals";case"completed":return"Approved Withdrawals";case"failed":return"Rejected Withdrawals";default:return"All Withdrawals"}};return a||m?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):s.jsx(be,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:p()}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Monitor and manage withdrawal requests"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx("span",{className:"font-medium",children:w.length}),s.jsx("span",{children:"withdrawals found"})]})]})}),s.jsx("div",{className:"bg-white border-b border-gray-200 px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{placeholder:"Search by user, withdrawal ID, or transaction ID...",value:e,onChange:x=>t(x.target.value),className:"pl-10 h-10"})]}),s.jsxs(F,{variant:"outline",className:"h-10",children:[s.jsx(mu,{className:"w-4 h-4 mr-2"}),"More Filters"]})]})}),s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 py-6",children:w.length===0?s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 sm:p-12 text-center",children:s.jsx("div",{className:"text-gray-500 text-base sm:text-lg",children:"No withdrawals found for the selected criteria."})}):s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"block lg:hidden",children:w.map(x=>{var N,j,k,S,_,C;return s.jsxs("div",{className:"border-b border-gray-200 p-3 sm:p-4 last:border-b-0",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-gray-900 truncate text-sm sm:text-base",children:(N=x.users)==null?void 0:N.full_name}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:x.withdrawal_method})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g(x.status),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs capitalize whitespace-nowrap ${x.status==="completed"?"bg-green-100 text-green-700":x.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:x.status})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 text-xs sm:text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Amount"}),s.jsx("div",{className:"font-bold text-red-600",children:Y(x.amount,u)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Bank"}),s.jsx("div",{className:"font-medium",children:((k=(j=x.account_details)==null?void 0:j.bank_account_details)==null?void 0:k.bank_name)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Account"}),s.jsxs("div",{className:"text-xs sm:text-sm",children:["****",((C=(_=(S=x.account_details)==null?void 0:S.bank_account_details)==null?void 0:_.account_number)==null?void 0:C.slice(-4))||"N/A"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Date"}),s.jsx("div",{className:"text-xs sm:text-sm",children:new Date(x.created_at).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx(F,{size:"sm",className:"bg-green-600 hover:bg-green-700 flex-1 min-w-0 text-xs",onClick:()=>v(x.id,"completed"),disabled:o===x.id,children:o===x.id?"Processing...":"Approve"}),s.jsx(F,{size:"sm",variant:"destructive",className:"flex-1 min-w-0 text-xs",onClick:()=>v(x.id,"failed"),disabled:o===x.id,children:o===x.id?"Processing...":"Reject"})]}),s.jsx(F,{variant:"outline",size:"sm",className:"flex-1 min-w-0 text-xs",onClick:()=>y(x.id),children:"View Details"})]})]},x.id)})}),s.jsx("div",{className:"hidden lg:block overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Withdrawal ID"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"User"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Amount"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Account Details"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Date"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Status"}),s.jsx("th",{className:"text-left py-4 px-6 font-medium text-sm text-gray-600",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(x=>{var N,j,k,S,_,C,E,$;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"py-4 px-6",children:[s.jsxs("div",{className:"font-medium text-sm",children:[x.id.slice(0,8),"..."]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x.transaction_id||"N/A"})]}),s.jsxs("td",{className:"py-4 px-6",children:[s.jsx("div",{className:"font-medium text-sm",children:(N=x.users)==null?void 0:N.full_name}),s.jsx("div",{className:"text-xs text-gray-500",children:x.withdrawal_method})]}),s.jsx("td",{className:"py-4 px-6 font-bold text-red-600",children:Y(x.amount,u)}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium",children:(k=(j=x.account_details)==null?void 0:j.bank_account_details)==null?void 0:k.account_holder_name}),s.jsx("div",{className:"text-gray-500",children:(_=(S=x.account_details)==null?void 0:S.bank_account_details)==null?void 0:_.bank_name}),s.jsxs("div",{className:"text-gray-500",children:["****",($=(E=(C=x.account_details)==null?void 0:C.bank_account_details)==null?void 0:E.account_number)==null?void 0:$.slice(-4)]})]})}),s.jsx("td",{className:"py-4 px-6 text-sm",children:new Date(x.created_at).toLocaleDateString()}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[g(x.status),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs capitalize ${x.status==="completed"?"bg-green-100 text-green-700":x.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:x.status})]})}),s.jsx("td",{className:"py-4 px-6",children:s.jsxs("div",{className:"flex space-x-2",children:[x.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx(F,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>v(x.id,"completed"),disabled:o===x.id,children:o===x.id?"Processing...":"Approve"}),s.jsx(F,{size:"sm",variant:"destructive",onClick:()=>v(x.id,"failed"),disabled:o===x.id,children:o===x.id?"Processing...":"Reject"})]}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>y(x.id),children:"View Details"})]})})]},x.id)})})]})})]})})]})})},MI=()=>{var w,v,y,g,p,x,N,j,k,S,_,C,E,$,D;const{id:e}=Ul(),t=Oe(),[r,n]=f.useState(null),[a,i]=f.useState(!0),[o,l]=f.useState(null),{settings:c,loading:d}=Te();f.useEffect(()=>{e&&u()},[e]);const u=async()=>{try{console.log("Fetching withdrawal details for ID:",e);const{data:L,error:W}=await A.from("withdrawals").select(`
          *,
          users!withdrawals_user_id_fkey (
            id,
            full_name,
            email,
            phone_number,
            available_balance,
            total_withdrawals
          ),
          payment_gateways (
            name,
            gateway_type
          )
        `).eq("id",e).single();if(W){console.error("Error fetching withdrawal:",W),J.error("Failed to load withdrawal details");return}console.log("Fetched withdrawal data:",L),n(L)}catch(L){console.error("Error in fetchWithdrawalDetails:",L),J.error("Failed to load withdrawal details")}finally{i(!1)}},m=(L,W)=>{navigator.clipboard.writeText(L).then(()=>{J.success(`${W} copied to clipboard`)}).catch(()=>{J.error("Failed to copy to clipboard")})},h=L=>{switch(L){case"completed":return s.jsx(Vt,{className:"w-5 h-5 text-green-500"});case"pending":return s.jsx(_t,{className:"w-5 h-5 text-yellow-500"});case"failed":return s.jsx($i,{className:"w-5 h-5 text-red-500"});default:return null}},b=async L=>{var W,ae,ee;if(!e||!r){J.error("Withdrawal ID not found");return}l(L);try{console.log(`Updating withdrawal ${e} to status: ${L}`);const{error:X}=await A.from("withdrawals").update({status:L,processed_at:new Date().toISOString()}).eq("id",e);if(X){console.error("Error updating withdrawal status:",X),J.error("Failed to update withdrawal status");return}const{error:T}=await A.from("transactions").update({status:L}).eq("reference_id",e).eq("reference_type","withdrawal");if(T&&(console.error("Error updating transaction status:",T),console.warn("Transaction status update failed, but withdrawal status was updated")),L==="completed"){const I=(((W=r.users)==null?void 0:W.available_balance)||0)-r.amount;if(I<0){J.error("User has insufficient balance for this withdrawal"),await A.from("withdrawals").update({status:"pending",processed_at:null}).eq("id",e);return}const{error:B}=await A.from("users").update({available_balance:I,total_withdrawals:(((ae=r.users)==null?void 0:ae.total_withdrawals)||0)+r.amount}).eq("id",r.user_id);if(B){console.error("Error updating user balance:",B),J.error("Failed to update user balance"),await A.from("withdrawals").update({status:"pending",processed_at:null}).eq("id",e);return}const{error:ne}=await A.from("transactions").insert({user_id:r.user_id,type:"withdrawal_completed",amount:-r.amount,description:`Withdrawal approved - ${r.withdrawal_method}`,status:"completed",reference_type:"withdrawal",reference_id:e});ne&&(console.error("Error creating balance transaction:",ne),console.warn("Balance transaction creation failed, but withdrawal was processed")),J.success("Withdrawal approved and user balance updated successfully!")}else if(L==="failed"){const I=(((ee=r.users)==null?void 0:ee.available_balance)||0)+r.amount,{error:B}=await A.from("users").update({available_balance:I}).eq("id",r.user_id);if(B){console.error("Error updating user balance:",B),J.error("Failed to return money to user balance");return}const{error:ne}=await A.from("transactions").insert({user_id:r.user_id,type:"withdrawal_rejected",amount:r.amount,description:"Withdrawal rejected - Amount returned to balance",status:"completed",reference_type:"withdrawal",reference_id:e});ne&&(console.error("Error creating return transaction:",ne),console.warn("Return transaction creation failed, but money was returned")),J.success("Withdrawal rejected and amount returned to user balance!")}await u()}catch(X){console.error("Error in handleStatusUpdate:",X),J.error("Failed to process withdrawal request")}finally{l(null)}};return a||d?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):r?s.jsx(be,{children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>t("/admin/withdrawals"),children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Withdrawal Details"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"View and manage withdrawal request"})]})]}),r&&r.status==="pending"&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(F,{onClick:()=>b("failed"),variant:"destructive",disabled:o!==null,className:"flex items-center",children:[o==="failed"?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):s.jsx($i,{className:"w-4 h-4 mr-2"}),o==="failed"?"Rejecting...":"Reject"]}),s.jsxs(F,{onClick:()=>b("completed"),className:"bg-green-600 hover:bg-green-700 flex items-center",disabled:o!==null,children:[o==="completed"?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):s.jsx(Vt,{className:"w-4 h-4 mr-2"}),o==="completed"?"Approving...":"Approve"]})]})]})}),s.jsx("div",{className:"px-2 sm:px-4 lg:px-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsx("span",{children:"Transaction Information"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[h(r.status),s.jsx(ke,{variant:r.status==="completed"?"default":r.status==="pending"?"secondary":"destructive",children:r.status.toUpperCase()})]})]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Withdrawal ID"}),s.jsxs("p",{className:"font-medium break-all",children:[r.id.slice(0,8),"..."]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Transaction ID"}),s.jsx("p",{className:"font-medium break-all",children:r.transaction_id||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Requested Amount"}),s.jsx("p",{className:"font-bold text-red-600 text-lg",children:Y(r.amount,c)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Payment Method"}),s.jsx("p",{className:"font-medium",children:r.withdrawal_method})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Date & Time"}),s.jsx("p",{className:"font-medium",children:new Date(r.created_at).toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"User Balance"}),s.jsx("p",{className:"font-medium text-green-600",children:Y(((w=r.users)==null?void 0:w.available_balance)||0,c)})]})]}),r.admin_notes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Admin Notes"}),s.jsx("p",{className:"font-medium break-words",children:r.admin_notes})]})]})]}),r.account_details&&s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(Rt,{className:"w-5 h-5 mr-2"}),"Bank Account Details"]})}),s.jsx(U,{className:"space-y-4",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-blue-800 mb-3 font-medium",children:(v=r.account_details)==null?void 0:v.instructions}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"text-sm text-gray-500 flex items-center",children:[s.jsx(jt,{className:"w-4 h-4 mr-1"}),"Account Holder Name"]}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{var L,W;return m((W=(L=r.account_details)==null?void 0:L.bank_account_details)==null?void 0:W.account_holder_name,"Account holder name")},className:"h-6 w-6 p-0",children:s.jsx(ti,{className:"w-3 h-3"})})]}),s.jsx("p",{className:"font-bold text-gray-800",children:(g=(y=r.account_details)==null?void 0:y.bank_account_details)==null?void 0:g.account_holder_name})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"text-sm text-gray-500 flex items-center",children:[s.jsx(Qo,{className:"w-4 h-4 mr-1"}),"Bank Name"]}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{var L,W;return m((W=(L=r.account_details)==null?void 0:L.bank_account_details)==null?void 0:W.bank_name,"Bank name")},className:"h-6 w-6 p-0",children:s.jsx(ti,{className:"w-3 h-3"})})]}),s.jsx("p",{className:"font-bold text-gray-800",children:(x=(p=r.account_details)==null?void 0:p.bank_account_details)==null?void 0:x.bank_name})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"text-sm text-gray-500 flex items-center",children:[s.jsx(Op,{className:"w-4 h-4 mr-1"}),"Account Number"]}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{var L,W;return m((W=(L=r.account_details)==null?void 0:L.bank_account_details)==null?void 0:W.account_number,"Account number")},className:"h-6 w-6 p-0",children:s.jsx(ti,{className:"w-3 h-3"})})]}),s.jsx("p",{className:"font-bold text-gray-800",children:(j=(N=r.account_details)==null?void 0:N.bank_account_details)==null?void 0:j.account_number})]}),((S=(k=r.account_details)==null?void 0:k.bank_account_details)==null?void 0:S.iban)&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("label",{className:"text-sm text-gray-500 flex items-center",children:[s.jsx(Rt,{className:"w-4 h-4 mr-1"}),"IBAN"]}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{var L,W;return m((W=(L=r.account_details)==null?void 0:L.bank_account_details)==null?void 0:W.iban,"IBAN")},className:"h-6 w-6 p-0",children:s.jsx(ti,{className:"w-3 h-3"})})]}),s.jsx("p",{className:"font-bold text-gray-800",children:(C=(_=r.account_details)==null?void 0:_.bank_account_details)==null?void 0:C.iban})]})]})]})})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Processing Timeline"})}),s.jsx(U,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Withdrawal Request Submitted"}),s.jsx("p",{className:"text-sm text-gray-500",children:new Date(r.created_at).toLocaleString()})]})]}),r.status==="pending"&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Under Review"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Awaiting admin approval"})]})]}),r.processed_at&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${r.status==="completed"?"bg-green-500":"bg-red-500"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:r.status==="completed"?"Approved & Processed":"Rejected"}),s.jsx("p",{className:"text-sm text-gray-500",children:new Date(r.processed_at).toLocaleString()})]})]})]})})]})]}),s.jsx("div",{className:"space-y-4 sm:space-y-6",children:s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(jt,{className:"w-5 h-5 mr-2"}),"User Information"]})}),s.jsxs(U,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Name"}),s.jsx("p",{className:"font-medium",children:(E=r.users)==null?void 0:E.full_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"font-medium break-all",children:(($=r.users)==null?void 0:$.email)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("p",{className:"font-medium",children:(D=r.users)==null?void 0:D.phone_number})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"User ID"}),s.jsx("p",{className:"font-medium text-xs break-all",children:r.user_id})]}),s.jsx(F,{variant:"outline",className:"w-full",onClick:()=>t(`/admin/users/${r.user_id}`),children:"View User Profile"})]})]})})]})})]})}):s.jsx(be,{children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"Withdrawal not found"}),s.jsxs(F,{variant:"outline",onClick:()=>t("/admin/withdrawals"),className:"mt-4",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to Withdrawals"]})]})})})};function FI(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var jx="ScrollArea",[ON,JO]=ps(jx),[$I,Lr]=ON(jx),LN=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=f.useState(null),[d,u]=f.useState(null),[m,h]=f.useState(null),[b,w]=f.useState(null),[v,y]=f.useState(null),[g,p]=f.useState(0),[x,N]=f.useState(0),[j,k]=f.useState(!1),[S,_]=f.useState(!1),C=Re(t,$=>c($)),E=Jl(a);return s.jsx($I,{scope:r,type:n,dir:E,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:m,onContentChange:h,scrollbarX:b,onScrollbarXChange:w,scrollbarXEnabled:j,onScrollbarXEnabledChange:k,scrollbarY:v,onScrollbarYChange:y,scrollbarYEnabled:S,onScrollbarYEnabledChange:_,onCornerWidthChange:p,onCornerHeightChange:N,children:s.jsx(xe.div,{dir:E,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});LN.displayName=jx;var MN="ScrollAreaViewport",FN=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,asChild:a,nonce:i,...o}=e,l=Lr(MN,r),c=f.useRef(null),d=Re(t,c,l.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:i}),s.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...o,asChild:a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:YI({asChild:a,children:n},u=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});FN.displayName=MN;var gs="ScrollAreaScrollbar",Nx=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Lr(gs,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return f.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(UI,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(zI,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx($N,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(_x,{...n,ref:t}):null});Nx.displayName=gs;var UI=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Lr(gs,e.__scopeScrollArea),[i,o]=f.useState(!1);return f.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(Or,{present:r||i,children:s.jsx($N,{"data-state":i?"visible":"hidden",...n,ref:t})})}),zI=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=Lr(gs,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Du(()=>c("SCROLL_END"),100),[l,c]=FI("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),f.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let m=d[u];const h=()=>{const b=d[u];m!==b&&(c("SCROLL"),o()),m=b};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,i,c,o]),s.jsx(Or,{present:r||l!=="hidden",children:s.jsx(_x,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:pe(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:pe(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),$N=f.forwardRef((e,t)=>{const r=Lr(gs,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=f.useState(!1),l=e.orientation==="horizontal",c=Du(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return Ki(r.viewport,c),Ki(r.content,c),s.jsx(Or,{present:n||i,children:s.jsx(_x,{"data-state":i?"visible":"hidden",...a,ref:t})})}),_x=f.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=Lr(gs,e.__scopeScrollArea),i=f.useRef(null),o=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=qN(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function m(h,b){return GI(h,o.current,l,b)}return r==="horizontal"?s.jsx(BI,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,b=hv(h,l,a.dir);i.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=m(h,a.dir))}}):r==="vertical"?s.jsx(WI,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,b=hv(h,l);i.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=m(h))}}):null}),BI=f.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=Lr(gs,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),d=Re(t,c,i.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(zN,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Tu(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),HN(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:zd(o.paddingLeft),paddingEnd:zd(o.paddingRight)}})}})}),WI=f.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=Lr(gs,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),d=Re(t,c,i.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(zN,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Tu(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),HN(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:zd(o.paddingTop),paddingEnd:zd(o.paddingBottom)}})}})}),[qI,UN]=ON(gs),zN=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...h}=e,b=Lr(gs,r),[w,v]=f.useState(null),y=Re(t,C=>v(C)),g=f.useRef(null),p=f.useRef(""),x=b.viewport,N=n.content-n.viewport,j=wt(u),k=wt(c),S=Du(m,10);function _(C){if(g.current){const E=C.clientX-g.current.left,$=C.clientY-g.current.top;d({x:E,y:$})}}return f.useEffect(()=>{const C=E=>{const $=E.target;(w==null?void 0:w.contains($))&&j(E,N)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[x,w,N,j]),f.useEffect(k,[n,k]),Ki(w,S),Ki(b.content,S),s.jsx(qI,{scope:r,scrollbar:w,hasThumb:a,onThumbChange:wt(i),onThumbPointerUp:wt(o),onThumbPositionChange:k,onThumbPointerDown:wt(l),children:s.jsx(xe.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:pe(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=w.getBoundingClientRect(),p.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),_(C))}),onPointerMove:pe(e.onPointerMove,_),onPointerUp:pe(e.onPointerUp,C=>{const E=C.target;E.hasPointerCapture(C.pointerId)&&E.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=p.current,b.viewport&&(b.viewport.style.scrollBehavior=""),g.current=null})})})}),Ud="ScrollAreaThumb",BN=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=UN(Ud,e.__scopeScrollArea);return s.jsx(Or,{present:r||a.hasThumb,children:s.jsx(VI,{ref:t,...n})})}),VI=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=Lr(Ud,r),o=UN(Ud,r),{onThumbPositionChange:l}=o,c=Re(t,m=>o.onThumbChange(m)),d=f.useRef(),u=Du(()=>{d.current&&(d.current(),d.current=void 0)},100);return f.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(u(),!d.current){const b=KI(m,l);d.current=b,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,u,l]),s.jsx(xe.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:pe(e.onPointerDownCapture,m=>{const b=m.target.getBoundingClientRect(),w=m.clientX-b.left,v=m.clientY-b.top;o.onThumbPointerDown({x:w,y:v})}),onPointerUp:pe(e.onPointerUp,o.onThumbPointerUp)})});BN.displayName=Ud;var Sx="ScrollAreaCorner",WN=f.forwardRef((e,t)=>{const r=Lr(Sx,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(HI,{...e,ref:t}):null});WN.displayName=Sx;var HI=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=Lr(Sx,r),[i,o]=f.useState(0),[l,c]=f.useState(0),d=!!(i&&l);return Ki(a.scrollbarX,()=>{var m;const u=((m=a.scrollbarX)==null?void 0:m.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Ki(a.scrollbarY,()=>{var m;const u=((m=a.scrollbarY)==null?void 0:m.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?s.jsx(xe.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function zd(e){return e?parseInt(e,10):0}function qN(e,t){const r=e/t;return isNaN(r)?0:r}function Tu(e){const t=qN(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function GI(e,t,r,n="ltr"){const a=Tu(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,m=n==="ltr"?[0,u]:[u*-1,0];return VN([c,d],m)(e)}function hv(e,t,r="ltr"){const n=Tu(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],d=bf(e,c);return VN([0,o],[0,l])(d)}function VN(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function HN(e,t){return e>0&&e<t}var KI=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function Du(e,t){const r=wt(e),n=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),f.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Ki(e,t){const r=wt(t);St(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}function YI(e,t){const{asChild:r,children:n}=e;if(!r)return typeof t=="function"?t(n):t;const a=f.Children.only(n);return f.cloneElement(a,{children:typeof t=="function"?t(a.props.children):t})}var GN=LN,QI=FN,JI=WN;const KN=f.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(GN,{ref:n,className:ve("relative overflow-hidden",e),...r,children:[s.jsx(QI,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(kx,{}),s.jsx(JI,{})]}));KN.displayName=GN.displayName;const kx=f.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(Nx,{ref:n,orientation:t,className:ve("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(BN,{className:"relative flex-1 rounded-full bg-border"})}));kx.displayName=Nx.displayName;const XI=()=>{const[e,t]=f.useState(""),[r,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(1),[c,d]=f.useState(window.innerWidth),{settings:u}=Te(),m=10;f.useEffect(()=>{const k=()=>{d(window.innerWidth)};return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),f.useEffect(()=>{h()},[]);const h=async()=>{try{const{data:k,error:S}=await A.from("transactions").select(`
          *,
          users!transactions_user_id_fkey (
            id,
            full_name,
            email
          )
        `).order("created_at",{ascending:!1}).limit(100);if(S){console.error("Error fetching transactions:",S);return}n(k||[])}catch(k){console.error("Error in fetchTransactions:",k)}finally{i(!1)}},b=r.filter(k=>{var _,C,E;return((C=(_=k.users)==null?void 0:_.full_name)==null?void 0:C.toLowerCase().includes(e.toLowerCase()))||k.id.toLowerCase().includes(e.toLowerCase())||((E=k.type)==null?void 0:E.toLowerCase().includes(e.toLowerCase()))}),w=Math.ceil(b.length/m),v=(o-1)*m,y=v+m,g=b.slice(v,y),p=()=>{o>1&&l(o-1)},x=()=>{o<w&&l(o+1)};f.useEffect(()=>{l(1)},[e]);const N=k=>{const S={completed:"bg-green-100 text-green-800 border border-green-200",pending:"bg-yellow-100 text-yellow-800 border border-yellow-200",failed:"bg-red-100 text-red-800 border border-red-200",cancelled:"bg-gray-100 text-gray-800 border border-gray-200"};return s.jsx(ke,{className:`${S[k]||S.pending} text-xs px-2 py-0.5`,children:k})},j=k=>{const S={deposit:"bg-blue-100 text-blue-800 border border-blue-200",withdrawal:"bg-purple-100 text-purple-800 border border-purple-200",investment:"bg-green-100 text-green-800 border border-green-200",profit:"bg-emerald-100 text-emerald-800 border border-emerald-200",referral:"bg-orange-100 text-orange-800 border border-orange-200"};return s.jsx(ke,{className:`${S[k]||S.deposit} text-xs px-2 py-0.5`,children:k})};return a?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"})})}):s.jsx(be,{children:s.jsxs("div",{className:"p-3 space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Transactions"}),s.jsxs("div",{className:"relative",children:[s.jsx(qs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(H,{placeholder:"Search transactions...",value:e,onChange:k=>t(k.target.value),className:"pl-10 w-full sm:w-64 h-9 text-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[s.jsx(M,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-0",children:s.jsx(U,{className:"p-3",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-blue-100 text-xs",children:"Total Transactions"}),s.jsx("p",{className:"text-lg font-bold",children:b.length})]})})}),s.jsx(M,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white border-0",children:s.jsx(U,{className:"p-3",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-green-100 text-xs",children:"Completed"}),s.jsx("p",{className:"text-lg font-bold",children:b.filter(k=>k.status==="completed").length})]})})}),s.jsx(M,{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white border-0",children:s.jsx(U,{className:"p-3",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-yellow-100 text-xs",children:"Pending"}),s.jsx("p",{className:"text-lg font-bold",children:b.filter(k=>k.status==="pending").length})]})})})]}),s.jsx(M,{className:"border-0 shadow-lg",children:s.jsx(U,{className:"p-0",children:s.jsxs(KN,{className:"w-full",children:[s.jsxs("div",{className:"min-w-full",children:[s.jsxs("div",{className:"grid grid-cols-6 gap-2 p-3 bg-gray-50 text-xs font-medium text-gray-700 border-b",children:[s.jsx("div",{children:"User"}),s.jsx("div",{children:"Type"}),s.jsx("div",{children:"Amount"}),s.jsx("div",{children:"Status"}),s.jsx("div",{children:"Date"}),s.jsx("div",{className:"text-center",children:"Actions"})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:g.map(k=>{var S,_;return s.jsxs("div",{className:"grid grid-cols-6 gap-2 p-3 hover:bg-gray-50 transition-colors items-center",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:((S=k.users)==null?void 0:S.full_name)||"Unknown User"}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:(_=k.users)==null?void 0:_.email})]}),s.jsx("div",{children:j(k.type)}),s.jsx("div",{children:s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:Y(Number(k.amount),u)})}),s.jsx("div",{children:N(k.status)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:new Date(k.created_at).toLocaleDateString()}),s.jsx("p",{className:"text-xs text-gray-400",children:new Date(k.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(F,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>{console.log("View transaction:",k)},children:s.jsx(An,{className:"h-3 w-3"})})})]},k.id)})})]}),s.jsx(kx,{orientation:"horizontal"})]})})}),w>1&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-xs text-gray-600",children:["Showing ",v+1," to ",Math.min(y,b.length)," of ",b.length," transactions"]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:p,disabled:o===1,className:"h-8 px-2",children:s.jsx(Mw,{className:"h-3 w-3"})}),s.jsxs("span",{className:"text-xs px-2",children:[o," of ",w]}),s.jsx(F,{variant:"outline",size:"sm",onClick:x,disabled:o===w,className:"h-8 px-2",children:s.jsx(Cs,{className:"h-3 w-3"})})]})]}),b.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"No transactions found"})})]})})};var Cx="Switch",[ZI,XO]=ps(Cx),[eO,tO]=ZI(Cx),YN=f.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[h,b]=f.useState(null),w=Re(t,x=>b(x)),v=f.useRef(!1),y=h?u||!!h.closest("form"):!0,[g=!1,p]=Ln({prop:a,defaultProp:i,onChange:d});return s.jsxs(eO,{scope:r,checked:g,disabled:l,children:[s.jsx(xe.button,{type:"button",role:"switch","aria-checked":g,"aria-required":o,"data-state":XN(g),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:w,onClick:pe(e.onClick,x=>{p(N=>!N),y&&(v.current=x.isPropagationStopped(),v.current||x.stopPropagation())})}),y&&s.jsx(rO,{control:h,bubbles:!v.current,name:n,value:c,checked:g,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});YN.displayName=Cx;var QN="SwitchThumb",JN=f.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=tO(QN,r);return s.jsx(xe.span,{"data-state":XN(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});JN.displayName=QN;var rO=e=>{const{control:t,checked:r,bubbles:n=!0,...a}=e,i=f.useRef(null),o=cx(r),l=Kp(t);return f.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&m){const h=new Event("click",{bubbles:n});m.call(c,r),c.dispatchEvent(h)}},[o,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function XN(e){return e?"checked":"unchecked"}var ZN=YN,sO=JN;const Gt=f.forwardRef(({className:e,...t},r)=>s.jsx(ZN,{className:ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(sO,{className:ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Gt.displayName=ZN.displayName;const nO=()=>{const e=Oe(),[t,r]=f.useState([]),[n,a]=f.useState(!0),{settings:i,loading:o}=Te();f.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0);const v=await mi.getAll();r(v)}catch(v){console.error("Error loading plans:",v),se.error("Failed to load investment plans")}finally{a(!1)}},c=v=>Y(v,i),d=async(v,y)=>{try{await mi.toggleStatus(v,!y),r(g=>g.map(p=>p.id===v?{...p,is_active:!y}:p)),se.success(`Plan ${y?"deactivated":"activated"} successfully`)}catch(g){console.error("Error updating plan status:",g),se.error("Failed to update plan status")}},u=async v=>{if(confirm("Are you sure you want to delete this plan?"))try{await mi.delete(v),r(y=>y.filter(g=>g.id!==v)),se.success("Plan deleted successfully")}catch(y){console.error("Error deleting plan:",y),se.error("Failed to delete plan")}},m=()=>{e("/admin/investment-plans/create")},h=v=>{e(`/admin/investment-plans/edit/${v}`)},b=(v,y)=>(v*y).toFixed(2),w=v=>v?["Daily returns","Capital back","Customer support","Investment protection"]:["Basic features"];return n||o?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):s.jsx(be,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Investment Plans"}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Create and manage investment plans"})]}),s.jsxs(F,{onClick:m,className:"h-10",children:[s.jsx(gr,{className:"w-4 h-4 mr-2"}),"Create New Plan"]})]})}),s.jsxs("div",{className:"px-2 sm:px-4 lg:px-6 py-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:t.map(v=>s.jsxs(M,{className:`${v.is_active?"border-green-200 bg-green-50/30":"border-gray-200"} shadow-sm hover:shadow-md transition-shadow`,children:[s.jsx(K,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs(Q,{className:"flex items-center text-sm sm:text-base mb-2",children:[s.jsx(qe,{className:"w-4 h-4 mr-2 text-green-600 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:v.name})]}),s.jsx(ke,{variant:v.is_active?"default":"secondary",className:"text-xs",children:v.is_active?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex space-x-1 ml-2",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>h(v.id),className:"h-8 w-8 p-0",children:s.jsx(_l,{className:"w-3 h-3"})}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>u(v.id),className:"h-8 w-8 p-0",children:s.jsx(zi,{className:"w-3 h-3"})})]})]})}),s.jsxs(U,{className:"space-y-4 pt-0",children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-600 line-clamp-2",children:v.description||"No description provided"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Investment Range:"}),s.jsxs("span",{className:"text-xs font-medium",children:[c(v.minimum_amount)," - ",v.maximum_amount?c(v.maximum_amount):"No limit"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Duration:"}),s.jsxs("span",{className:"text-xs font-medium",children:[v.duration_days," days"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Daily Return:"}),s.jsxs("span",{className:"text-xs font-medium text-green-600",children:[(v.daily_profit_percentage*100).toFixed(2),"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"Total Return:"}),s.jsxs("span",{className:"text-xs font-bold text-green-600",children:[b(v.daily_profit_percentage*100,v.duration_days),"%"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-medium mb-2",children:"Features:"}),s.jsx("ul",{className:"text-xs space-y-1",children:w(v.description).map((y,g)=>s.jsxs("li",{className:"flex items-center",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:y})]},g))})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[s.jsx("span",{className:"text-xs",children:"Status:"}),s.jsx(Gt,{checked:v.is_active||!1,onCheckedChange:()=>d(v.id,v.is_active||!1)})]})]})]},v.id))}),t.length===0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 sm:p-12 text-center",children:[s.jsx(qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Investment Plans"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first investment plan."}),s.jsxs(F,{onClick:m,children:[s.jsx(gr,{className:"w-4 h-4 mr-2"}),"Create New Plan"]})]})]})]})})},mv=()=>{const e=Oe(),[t,r]=f.useState(!1),[n,a]=f.useState("percent"),{settings:i,loading:o}=Te(),[l,c]=f.useState({name:"",minAmount:"",maxAmount:"",duration:"",dailyReturn:"",description:""}),d=Es(i),u=async()=>{if(h())try{r(!0);let w;if(n==="percent")w=parseFloat(l.dailyReturn)/100;else{const y=parseFloat(l.minAmount);w=parseFloat(l.dailyReturn)/y}const v={name:l.name,minimum_amount:parseFloat(l.minAmount),maximum_amount:l.maxAmount?parseFloat(l.maxAmount):null,duration_days:parseInt(l.duration),daily_profit_percentage:w,description:l.description,is_active:!0};await mi.create(v),se.success("Investment plan created successfully"),e("/admin/investment-plans")}catch(w){console.error("Error creating plan:",w),se.error("Failed to create investment plan")}finally{r(!1)}},m=()=>{e("/admin/investment-plans")},h=()=>l.name&&l.minAmount&&l.duration&&l.dailyReturn&&l.description,b=()=>!l.dailyReturn||!l.duration?"0":n==="percent"?(parseFloat(l.dailyReturn)*parseFloat(l.duration)).toFixed(1):(parseFloat(l.dailyReturn)*parseFloat(l.duration)).toFixed(2);return o?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):s.jsx(be,{children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(F,{variant:"outline",size:"sm",onClick:m,className:"flex items-center",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to Plans"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Create New Investment Plan"}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Design a new investment plan for your users"})]})]})}),s.jsx("div",{className:"px-2 sm:px-4 lg:px-6",children:s.jsxs(M,{className:"max-w-4xl",children:[s.jsx(K,{children:s.jsx(Q,{children:"Plan Details"})}),s.jsxs(U,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"planName",children:"Plan Name *"}),s.jsx(H,{id:"planName",value:l.name,onChange:w=>c(v=>({...v,name:w.target.value})),placeholder:"e.g., Premium Plan"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"duration",children:"Duration (days) *"}),s.jsx(H,{id:"duration",type:"number",value:l.duration,onChange:w=>c(v=>({...v,duration:w.target.value})),placeholder:"30"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"profitType",children:"Profit Type *"}),s.jsxs(Er,{value:n,onValueChange:a,children:[s.jsx(hr,{children:s.jsx(Pr,{})}),s.jsxs(mr,{children:[s.jsx($e,{value:"percent",children:"Percentage (%)"}),s.jsxs($e,{value:"simple",children:["Simple Amount (",d,")"]})]})]})]}),s.jsxs("div",{children:[s.jsxs(V,{htmlFor:"dailyReturn",children:["Daily Return ",n==="percent"?"(%)":`(${d})`," *"]}),s.jsx(H,{id:"dailyReturn",type:"number",step:"0.1",value:l.dailyReturn,onChange:w=>c(v=>({...v,dailyReturn:w.target.value})),placeholder:n==="percent"?"2.5":"25"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n==="percent"?"Enter percentage (e.g., 2.5 for 2.5%)":`Enter daily profit amount in ${d}`})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs(V,{htmlFor:"minAmount",children:["Minimum Amount (",d,") *"]}),s.jsx(H,{id:"minAmount",type:"number",value:l.minAmount,onChange:w=>c(v=>({...v,minAmount:w.target.value})),placeholder:"100"})]}),s.jsxs("div",{children:[s.jsxs(V,{htmlFor:"maxAmount",children:["Maximum Amount (",d,")"]}),s.jsx(H,{id:"maxAmount",type:"number",value:l.maxAmount,onChange:w=>c(v=>({...v,maxAmount:w.target.value})),placeholder:"1000"})]}),s.jsxs("div",{children:[s.jsx(V,{children:"Total Return"}),s.jsx(H,{value:b()+(n==="percent"?"%":` ${d}`),disabled:!0,className:"bg-gray-50"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Automatically calculated"})]})]})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"description",children:"Description *"}),s.jsx(Bs,{id:"description",value:l.description,onChange:w=>c(v=>({...v,description:w.target.value})),placeholder:"Describe the investment plan benefits and target audience...",rows:4})]}),h()&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[s.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Plan Preview"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Investment Range:"}),s.jsxs("div",{className:"font-medium",children:[d,l.minAmount," - ",d,l.maxAmount||"No limit"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Duration:"}),s.jsxs("div",{className:"font-medium",children:[l.duration," days"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Daily Return:"}),s.jsx("div",{className:"font-medium text-green-600",children:n==="percent"?`${l.dailyReturn}%`:`${d}${l.dailyReturn}`})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Total Return:"}),s.jsxs("div",{className:"font-bold text-green-600",children:[b(),n==="percent"?"%":` ${d}`]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 pt-4 border-t",children:[s.jsxs(F,{onClick:u,disabled:!h()||t,className:"bg-emerald-600 hover:bg-emerald-700 w-full sm:w-auto",children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),t?"Creating...":"Create Plan"]}),s.jsxs(F,{variant:"outline",onClick:m,className:"w-full sm:w-auto",children:[s.jsx(Hl,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})]})})]})})},aO=()=>{const{settings:e}=Te(),[t,r]=f.useState([]),[n,a]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState({title:"",message:"",type:"system",priority:"normal",icon:""});f.useEffect(()=>{const y=localStorage.getItem("adminUser");if(y){const g=JSON.parse(y);c(g)}},[]);const m=async()=>{a(!0);try{const{data:y,error:g}=await A.from("notifications").select("*").order("created_at",{ascending:!1});if(g){console.error("Error fetching admin notifications:",g),se.error("Failed to fetch notifications");return}console.log("Fetched notifications:",y),r(y||[])}catch(y){console.error("Error fetching notifications:",y),se.error("Failed to load notifications")}finally{a(!1)}};f.useEffect(()=>{m()},[]);const h=async y=>{if(y.preventDefault(),!d.title.trim()||!d.message.trim()){se.error("Please fill in all required fields");return}if(!l){se.error("Admin user not found. Please log in again.");return}o(!0);try{const{data:g,error:p}=await A.from("admin_users").select("id").eq("username",l.username).single();if(p||!g)throw console.error("Error finding admin user:",p),new Error("Admin user not found in database");const{data:x,error:N}=await A.rpc("create_broadcast_notification",{p_admin_id:g.id,p_type:d.type,p_title:d.title,p_message:d.message,p_icon:d.icon,p_priority:d.priority,p_metadata:{}});if(N)throw console.error("RPC Error:",N),N;se.success("Broadcast notification sent successfully!"),u({title:"",message:"",type:"system",priority:"normal",icon:""}),m()}catch(g){console.error("Error sending notification:",g),se.error(g instanceof Error?g.message:"Failed to send notification")}finally{o(!1)}},b=y=>{switch(y){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"normal":return"bg-blue-100 text-blue-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},w=y=>new Date(y).toLocaleString(),v=y=>y.replace(/Rs\.\s?/g,`${e.currencySymbol} `);return s.jsx(be,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 px-2 sm:px-4 lg:px-6 py-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Notifications Management"}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Send broadcasts and manage notifications"})]}),l&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Logged in as: ",l.username]})]})}),s.jsxs("div",{className:"px-2 sm:px-4 lg:px-6 py-6 space-y-6",children:[s.jsxs(M,{className:"shadow-sm",children:[s.jsx(K,{className:"pb-4",children:s.jsxs(Q,{className:"flex items-center space-x-2 text-base sm:text-lg",children:[s.jsx(Pn,{className:"w-5 h-5"}),s.jsx("span",{children:"Send Broadcast Notification"})]})}),s.jsx(U,{children:s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),s.jsx(H,{value:d.title,onChange:y=>u({...d,title:y.target.value}),placeholder:"Notification title",className:"h-10",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),s.jsxs("select",{value:d.type,onChange:y=>u({...d,type:y.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 h-10 text-sm",children:[s.jsx("option",{value:"system",children:"System"}),s.jsx("option",{value:"security",children:"Security"}),s.jsx("option",{value:"maintenance",children:"Maintenance"}),s.jsx("option",{value:"promotion",children:"Promotion"}),s.jsx("option",{value:"update",children:"Update"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),s.jsxs("select",{value:d.priority,onChange:y=>u({...d,priority:y.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 h-10 text-sm",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message *"}),s.jsx(Bs,{value:d.message,onChange:y=>u({...d,message:y.target.value}),placeholder:"Notification message",rows:3,className:"text-sm",required:!0})]}),s.jsxs(F,{type:"submit",disabled:i||!l,className:"w-full h-10",children:[s.jsx(DP,{className:"w-4 h-4 mr-2"}),i?"Sending...":"Send Broadcast Notification"]})]})})]}),s.jsxs(M,{className:"shadow-sm",children:[s.jsx(K,{className:"pb-4",children:s.jsxs(Q,{className:"text-base sm:text-lg",children:["All Notifications (",t.length,")"]})}),s.jsx(U,{children:n?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500 mx-auto"}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Loading notifications..."})]}):t.length>0?s.jsxs("div",{className:"space-y-3",children:[t.slice(0,20).map(y=>s.jsx("div",{className:"border rounded-lg p-3 sm:p-4 hover:bg-gray-50",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[s.jsx("div",{className:"text-lg flex-shrink-0",children:y.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center flex-wrap gap-2 mb-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900 text-sm truncate",children:y.title}),s.jsxs(ke,{className:"bg-red-100 text-red-800 text-xs flex-shrink-0",children:[s.jsx(ct,{className:"w-3 h-3 mr-1"}),y.is_broadcast?"Broadcast":"Direct"]}),s.jsx(ke,{className:`${b(y.priority)} text-xs flex-shrink-0`,children:y.priority})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:v(y.message)}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 flex-wrap gap-1",children:[s.jsx("span",{className:"truncate",children:w(y.created_at)}),s.jsxs("span",{className:"truncate",children:["Type: ",y.type]})]})]})]})})},y.id)),t.length>20&&s.jsxs("div",{className:"text-center text-gray-500 text-sm",children:["Showing 20 of ",t.length," notifications"]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Pn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-gray-500",children:"No notifications have been sent yet."})]})})]})]})]})})};var e_="AlertDialog",[iO,ZO]=ps(e_,[A1]),Vs=A1(),t_=e=>{const{__scopeAlertDialog:t,...r}=e,n=Vs(t);return s.jsx(H1,{...n,...r,modal:!0})};t_.displayName=e_;var oO="AlertDialogTrigger",r_=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Vs(r);return s.jsx(G1,{...a,...n,ref:t})});r_.displayName=oO;var lO="AlertDialogPortal",s_=e=>{const{__scopeAlertDialog:t,...r}=e,n=Vs(t);return s.jsx(K1,{...n,...r})};s_.displayName=lO;var cO="AlertDialogOverlay",n_=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Vs(r);return s.jsx(xx,{...a,...n,ref:t})});n_.displayName=cO;var fi="AlertDialogContent",[dO,uO]=iO(fi),a_=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Vs(r),o=f.useRef(null),l=Re(t,o),c=f.useRef(null);return s.jsx(VD,{contentName:fi,titleName:i_,docsSlug:"alert-dialog",children:s.jsx(dO,{scope:r,cancelRef:c,children:s.jsxs(gx,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:pe(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(Bw,{children:n}),s.jsx(mO,{contentRef:o})]})})})});a_.displayName=fi;var i_="AlertDialogTitle",o_=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Vs(r);return s.jsx(vx,{...a,...n,ref:t})});o_.displayName=i_;var l_="AlertDialogDescription",c_=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Vs(r);return s.jsx(yx,{...a,...n,ref:t})});c_.displayName=l_;var hO="AlertDialogAction",d_=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Vs(r);return s.jsx(bx,{...a,...n,ref:t})});d_.displayName=hO;var u_="AlertDialogCancel",h_=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=uO(u_,r),i=Vs(r),o=Re(t,a);return s.jsx(bx,{...i,...n,ref:o})});h_.displayName=u_;var mO=({contentRef:e})=>{const t=`\`${fi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${fi}\` by passing a \`${l_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},fO=t_,pO=r_,xO=s_,m_=n_,f_=a_,p_=d_,x_=h_,g_=o_,v_=c_;const gO=fO,vO=pO,yO=xO,y_=f.forwardRef(({className:e,...t},r)=>s.jsx(m_,{className:ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));y_.displayName=m_.displayName;const b_=f.forwardRef(({className:e,...t},r)=>s.jsxs(yO,{children:[s.jsx(y_,{}),s.jsx(f_,{ref:r,className:ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));b_.displayName=f_.displayName;const w_=({className:e,...t})=>s.jsx("div",{className:ve("flex flex-col space-y-2 text-center sm:text-left",e),...t});w_.displayName="AlertDialogHeader";const j_=({className:e,...t})=>s.jsx("div",{className:ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});j_.displayName="AlertDialogFooter";const N_=f.forwardRef(({className:e,...t},r)=>s.jsx(g_,{ref:r,className:ve("text-lg font-semibold",e),...t}));N_.displayName=g_.displayName;const __=f.forwardRef(({className:e,...t},r)=>s.jsx(v_,{ref:r,className:ve("text-sm text-muted-foreground",e),...t}));__.displayName=v_.displayName;const S_=f.forwardRef(({className:e,...t},r)=>s.jsx(p_,{ref:r,className:ve(sx(),e),...t}));S_.displayName=p_.displayName;const k_=f.forwardRef(({className:e,...t},r)=>s.jsx(x_,{ref:r,className:ve(sx({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));k_.displayName=x_.displayName;const bO=()=>{const[e,t]=f.useState([]),[r,n]=f.useState(!0),[a,i]=f.useState(!1),[o,l]=f.useState([{level:1,percentage:"5.00"}]);f.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:y,error:g}=await A.from("referral_settings").select("*").order("setting_key");if(g)throw g;console.log("Fetched settings:",y),t(y||[]);const p=y==null?void 0:y.find(x=>x.setting_key==="referral_level_commissions");if(p!=null&&p.setting_value)try{const x=JSON.parse(p.setting_value);l(x)}catch(x){console.error("Error parsing level commissions:",x)}}catch(y){console.error("Error fetching referral settings:",y),J.error("Failed to load referral settings")}finally{n(!1)}},d=(y,g)=>{console.log("Updating setting:",y,"to:",g),t(p=>{if(p.find(N=>N.setting_key===y))return p.map(N=>N.setting_key===y?{...N,setting_value:g}:N);{const N={id:`temp-${Date.now()}`,setting_key:y,setting_value:g,setting_type:"string",description:""};return[...p,N]}})},u=()=>{const y=o.length+1;l(g=>[...g,{level:y,percentage:"0.00"}])},m=y=>{o.length>1&&l(g=>g.filter(p=>p.level!==y).map((p,x)=>({...p,level:x+1})))},h=(y,g)=>{l(p=>p.map(x=>x.level===y?{...x,percentage:g}:x))},b=async()=>{i(!0);try{console.log("Saving settings:",e),d("referral_max_levels",o.length.toString());const y=[],g=[];for(const N of e)N.id.startsWith("temp-")?g.push({setting_key:N.setting_key,setting_value:N.setting_value,setting_type:N.setting_type||"string",description:N.description||""}):y.push({id:N.id,setting_value:N.setting_value,updated_at:new Date().toISOString()});if(g.length>0){const{error:N}=await A.from("referral_settings").insert(g);if(N)throw N}for(const N of y){const{error:j}=await A.from("referral_settings").update({setting_value:N.setting_value,updated_at:N.updated_at}).eq("id",N.id);if(j)throw j}const p=JSON.stringify(o),x=e.find(N=>N.setting_key==="referral_level_commissions");if(x&&!x.id.startsWith("temp-")){const{error:N}=await A.from("referral_settings").update({setting_value:p,updated_at:new Date().toISOString()}).eq("id",x.id);if(N)throw N}else{const{error:N}=await A.from("referral_settings").insert({setting_key:"referral_level_commissions",setting_value:p,setting_type:"string",description:"Commission percentages for each referral level"});if(N)throw N}J.success("Referral settings updated successfully"),c()}catch(y){console.error("Error updating referral settings:",y),J.error("Failed to update referral settings")}finally{i(!1)}},w=y=>e.find(g=>g.setting_key===y),v=y=>{var g;return((g=w(y))==null?void 0:g.setting_value)||""};return r?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Referral Settings"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Configure referral system parameters and bonuses"})]}),s.jsx(F,{onClick:b,disabled:a,className:"bg-emerald-600 hover:bg-emerald-700",children:a?s.jsxs(s.Fragment,{children:[s.jsx(Ui,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(so,{className:"w-5 h-5 mr-2 text-emerald-600"}),"System Configuration"]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(V,{htmlFor:"system_enabled",children:"Enable Referral System"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gt,{id:"system_enabled",checked:v("referral_system_enabled")==="true",onCheckedChange:y=>d("referral_system_enabled",y.toString())}),s.jsx("span",{className:"text-sm text-gray-600",children:v("referral_system_enabled")==="true"?"Enabled":"Disabled"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(V,{htmlFor:"enable_signup_bonus",children:"Enable Signup Bonus"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gt,{id:"enable_signup_bonus",checked:v("enable_signup_bonus")==="true",onCheckedChange:y=>d("enable_signup_bonus",y.toString())}),s.jsx("span",{className:"text-sm text-gray-600",children:"Give bonus on signup with referral code"})]})]}),s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:" Deposit Commission"}),s.jsx("p",{className:"text-sm text-blue-700",children:"When the referral system is enabled, users will automatically receive commission when their referred users make deposits based on the level-based commission configuration below."})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(Qr,{className:"w-5 h-5 mr-2 text-emerald-600"}),"Basic Configuration"]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(V,{htmlFor:"signup_bonus",children:"New User Signup Bonus (Rs.)"}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{id:"signup_bonus",type:"number",min:"0",step:"0.01",className:"pl-10",value:v("referral_signup_bonus"),onChange:y=>d("referral_signup_bonus",y.target.value)})]})]}),s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:" Commission System"}),s.jsx("p",{className:"text-sm text-green-700",children:"Commission rates are determined by the Level Commission Configuration below. When referral system is enabled, each referral level will earn commission based on their configured percentage when referred users make deposits."})]})]})]}),s.jsxs(M,{className:"lg:col-span-2",children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ct,{className:"w-5 h-5 mr-2 text-emerald-600"}),"Level Commission Configuration"]}),s.jsxs(F,{onClick:u,size:"sm",variant:"outline",children:[s.jsx(gr,{className:"w-4 h-4 mr-2"}),"Add Level"]})]})}),s.jsxs(U,{children:[s.jsx("div",{className:"space-y-4",children:o.map(y=>s.jsxs("div",{className:"flex items-center space-x-4 p-3 border rounded-lg",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("span",{className:"font-medium",children:["Level ",y.level]})}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Vl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{type:"number",min:"0",max:"100",step:"0.01",className:"pl-10",value:y.percentage,onChange:g=>h(y.level,g.target.value),placeholder:"Commission %"})]})}),o.length>1&&s.jsxs(gO,{children:[s.jsx(vO,{asChild:!0,children:s.jsx(F,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:s.jsx(zi,{className:"w-4 h-4"})})}),s.jsxs(b_,{children:[s.jsxs(w_,{children:[s.jsxs(N_,{children:["Remove Level ",y.level,"?"]}),s.jsx(__,{children:"Are you sure you want to remove this commission level? This action cannot be undone."})]}),s.jsxs(j_,{children:[s.jsx(k_,{children:"Cancel"}),s.jsx(S_,{onClick:()=>m(y.level),children:"Remove Level"})]})]})]})]},y.level))}),s.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Configure commission percentages for each referral level. Level 1 is direct referrals, Level 2 is referrals of referrals, etc. These percentages will be applied when referred users make deposits (only when referral system is enabled)."})]})]}),s.jsxs(M,{className:"lg:col-span-2",children:[s.jsx(K,{children:s.jsx(Q,{children:"Current Settings Overview"})}),s.jsxs(U,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"System Status:"}),s.jsx("span",{className:`font-medium ${v("referral_system_enabled")==="true"?"text-green-600":"text-red-600"}`,children:v("referral_system_enabled")==="true"?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Signup Bonus:"}),s.jsx("span",{className:`font-medium ${v("enable_signup_bonus")==="true"?"text-green-600":"text-red-600"}`,children:v("enable_signup_bonus")==="true"?"Enabled":"Disabled"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Deposit Commission:"}),s.jsx("span",{className:`font-medium ${v("referral_system_enabled")==="true"?"text-green-600":"text-gray-600"}`,children:v("referral_system_enabled")==="true"?"Level-Based (Auto)":"System Disabled"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("span",{className:"text-gray-600",children:"Commission Rates:"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:["Signup: Rs. ",v("referral_signup_bonus")||"0"]}),s.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:["Deposit Commission: ",o.length," levels configured"]}),o.map((y,g)=>s.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm",children:["L",y.level,": ",y.percentage,"%"]},y.level))]})]})]})]})]})]})})},wO=()=>{const e=Oe();return s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage system settings and configurations"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(so,{className:"w-5 h-5 mr-2"}),"General Settings"]})}),s.jsxs(U,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Configure basic application settings, site information, and regional preferences."}),s.jsx(F,{onClick:()=>e("/admin/general-settings"),className:"w-full",children:"Manage General Settings"})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(xa,{className:"w-5 h-5 mr-2 text-emerald-600"}),"Game Settings"]})}),s.jsxs(U,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Manage Rs.1 game configuration and monitor performance. Configure win rates, prizes, and user limits."}),s.jsx(F,{onClick:()=>e("/admin/settings/game"),className:"w-full bg-emerald-600 hover:bg-emerald-700",children:"Manage Game Settings"})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"System Status"})}),s.jsx(U,{children:s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99.9%"}),s.jsx("div",{className:"text-sm text-gray-600",children:"System Uptime"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"1,234"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Users"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"45ms"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Response Time"})]})]})})]})]})]})})},fv=()=>{const{settings:e,loading:t}=Te(),[r,n]=f.useState({}),[a,i]=f.useState(!0),[o,l]=f.useState(!1),c=[{value:"UTC",label:"UTC (Coordinated Universal Time)"},{value:"Asia/Karachi",label:"Pakistan Time (PKT)"},{value:"America/New_York",label:"Eastern Time (EST/EDT)"},{value:"America/Los_Angeles",label:"Pacific Time (PST/PDT)"},{value:"Europe/London",label:"Greenwich Mean Time (GMT)"},{value:"Asia/Kolkata",label:"India Standard Time (IST)"},{value:"Asia/Dhaka",label:"Bangladesh Standard Time (BST)"},{value:"Asia/Dubai",label:"Gulf Standard Time (GST)"}],d=[{value:"12",label:"12-hour format (12:30 PM)"},{value:"24",label:"24-hour format (12:30)"}],u=[{value:"DD/MM/YYYY",label:"DD/MM/YYYY (25/12/2024)"},{value:"MM/DD/YYYY",label:"MM/DD/YYYY (12/25/2024)"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD (2024-12-25)"},{value:"DD-MM-YYYY",label:"DD-MM-YYYY (25-12-2024)"}];f.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:y,error:g}=await A.from("system_settings").select("setting_key, setting_value, setting_type").in("category",["general","imagekit"]);if(g)throw g;const p={};y==null||y.forEach(x=>{let N=x.setting_value||"";x.setting_type==="boolean"?N=x.setting_value==="true":x.setting_type==="number"&&(N=parseFloat(x.setting_value||"0")),p[x.setting_key]=N}),p.hasOwnProperty("maintenance_mode")||(p.maintenance_mode=!1),p.hasOwnProperty("registration_enabled")||(p.registration_enabled=!0),p.hasOwnProperty("site_name")||(p.site_name="EasyPaisa"),p.hasOwnProperty("default_currency_code")||(p.default_currency_code="PKR"),p.hasOwnProperty("timezone")||(p.timezone="Asia/Karachi"),p.hasOwnProperty("time_format")||(p.time_format="12"),p.hasOwnProperty("date_format")||(p.date_format="DD/MM/YYYY"),n(p)}catch(y){console.error("Error fetching settings:",y),J.error("Failed to fetch settings")}finally{i(!1)}},h=(y,g)=>{if(n(p=>({...p,[y]:g})),y==="default_currency_code"&&typeof g=="string"){const p=e.supportedCurrencies[g];p&&n(x=>({...x,default_currency_symbol:p.symbol}))}},b=async()=>{l(!0);try{const y=Object.entries(r).map(([g,p])=>({setting_key:g,setting_value:p.toString(),updated_at:new Date().toISOString()}));for(const g of y){const{data:p,error:x}=await A.from("system_settings").select("id").eq("setting_key",g.setting_key).single();if(x&&x.code!=="PGRST116")throw x;if(p){const{error:N}=await A.from("system_settings").update({setting_value:g.setting_value,updated_at:g.updated_at}).eq("setting_key",g.setting_key);if(N)throw N}else{const{error:N}=await A.from("system_settings").insert({setting_key:g.setting_key,setting_value:g.setting_value,setting_type:typeof r[g.setting_key]=="boolean"?"boolean":"string",category:"general",created_at:g.updated_at,updated_at:g.updated_at});if(N)throw N}}J.success("Settings saved successfully")}catch(y){console.error("Error saving settings:",y),J.error("Failed to save settings")}finally{l(!1)}},w=y=>{const g=r[y];return typeof g=="string"?g:""},v=y=>{const g=r[y];return typeof g=="boolean"?g:!1};return a||t?s.jsx(be,{children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"text-center",children:"Loading settings..."})})}):s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"General Settings"}),s.jsx("p",{className:"text-gray-600",children:"Configure your application settings"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(so,{className:"w-5 h-5 mr-2"}),"Basic Information"]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"site_name",children:"Site Name"}),s.jsx(H,{id:"site_name",value:w("site_name"),onChange:y=>h("site_name",y.target.value),placeholder:"Enter your website name"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"site_description",children:"Site Description"}),s.jsx(H,{id:"site_description",value:w("site_description"),onChange:y=>h("site_description",y.target.value)})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"support_email",children:"Support Email"}),s.jsx(H,{id:"support_email",type:"email",value:w("support_email"),onChange:y=>h("support_email",y.target.value)})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"phone_number",children:"Phone Number"}),s.jsx(H,{id:"phone_number",value:w("phone_number"),onChange:y=>h("phone_number",y.target.value)})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"address",children:"Address"}),s.jsx(Bs,{id:"address",value:w("address"),onChange:y=>h("address",y.target.value)})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(mt,{className:"w-5 h-5 mr-2"}),"Currency Settings"]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"default_currency_code",children:"Default Currency"}),s.jsxs(Er,{value:w("default_currency_code"),onValueChange:y=>h("default_currency_code",y),children:[s.jsx(hr,{children:s.jsx(Pr,{placeholder:"Select currency"})}),s.jsx(mr,{children:Object.entries(e.supportedCurrencies).map(([y,g])=>s.jsxs($e,{value:y,children:[y," - ",g.name," (",g.symbol,")"]},y))})]})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"default_currency_symbol",children:"Currency Symbol"}),s.jsx(H,{id:"default_currency_symbol",value:w("default_currency_symbol")||e.currencySymbol,onChange:y=>h("default_currency_symbol",y.target.value),placeholder:"Currency symbol (e.g., $, Rs., )"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"timezone",children:"Timezone"}),s.jsxs(Er,{value:w("timezone"),onValueChange:y=>h("timezone",y),children:[s.jsx(hr,{children:s.jsx(Pr,{placeholder:"Select timezone"})}),s.jsx(mr,{children:c.map(y=>s.jsx($e,{value:y.value,children:y.label},y.value))})]})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"time_format",children:"Time Format"}),s.jsxs(Er,{value:w("time_format"),onValueChange:y=>h("time_format",y),children:[s.jsx(hr,{children:s.jsx(Pr,{placeholder:"Select time format"})}),s.jsx(mr,{children:d.map(y=>s.jsx($e,{value:y.value,children:y.label},y.value))})]})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"date_format",children:"Date Format"}),s.jsxs(Er,{value:w("date_format"),onValueChange:y=>h("date_format",y),children:[s.jsx(hr,{children:s.jsx(Pr,{placeholder:"Select date format"})}),s.jsx(mr,{children:u.map(y=>s.jsx($e,{value:y.value,children:y.label},y.value))})]})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Preview:"})," ",w("default_currency_symbol")||e.currencySymbol," 1,000"]})})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"System Configuration"})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(V,{children:"Maintenance Mode"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Put site in maintenance mode"})]}),s.jsx(Gt,{checked:v("maintenance_mode"),onCheckedChange:y=>h("maintenance_mode",y)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(V,{children:"User Registration"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Allow new user registrations"})]}),s.jsx(Gt,{checked:v("registration_enabled"),onCheckedChange:y=>h("registration_enabled",y)})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(Uw,{className:"w-5 h-5 mr-2"}),"ImageKit Configuration"]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"imagekit_id",children:"ImageKit ID"}),s.jsx(H,{id:"imagekit_id",value:w("imagekit_id"),onChange:y=>h("imagekit_id",y.target.value),placeholder:"Your ImageKit ID"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"imagekit_public_key",children:"Public Key"}),s.jsx(H,{id:"imagekit_public_key",value:w("imagekit_public_key"),onChange:y=>h("imagekit_public_key",y.target.value),placeholder:"Your ImageKit public key"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"imagekit_private_key",children:"Private Key"}),s.jsx(H,{id:"imagekit_private_key",type:"password",value:w("imagekit_private_key"),onChange:y=>h("imagekit_private_key",y.target.value),placeholder:"Your ImageKit private key"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"imagekit_url_endpoint",children:"URL Endpoint"}),s.jsx(H,{id:"imagekit_url_endpoint",value:w("imagekit_url_endpoint"),onChange:y=>h("imagekit_url_endpoint",y.target.value),placeholder:"https://ik.imagekit.io/your_imagekit_id"})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," ImageKit credentials are used for image upload and management. Get your credentials from your ImageKit dashboard."]})})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Branding"})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(V,{children:"Site Logo"}),s.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:s.jsx(Oo,{className:"w-6 h-6 text-gray-400"})}),s.jsxs(F,{variant:"outline",children:[s.jsx(Oo,{className:"w-4 h-4 mr-2"}),"Upload Logo"]})]})]}),s.jsxs("div",{children:[s.jsx(V,{children:"Favicon"}),s.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:s.jsx(Oo,{className:"w-4 h-4 text-gray-400"})}),s.jsxs(F,{variant:"outline",size:"sm",children:[s.jsx(Oo,{className:"w-3 h-3 mr-2"}),"Upload Favicon"]})]})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(F,{onClick:b,className:"flex items-center",disabled:o,children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),o?"Saving...":"Save All Settings"]})})]})})};var Ex="Tabs",[jO,eL]=ps(Ex,[Eu]),C_=Eu(),[NO,Px]=jO(Ex),E_=f.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Jl(l),[m,h]=Ln({prop:n,onChange:a,defaultProp:i});return s.jsx(NO,{scope:r,baseId:Ds(),value:m,onValueChange:h,orientation:o,dir:u,activationMode:c,children:s.jsx(xe.div,{dir:u,"data-orientation":o,...d,ref:t})})});E_.displayName=Ex;var P_="TabsList",A_=f.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=Px(P_,r),o=C_(r);return s.jsx(h1,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(xe.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});A_.displayName=P_;var R_="TabsTrigger",T_=f.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=Px(R_,r),l=C_(r),c=O_(o.baseId,n),d=L_(o.baseId,n),u=n===o.value;return s.jsx(m1,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(xe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:pe(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?o.onValueChange(n):m.preventDefault()}),onKeyDown:pe(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(n)}),onFocus:pe(e.onFocus,()=>{const m=o.activationMode!=="manual";!u&&!a&&m&&o.onValueChange(n)})})})});T_.displayName=R_;var D_="TabsContent",I_=f.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=Px(D_,r),c=O_(l.baseId,n),d=L_(l.baseId,n),u=n===l.value,m=f.useRef(u);return f.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(Or,{present:a||u,children:({present:h})=>s.jsx(xe.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});I_.displayName=D_;function O_(e,t){return`${e}-trigger-${t}`}function L_(e,t){return`${e}-content-${t}`}var _O=E_,M_=A_,F_=T_,$_=I_;const U_=_O,Ax=f.forwardRef(({className:e,...t},r)=>s.jsx(M_,{ref:r,className:ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ax.displayName=M_.displayName;const El=f.forwardRef(({className:e,...t},r)=>s.jsx(F_,{ref:r,className:ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));El.displayName=F_.displayName;const Pl=f.forwardRef(({className:e,...t},r)=>s.jsx($_,{ref:r,className:ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Pl.displayName=$_.displayName;const SO=()=>{const e=Oe(),[t,r]=f.useState([]),[n,a]=f.useState([]),[i,o]=f.useState(!0);f.useEffect(()=>{l()},[]);const l=async()=>{try{const{data:u,error:m}=await A.from("payment_gateways").select("*").order("created_at",{ascending:!1});if(m)throw m;const h=(u==null?void 0:u.filter(w=>w.type==="deposit"))||[],b=(u==null?void 0:u.filter(w=>w.type==="withdraw"))||[];r(h),a(b)}catch(u){console.error("Error fetching gateways:",u)}finally{o(!1)}},c=async(u,m)=>{try{const b=(m==="deposit"?t:n).find(v=>v.id===u);if(!b)return;const{error:w}=await A.from("payment_gateways").update({is_active:!b.is_active}).eq("id",u);if(w)throw w;m==="deposit"?r(v=>v.map(y=>y.id===u?{...y,is_active:!y.is_active}:y)):a(v=>v.map(y=>y.id===u?{...y,is_active:!y.is_active}:y))}catch(h){console.error("Error updating gateway status:",h)}},d=({gateway:u,type:m,onToggle:h})=>s.jsx(M,{className:"mb-4",children:s.jsxs(U,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Rt,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Fees: ",u.fees_percentage>0?`${u.fees_percentage}%`:`$${u.fees_fixed}`]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ke,{variant:u.is_active?"default":"secondary",children:u.is_active?"Active":"Inactive"}),s.jsx(Gt,{checked:u.is_active,onCheckedChange:()=>h(u.id,m)}),s.jsx(F,{variant:"outline",size:"sm",children:s.jsx(_l,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Min Amount:"}),s.jsxs("span",{className:"ml-2 font-medium",children:["$",u.minimum_amount]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Max Amount:"}),s.jsx("span",{className:"ml-2 font-medium",children:u.maximum_amount?`$${u.maximum_amount}`:"No limit"})]})]})]})});return i?s.jsx(be,{children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"text-center",children:"Loading..."})})}):s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Gateways"}),s.jsx("p",{className:"text-gray-600",children:"Manage deposit and withdrawal payment methods"})]}),s.jsxs(U_,{defaultValue:"deposits",className:"space-y-6",children:[s.jsxs(Ax,{children:[s.jsx(El,{value:"deposits",children:"Deposit Gateways"}),s.jsx(El,{value:"withdrawals",children:"Withdrawal Gateways"})]}),s.jsxs(Pl,{value:"deposits",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Deposit Payment Methods"}),s.jsxs(F,{onClick:()=>e("/admin/add-deposit-gateway"),children:[s.jsx(gr,{className:"w-4 h-4 mr-2"}),"Add Deposit Gateway"]})]}),t.map(u=>s.jsx(d,{gateway:u,type:"deposit",onToggle:c},u.id))]}),s.jsxs(Pl,{value:"withdrawals",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Withdrawal Payment Methods"}),s.jsxs(F,{onClick:()=>e("/admin/add-withdraw-gateway"),children:[s.jsx(gr,{className:"w-4 h-4 mr-2"}),"Add Withdraw Gateway"]})]}),n.map(u=>s.jsx(d,{gateway:u,type:"withdraw",onToggle:c},u.id))]})]})]})})},kO=()=>{const e=Oe(),[t,r]=f.useState({name:"",is_active:!0,minimum_amount:"",maximum_amount:"",fees_percentage:"",fees_fixed:""}),[n,a]=f.useState([{id:"1",question:"Bank Name",answer:""},{id:"2",question:"Account Number",answer:""},{id:"3",question:"Account Holder Name",answer:""},{id:"4",question:"IBAN",answer:""}]),[i,o]=f.useState(!1),l=async h=>{h.preventDefault(),o(!0);try{const b=n.reduce((v,y)=>(y.question&&y.answer&&(v[y.question.toLowerCase().replace(/\s+/g,"_")]=y.answer),v),{}),{error:w}=await A.from("payment_gateways").insert({name:t.name,type:"deposit",gateway_type:"bank",is_active:t.is_active,minimum_amount:parseFloat(t.minimum_amount)||0,maximum_amount:t.maximum_amount?parseFloat(t.maximum_amount):null,fees_percentage:parseFloat(t.fees_percentage)||0,fees_fixed:parseFloat(t.fees_fixed)||0,configuration:{bank_account_details:b,instructions:"Transfer money to the bank account details shown below"}});if(w)throw w;console.log("Deposit gateway created successfully"),e("/admin/payment-gateways")}catch(b){console.error("Error creating deposit gateway:",b)}finally{o(!1)}},c=(h,b)=>{r(w=>({...w,[h]:b}))},d=()=>{const h={id:Date.now().toString(),question:"",answer:""};a([...n,h])},u=h=>{a(n.filter(b=>b.id!==h))},m=(h,b,w)=>{a(n.map(v=>v.id===h?{...v,[b]:w}:v))};return s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>e("/admin/payment-gateways"),children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to Gateways"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Add Deposit Gateway"}),s.jsx("p",{className:"text-gray-600",children:"Configure a new payment gateway for deposits"})]})]}),s.jsx("form",{onSubmit:l,className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Basic Information"})}),s.jsx(U,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(V,{htmlFor:"name",children:"Gateway Name"}),s.jsx(H,{id:"name",value:t.name,onChange:h=>c("name",h.target.value),placeholder:"e.g., JazzCash, EasyPaisa, Bank Transfer",required:!0})]})})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Configuration"})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"minimum_amount",children:"Minimum Amount"}),s.jsx(H,{id:"minimum_amount",type:"number",value:t.minimum_amount,onChange:h=>c("minimum_amount",h.target.value),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"maximum_amount",children:"Maximum Amount"}),s.jsx(H,{id:"maximum_amount",type:"number",value:t.maximum_amount,onChange:h=>c("maximum_amount",h.target.value),placeholder:"100000"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"fees_percentage",children:"Fee Percentage"}),s.jsx(H,{id:"fees_percentage",type:"number",step:"0.01",value:t.fees_percentage,onChange:h=>c("fees_percentage",h.target.value),placeholder:"2.5"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"fees_fixed",children:"Fixed Fee"}),s.jsx(H,{id:"fees_fixed",type:"number",step:"0.01",value:t.fees_fixed,onChange:h=>c("fees_fixed",h.target.value),placeholder:"0"})]})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center justify-between",children:["Bank Account Details",s.jsxs(F,{type:"button",onClick:d,size:"sm",children:[s.jsx(gr,{className:"w-4 h-4 mr-1"}),"Add Field"]})]})}),s.jsx(U,{className:"space-y-4",children:n.map(h=>s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(V,{children:"Field Name (Question)"}),s.jsx(H,{value:h.question,onChange:b=>m(h.id,"question",b.target.value),placeholder:"e.g., Bank Name, Account Number"})]}),s.jsxs("div",{children:[s.jsx(V,{children:"Value (Answer)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{value:h.answer,onChange:b=>m(h.id,"answer",b.target.value),placeholder:"e.g., EasyPaisa Bank, 1234567890"}),s.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>u(h.id),className:"text-red-600 hover:text-red-700",children:s.jsx(zi,{className:"w-4 h-4"})})]})]})]},h.id))})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Settings"})}),s.jsx(U,{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(V,{htmlFor:"is_active",children:"Active Status"}),s.jsx(Gt,{id:"is_active",checked:t.is_active,onCheckedChange:h=>c("is_active",h)})]})})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Preview"})}),s.jsx(U,{children:s.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:s.jsx(Rt,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:t.name||"Gateway Name"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Deposit Gateway"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[s.jsxs("p",{children:["Min: $",t.minimum_amount||"0"]}),s.jsxs("p",{children:["Max: $",t.maximum_amount||""]}),s.jsxs("p",{children:["Fee: ",t.fees_percentage,"% + $",t.fees_fixed||"0"]})]}),s.jsxs("div",{className:"mt-3 text-xs",children:[s.jsx("p",{className:"font-semibold",children:"Bank Details Preview:"}),n.filter(h=>h.question&&h.answer).map(h=>s.jsxs("p",{className:"text-gray-600",children:[h.question,": ",h.answer]},h.id))]})]})})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs(F,{type:"submit",className:"w-full",disabled:i,children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),i?"Creating...":"Create Deposit Gateway"]})})]})]})})]})})},CO=()=>{const e=Oe(),[t,r]=f.useState({name:"",is_active:!0,minimum_amount:"",maximum_amount:"",fees_percentage:"",fees_fixed:"",configuration:{}}),[n,a]=f.useState([{id:"1",question:"Bank Name",answer:""},{id:"2",question:"Account Number",answer:""},{id:"3",question:"Account Holder Name",answer:""},{id:"4",question:"IBAN",answer:""}]),[i,o]=f.useState(!1),l=()=>{const h={id:Date.now().toString(),question:"",answer:""};a([...n,h])},c=h=>{a(n.filter(b=>b.id!==h))},d=(h,b,w)=>{a(n.map(v=>v.id===h?{...v,[b]:w}:v))},u=async h=>{h.preventDefault(),o(!0);try{const b=n.reduce((v,y)=>(y.question&&y.answer&&(v[y.question.toLowerCase().replace(/\s+/g,"_")]=y.answer),v),{}),{error:w}=await A.from("payment_gateways").insert({name:t.name,type:"withdraw",gateway_type:"withdraw",is_active:t.is_active,minimum_amount:parseFloat(t.minimum_amount)||0,maximum_amount:t.maximum_amount?parseFloat(t.maximum_amount):null,fees_percentage:parseFloat(t.fees_percentage)||0,fees_fixed:parseFloat(t.fees_fixed)||0,configuration:{bank_account_details:b,instructions:"Transfer will be made to the bank account details provided during binding"}});if(w)throw w;J.success("Withdraw gateway created successfully"),e("/admin/payment-gateways")}catch(b){console.error("Error creating withdraw gateway:",b),J.error("Failed to create withdraw gateway")}finally{o(!1)}},m=(h,b)=>{r(w=>({...w,[h]:b}))};return s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>e("/admin/payment-gateways"),children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to Gateways"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Add Withdraw Gateway"}),s.jsx("p",{className:"text-gray-600",children:"Configure a new payment gateway for withdrawals"})]})]}),s.jsx("form",{onSubmit:u,className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Basic Information"})}),s.jsx(U,{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(V,{htmlFor:"name",children:"Gateway Name"}),s.jsx(H,{id:"name",value:t.name,onChange:h=>m("name",h.target.value),placeholder:"e.g., Bank Transfer, PayPal, Digital Wallet",required:!0})]})})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Configuration"})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"minimum_amount",children:"Minimum Amount"}),s.jsx(H,{id:"minimum_amount",type:"number",value:t.minimum_amount,onChange:h=>m("minimum_amount",h.target.value),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"maximum_amount",children:"Maximum Amount"}),s.jsx(H,{id:"maximum_amount",type:"number",value:t.maximum_amount,onChange:h=>m("maximum_amount",h.target.value),placeholder:"50000"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"fees_percentage",children:"Fee Percentage"}),s.jsx(H,{id:"fees_percentage",type:"number",step:"0.01",value:t.fees_percentage,onChange:h=>m("fees_percentage",h.target.value),placeholder:"2.5"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"fees_fixed",children:"Fixed Fee"}),s.jsx(H,{id:"fees_fixed",type:"number",step:"0.01",value:t.fees_fixed,onChange:h=>m("fees_fixed",h.target.value),placeholder:"0"})]})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center justify-between",children:["Bank Account Details",s.jsxs(F,{type:"button",onClick:l,size:"sm",children:[s.jsx(gr,{className:"w-4 h-4 mr-1"}),"Add Field"]})]})}),s.jsx(U,{className:"space-y-4",children:n.map(h=>s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(V,{children:"Field Name (Question)"}),s.jsx(H,{value:h.question,onChange:b=>d(h.id,"question",b.target.value),placeholder:"e.g., Bank Name, Account Number"})]}),s.jsxs("div",{children:[s.jsx(V,{children:"Value (Answer)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{value:h.answer,onChange:b=>d(h.id,"answer",b.target.value),placeholder:"e.g., EasyPaisa Bank, 1234567890"}),s.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>c(h.id),className:"text-red-600 hover:text-red-700",children:s.jsx(zi,{className:"w-4 h-4"})})]})]})]},h.id))})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Settings"})}),s.jsx(U,{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(V,{htmlFor:"is_active",children:"Active Status"}),s.jsx(Gt,{id:"is_active",checked:t.is_active,onCheckedChange:h=>m("is_active",h)})]})})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Preview"})}),s.jsx(U,{children:s.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:s.jsx(Wi,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:t.name||"Gateway Name"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Withdrawal Gateway"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[s.jsxs("p",{children:["Min: $",t.minimum_amount||"0"]}),s.jsxs("p",{children:["Max: $",t.maximum_amount||""]}),s.jsxs("p",{children:["Fee: ",t.fees_percentage,"% + $",t.fees_fixed||"0"]})]}),s.jsxs("div",{className:"mt-3 text-xs",children:[s.jsx("p",{className:"font-semibold",children:"Bank Details Preview:"}),n.filter(h=>h.question&&h.answer).map(h=>s.jsxs("p",{className:"text-gray-600",children:[h.question,": ",h.answer]},h.id))]})]})})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs(F,{type:"submit",className:"w-full",disabled:i,children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),i?"Creating...":"Create Withdraw Gateway"]})})]})]})})]})})},EO=()=>{const e=Oe(),[t,r]=f.useState({name:"",type:"",category:"",description:"",isActive:!0,minAmount:"",maxAmount:"",processingFee:"",feeType:"fixed",apiKey:"",secretKey:"",webhookUrl:"",supportedCurrencies:["PKR"],processingTime:"",instructions:""}),n=[{value:"bank_transfer",label:"Bank Transfer",icon:Qo},{value:"digital_wallet",label:"Digital Wallet",icon:Wi},{value:"card_payment",label:"Card Payment",icon:Rt}],a=o=>{o.preventDefault(),console.log("Creating new gateway:",t),e("/admin/payment-gateways")},i=(o,l)=>{r(c=>({...c,[o]:l}))};return s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(F,{variant:"outline",onClick:()=>e("/admin/payment-gateways"),children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to Gateways"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Add New Payment Gateway"}),s.jsx("p",{className:"text-gray-600",children:"Configure a new payment gateway for deposits and withdrawals"})]})]}),s.jsx("form",{onSubmit:a,className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Basic Information"})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"name",children:"Gateway Name"}),s.jsx(H,{id:"name",value:t.name,onChange:o=>i("name",o.target.value),placeholder:"e.g., JazzCash, EasyPaisa",required:!0})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"type",children:"Gateway Type"}),s.jsxs(Er,{value:t.type,onValueChange:o=>i("type",o),children:[s.jsx(hr,{children:s.jsx(Pr,{placeholder:"Select gateway type"})}),s.jsx(mr,{children:n.map(o=>s.jsx($e,{value:o.value,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(o.icon,{className:"w-4 h-4 mr-2"}),o.label]})},o.value))})]})]})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"category",children:"Category"}),s.jsxs(Er,{value:t.category,onValueChange:o=>i("category",o),children:[s.jsx(hr,{children:s.jsx(Pr,{placeholder:"Select category"})}),s.jsxs(mr,{children:[s.jsx($e,{value:"both",children:"Deposit & Withdrawal"}),s.jsx($e,{value:"deposit",children:"Deposit Only"}),s.jsx($e,{value:"withdrawal",children:"Withdrawal Only"})]})]})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"description",children:"Description"}),s.jsx(Bs,{id:"description",value:t.description,onChange:o=>i("description",o.target.value),placeholder:"Brief description of the payment gateway",rows:3})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Configuration"})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"minAmount",children:"Minimum Amount"}),s.jsx(H,{id:"minAmount",type:"number",value:t.minAmount,onChange:o=>i("minAmount",o.target.value),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"maxAmount",children:"Maximum Amount"}),s.jsx(H,{id:"maxAmount",type:"number",value:t.maxAmount,onChange:o=>i("maxAmount",o.target.value),placeholder:"100000"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"processingTime",children:"Processing Time"}),s.jsx(H,{id:"processingTime",value:t.processingTime,onChange:o=>i("processingTime",o.target.value),placeholder:"e.g., Instant, 1-3 hours"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"processingFee",children:"Processing Fee"}),s.jsx(H,{id:"processingFee",type:"number",value:t.processingFee,onChange:o=>i("processingFee",o.target.value),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"feeType",children:"Fee Type"}),s.jsxs(Er,{value:t.feeType,onValueChange:o=>i("feeType",o),children:[s.jsx(hr,{children:s.jsx(Pr,{})}),s.jsxs(mr,{children:[s.jsx($e,{value:"fixed",children:"Fixed Amount"}),s.jsx($e,{value:"percentage",children:"Percentage"})]})]})]})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"API Configuration"})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(V,{htmlFor:"apiKey",children:"API Key"}),s.jsx(H,{id:"apiKey",type:"password",value:t.apiKey,onChange:o=>i("apiKey",o.target.value),placeholder:"Enter API key"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"secretKey",children:"Secret Key"}),s.jsx(H,{id:"secretKey",type:"password",value:t.secretKey,onChange:o=>i("secretKey",o.target.value),placeholder:"Enter secret key"})]}),s.jsxs("div",{children:[s.jsx(V,{htmlFor:"webhookUrl",children:"Webhook URL"}),s.jsx(H,{id:"webhookUrl",value:t.webhookUrl,onChange:o=>i("webhookUrl",o.target.value),placeholder:"https://yoursite.com/webhook"})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"User Instructions"})}),s.jsx(U,{children:s.jsxs("div",{children:[s.jsx(V,{htmlFor:"instructions",children:"Payment Instructions"}),s.jsx(Bs,{id:"instructions",value:t.instructions,onChange:o=>i("instructions",o.target.value),placeholder:"Step-by-step instructions for users on how to use this payment method",rows:5})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Settings"})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(V,{htmlFor:"isActive",children:"Active Status"}),s.jsx(Gt,{id:"isActive",checked:t.isActive,onCheckedChange:o=>i("isActive",o)})]}),s.jsxs("div",{children:[s.jsx(V,{children:"Supported Currencies"}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:"PKR"})})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Preview"})}),s.jsx(U,{children:s.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:s.jsx(Rt,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:t.name||"Gateway Name"}),s.jsx("p",{className:"text-sm text-gray-500",children:t.processingTime||"Processing time"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[s.jsxs("p",{children:["Min: Rs. ",t.minAmount||"0"]}),s.jsxs("p",{children:["Max: Rs. ",t.maxAmount||""]}),s.jsxs("p",{children:["Fee: Rs. ",t.processingFee||"0"," ",t.feeType==="percentage"?"%":""]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(F,{type:"submit",className:"w-full",children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Create Gateway"]}),s.jsx(F,{type:"button",variant:"outline",className:"w-full",children:"Test Connection"})]})]})]})})]})})},PO=()=>{const[e,t]=f.useState({game_enabled:!0,game_cost_per_play:1,game_min_prize:2,game_max_prize:11,game_win_rate:40,game_daily_play_limit:50,game_min_balance_required:1}),[r,n]=f.useState(!0),[a,i]=f.useState(!1),[o,l]=f.useState(null),{settings:c}=Te();f.useEffect(()=>{d(),u()},[]);const d=async()=>{try{console.log("Loading game settings...");const b=await el.getGameSettings();console.log("Game settings loaded:",b),t(b)}catch(b){console.error("Error loading game settings:",b),J.error("Failed to load game settings")}finally{n(!1)}},u=async()=>{try{console.log("Loading game stats...");const b=await el.getGameStatsForAdmin();console.log("Game stats loaded:",b),l(b)}catch(b){console.error("Error loading game stats:",b)}},m=(b,w)=>{t(v=>({...v,[b]:w}))},h=async()=>{i(!0);try{console.log("Saving game settings:",e);for(const[b,w]of Object.entries(e)){const{error:v}=await A.from("system_settings").update({setting_value:w.toString(),updated_at:new Date().toISOString()}).eq("setting_key",b);if(v)throw console.error(`Error updating ${b}:`,v),v}J.success("Game settings updated successfully"),await u()}catch(b){console.error("Error saving settings:",b),J.error("Failed to save game settings")}finally{i(!1)}};return r?s.jsx(be,{children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-32 bg-gray-200 rounded"}),s.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})]})})}):s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(me,{to:"/admin/dashboard",children:s.jsxs(F,{variant:"ghost",size:"sm",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Game Settings"}),s.jsxs("p",{className:"text-gray-600",children:["Manage ",Es(c),"1 game configuration and monitor performance"]})]}),s.jsxs(F,{onClick:h,disabled:a,className:"bg-emerald-600 hover:bg-emerald-700",children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]})]})]}),o&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(M,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(ct,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Plays"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.today_total_plays||0})]})]})})}),s.jsx(M,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(qe,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Win Rate"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o.today_win_rate||0,"%"]})]})]})})}),s.jsx(M,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(mt,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Collected"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Y(o.today_total_paid||0,c)})]})]})})}),s.jsx(M,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:s.jsx(xa,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Profit"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Y(o.today_profit||0,c)})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(xa,{className:"w-5 h-5 mr-2 text-emerald-600"}),"Basic Game Settings"]})}),s.jsxs(U,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{htmlFor:"game_enabled",children:"Enable Game"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Allow users to play the ",Es(c),"1 game"]})]}),s.jsx(Gt,{id:"game_enabled",checked:e.game_enabled,onCheckedChange:b=>m("game_enabled",b)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(V,{htmlFor:"cost_per_play",children:["Cost per Play (",Es(c),")"]}),s.jsx(H,{id:"cost_per_play",type:"number",step:"0.01",min:"0.01",value:e.game_cost_per_play,onChange:b=>m("game_cost_per_play",parseFloat(b.target.value)||0)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(V,{htmlFor:"min_balance",children:["Minimum Balance Required (",Es(c),")"]}),s.jsx(H,{id:"min_balance",type:"number",step:"0.01",min:"0.01",value:e.game_min_balance_required,onChange:b=>m("game_min_balance_required",parseFloat(b.target.value)||0)})]})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(mt,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Prize Configuration"]})}),s.jsxs(U,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(V,{htmlFor:"min_prize",children:["Minimum Prize (",Es(c),")"]}),s.jsx(H,{id:"min_prize",type:"number",step:"0.01",min:"0.01",value:e.game_min_prize,onChange:b=>m("game_min_prize",parseFloat(b.target.value)||0)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(V,{htmlFor:"max_prize",children:["Maximum Prize (",Es(c),")"]}),s.jsx(H,{id:"max_prize",type:"number",step:"0.01",min:"0.01",value:e.game_max_prize,onChange:b=>m("game_max_prize",parseFloat(b.target.value)||0)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(V,{htmlFor:"win_rate",children:"Win Rate (%)"}),s.jsx(H,{id:"win_rate",type:"number",min:"0",max:"100",value:e.game_win_rate,onChange:b=>m("game_win_rate",parseInt(b.target.value)||0)}),s.jsx("p",{className:"text-sm text-gray-500",children:"Percentage of games that result in wins"})]})]})]}),s.jsxs(M,{className:"lg:col-span-2",children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(ct,{className:"w-5 h-5 mr-2 text-blue-600"}),"User Limits"]})}),s.jsx(U,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(V,{htmlFor:"daily_limit",children:"Daily Play Limit per User"}),s.jsx(H,{id:"daily_limit",type:"number",min:"1",value:e.game_daily_play_limit,onChange:b=>m("game_daily_play_limit",parseInt(b.target.value)||0)}),s.jsx("p",{className:"text-sm text-gray-500",children:"Maximum number of games a user can play per day"})]})})]})]}),s.jsx(M,{className:"border-orange-200 bg-orange-50",children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(xa,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-orange-900",children:"Important Notes"}),s.jsxs("ul",{className:"mt-2 text-sm text-orange-800 space-y-1",children:[s.jsx("li",{children:" Changes take effect immediately for new games"}),s.jsx("li",{children:" Win rate affects the probability of users winning prizes"}),s.jsx("li",{children:" Daily limits reset at midnight"}),s.jsx("li",{children:" Minimum balance prevents users from playing without sufficient funds"})]})]})]})})})]})})},AO=()=>{const[e,t]=f.useState({imagekit_id:"",imagekit_public_key:"",imagekit_private_key:"",imagekit_url_endpoint:""}),[r,n]=f.useState(!0),[a,i]=f.useState(!1),o=async()=>{try{const{data:d,error:u}=await A.from("system_settings").select("setting_key, setting_value").in("setting_key",["imagekit_id","imagekit_public_key","imagekit_private_key","imagekit_url_endpoint"]);if(u){console.error("Error fetching settings:",u),J.error("Failed to fetch ImageKit settings");return}const m={};d==null||d.forEach(h=>{m[h.setting_key]=h.setting_value||""}),t(m)}catch(d){console.error("Error:",d),J.error("An error occurred while fetching settings")}finally{n(!1)}};f.useEffect(()=>{o()},[]);const l=(d,u)=>{t(m=>({...m,[d]:u}))},c=async()=>{i(!0);try{const d=Object.entries(e).map(([u,m])=>({setting_key:u,setting_value:m,setting_type:"string",category:"imagekit"}));for(const u of d){const{error:m}=await A.from("system_settings").update({setting_value:u.setting_value,updated_at:new Date().toISOString()}).eq("setting_key",u.setting_key);if(m){console.error(`Error updating ${u.setting_key}:`,m),J.error(`Failed to update ${u.setting_key}`);return}}J.success("ImageKit settings saved successfully!")}catch(d){console.error("Error saving settings:",d),J.error("An error occurred while saving settings")}finally{i(!1)}};return r?s.jsx(be,{children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"text-center",children:"Loading ImageKit settings..."})})}):s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ImageKit Settings"}),s.jsx("p",{className:"text-gray-600",children:"Configure ImageKit integration for image storage"})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(Uw,{className:"w-5 h-5 mr-2"}),"ImageKit Configuration"]})}),s.jsxs(U,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(V,{htmlFor:"imagekit_id",className:"flex items-center",children:[s.jsx(Op,{className:"w-4 h-4 mr-2"}),"ImageKit ID"]}),s.jsx(H,{id:"imagekit_id",value:e.imagekit_id,onChange:d=>l("imagekit_id",d.target.value),placeholder:"e.g., 5tmp5zbf4",className:"font-mono",disabled:a}),s.jsx("p",{className:"text-sm text-gray-500",children:"Your unique ImageKit ID (alphanumeric identifier)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(V,{htmlFor:"imagekit_public_key",className:"flex items-center",children:[s.jsx(C0,{className:"w-4 h-4 mr-2"}),"Public Key"]}),s.jsx(H,{id:"imagekit_public_key",value:e.imagekit_public_key,onChange:d=>l("imagekit_public_key",d.target.value),placeholder:"Enter your ImageKit public key",className:"font-mono",disabled:a}),s.jsx("p",{className:"text-sm text-gray-500",children:"Your ImageKit public key for client-side operations"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(V,{htmlFor:"imagekit_private_key",className:"flex items-center",children:[s.jsx(C0,{className:"w-4 h-4 mr-2"}),"Private Key"]}),s.jsx(H,{id:"imagekit_private_key",type:"password",value:e.imagekit_private_key,onChange:d=>l("imagekit_private_key",d.target.value),placeholder:"Enter your ImageKit private key",className:"font-mono",disabled:a}),s.jsx("p",{className:"text-sm text-gray-500",children:"Your ImageKit private key for server-side operations (keep secure)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(V,{htmlFor:"imagekit_url_endpoint",className:"flex items-center",children:[s.jsx(EP,{className:"w-4 h-4 mr-2"}),"URL Endpoint"]}),s.jsx(H,{id:"imagekit_url_endpoint",value:e.imagekit_url_endpoint,onChange:d=>l("imagekit_url_endpoint",d.target.value),placeholder:"https://ik.imagekit.io/your_imagekit_id",className:"font-mono",disabled:a}),s.jsx("p",{className:"text-sm text-gray-500",children:"Your ImageKit URL endpoint for image delivery"})]}),e.imagekit_id&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"URL Preview"}),s.jsxs("p",{className:"text-sm text-blue-700 font-mono",children:["https://ik.imagekit.io/",e.imagekit_id,"/path/to/image.jpg"]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(F,{onClick:c,disabled:a,className:"bg-emerald-600 hover:bg-emerald-700",children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Settings"]})})]})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Setup Instructions"})}),s.jsx(U,{className:"space-y-4",children:s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"How to get your ImageKit credentials:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-yellow-700",children:[s.jsxs("li",{children:["Go to ",s.jsx("a",{href:"https://imagekit.io",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"ImageKit.io"})," and create an account"]}),s.jsx("li",{children:"Navigate to your Dashboard"}),s.jsx("li",{children:"Go to Developer Options  API Keys"}),s.jsx("li",{children:"Copy your Public Key, Private Key, and URL Endpoint"}),s.jsx("li",{children:"Your ImageKit ID is visible in the URL endpoint"})]})]})})]})]})})},RO=()=>{const[e,t]=f.useState(!0),[r,n]=f.useState(!1),[a,i]=f.useState([]),{settings:o}=Te(),[l,c]=f.useState({level_system_enabled:!0,auto_level_calculation:!0,reward_on_level_up:!0,level_up_notifications:!0});f.useEffect(()=>{d()},[]);const d=async()=>{try{console.log("Fetching level settings from database...");const{data:y,error:g}=await A.from("user_levels").select("*").eq("is_active",!0).order("level",{ascending:!0});if(g){console.error("Error fetching levels:",g),J.error("Failed to load level settings");return}if(console.log("Fetched levels data:",y),y&&y.length>0){const p=N=>N?Array.isArray(N)?N.map(j=>String(j)):[]:[],x=y.map(N=>({id:N.id,level:N.level,name:N.name,description:N.description||"",referrals_required:N.referrals_required,bonus_amount:Number(N.bonus_amount),benefits:p(N.benefits),color:N.color,is_active:N.is_active}));i(x)}t(!1)}catch(y){console.error("Error fetching level settings:",y),J.error("Failed to load level settings"),t(!1)}},u=(y,g,p)=>{i(x=>x.map(N=>N.level===y?{...N,[g]:p}:N))},m=(y,g)=>{g.trim()&&i(p=>p.map(x=>x.level===y?{...x,benefits:[...x.benefits,g.trim()]}:x))},h=(y,g)=>{i(p=>p.map(x=>x.level===y?{...x,benefits:x.benefits.filter((N,j)=>j!==g)}:x))},b=async()=>{const y=a.length+1,g={level:y,name:`Level ${y}`,description:`Level ${y} description`,referrals_required:(y-1)*10,bonus_amount:y*500,benefits:[`Level ${y} benefits`],color:"#6b7280",is_active:!0};try{const{data:p,error:x}=await A.from("user_levels").insert([{level:g.level,name:g.name,description:g.description,referrals_required:g.referrals_required,bonus_amount:g.bonus_amount,benefits:g.benefits,color:g.color,is_active:!0}]).select().single();if(x){console.error("Error adding new level:",x),J.error("Failed to add new level");return}i(N=>[...N,{...g,id:p.id}]),J.success("New level added successfully")}catch(p){console.error("Error adding new level:",p),J.error("Failed to add new level")}},w=async y=>{if(a.length<=1){J.error("Cannot remove the last level");return}const g=a.find(p=>p.level===y);if(!(g!=null&&g.id)){J.error("Level ID not found");return}try{const{error:p}=await A.from("user_levels").delete().eq("id",g.id);if(p){console.error("Error removing level:",p),J.error("Failed to remove level");return}i(x=>x.filter(N=>N.level!==y).map((N,j)=>({...N,level:j+1}))),J.success("Level removed successfully")}catch(p){console.error("Error removing level:",p),J.error("Failed to remove level")}},v=async()=>{n(!0);try{console.log("Saving level settings:",a);for(const g of a)if(g.id){const{error:p}=await A.from("user_levels").update({name:g.name,description:g.description,referrals_required:g.referrals_required,bonus_amount:g.bonus_amount,benefits:g.benefits,color:g.color,is_active:g.is_active!==!1,updated_at:new Date().toISOString()}).eq("id",g.id);if(p){console.error("Error updating level:",p),J.error(`Failed to update ${g.name}`);continue}}const{data:y}=await A.from("users").select("id");if(y)for(const g of y)await A.rpc("calculate_user_level",{user_id:g.id});J.success("Level settings saved successfully"),await d()}catch(y){console.error("Error saving level settings:",y),J.error("Failed to save level settings")}finally{n(!1)}};return e?s.jsx(be,{children:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})}):s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Level & Rewards Settings"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Configure user levels, rewards, and progression system"})]}),s.jsx(F,{onClick:v,disabled:r,className:"bg-emerald-600 hover:bg-emerald-700",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Ui,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsxs(Q,{className:"flex items-center",children:[s.jsx(so,{className:"w-5 h-5 mr-2 text-emerald-600"}),"System Configuration"]})}),s.jsxs(U,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(V,{children:"Enable Level System"}),s.jsx(Gt,{checked:l.level_system_enabled,onCheckedChange:y=>c(g=>({...g,level_system_enabled:y}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(V,{children:"Auto Level Calculation"}),s.jsx(Gt,{checked:l.auto_level_calculation,onCheckedChange:y=>c(g=>({...g,auto_level_calculation:y}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(V,{children:"Reward on Level Up"}),s.jsx(Gt,{checked:l.reward_on_level_up,onCheckedChange:y=>c(g=>({...g,reward_on_level_up:y}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(V,{children:"Level Up Notifications"}),s.jsx(Gt,{checked:l.level_up_notifications,onCheckedChange:y=>c(g=>({...g,level_up_notifications:y}))})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.map(y=>s.jsxs(M,{className:"border-2",style:{borderColor:y.color},children:[s.jsx(K,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Q,{className:"flex items-center",children:[s.jsx(hs,{className:"w-5 h-5 mr-2",style:{color:y.color}}),"Level ",y.level]}),a.length>1&&s.jsx(F,{variant:"outline",size:"sm",onClick:()=>w(y.level),className:"text-red-600 hover:text-red-700",children:s.jsx(zi,{className:"w-4 h-4"})})]})}),s.jsxs(U,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(V,{children:"Level Name"}),s.jsx(H,{value:y.name,onChange:g=>u(y.level,"name",g.target.value)})]}),s.jsxs("div",{children:[s.jsx(V,{children:"Description"}),s.jsx(Bs,{value:y.description,onChange:g=>u(y.level,"description",g.target.value),rows:2})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(V,{children:"Referrals Required"}),s.jsxs("div",{className:"relative",children:[s.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{type:"number",min:"0",className:"pl-10",value:y.referrals_required,onChange:g=>u(y.level,"referrals_required",parseInt(g.target.value)||0)})]})]}),s.jsxs("div",{children:[s.jsxs(V,{children:["Bonus Amount (",Es(o),")"]}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx(H,{type:"number",min:"0",step:"0.01",className:"pl-10",value:y.bonus_amount,onChange:g=>u(y.level,"bonus_amount",parseFloat(g.target.value)||0)})]})]})]}),s.jsxs("div",{children:[s.jsx(V,{children:"Theme Color"}),s.jsx(H,{type:"color",value:y.color,onChange:g=>u(y.level,"color",g.target.value),className:"h-10"})]}),s.jsxs("div",{children:[s.jsx(V,{children:"Benefits"}),s.jsxs("div",{className:"space-y-2",children:[y.benefits.map((g,p)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ke,{variant:"secondary",className:"flex-1",children:g}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>h(y.level,p),className:"text-red-600 hover:text-red-700",children:s.jsx(zi,{className:"w-3 h-3"})})]},p)),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{placeholder:"Add new benefit...",onKeyPress:g=>{g.key==="Enter"&&(m(y.level,g.currentTarget.value),g.currentTarget.value="")}}),s.jsx(F,{variant:"outline",size:"sm",onClick:g=>{const p=g.currentTarget.previousElementSibling;m(y.level,p.value),p.value=""},children:s.jsx(gr,{className:"w-4 h-4"})})]})]})]})]})]},y.level))}),s.jsx(M,{className:"border-dashed border-2 border-gray-300",children:s.jsx(U,{className:"flex items-center justify-center py-12",children:s.jsxs(F,{onClick:b,variant:"outline",size:"lg",children:[s.jsx(gr,{className:"w-5 h-5 mr-2"}),"Add New Level"]})})}),s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Current Configuration Summary"})}),s.jsx(U,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total Levels:"}),s.jsx("span",{className:"font-medium ml-2",children:a.length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"System Status:"}),s.jsx("span",{className:`font-medium ml-2 ${l.level_system_enabled?"text-green-600":"text-red-600"}`,children:l.level_system_enabled?"Active":"Inactive"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Auto Calculation:"}),s.jsx("span",{className:`font-medium ml-2 ${l.auto_level_calculation?"text-green-600":"text-red-600"}`,children:l.auto_level_calculation?"Enabled":"Disabled"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Max Referrals:"}),s.jsx("span",{className:"font-medium ml-2",children:a.length>0?Math.max(...a.map(y=>y.referrals_required)):0})]})]})})]})]})})},TO=()=>{var u,m;const{userId:e}=Ul(),t=Oe(),{settings:r,loading:n}=Te(),a=h=>!h||h==="undefined"||h==="null"||h===""?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h);f.useEffect(()=>{a(e)||(console.error("Invalid userId in UserDetailsPage:",e),se.error("Invalid user ID. Redirecting to users list."),t("/admin/users"))},[e,t]);const{data:i,isLoading:o,error:l}=a1(e),c=h=>Y(h,r),d=h=>h?new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not provided";return a(e)?o||n?s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-col space-y-4",children:[s.jsx(F,{variant:"outline",size:"sm",className:"w-fit",asChild:!0,children:s.jsxs(me,{to:"/admin/users",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to Users"]})}),s.jsxs("div",{children:[s.jsx(Ct,{className:"h-8 w-48"}),s.jsx(Ct,{className:"h-4 w-64 mt-2"})]}),s.jsx(Ct,{className:"h-10 w-32"})]}),s.jsx(M,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-start space-x-6",children:[s.jsx(Ct,{className:"w-20 h-20 rounded-full"}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Ct,{className:"h-8 w-48 mb-2"}),s.jsx(Ct,{className:"h-4 w-24 mb-4"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(Ct,{className:"h-4 w-32"}),s.jsx(Ct,{className:"h-4 w-32"}),s.jsx(Ct,{className:"h-4 w-32"})]})]})]})})})]})}):l||!i?s.jsx(be,{children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center text-red-600",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"User Not Found"}),s.jsx("p",{className:"mb-4",children:(l==null?void 0:l.message)||"The requested user could not be found. Please check the user ID and try again."}),s.jsx(F,{variant:"outline",asChild:!0,children:s.jsx(me,{to:"/admin/users",children:"Back to Users"})})]})})}):s.jsx(be,{children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-col space-y-4",children:[s.jsx(F,{variant:"outline",size:"sm",className:"w-fit",asChild:!0,children:s.jsxs(me,{to:"/admin/users",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Back to Users"]})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Details"}),s.jsx("p",{className:"text-gray-600",children:"View detailed user information"})]}),s.jsx(F,{className:"bg-emerald-600 hover:bg-emerald-700 w-fit",asChild:!0,children:s.jsxs(me,{to:`/admin/users/${e}/edit`,children:[s.jsx(_l,{className:"w-4 h-4 mr-2"}),"Edit User"]})})]}),s.jsx(M,{children:s.jsx(U,{className:"p-6",children:s.jsxs("div",{className:"flex items-start space-x-6",children:[s.jsxs(ao,{className:"w-20 h-20",children:[s.jsx(io,{src:i.profile_image_url,alt:i.full_name,className:"object-cover"}),s.jsx(oo,{className:"text-xl bg-green-500 text-white",children:((u=i.full_name)==null?void 0:u.split(" ").map(h=>h[0]).join("").toUpperCase())||"U"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:i.full_name}),s.jsxs("p",{className:"text-gray-600",children:["ID: ",i.id]})]}),s.jsx(ke,{variant:i.account_status==="active"?"default":"secondary",children:i.account_status})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Mp,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm",children:i.email||"No email"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(sf,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm",children:i.phone_number})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Fi,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-sm",children:["Joined ",d(i.created_at)]})]})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx(M,{children:s.jsx(U,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(mt,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance"}),s.jsx("p",{className:"text-lg font-semibold",children:c(i.available_balance)})]})]})})}),s.jsx(M,{children:s.jsx(U,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(qe,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Deposits"}),s.jsx("p",{className:"text-lg font-semibold text-green-600",children:c(i.total_deposits)})]})]})})}),s.jsx(M,{children:s.jsx(U,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:s.jsx(Sl,{className:"w-5 h-5 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Withdrawals"}),s.jsx("p",{className:"text-lg font-semibold text-red-600",children:c(i.total_withdrawals)})]})]})})}),s.jsx(M,{children:s.jsx(U,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(jt,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Referrals"}),s.jsx("p",{className:"text-lg font-semibold",children:i.totalReferrals||0})]})]})})})]}),s.jsxs(U_,{defaultValue:"info",className:"space-y-6",children:[s.jsxs(Ax,{children:[s.jsx(El,{value:"info",children:"Personal Info"}),s.jsx(El,{value:"activity",children:"Activity"})]}),s.jsx(Pl,{value:"info",children:s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Personal Information"})}),s.jsx(U,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Full Name"}),s.jsx("p",{className:"text-lg",children:i.full_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email Address"}),s.jsx("p",{className:"text-lg",children:i.email||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Phone Number"}),s.jsx("p",{className:"text-lg",children:i.phone_number})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Country"}),s.jsx("p",{className:"text-lg",children:i.country})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"KYC Status"}),s.jsx(ke,{variant:"default",children:((m=i.kyc_status)==null?void 0:m.replace("_"," "))||"Not submitted"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Last Login"}),s.jsx("p",{className:"text-lg",children:d(i.last_login_at)})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Address"}),s.jsx("p",{className:"text-lg",children:i.address||"Not provided"})]})]})})]})}),s.jsx(Pl,{value:"activity",children:s.jsxs(M,{children:[s.jsx(K,{children:s.jsx(Q,{children:"Recent Activity"})}),s.jsx(U,{children:s.jsx("div",{className:"space-y-4",children:i.recentTransactions&&i.recentTransactions.length>0?i.recentTransactions.slice(0,5).map(h=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${h.type==="deposit"?"bg-green-100":h.type==="withdrawal"?"bg-red-100":"bg-blue-100"}`,children:h.type==="deposit"?s.jsx(qe,{className:"w-4 h-4 text-green-600"}):h.type==="withdrawal"?s.jsx(Sl,{className:"w-4 h-4 text-red-600"}):s.jsx(mt,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium capitalize",children:h.type}),s.jsx("p",{className:"text-sm text-gray-500",children:d(h.created_at)})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:`font-semibold ${h.amount>0?"text-green-600":"text-red-600"}`,children:c(Math.abs(h.amount))}),s.jsx(ke,{variant:h.status==="completed"||h.status==="approved"?"default":h.status==="pending"?"secondary":"outline",children:h.status})]})]},h.id)):s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No recent activity found"})})})]})})]})]})}):s.jsx(be,{children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center text-red-600",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Invalid User ID"}),s.jsx("p",{className:"mb-4",children:"The user ID provided is not valid. Please check the URL and try again."}),s.jsx(F,{asChild:!0,children:s.jsx(me,{to:"/admin/users",children:"Back to Users"})})]})})})},DO=()=>{const{referralCode:e}=Ul(),t=Oe();return f.useEffect(()=>{e?t(`/signup?ref=${e}`,{replace:!0}):t("/signup",{replace:!0})},[e,t]),s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})})},IO=new Ok;function OO(){return s.jsx(Uk,{client:IO,children:s.jsx(XC,{children:s.jsx(j4,{children:s.jsxs(b4,{children:[s.jsx(mP,{}),s.jsxs(qC,{children:[s.jsx(ue,{path:"/login",element:s.jsx(PR,{})}),s.jsx(ue,{path:"/signup",element:s.jsx(RR,{})}),s.jsx(ue,{path:"/ref/:referralCode",element:s.jsx(DO,{})}),s.jsx(ue,{path:"/admin/login",element:s.jsx($D,{})}),s.jsxs(ue,{path:"/admin/*",element:s.jsx(FD,{}),children:[s.jsx(ue,{path:"dashboard",element:s.jsx(sI,{})}),s.jsx(ue,{path:"users",element:s.jsx(DI,{})}),s.jsx(ue,{path:"users/:userId",element:s.jsx(TO,{})}),s.jsx(ue,{path:"users/:userId/edit",element:s.jsx(II,{})}),s.jsx(ue,{path:"deposits",element:s.jsx(Co,{})}),s.jsx(ue,{path:"deposits/all",element:s.jsx(Co,{})}),s.jsx(ue,{path:"deposits/pending",element:s.jsx(Co,{})}),s.jsx(ue,{path:"deposits/approved",element:s.jsx(Co,{})}),s.jsx(ue,{path:"deposits/rejected",element:s.jsx(Co,{})}),s.jsx(ue,{path:"deposits/:id",element:s.jsx(LI,{})}),s.jsx(ue,{path:"withdrawals",element:s.jsx(Eo,{})}),s.jsx(ue,{path:"withdrawals/all",element:s.jsx(Eo,{})}),s.jsx(ue,{path:"withdrawals/pending",element:s.jsx(Eo,{})}),s.jsx(ue,{path:"withdrawals/approved",element:s.jsx(Eo,{})}),s.jsx(ue,{path:"withdrawals/rejected",element:s.jsx(Eo,{})}),s.jsx(ue,{path:"withdrawals/:id",element:s.jsx(MI,{})}),s.jsx(ue,{path:"transactions",element:s.jsx(XI,{})}),s.jsx(ue,{path:"investment-plans",element:s.jsx(nO,{})}),s.jsx(ue,{path:"investment-plans/create",element:s.jsx(mv,{})}),s.jsx(ue,{path:"investment-plans/edit/:id",element:s.jsx(mv,{})}),s.jsx(ue,{path:"user-level-settings",element:s.jsx(RO,{})}),s.jsx(ue,{path:"notifications",element:s.jsx(aO,{})}),s.jsx(ue,{path:"referral-settings",element:s.jsx(bO,{})}),s.jsx(ue,{path:"settings",element:s.jsx(wO,{})}),s.jsx(ue,{path:"general-settings",element:s.jsx(fv,{})}),s.jsx(ue,{path:"settings/general",element:s.jsx(fv,{})}),s.jsx(ue,{path:"settings/payment-gateways",element:s.jsx(SO,{})}),s.jsx(ue,{path:"settings/payment-gateways/add-deposit",element:s.jsx(kO,{})}),s.jsx(ue,{path:"settings/payment-gateways/add-withdraw",element:s.jsx(CO,{})}),s.jsx(ue,{path:"settings/payment-gateways/add",element:s.jsx(EO,{})}),s.jsx(ue,{path:"settings/game",element:s.jsx(PO,{})}),s.jsx(ue,{path:"settings/imagekit",element:s.jsx(AO,{})})]}),s.jsxs(ue,{path:"/*",element:s.jsx(MD,{}),children:[s.jsx(ue,{path:"",element:s.jsx(lR,{})}),s.jsx(ue,{path:"my-account",element:s.jsx(GR,{})}),s.jsx(ue,{path:"profile-edit",element:s.jsx(QR,{})}),s.jsx(ue,{path:"user-profile",element:s.jsx(JR,{})}),s.jsx(ue,{path:"account-level",element:s.jsx(XR,{})}),s.jsx(ue,{path:"deposit",element:s.jsx(ZR,{})}),s.jsx(ue,{path:"deposit-details",element:s.jsx(eT,{})}),s.jsx(ue,{path:"deposit-history",element:s.jsx(tT,{})}),s.jsx(ue,{path:"deposit-pending",element:s.jsx(rT,{})}),s.jsx(ue,{path:"withdraw",element:s.jsx(ET,{})}),s.jsx(ue,{path:"withdraw-history",element:s.jsx(PT,{})}),s.jsx(ue,{path:"withdraw-pending",element:s.jsx(AT,{})}),s.jsx(ue,{path:"transactions",element:s.jsx(RT,{})}),s.jsx(ue,{path:"invest",element:s.jsx(DT,{})}),s.jsx(ue,{path:"investment-plans",element:s.jsx(IT,{})}),s.jsx(ue,{path:"investment-profile",element:s.jsx(OT,{})}),s.jsx(ue,{path:"invite-earn",element:s.jsx(LT,{})}),s.jsx(ue,{path:"team",element:s.jsx(RD,{})}),s.jsx(ue,{path:"commission",element:s.jsx(TD,{})}),s.jsx(ue,{path:"commission-history",element:s.jsx(DD,{})}),s.jsx(ue,{path:"notifications",element:s.jsx(ID,{})}),s.jsx(ue,{path:"game",element:s.jsx(OD,{})})]}),s.jsx(ue,{path:"*",element:s.jsx(LD,{})})]})]})})})})}Fb(document.getElementById("root")).render(s.jsx(OO,{}));
